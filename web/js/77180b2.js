;$(document).ready(function(){var e=$('.hamburger'),o=$('.overlay'),s=!1;e.click(function(){a()});function a(){if(s==!0){o.hide();e.removeClass('is-open');e.addClass('is-closed');s=!1}
else{o.show();e.removeClass('is-closed');e.addClass('is-open');s=!0}};$('[data-toggle="offcanvas"]').click(function(){$('#wrapper').toggleClass('toggled')})});
;$('.email-signup').hide();$('#signup-box-link').click(function(){$('.email-login').fadeOut(100);$('.email-signup').delay(100).fadeIn(100);$('#login-box-link').removeClass('active');$('#signup-box-link').addClass('active')});$('#login-box-link').click(function(){$('.email-login').delay(100).fadeIn(100);$('.email-signup').fadeOut(100);$('#login-box-link').addClass('active');$('#signup-box-link').removeClass('active')});
!function(){'use strict';function e(t,e){var i;for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t};function t(e){if(!this||this.find!==t.prototype.find)return new t(e);if(this.length=0,e)if('string'==typeof e&&(e=this.find(e)),e.nodeType||e===e.window)this.length=1,this[0]=e;else{var i=e.length;for(this.length=i;i;)i-=1,this[i]=e[i]}};t.extend=e,t.contains=function(t,e){do if(e=e.parentNode,e===t)return!0;while(e);return!1},t.parseJSON=function(t){return window.JSON&&JSON.parse(t)},e(t.prototype,{find:function(e){var i=this[0]||document;return'string'==typeof e&&(e=i.querySelectorAll?i.querySelectorAll(e):'#'===e.charAt(0)?i.getElementById(e.slice(1)):i.getElementsByTagName(e)),new t(e)},hasClass:function(t){return this[0]?new RegExp('(^|\\s+)'+t+'(\\s+|$)').test(this[0].className):!1},addClass:function(t){for(var e,i=this.length;i;){if(i-=1,e=this[i],!e.className)return e.className=t,this;if(this.hasClass(t))return this;e.className+=' '+t};return this},removeClass:function(t){for(var e,s=new RegExp('(^|\\s+)'+t+'(\\s+|$)'),i=this.length;i;)i-=1,e=this[i],e.className=e.className.replace(s,' ');return this},on:function(t,e){for(var s,i,n=t.split(/\s+/);n.length;)for(t=n.shift(),s=this.length;s;)s-=1,i=this[s],i.addEventListener?i.addEventListener(t,e,!1):i.attachEvent&&i.attachEvent('on'+t,e);return this},off:function(t,e){for(var s,i,n=t.split(/\s+/);n.length;)for(t=n.shift(),s=this.length;s;)s-=1,i=this[s],i.removeEventListener?i.removeEventListener(t,e,!1):i.detachEvent&&i.detachEvent('on'+t,e);return this},empty:function(){for(var t,e=this.length;e;)for(e-=1,t=this[e];t.hasChildNodes();)t.removeChild(t.lastChild);return this},first:function(){return new t(this[0])}}),'function'==typeof define&&define.amd?define(function(){return t}):(window.blueimp=window.blueimp||{},window.blueimp.helper=t)}(),function(t){'use strict';'function'==typeof define&&define.amd?define(['./blueimp-helper'],t):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=t(window.blueimp.helper||window.jQuery))}(function(t){'use strict';function e(t,i){return void 0===document.body.style.maxHeight?null:this&&this.options===e.prototype.options?t&&t.length?(this.list=t,this.num=t.length,this.initOptions(i),void this.initialize()):void this.console.log('blueimp Gallery: No or empty list provided as first argument.',t):new e(t,i)};return t.extend(e.prototype,{options:{container:'#blueimp-gallery',slidesContainer:'div',titleElement:'h3',displayClass:'blueimp-gallery-display',controlsClass:'blueimp-gallery-controls',singleClass:'blueimp-gallery-single',leftEdgeClass:'blueimp-gallery-left',rightEdgeClass:'blueimp-gallery-right',playingClass:'blueimp-gallery-playing',slideClass:'slide',slideLoadingClass:'slide-loading',slideErrorClass:'slide-error',slideContentClass:'slide-content',toggleClass:'toggle',prevClass:'prev',nextClass:'next',closeClass:'close',playPauseClass:'play-pause',typeProperty:'type',titleProperty:'title',urlProperty:'href',srcsetProperty:'urlset',displayTransition:!0,clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleControlsOnSlideClick:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},console:window.console&&'function'==typeof window.console.log?window.console:{log:function(){}},support:function(e){function o(){var t,n,s=i.transition;document.body.appendChild(e),s&&(t=s.name.slice(0,-9)+'ransform',void 0!==e.style[t]&&(e.style[t]='translateZ(0)',n=window.getComputedStyle(e).getPropertyValue(s.prefix+'transform'),i.transform={prefix:s.prefix,name:t,translate:!0,translateZ:!!n&&'none'!==n})),void 0!==e.style.backgroundSize&&(i.backgroundSize={},e.style.backgroundSize='contain',i.backgroundSize.contain='contain'===window.getComputedStyle(e).getPropertyValue('background-size'),e.style.backgroundSize='cover',i.backgroundSize.cover='cover'===window.getComputedStyle(e).getPropertyValue('background-size')),document.body.removeChild(e)};var s,i={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},n={webkitTransition:{end:'webkitTransitionEnd',prefix:'-webkit-'},MozTransition:{end:'transitionend',prefix:'-moz-'},OTransition:{end:'otransitionend',prefix:'-o-'},transition:{end:'transitionend',prefix:''}};for(s in n)if(n.hasOwnProperty(s)&&void 0!==e.style[s]){i.transition=n[s],i.transition.name=s;break};return document.body?o():t(document).on('DOMContentLoaded',o),i}(document.createElement('div')),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,initialize:function(){return this.initStartIndex(),this.initWidget()===!1?!1:(this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),void(this.options.startSlideshow&&this.play()))},slide:function(t,e){window.clearTimeout(this.timeout);var i,o,n,s=this.index;if(s!==t&&1!==this.num){if(e||(e=this.options.transitionSpeed),this.support.transform){for(this.options.continuous||(t=this.circle(t)),i=Math.abs(s-t)/(s-t),this.options.continuous&&(o=i,i=-this.positions[this.circle(t)]/this.slideWidth,i!==o&&(t=-i*this.num+t)),n=Math.abs(s-t)-1;n;)n-=1,this.move(this.circle((t>s?t:s)-n-1),this.slideWidth*i,0);t=this.circle(t),this.move(s,this.slideWidth*i,e),this.move(t,0,e),this.options.continuous&&this.move(this.circle(t-i),-(this.slideWidth*i),0)}
else t=this.circle(t),this.animate(s*-this.slideWidth,t*-this.slideWidth,e);this.onslide(t)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(t){var e=this;window.clearTimeout(this.timeout),this.interval=t||this.options.slideshowInterval,this.elements[this.index]>1&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(t,i){e.animationFrameId=e.requestAnimationFrame.call(window,function(){e.slide(t,i)})},[this.index+1,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.container.removeClass(this.options.playingClass)},add:function(t){var e;for(t.concat||(t=Array.prototype.slice.call(t)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(t),this.num=this.list.length,this.num>2&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),e=this.num-t.length;e<this.num;e+=1)this.addSlide(e),this.positionSlide(e);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.unloadAllSlides(),this.slides=[]},handleClose:function(){var t=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display='none',this.container.removeClass(t.displayClass).removeClass(t.singleClass).removeClass(t.leftEdgeClass).removeClass(t.rightEdgeClass),t.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){function e(i){i.target===t.container[0]&&(t.container.off(t.support.transition.end,e),t.handleClose())};var t=this;this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,e),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(t){return(this.num+t%this.num)%this.num},move:function(t,e,i){this.translateX(t,e,i),this.positions[t]=e},translate:function(t,e,i,s){var n=this.slides[t].style,r=this.support.transition,o=this.support.transform;n[r.name+'Duration']=s+'ms',n[o.name]='translate('+e+'px, '+i+'px)'+(o.translateZ?' translateZ(0)':'')},translateX:function(t,e,i){this.translate(t,e,0,i)},translateY:function(t,e,i){this.translate(t,0,e,i)},animate:function(t,e,i){if(!i)return void(this.slidesContainer[0].style.left=e+'px');var s=this,n=(new Date).getTime(),o=window.setInterval(function(){var r=(new Date).getTime()-n;return r>i?(s.slidesContainer[0].style.left=e+'px',s.ontransitionend(),void window.clearInterval(o)):void(s.slidesContainer[0].style.left=(e-t)*(Math.floor(r/i*100)/100)+t+'px')},4)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onmousedown:function(t){t.which&&1===t.which&&'VIDEO'!==t.target.nodeName&&(t.preventDefault(),(t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchstart(t))},onmousemove:function(t){this.touchStart&&((t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchmove(t))},onmouseup:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},onmouseout:function(e){if(this.touchStart){var s=e.target,i=e.relatedTarget;(!i||i!==s&&!t.contains(s,i))&&this.onmouseup(e)}},ontouchstart:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var e=(t.originalEvent||t).touches[0];this.touchStart={x:e.pageX,y:e.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var i,s,n=(t.originalEvent||t).touches[0],o=(t.originalEvent||t).scale,e=this.index;if(!(n.length>1||o&&1!==o))if(this.options.disableScroll&&t.preventDefault(),this.touchDelta={x:n.pageX-this.touchStart.x,y:n.pageY-this.touchStart.y},i=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(i)<Math.abs(this.touchDelta.y)),this.isScrolling)this.options.closeOnSwipeUpOrDown&&this.translateY(e,this.touchDelta.y+this.positions[e],0);else for(t.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?s=[this.circle(e+1),e,this.circle(e-1)]:(this.touchDelta.x=i/=!e&&i>0||e===this.num-1&&0>i?Math.abs(i)/this.slideWidth+1:1,s=[e],e&&s.push(e-1),e<this.num-1&&s.unshift(e+1));s.length;)e=s.pop(),this.translateX(e,i+this.positions[e],0)},ontouchend:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var n,o,l,r,a,e=this.index,i=this.options.transitionSpeed,s=this.slideWidth,h=Number(Date.now()-this.touchStart.time)<250,d=h&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>s/2,c=!e&&this.touchDelta.x>0||e===this.num-1&&this.touchDelta.x<0,u=!d&&this.options.closeOnSwipeUpOrDown&&(h&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(c=!1),n=this.touchDelta.x<0?-1:1,this.isScrolling?u?this.close():this.translateY(e,0,i):d&&!c?(o=e+n,l=e-n,r=s*n,a=-s*n,this.options.continuous?(this.move(this.circle(o),r,0),this.move(this.circle(e-2*n),a,0)):o>=0&&o<this.num&&this.move(o,r,0),this.move(e,this.positions[e]+r,i),this.move(this.circle(l),this.positions[this.circle(l)]+r,i),e=this.circle(l),this.onslide(e)):this.options.continuous?(this.move(this.circle(e-1),-s,i),this.move(e,0,i),this.move(this.circle(e+1),s,i)):(e&&this.move(e-1,-s,i),this.move(e,0,i),e<this.num-1&&this.move(e+1,s,i))},ontouchcancel:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},ontransitionend:function(t){var e=this.slides[this.index];t&&e!==t.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,e]))},oncomplete:function(e){var n,s=e.target||e.srcElement,i=s&&s.parentNode;s&&i&&(n=this.getNodeIndex(i),t(i).removeClass(this.options.slideLoadingClass),'error'===e.type?(t(i).addClass(this.options.slideErrorClass),this.elements[n]=3):this.elements[n]=2,s.clientHeight>this.container[0].clientHeight&&(s.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===i&&this.play(),this.setTimeout(this.options.onslidecomplete,[n,i]))},onload:function(t){this.oncomplete(t)},onerror:function(t){this.oncomplete(t)},onkeydown:function(t){switch(t.which||t.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(t),this.toggleControls());break;case 27:this.options.closeOnEscape&&(this.close(),t.stopImmediatePropagation());break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(t),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.next())}},handleClick:function(e){function s(e){return t(o).hasClass(e)||t(n).hasClass(e)};var i=this.options,o=e.target||e.srcElement,n=o.parentNode;s(i.toggleClass)?(this.preventDefault(e),this.toggleControls()):s(i.prevClass)?(this.preventDefault(e),this.prev()):s(i.nextClass)?(this.preventDefault(e),this.next()):s(i.closeClass)?(this.preventDefault(e),this.close()):s(i.playPauseClass)?(this.preventDefault(e),this.toggleSlideshow()):n===this.slidesContainer[0]?i.closeOnSlideClick?(this.preventDefault(e),this.close()):i.toggleControlsOnSlideClick&&(this.preventDefault(e),this.toggleControls()):n.parentNode&&n.parentNode===this.slidesContainer[0]&&i.toggleControlsOnSlideClick&&(this.preventDefault(e),this.toggleControls())},onclick:function(t){return this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)?void delete this.touchDelta:this.handleClick(t)},updateEdgeClasses:function(t){t?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),t===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(t){this.options.continuous||this.updateEdgeClasses(t),this.loadElements(t),this.options.unloadElements&&this.unloadElements(t),this.setTitle(t)},onslide:function(t){this.index=t,this.handleSlide(t),this.setTimeout(this.options.onslide,[t,this.slides[t]])},setTitle:function(t){var e=this.slides[t].firstChild.title,i=this.titleElement;i.length&&(this.titleElement.empty(),e&&i[0].appendChild(document.createTextNode(e)))},setTimeout:function(t,e,i){var s=this;return t&&window.setTimeout(function(){t.apply(s,e||[])},i||0)},imageFactory:function(e,i){function a(e){if(!h){if(e={type:e.type,target:s},!s.parentNode)return d.setTimeout(a,[e]);h=!0,t(o).off('load error',a),n&&'load'===e.type&&(s.style.background='url("'+r+'") center no-repeat',s.style.backgroundSize=n),i(e)}};var h,s,l,d=this,o=this.imagePrototype.cloneNode(!1),r=e,n=this.options.stretchImages;return'string'!=typeof r&&(r=this.getItemProperty(e,this.options.urlProperty),l=this.getItemProperty(e,this.options.titleProperty)),n===!0&&(n='contain'),n=this.support.backgroundSize&&this.support.backgroundSize[n]&&n,n?s=this.elementPrototype.cloneNode(!1):(s=o,o.draggable=!1),l&&(s.title=l),t(o).on('load error',a),o.src=r,s},createElement:function(e,i){var n=e&&this.getItemProperty(e,this.options.typeProperty),r=n&&this[n.split('/')[0]+'Factory']||this.imageFactory,s=e&&r.call(this,e,i),o=this.getItemProperty(e,this.options.srcsetProperty);return s||(s=this.elementPrototype.cloneNode(!1),this.setTimeout(i,[{type:'error',target:s}])),o&&s.setAttribute('srcset',o),t(s).addClass(this.options.slideContentClass),s},loadElement:function(e){this.elements[e]||(this.slides[e].firstChild?this.elements[e]=t(this.slides[e]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[e]=1,t(this.slides[e]).addClass(this.options.slideLoadingClass),this.slides[e].appendChild(this.createElement(this.list[e],this.proxyListener))))},loadElements:function(t){var e,s=Math.min(this.num,2*this.options.preloadRange+1),i=t;for(e=0;s>e;e+=1)i+=e*(e%2===0?-1:1),i=this.circle(i),this.loadElement(i)},unloadElements:function(t){var e,i;for(e in this.elements)this.elements.hasOwnProperty(e)&&(i=Math.abs(t-e),i>this.options.preloadRange&&i+this.options.preloadRange<this.num&&(this.unloadSlide(e),delete this.elements[e]))},addSlide:function(t){var e=this.slidePrototype.cloneNode(!1);e.setAttribute('data-index',t),this.slidesContainer[0].appendChild(e),this.slides.push(e)},positionSlide:function(t){var e=this.slides[t];e.style.width=this.slideWidth+'px',this.support.transform&&(e.style.left=t*-this.slideWidth+'px',this.move(t,this.index>t?-this.slideWidth:this.index<t?this.slideWidth:0,0))},initSlides:function(e){var s,i;for(e||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement('img'),this.elementPrototype=document.createElement('div'),this.slidePrototype=document.createElement('div'),t(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,s=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].offsetWidth,this.slideHeight=this.container[0].offsetHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+'px',s&&this.resetSlides(),i=0;i<this.num;i+=1)s&&this.addSlide(i),this.positionSlide(i);this.options.continuous&&this.support.transform&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transform||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+'px')},unloadSlide:function(t){var e,i;e=this.slides[t],i=e.firstChild,null!==i&&e.removeChild(i)},unloadAllSlides:function(){var t,e;for(t=0,e=this.slides.length;e>t;t++)this.unloadSlide(t)},toggleControls:function(){var t=this.options.controlsClass;this.container.hasClass(t)?this.container.removeClass(t):this.container.addClass(t)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(t){return parseInt(t.getAttribute('data-index'),10)},getNestedProperty:function(t,e){return e.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(e,i,s,n,o){var r=o||i||s||n&&parseInt(n,10);e&&t&&(t=t[r])}),t},getDataProperty:function(e,i){if(e.getAttribute){var s=e.getAttribute('data-'+i.replace(/([A-Z])/g,'-$1').toLowerCase());if('string'==typeof s){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(s))try{return t.parseJSON(s)}catch(n){};return s}}},getItemProperty:function(t,e){var i=t[e];return void 0===i&&(i=this.getDataProperty(t,e),void 0===i&&(i=this.getNestedProperty(t,e))),i},initStartIndex:function(){var t,e=this.options.index,i=this.options.urlProperty;if(e&&'number'!=typeof e)for(t=0;t<this.num;t+=1)if(this.list[t]===e||this.getItemProperty(this.list[t],i)===this.getItemProperty(e,i)){e=t;break};this.index=this.circle(parseInt(e,10)||0)},initEventListeners:function(){function e(t){var e=i.support.transition&&i.support.transition.end===t.type?'transitionend':t.type;i['on'+e](t)};var i=this,s=this.slidesContainer;t(window).on('resize',e),t(document.body).on('keydown',e),this.container.on('click',e),this.support.touch?s.on('touchstart touchmove touchend touchcancel',e):this.options.emulateTouchEvents&&this.support.transition&&s.on('mousedown mousemove mouseup mouseout',e),this.support.transition&&s.on(this.support.transition.end,e),this.proxyListener=e},destroyEventListeners:function(){var i=this.slidesContainer,e=this.proxyListener;t(window).off('resize',e),t(document.body).off('keydown',e),this.container.off('click',e),this.support.touch?i.off('touchstart touchmove touchend touchcancel',e):this.options.emulateTouchEvents&&this.support.transition&&i.off('mousedown mousemove mouseup mouseout',e),this.support.transition&&i.off(this.support.transition.end,e)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){function i(t){t.target===e.container[0]&&(e.container.off(e.support.transition.end,i),e.handleOpen())};var e=this;return this.container=t(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,i):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow='hidden'),this.container[0].style.display='block',this.initSlides(),void this.container.addClass(this.options.displayClass)):(this.console.log('blueimp Gallery: Slides container not found.',this.options.slidesContainer),!1)):(this.console.log('blueimp Gallery: Widget container not found.',this.options.container),!1)},initOptions:function(e){this.options=t.extend({},this.options),(e&&e.carousel||this.options.carousel&&(!e||e.carousel!==!1))&&t.extend(this.options,this.carouselOptions),t.extend(this.options,e),this.num<3&&(this.options.continuous=this.options.continuous?null:!1),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),e}),function(t){'use strict';'function'==typeof define&&define.amd?define(['./blueimp-helper','./blueimp-gallery'],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){'use strict';t.extend(e.prototype.options,{fullScreen:!1});var i=e.prototype.initialize,s=e.prototype.close;return t.extend(e.prototype,{getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullScreen:function(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},initialize:function(){i.call(this),this.options.fullScreen&&!this.getFullScreenElement()&&this.requestFullScreen(this.container[0])},close:function(){this.getFullScreenElement()===this.container[0]&&this.exitFullScreen(),s.call(this)}}),e}),function(t){'use strict';'function'==typeof define&&define.amd?define(['./blueimp-helper','./blueimp-gallery'],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){'use strict';t.extend(e.prototype.options,{indicatorContainer:'ol',activeIndicatorClass:'active',thumbnailProperty:'thumbnail',thumbnailIndicators:!0});var i=e.prototype.initSlides,s=e.prototype.addSlide,n=e.prototype.resetSlides,o=e.prototype.handleClick,r=e.prototype.handleSlide,l=e.prototype.handleClose;return t.extend(e.prototype,{createIndicator:function(e){var i,s,n=this.indicatorPrototype.cloneNode(!1),o=this.getItemProperty(e,this.options.titleProperty),r=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(r&&(i=this.getItemProperty(e,r)),void 0===i&&(s=e.getElementsByTagName&&t(e).find('img')[0],s&&(i=s.src)),i&&(n.style.backgroundImage='url("'+i+'")')),o&&(n.title=o),n},addIndicator:function(t){if(this.indicatorContainer.length){var e=this.createIndicator(this.list[t]);e.setAttribute('data-index',t),this.indicatorContainer[0].appendChild(e),this.indicators.push(e)}},setActiveIndicator:function(e){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=t(this.indicators[e]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(t){t||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement('li'),this.indicators=this.indicatorContainer[0].children)),i.call(this,t)},addSlide:function(t){s.call(this,t),this.addIndicator(t)},resetSlides:function(){n.call(this),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(t){var i=t.target||t.srcElement,e=i.parentNode;if(e===this.indicatorContainer[0])this.preventDefault(t),this.slide(this.getNodeIndex(i));else{if(e.parentNode!==this.indicatorContainer[0])return o.call(this,t);this.preventDefault(t),this.slide(this.getNodeIndex(e))}},handleSlide:function(t){r.call(this,t),this.setActiveIndicator(t)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),l.call(this)}}),e}),function(t){'use strict';'function'==typeof define&&define.amd?define(['./blueimp-helper','./blueimp-gallery'],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){'use strict';t.extend(e.prototype.options,{videoContentClass:'video-content',videoLoadingClass:'video-loading',videoPlayingClass:'video-playing',videoPosterProperty:'poster',videoSourcesProperty:'sources'});var i=e.prototype.handleSlide;return t.extend(e.prototype,{handleSlide:function(t){i.call(this,t),this.playingVideo&&this.playingVideo.pause()},videoFactory:function(e,i,n){var d,m,a,u,y,s=this,r=this.options,l=this.elementPrototype.cloneNode(!1),p=t(l),C=[{type:'error',target:l}],o=n||document.createElement('video'),h=this.getItemProperty(e,r.urlProperty),c=this.getItemProperty(e,r.typeProperty),f=this.getItemProperty(e,r.titleProperty),g=this.getItemProperty(e,r.videoPosterProperty),v=this.getItemProperty(e,r.videoSourcesProperty);if(p.addClass(r.videoContentClass),f&&(l.title=f),o.canPlayType)if(h&&c&&o.canPlayType(c))o.src=h;else for(;v&&v.length;)if(m=v.shift(),h=this.getItemProperty(m,r.urlProperty),c=this.getItemProperty(m,r.typeProperty),h&&c&&o.canPlayType(c)){o.src=h;break};return g&&(o.poster=g,d=this.imagePrototype.cloneNode(!1),t(d).addClass(r.toggleClass),d.src=g,d.draggable=!1,l.appendChild(d)),a=document.createElement('a'),a.setAttribute('target','_blank'),n||a.setAttribute('download',f),a.href=h,o.src&&(o.controls=!0,(n||t(o)).on('error',function(){s.setTimeout(i,C)}).on('pause',function(){o.seeking||(u=!1,p.removeClass(s.options.videoLoadingClass).removeClass(s.options.videoPlayingClass),y&&s.container.addClass(s.options.controlsClass),delete s.playingVideo,s.interval&&s.play())}).on('playing',function(){u=!1,p.removeClass(s.options.videoLoadingClass).addClass(s.options.videoPlayingClass),s.container.hasClass(s.options.controlsClass)?(y=!0,s.container.removeClass(s.options.controlsClass)):y=!1}).on('play',function(){window.clearTimeout(s.timeout),u=!0,p.addClass(s.options.videoLoadingClass),s.playingVideo=o}),t(a).on('click',function(t){s.preventDefault(t),u?o.pause():o.play()}),l.appendChild(n&&n.element||o)),l.appendChild(a),this.setTimeout(i,[{type:'load',target:l}]),l}}),e}),function(t){'use strict';'function'==typeof define&&define.amd?define(['./blueimp-helper','./blueimp-gallery-video'],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){'use strict';if(!window.postMessage)return e;t.extend(e.prototype.options,{vimeoVideoIdProperty:'vimeo',vimeoPlayerUrl:'//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID',vimeoPlayerIdPrefix:'vimeo-player-',vimeoClickToPlay:!0});var n=e.prototype.textFactory||e.prototype.imageFactory,i=function(t,e,i,s){this.url=t,this.videoId=e,this.playerId=i,this.clickToPlay=s,this.element=document.createElement('div'),this.listeners={}},s=0;return t.extend(i.prototype,{canPlayType:function(){return!0},on:function(t,e){return this.listeners[t]=e,this},loadAPI:function(){function l(){!n&&o.playOnReady&&o.play(),n=!0};for(var e,n,o=this,r='//f.vimeocdn.com/js/froogaloop2.min.js',i=document.getElementsByTagName('script'),s=i.length;s;)if(s-=1,i[s].src===r){e=i[s];break};e||(e=document.createElement('script'),e.src=r),t(e).on('load',l),i[0].parentNode.insertBefore(e,i[0]),/loaded|complete/.test(e.readyState)&&l()},onReady:function(){var t=this;this.ready=!0,this.player.addEvent('play',function(){t.hasPlayed=!0,t.onPlaying()}),this.player.addEvent('pause',function(){t.onPause()}),this.player.addEvent('finish',function(){t.onPause()}),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause(),delete this.playStatus},insertIframe:function(){var t=document.createElement('iframe');t.src=this.url.replace('VIDEO_ID',this.videoId).replace('PLAYER_ID',this.playerId),t.id=this.playerId,this.element.parentNode.replaceChild(t,this.element),this.element=t},play:function(){var t=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api('play'):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this.element),this.player.addEvent('ready',function(){t.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api('pause'):this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),t.extend(e.prototype,{VimeoPlayer:i,textFactory:function(t,e){var o=this.options,r=this.getItemProperty(t,o.vimeoVideoIdProperty);return r?(void 0===this.getItemProperty(t,o.urlProperty)&&(t[o.urlProperty]='//vimeo.com/'+r),s+=1,this.videoFactory(t,e,new i(o.vimeoPlayerUrl,r,o.vimeoPlayerIdPrefix+s,o.vimeoClickToPlay))):n.call(this,t,e)}}),e}),function(t){'use strict';'function'==typeof define&&define.amd?define(['./blueimp-helper','./blueimp-gallery-video'],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){'use strict';if(!window.postMessage)return e;t.extend(e.prototype.options,{youTubeVideoIdProperty:'youtube',youTubePlayerVars:{wmode:'transparent'},youTubeClickToPlay:!0});var s=e.prototype.textFactory||e.prototype.imageFactory,i=function(t,e,i){this.videoId=t,this.playerVars=e,this.clickToPlay=i,this.element=document.createElement('div'),this.listeners={}};return t.extend(i.prototype,{canPlayType:function(){return!0},on:function(t,e){return this.listeners[t]=e,this},loadAPI:function(){var e,s=this,n=window.onYouTubeIframeAPIReady,o='//www.youtube.com/iframe_api',t=document.getElementsByTagName('script'),i=t.length;for(window.onYouTubeIframeAPIReady=function(){n&&n.apply(this),s.playOnReady&&s.play()};i;)if(i-=1,t[i].src===o)return;e=document.createElement('script'),e.src=o,t[0].parentNode.insertBefore(e,t[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){e.prototype.setTimeout.call(this,this.checkSeek,null,2e3)},checkSeek:function(){(this.stateChange===YT.PlayerState.PAUSED||this.stateChange===YT.PlayerState.ENDED)&&(this.listeners.pause(),delete this.playStatus)},onStateChange:function(t){switch(t.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()};this.stateChange=t.data},onError:function(t){this.listeners.error(t)},play:function(){var t=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){t.onReady()},onStateChange:function(e){t.onStateChange(e)},onError:function(e){t.onError(e)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),t.extend(e.prototype,{YouTubePlayer:i,textFactory:function(t,e){var n=this.options,o=this.getItemProperty(t,n.youTubeVideoIdProperty);return o?(void 0===this.getItemProperty(t,n.urlProperty)&&(t[n.urlProperty]='//www.youtube.com/watch?v='+o),void 0===this.getItemProperty(t,n.videoPosterProperty)&&(t[n.videoPosterProperty]='//img.youtube.com/vi/'+o+'/maxresdefault.jpg'),this.videoFactory(t,e,new i(o,n.youTubePlayerVars,n.youTubeClickToPlay))):s.call(this,t,e)}}),e});
;﻿(function(){if(window.CKEDITOR&&window.CKEDITOR.dom)return;window.CKEDITOR||(window.CKEDITOR=function(){var t=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,e={timestamp:'G87E',version:'4.5.11',revision:'3876e73',rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:t},status:'unloaded',basePath:function(){var e=window.CKEDITOR_BASEPATH||'';if(!e)for(var o=document.getElementsByTagName('script'),n=0;n<o.length;n++){var i=o[n].src.match(t);if(i){e=i[1];break}};-1==e.indexOf(':/')&&'//'!=e.slice(0,2)&&(e=0===e.indexOf('/')?location.href.match(/^.*?:\/\/[^\/]*/)[0]+e:location.href.match(/^[^\?]*\/(?:)/)[0]+e);if(!e)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return e}(),getUrl:function(e){-1==e.indexOf(':/')&&0!==e.indexOf('/')&&(e=this.basePath+e);this.timestamp&&'/'!=e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(0<=e.indexOf('?')?'\x26':'?')+'t\x3d'+this.timestamp);return e},domReady:function(){function e(){try{document.addEventListener?(document.removeEventListener('DOMContentLoaded',e,!1),n()):document.attachEvent&&'complete'===document.readyState&&(document.detachEvent('onreadystatechange',e),n())}catch(t){}};function n(){for(var e;e=t.shift();)e()};var t=[];return function(n){function o(){try{document.documentElement.doScroll('left')}catch(t){setTimeout(o,1);return};e()};t.push(n);'complete'===document.readyState&&setTimeout(e,1);if(1==t.length)if(document.addEventListener)document.addEventListener('DOMContentLoaded',e,!1),window.addEventListener('load',e,!1);else if(document.attachEvent){document.attachEvent('onreadystatechange',e);window.attachEvent('onload',e);n=!1;try{n=!window.frameElement}catch(i){};document.documentElement.doScroll&&n&&o()}}}()},n=window.CKEDITOR_GETURL;if(n){var i=e.getUrl;e.getUrl=function(t){return n.call(e,t)||i.call(e,t)}};return e}());CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var n=CKEDITOR.event.prototype,t;for(t in n)null==e[t]&&(e[t]=n[t])},CKEDITOR.event.prototype=function(){function n(n){var i=e(this);return i[n]||(i[n]=new t(n))};var e=function(e){e=e.getPrivate&&e.getPrivate()||e._||(e._={});return e.events||(e.events={})},t=function(e){this.name=e;this.listeners=[]};t.prototype={getListenerIndex:function(e){for(var t=0,n=this.listeners;t<n.length;t++)if(n[t].fn==e)return t;return-1}};return{define:function(e,t){var i=n.call(this,e);CKEDITOR.tools.extend(i,t,!0)},on:function(e,t,i,o,a){function l(n,a,r,s){n={name:e,sender:this,editor:n,data:a,listenerData:o,stop:r,cancel:s,removeListener:c};return!1===t.call(i,n)?!1:n.data};function c(){d.removeListener(e,t)};var r=n.call(this,e);if(0>r.getListenerIndex(t)){r=r.listeners;i||(i=this);isNaN(a)&&(a=10);var d=this;l.fn=t;l.priority=a;for(var s=r.length-1;0<=s;s--)if(r[s].priority<=a)return r.splice(s+1,0,l),{removeListener:c};r.unshift(l)};return{removeListener:c}},once:function(){var e=Array.prototype.slice.call(arguments),t=e[1];e[1]=function(e){e.removeListener();return t.apply(this,arguments)};return this.on.apply(this,e)},capture:function(){CKEDITOR.event.useCapture=1;var e=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return e},fire:function(){var n=0,i=function(){n=1},t=0,o=function(){t=1};return function(a,r,s){var h=e(this)[a];a=n;var f=t;n=t=0;if(h){var c=h.listeners;if(c.length)for(var c=c.slice(0),d,u=0;u<c.length;u++){if(h.errorProof)try{d=c[u].call(this,s,r,i,o)}catch(l){}
else d=c[u].call(this,s,r,i,o);!1===d?t=1:'undefined'!=typeof d&&(r=d);if(n||t)break}};r=t?!1:'undefined'==typeof r?!0:r;n=a;t=f;return r}}(),fireOnce:function(t,n,i){n=this.fire(t,n,i);delete e(this)[t];return n},removeListener:function(t,n){var i=e(this)[t];if(i){var o=i.getListenerIndex(n);0<=o&&i.listeners.splice(o,1)}},removeAllListeners:function(){var t=e(this),n;for(n in t)delete t[n]},hasListeners:function(t){return(t=e(this)[t])&&0<t.listeners.length}}}());CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,t){e in{instanceReady:1,loaded:1}&&(this[e]=!0);return CKEDITOR.event.prototype.fire.call(this,e,t,this)},CKEDITOR.editor.prototype.fireOnce=function(e,t){e in{instanceReady:1,loaded:1}&&(this[e]=!0);return CKEDITOR.event.prototype.fireOnce.call(this,e,t,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype));CKEDITOR.env||(CKEDITOR.env=function(){var n=navigator.userAgent.toLowerCase(),i=n.match(/edge[ \/](\d+.?\d*)/),e=-1<n.indexOf('trident/'),e=!(!i&&!e),e={ie:e,edge:!!i,webkit:!e&&-1<n.indexOf(' applewebkit/'),air:-1<n.indexOf(' adobeair/'),mac:-1<n.indexOf('macintosh'),quirks:'BackCompat'==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<n.indexOf('mobile'),iOS:/(ipad|iphone|ipod)/.test(n),isCustomDomain:function(){if(!this.ie)return!1;var e=document.domain,t=window.location.hostname;return e!=t&&e!='['+t+']'},secure:'https:'==location.protocol};e.gecko='Gecko'==navigator.product&&!e.webkit&&!e.ie;e.webkit&&(-1<n.indexOf('chrome')?e.chrome=!0:e.safari=!0);var t=0;e.ie&&(t=i?parseFloat(i[1]):e.quirks||!document.documentMode?parseFloat(n.match(/msie (\d+)/)[1]):document.documentMode,e.ie9Compat=9==t,e.ie8Compat=8==t,e.ie7Compat=7==t,e.ie6Compat=7>t||e.quirks);e.gecko&&(i=n.match(/rv:([\d\.]+)/))&&(i=i[1].split('.'),t=1E4*i[0]+100*(i[1]||0)+1*(i[2]||0));e.air&&(t=parseFloat(n.match(/ adobeair\/(\d+)/)[1]));e.webkit&&(t=parseFloat(n.match(/ applewebkit\/(\d+)/)[1]));e.version=t;e.isCompatible=!(e.ie&&7>t)&&!(e.gecko&&4E4>t)&&!(e.webkit&&534>t);e.hidpi=2<=window.devicePixelRatio;e.needsBrFiller=e.gecko||e.webkit||e.ie&&10<t;e.needsNbspFiller=e.ie&&11>t;e.cssClass='cke_browser_'+(e.ie?'ie':e.gecko?'gecko':e.webkit?'webkit':'unknown');e.quirks&&(e.cssClass+=' cke_browser_quirks');e.ie&&(e.cssClass+=' cke_browser_ie'+(e.quirks?'6 cke_browser_iequirks':e.version));e.air&&(e.cssClass+=' cke_browser_air');e.iOS&&(e.cssClass+=' cke_browser_ios');e.hidpi&&(e.cssClass+=' cke_hidpi');return e}());'unloaded'==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if('basic_ready'!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement('script');e.type='text/javascript';e.src=CKEDITOR.basePath+'ckeditor.js';document.getElementsByTagName('head')[0].appendChild(e)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)};(function(){CKEDITOR.domReady(function(){var e=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status='basic_ready',e&&e._load?e():t&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1E3*t))})})();CKEDITOR.status='basic_loaded'}();'use strict';CKEDITOR.VERBOSITY_WARN=1;CKEDITOR.VERBOSITY_ERROR=2;CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR;CKEDITOR.warn=function(e,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire('log',{type:'warn',errorCode:e,additionalData:t})};CKEDITOR.error=function(e,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire('log',{type:'error',errorCode:e,additionalData:t})};CKEDITOR.on('log',function(e){if(window.console&&window.console.log){var t=console[e.data.type]?e.data.type:'log',n=e.data.errorCode;if(e=e.data.additionalData)console[t]('[CKEDITOR] Error code: '+n+'.',e);else console[t]('[CKEDITOR] Error code: '+n+'.');console[t]('[CKEDITOR] For more information about this error go to http://docs.ckeditor.com/#!/guide/dev_errors-section-'+n)}},null,null,999);CKEDITOR.dom={};(function(){var e=[],t=CKEDITOR.env.gecko?'-moz-':CKEDITOR.env.webkit?'-webkit-':CKEDITOR.env.ie?'-ms-':'',n=/&/g,i=/>/g,o=/</g,a=/"/g,r=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,s={lt:'\x3c',gt:'\x3e',amp:'\x26',quot:'"',nbsp:' ',shy:'­'},l=function(e,t){return'#'==t[0]?String.fromCharCode(parseInt(t.slice(1),10)):s[t]};CKEDITOR.on('reset',function(){e=[]});CKEDITOR.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0},getIndex:function(e,t){for(var n=0;n<e.length;++n)if(t(e[n]))return n;return-1},clone:function(e){var n;if(e&&e instanceof Array){n=[];for(var t=0;t<e.length;t++)n[t]=CKEDITOR.tools.clone(e[t]);return n};if(null===e||'object'!=typeof e||e instanceof String||e instanceof Number||e instanceof Boolean||e instanceof Date||e instanceof RegExp||e.nodeType||e.window===e)return e;n=new e.constructor;for(t in e)n[t]=CKEDITOR.tools.clone(e[t]);return n},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},extend:function(e){var t=arguments.length,o,a;'boolean'==typeof(o=arguments[t-1])?t--:'boolean'==typeof(o=arguments[t-2])&&(a=arguments[t-1],t-=2);for(var i=1;i<t;i++){var r=arguments[i],n;for(n in r)if(!0===o||null==e[n])if(!a||n in a)e[n]=r[n]};return e},prototypedCopy:function(e){var t=function(){};t.prototype=e;return new t},copy:function(e){var n={},t;for(t in e)n[t]=e[t];return n},isArray:function(e){return'[object Array]'==Object.prototype.toString.call(e)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},cssVendorPrefix:function(e,n,i){if(i)return t+e+':'+n+';'+e+':'+n;i={};i[e]=n;i[t+e]=n;return i},cssStyleToDomStyle:function(){var e=document.createElement('div').style,t='undefined'!=typeof e.cssFloat?'cssFloat':'undefined'!=typeof e.styleFloat?'styleFloat':'float';return function(e){return'float'==e?t:e.replace(/-./g,function(e){return e.substr(1).toUpperCase()})}}(),buildStyleHtml:function(e){e=[].concat(e);for(var t,n=[],i=0;i<e.length;i++)if(t=e[i])/@import|[{}]/.test(t)?n.push('\x3cstyle\x3e'+t+'\x3c/style\x3e'):n.push('\x3clink type\x3d"text/css" rel\x3dstylesheet href\x3d"'+t+'"\x3e');return n.join('')},htmlEncode:function(e){return void 0===e||null===e?'':String(e).replace(n,'\x26amp;').replace(i,'\x26gt;').replace(o,'\x26lt;')},htmlDecode:function(e){return e.replace(r,l)},htmlEncodeAttr:function(e){return CKEDITOR.tools.htmlEncode(e).replace(a,'\x26quot;')},htmlDecodeAttr:function(e){return CKEDITOR.tools.htmlDecode(e)},transformPlainTextToHtml:function(e,t){var s=t==CKEDITOR.ENTER_BR,n=this.htmlEncode(e.replace(/\r\n/g,'\n')),n=n.replace(/\t/g,'\x26nbsp;\x26nbsp; \x26nbsp;'),i=t==CKEDITOR.ENTER_P?'p':'div';if(!s){var r=/\n{2}/g;if(r.test(n))var o='\x3c'+i+'\x3e',a='\x3c/'+i+'\x3e',n=o+n.replace(r,function(){return a+o})+a};n=n.replace(/\n/g,'\x3cbr\x3e');s||(n=n.replace(new RegExp('\x3cbr\x3e(?\x3d\x3c/'+i+'\x3e)'),function(e){return CKEDITOR.tools.repeat(e,2)}));n=n.replace(/^ | $/g,'\x26nbsp;');return n=n.replace(/(>|\s) /g,function(e,t){return t+'\x26nbsp;'}).replace(/ (?=<)/g,'\x26nbsp;')},getNextNumber:function(){var e=0;return function(){return++e}}(),getNextId:function(){return'cke_'+this.getNextNumber()},getUniqueId:function(){for(var e='e',t=0;8>t;t++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e},override:function(e,t){var n=t(e);n.prototype=e.prototype;return n},setTimeout:function(e,t,n,i,o){o||(o=window);n||(n=o);return o.setTimeout(function(){i?e.apply(n,[].concat(i)):e.apply(n)},t||0)},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(e,'')}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(t){return t.replace(e,'')}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(t){return t.replace(e,'')}}(),indexOf:function(e,t){if('function'==typeof t)for(var n=0,i=e.length;n<i;n++){if(t(e[n]))return n}
else{if(e.indexOf)return e.indexOf(t);n=0;for(i=e.length;n<i;n++)if(e[n]===t)return n};return-1},search:function(e,t){var n=CKEDITOR.tools.indexOf(e,t);return 0<=n?e[n]:null},bind:function(e,t){return function(){return e.apply(t,arguments)}},createClass:function(e){var t=e.$,n=e.base,i=e.privates||e._,o=e.proto;e=e.statics;!t&&(t=function(){n&&this.base.apply(this,arguments)});if(i)var a=t,t=function(){var n=this._||(this._={}),t;for(t in i){var e=i[t];n[t]='function'==typeof e?CKEDITOR.tools.bind(e,this):e};a.apply(this,arguments)};n&&(t.prototype=this.prototypedCopy(n.prototype),t.prototype.constructor=t,t.base=n,t.baseProto=n.prototype,t.prototype.base=function(){this.base=n.prototype.base;n.apply(this,arguments);this.base=arguments.callee});o&&this.extend(t.prototype,o,!0);e&&this.extend(t,e,!0);return t},addFunction:function(t,n){return e.push(function(){return t.apply(n||this,arguments)})-1},removeFunction:function(t){e[t]=null},callFunction:function(t){var n=e[t];return n&&n.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var t=/^-?\d+\.?\d*px$/,e;return function(n){e=CKEDITOR.tools.trim(n+'')+'px';return t.test(e)?e:n||''}}(),convertToPx:function(){var e;return function(t){e||(e=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"\x3e\x3c/div\x3e',CKEDITOR.document),CKEDITOR.document.getBody().append(e));return/%$/.test(t)?t:(e.setStyle('width',t),e.$.clientWidth)}}(),repeat:function(e,t){return Array(t+1).join(e)},tryThese:function(){for(var n,t=0,o=arguments.length;t<o;t++){var i=arguments[t];try{n=i();break}catch(e){}};return n},genKey:function(){return Array.prototype.slice.call(arguments).join('-')},defer:function(e){return function(){var t=arguments,n=this;window.setTimeout(function(){e.apply(n,t)},0)}},normalizeCssText:function(e,t){var n=[],i,o=CKEDITOR.tools.parseCssText(e,!0,t);for(i in o)n.push(i+':'+o[i]);n.sort();return n.length?n.join(';')+';':''},convertRgbToHex:function(e){return e.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(e,t,n,i){e=[t,n,i];for(t=0;3>t;t++)e[t]=('0'+parseInt(e[t],10).toString(16)).slice(-2);return'#'+e.join('')})},normalizeHex:function(e){return e.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(e,t,n,i){e=t.toLowerCase();3==e.length&&(e=e.split(''),e=[e[0],e[0],e[1],e[1],e[2],e[2]].join(''));return'#'+e+i})},parseCssText:function(e,t,n){var i={};n&&(e=(new CKEDITOR.dom.element('span')).setAttribute('style',e).getAttribute('style')||'');e&&(e=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(e)));if(!e||';'==e)return i;e.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,n,o){t&&(n=n.toLowerCase(),'font-family'==n&&(o=o.replace(/\s*,\s*/g,',')),o=CKEDITOR.tools.trim(o));i[n]=o});return i},writeCssText:function(e,t){var n,i=[];for(n in e)i.push(n+':'+e[n]);t&&i.sort();return i.join('; ')},objectCompare:function(e,t,n){var i;if(!e&&!t)return!0;if(!e||!t)return!1;for(i in e)if(e[i]!=t[i])return!1;if(!n)for(i in t)if(e[i]!=t[i])return!1;return!0},objectKeys:function(e){var t=[],n;for(n in e)t.push(n);return t},convertArrayToObject:function(e,t){var i={};1==arguments.length&&(t=!0);for(var n=0,o=e.length;n<o;++n)i[e[n]]=t;return i},fixDomain:function(){for(var t;;)try{t=window.parent.document.domain;break}catch(e){t=t?t.replace(/.+?(?:\.|$)/,''):document.domain;if(!t)break;document.domain=t};return!!t},eventsBuffer:function(e,t,n){function a(){o=(new Date).getTime();i=!1;n?t.call(n):t()};var i,o=0;return{input:function(){if(!i){var t=(new Date).getTime()-o;t<e?i=setTimeout(a,e-t):a()}},reset:function(){i&&clearTimeout(i);i=o=0}}},enableHtml5Elements:function(e,t){for(var n='abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video'.split(' '),i=n.length,o;i--;)o=e.createElement(n[i]),t&&e.appendChild(o)},checkIfAnyArrayItemMatches:function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n].match(t))return!0;return!1},checkIfAnyObjectPropertyMatches:function(e,t){for(var n in e)if(n.match(t))return!0;return!1},transparentImageData:'data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw\x3d\x3d',getCookie:function(e){e=e.toLowerCase();for(var i=document.cookie.split(';'),t,o,n=0;n<i.length;n++)if(t=i[n].split('\x3d'),o=decodeURIComponent(CKEDITOR.tools.trim(t[0]).toLowerCase()),o===e)return decodeURIComponent(1<t.length?t[1]:'');return null},setCookie:function(e,t){document.cookie=encodeURIComponent(e)+'\x3d'+encodeURIComponent(t)+';path\x3d/'},getCsrfToken:function(){var e=CKEDITOR.tools.getCookie('ckCsrfToken');if(!e||40!=e.length){var e=[],n='';if(window.crypto&&window.crypto.getRandomValues)e=new Uint8Array(40),window.crypto.getRandomValues(e);else for(var t=0;40>t;t++)e.push(Math.floor(256*Math.random()));for(t=0;t<e.length;t++)var i='abcdefghijklmnopqrstuvwxyz0123456789'.charAt(e[t]%36),n=n+(.5<Math.random()?i.toUpperCase():i);e=n;CKEDITOR.tools.setCookie('ckCsrfToken',e)};return e},escapeCss:function(e){return e?window.CSS&&CSS.escape?CSS.escape(e):isNaN(parseInt(e.charAt(0),10))?e:'\\3'+e.charAt(0)+' '+e.substring(1,e.length):''}}})();CKEDITOR.dtd=function(){var n=CKEDITOR.tools.extend,o=function(e,t){for(var i=CKEDITOR.tools.clone(e),n=1;n<arguments.length;n++){t=arguments[n];for(var o in t)delete i[o]};return i},e={},t={},r={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},s={command:1,link:1,meta:1,noscript:1,script:1,style:1},i={},a={'#':1},l={center:1,dir:1,noframes:1};n(e,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,'var':1,video:1,wbr:1},a,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});n(t,r,e,l);o={a:o(e,{a:1,button:1}),abbr:e,address:t,area:i,article:t,aside:t,audio:n({source:1,track:1},t),b:e,base:i,bdi:e,bdo:e,blockquote:t,body:t,br:i,button:o(e,{a:1,button:1}),canvas:e,caption:t,cite:e,code:e,col:i,colgroup:{col:1},command:i,datalist:n({option:1},e),dd:t,del:e,details:n({summary:1},t),dfn:e,div:t,dl:{dt:1,dd:1},dt:t,em:e,embed:i,fieldset:n({legend:1},t),figcaption:t,figure:n({figcaption:1},t),footer:t,form:t,h1:e,h2:e,h3:e,h4:e,h5:e,h6:e,head:n({title:1,base:1},s),header:t,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:i,html:n({head:1,body:1},t,s),i:e,iframe:a,img:i,input:i,ins:e,kbd:e,keygen:i,label:e,legend:e,li:t,link:i,main:t,map:t,mark:e,menu:n({li:1},t),meta:i,meter:o(e,{meter:1}),nav:t,noscript:n({link:1,meta:1,style:1},e),object:n({param:1},e),ol:{li:1},optgroup:{option:1},option:a,output:e,p:e,param:i,pre:e,progress:o(e,{progress:1}),q:e,rp:e,rt:e,ruby:n({rp:1,rt:1},e),s:e,samp:e,script:a,section:t,select:{optgroup:1,option:1},small:e,source:i,span:e,strong:e,style:a,sub:e,summary:n({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},e),sup:e,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:t,textarea:a,tfoot:{tr:1},th:t,thead:{tr:1},time:o(e,{time:1}),title:a,tr:{th:1,td:1},track:i,u:e,ul:{li:1},'var':e,video:n({source:1,track:1},t),wbr:i,acronym:e,applet:n({param:1},t),basefont:i,big:e,center:t,dialog:i,dir:{li:1},font:e,isindex:i,noframes:t,strike:e,tt:e};n(o,{$block:n({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},r,l),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:e,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:n({body:1,head:1,html:1},o.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,'var':1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return o}();CKEDITOR.dom.event=function(e){this.$=e};CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();if(this.$.ctrlKey||this.$.metaKey)e+=CKEDITOR.CTRL;this.$.shiftKey&&(e+=CKEDITOR.SHIFT);this.$.altKey&&(e+=CKEDITOR.ALT);return e},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1;e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}};CKEDITOR.CTRL=1114112;CKEDITOR.SHIFT=2228224;CKEDITOR.ALT=4456448;CKEDITOR.EVENT_PHASE_CAPTURING=1;CKEDITOR.EVENT_PHASE_AT_TARGET=2;CKEDITOR.EVENT_PHASE_BUBBLING=3;CKEDITOR.dom.domObject=function(e){e&&(this.$=e)};CKEDITOR.dom.domObject.prototype=function(){var e=function(e,t){return function(n){'undefined'!=typeof CKEDITOR&&e.fire(t,new CKEDITOR.dom.event(n))}};return{getPrivate:function(){var e;(e=this.getCustomData('_'))||this.setCustomData('_',e={});return e},on:function(t){var n=this.getCustomData('_cke_nativeListeners');n||(n={},this.setCustomData('_cke_nativeListeners',n));n[t]||(n=n[t]=e(this,t),this.$.addEventListener?this.$.addEventListener(t,n,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent('on'+t,n));return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(e){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(e)){var t=this.getCustomData('_cke_nativeListeners'),n=t&&t[e];n&&(this.$.removeEventListener?this.$.removeEventListener(e,n,!1):this.$.detachEvent&&this.$.detachEvent('on'+e,n),delete t[e])}},removeAllListeners:function(){var t=this.getCustomData('_cke_nativeListeners'),e;for(e in t){var n=t[e];this.$.detachEvent?this.$.detachEvent('on'+e,n):this.$.removeEventListener&&this.$.removeEventListener(e,n,!1);delete t[e]};CKEDITOR.event.prototype.removeAllListeners.call(this)}}}();(function(e){var t={};CKEDITOR.on('reset',function(){t={}});e.equals=function(e){try{return e&&e.$===this.$}catch(t){return!1}};e.setCustomData=function(e,n){var i=this.getUniqueId();(t[i]||(t[i]={}))[e]=n;return this};e.getCustomData=function(e){var n=this.$['data-cke-expando'];return(n=n&&t[n])&&e in n?n[e]:null};e.removeCustomData=function(e){var n=this.$['data-cke-expando'],n=n&&t[n],i,o;n&&(i=n[e],o=e in n,delete n[e]);return o?i:null};e.clearCustomData=function(){this.removeAllListeners();var e=this.$['data-cke-expando'];e&&delete t[e]};e.getUniqueId=function(){return this.$['data-cke-expando']||(this.$['data-cke-expando']=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(e)})(CKEDITOR.dom.domObject.prototype);CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?'document':e.nodeType==CKEDITOR.NODE_ELEMENT?'element':e.nodeType==CKEDITOR.NODE_TEXT?'text':e.nodeType==CKEDITOR.NODE_COMMENT?'comment':e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?'documentFragment':'domObject'](e):this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,t){e.append(this,t);return e},clone:function(e,t){function i(n){n['data-cke-expando']&&(n['data-cke-expando']=!1);if(n.nodeType==CKEDITOR.NODE_ELEMENT||n.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)if(t||n.nodeType!=CKEDITOR.NODE_ELEMENT||n.removeAttribute('id',!1),e){n=n.childNodes;for(var o=0;o<n.length;o++)i(n[o])}};function o(t){if(t.type==CKEDITOR.NODE_ELEMENT||t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(t.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n=t.getName();':'==n[0]&&t.renameNode(n.substring(1))};if(e)for(n=0;n<t.getChildCount();n++)o(t.getChild(n))}};var n=this.$.cloneNode(e);i(n);n=new CKEDITOR.dom.node(n);CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&o(n);return n},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){e.$.parentNode.insertBefore(this.$,e.$.nextSibling);return e},insertBefore:function(e){e.$.parentNode.insertBefore(this.$,e.$);return e},insertBeforeMe:function(e){this.$.parentNode.insertBefore(e.$,this.$);return e},getAddress:function(e){for(var i=[],o=this.getDocument().$.documentElement,t=this.$;t&&t!=o;){var n=t.parentNode;n&&i.unshift(this.getIndex.call({$:t},e));t=n};return i},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){function n(e,t){var o=t?e.nextSibling:e.previousSibling;return o&&o.nodeType==CKEDITOR.NODE_TEXT?i(o)?n(o,t):o:null};function i(e){return!e.nodeValue||e.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE};var t=this.$,o=-1,a;if(!this.$.parentNode||e&&t.nodeType==CKEDITOR.NODE_TEXT&&i(t)&&!n(t)&&!n(t,!0))return-1;do e&&t!=this.$&&t.nodeType==CKEDITOR.NODE_TEXT&&(a||i(t))||(o++,a=t.nodeType==CKEDITOR.NODE_TEXT);while(t=t.previousSibling);return o},getNextSourceNode:function(e,t,n){if(n&&!n.call){var o=n;n=function(e){return!e.equals(o)}};e=!e&&this.getFirst&&this.getFirst();var i;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;e=this.getNext()};for(;!e&&(i=(i||this).getParent());){if(n&&!1===n(i,!0))return null;e=i.getNext()};return!e||n&&!1===n(e)?null:t&&t!=e.type?e.getNextSourceNode(!1,t,n):e},getPreviousSourceNode:function(e,t,n){if(n&&!n.call){var o=n;n=function(e){return!e.equals(o)}};e=!e&&this.getLast&&this.getLast();var i;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;e=this.getPrevious()};for(;!e&&(i=(i||this).getParent());){if(n&&!1===n(i,!0))return null;e=i.getPrevious()};return!e||n&&!1===n(e)?null:t&&e.type!=t?e.getPreviousSourceNode(!1,t,n):e},getPrevious:function(e){var t=this.$,n;do n=(t=t.previousSibling)&&10!=t.nodeType&&new CKEDITOR.dom.node(t);while(n&&e&&!e(n));return n},getNext:function(e){var n=this.$,t;do t=(n=n.nextSibling)&&new CKEDITOR.dom.node(n);while(t&&e&&!e(t));return t},getParent:function(e){var t=this.$.parentNode;return t&&(t.nodeType==CKEDITOR.NODE_ELEMENT||e&&t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(t):null},getParents:function(e){var t=this,n=[];do n[e?'push':'unshift'](t);while(t=t.getParent());return n},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var t=this.contains?this:this.getParent();do if(t.contains(e))return t;while(t=t.getParent());return null},getPosition:function(e){var t=this.$,n=e.$;if(t.compareDocumentPosition)return t.compareDocumentPosition(n);if(t==n)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(n))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(n.contains(t))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING};if('sourceIndex'in t)return 0>t.sourceIndex||0>n.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<n.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING};t=this.getAddress();e=e.getAddress();for(var n=Math.min(t.length,e.length),i=0;i<n;i++)if(t[i]!=e[i])return t[i]<e[i]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return t.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var i=this.$,o,a;t||(i=i.parentNode);'function'==typeof e?(a=!0,o=e):(a=!1,o=function(t){t='string'==typeof t.nodeName?t.nodeName.toLowerCase():'';return'string'==typeof e?t==e:t in e});for(;i;){if(o(a?new CKEDITOR.dom.node(i):i))return new CKEDITOR.dom.node(i);try{i=i.parentNode}catch(n){i=null}};return null},hasAscendant:function(e,t){var n=this.$;t||(n=n.parentNode);for(;n;){if(n.nodeName&&n.nodeName.toLowerCase()==e)return!0;n=n.parentNode};return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,n=t.parentNode;if(n){if(e)for(;e=t.firstChild;)n.insertBefore(t.removeChild(e),t);n.removeChild(t)};return this},replace:function(e){this.insertBefore(e);e.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.ltrim(e.getText()),n=e.getLength();if(t)t.length<n&&(e.split(n-t.length),this.$.removeChild(this.$.firstChild));else{e.remove();continue}};break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.rtrim(e.getText()),n=e.getLength();if(t)t.length<n&&(e.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild));else{e.remove();continue}};break};CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&1==e.type&&'br'==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)},isReadOnly:function(e){var t=this;this.type!=CKEDITOR.NODE_ELEMENT&&(t=this.getParent());CKEDITOR.env.edge&&t&&t.is('textarea','input')&&(e=!0);if(!e&&t&&'undefined'!=typeof t.$.isContentEditable)return!(t.$.isContentEditable||t.data('cke-editable'));for(;t;){if(t.data('cke-editable'))return!1;if(t.hasAttribute('contenteditable'))return'false'==t.getAttribute('contenteditable');t=t.getParent()};return!0}});CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,t='CSS1Compat'==e.compatMode;return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;if('pageXOffset'in e)return{x:e.pageXOffset||0,y:e.pageYOffset||0};e=e.document;return{x:e.documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0}},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}});CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new CKEDITOR.dom.element('link');t.setAttributes({rel:'stylesheet',type:'text/css',href:e});this.getHead().append(t)}},appendStyleText:function(e){if(this.$.createStyleSheet){var n=this.$.createStyleSheet('');n.cssText=e}
else{var t=new CKEDITOR.dom.element('style',this);t.append(new CKEDITOR.dom.text(e,this));this.getHead().append(t)};return n||t.$.sheet},createElement:function(e,t){var n=new CKEDITOR.dom.element(e,this);t&&(t.attributes&&n.setAttributes(t.attributes),t.styles&&n.setStyles(t.styles));return n},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){var t;try{t=this.$.activeElement}catch(e){return null};return new CKEDITOR.dom.element(t)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,t){for(var n=this.$.documentElement,a=0;n&&a<e.length;a++){var s=e[a];if(t)for(var r=-1,o=0;o<n.childNodes.length;o++){var i=n.childNodes[o];if(!0!==t||3!=i.nodeType||!i.previousSibling||3!=i.previousSibling.nodeType)if(r++,r==s){n=i;break}}
else n=n.childNodes[s]};return n?new CKEDITOR.dom.node(n):null},getElementsByTag:function(e,t){CKEDITOR.env.ie&&8>=document.documentMode||!t||(e=t+':'+e);return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName('head')[0];return e=e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element('head'),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(e){this.$.open('text/html','replace');CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$\x26\n\x3cscript data-cke-temp\x3d"1"\x3e('+CKEDITOR.tools.fixDomain+')();\x3c/script\x3e'));this.$.write(e);this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData('html5ShivFrag');e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData('html5ShivFrag',e));return e}});CKEDITOR.dom.nodeList=function(e){this.$=e};CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(e){return 0>e||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null}};CKEDITOR.dom.element=function(e,t){'string'==typeof e&&(e=(t?t.$:document).createElement(e));CKEDITOR.dom.domObject.call(this,e)};CKEDITOR.dom.element.get=function(e){return(e='string'==typeof e?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;CKEDITOR.dom.element.createFromHtml=function(e,t){var n=new CKEDITOR.dom.element('div',t);n.setHtml(e);return n.getFirst().remove()};CKEDITOR.dom.element.setMarker=function(e,t,n,i){var o=t.getCustomData('list_marker_id')||t.setCustomData('list_marker_id',CKEDITOR.tools.getNextNumber()).getCustomData('list_marker_id'),a=t.getCustomData('list_marker_names')||t.setCustomData('list_marker_names',{}).getCustomData('list_marker_names');e[o]=t;a[n]=1;return t.setCustomData(n,i)};CKEDITOR.dom.element.clearAllMarkers=function(e){for(var t in e)CKEDITOR.dom.element.clearMarkers(e,e[t],1)};CKEDITOR.dom.element.clearMarkers=function(e,t,n){var o=t.getCustomData('list_marker_names'),a=t.getCustomData('list_marker_id'),i;for(i in o)t.removeCustomData(i);t.removeCustomData('list_marker_names');n&&(t.removeCustomData('list_marker_id'),delete e[a])};(function(){function t(e,t){return-1<(' '+e+' ').replace(r,' ').indexOf(' '+t+' ')};function i(e){var t=!0;e.$.id||(e.$.id='cke_tmp_'+CKEDITOR.tools.getNextNumber(),t=!1);return function(){t||e.removeAttribute('id')}};function o(e,t){var n=CKEDITOR.tools.escapeCss(e.$.id);return'#'+n+' '+t.split(/,\s*/).join(', #'+n+' ')};function a(e){for(var i=0,t=0,o=n[e].length;t<o;t++)i+=parseInt(this.getComputedStyle(n[e][t])||0,10)||0;return i};var e=document.createElement('_').classList,e='undefined'!==typeof e&&null!==String(e.add).match(/\[Native code\]/gi),r=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:e?function(e){this.$.classList.add(e);return this}:function(e){var n=this.$.className;n&&(t(n,e)||(n+=' '+e));this.$.className=n||e;return this},removeClass:e?function(e){var t=this.$;t.classList.remove(e);t.className||t.removeAttribute('class');return this}:function(e){var n=this.getAttribute('class');n&&t(n,e)&&((n=n.replace(new RegExp('(?:^|\\s+)'+e+'(?\x3d\\s|$)'),'').replace(/^\s+/,''))?this.setAttribute('class',n):this.removeAttribute('class'));return this},hasClass:function(e){return t(this.$.className,e)},append:function(e,t){'string'==typeof e&&(e=this.getDocument().createElement(e));t?this.$.insertBefore(e.$,this.$.firstChild):this.$.appendChild(e.$);return e},appendHtml:function(e){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element('div',this.getDocument());t.setHtml(e);t.moveChildren(this)}
else this.setHtml(e)},appendText:function(e){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=e:this.append(new CKEDITOR.dom.text(e))},appendBogus:function(e){if(e||CKEDITOR.env.needsBrFiller){for(e=this.getLast();e&&e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(e.getText());)e=e.getPrevious();e&&e.is&&e.is('br')||(e=this.getDocument().createElement('br'),CKEDITOR.env.gecko&&e.setAttribute('type','_moz'),this.append(e))}},breakParent:function(e,t){var n=new CKEDITOR.dom.range(this.getDocument());n.setStartAfter(this);n.setEndAfter(e);var o=n.extractContents(!1,t||!1),i;n.insertNode(this.remove());if(CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(n=new CKEDITOR.dom.element('div');i=o.getFirst();)i.$.style.backgroundColor&&(i.$.style.backgroundColor=i.$.style.backgroundColor),n.append(i);n.insertAfter(this);n.remove(!0)}
else o.insertAfterNode(this)},contains:document.compareDocumentPosition?function(e){return!!(this.$.compareDocumentPosition(e.$)&16)}:function(e){var t=this.$;return e.type!=CKEDITOR.NODE_ELEMENT?t.contains(e.getParent().$):t!=e.$&&t.contains(e.$)},focus:function(){function e(){try{this.$.focus()}catch(e){}};return function(t){t?CKEDITOR.tools.setTimeout(e,100,this):e.call(this)}}(),getHtml:function(){var e=this.$.innerHTML;return CKEDITOR.env.ie?e.replace(/<\?[^>]*>/g,''):e},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,'');var e=this.$.ownerDocument.createElement('div');e.appendChild(this.$.cloneNode(!0));return e.innerHTML},getClientRect:function(){var e=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());!e.width&&(e.width=e.right-e.left);!e.height&&(e.height=e.bottom-e.top);return e},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(e){try{var n=this.$;if(this.getParent())return n.innerHTML=e;var i=this.getDocument()._getHtml5ShivFrag();i.appendChild(n);n.innerHTML=e;i.removeChild(n);return e}catch(t){this.$.innerHTML='';n=new CKEDITOR.dom.element('body',this.getDocument());n.$.innerHTML=e;for(n=n.getChildren();n.count();)this.append(n.getItem(0));return e}}:function(e){return this.$.innerHTML=e},setText:function(){var e=document.createElement('p');e.innerHTML='x';e=e.textContent;return function(t){this.$[e?'textContent':'innerText']=t}}(),getAttribute:function(){var e=function(e){return this.$.getAttribute(e,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){switch(e){case'class':e='className';break;case'http-equiv':e='httpEquiv';break;case'name':return this.$.name;case'tabindex':return e=this.$.getAttribute(e,2),0!==e&&0===this.$.tabIndex&&(e=null),e;case'checked':return e=this.$.attributes.getNamedItem(e),(e.specified?e.nodeValue:this.$.checked)?'checked':null;case'hspace':case'value':return this.$[e];case'style':return this.$.style.cssText;case'contenteditable':case'contentEditable':return this.$.attributes.getNamedItem('contentEditable').specified?this.$.getAttribute('contentEditable'):null};return this.$.getAttribute(e,2)}:e}(),getAttributes:function(e){var i={},n=this.$.attributes,t;e=CKEDITOR.tools.isArray(e)?e:[];for(t=0;t<n.length;t++)-1===CKEDITOR.tools.indexOf(e,n[t].name)&&(i[n[t].name]=n[t].value);return i},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(e){var t=this.getWindow().$.getComputedStyle(this.$,null);return t?t.getPropertyValue(e):''}:function(e){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(e)]},getDtd:function(){var e=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return e};return e},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var e=this.$.tabIndex;return 0!==e||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute('tabindex'),10)?e:-1},getText:function(){return this.$.textContent||this.$.innerText||''},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var t=this.$.scopeName;'HTML'!=t&&(e=t.toLowerCase()+':'+e)};this.getName=function(){return e};return this.getName()},getValue:function(){return this.$.value},getFirst:function(e){var t=this.$.firstChild;(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getNext(e));return t},getLast:function(e){var t=this.$.lastChild;(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getPrevious(e));return t},getStyle:function(e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]},is:function(){var t=this.getName();if('object'==typeof arguments[0])return!!arguments[0][t];for(var e=0;e<arguments.length;e++)if(arguments[e]==t)return!0;return!1},isEditable:function(e){var t=this.getName();return this.isReadOnly()||'none'==this.getComputedStyle('display')||'hidden'==this.getComputedStyle('visibility')||CKEDITOR.dtd.$nonEditable[t]||CKEDITOR.dtd.$empty[t]||this.is('a')&&(this.data('cke-saved-name')||this.hasAttribute('name'))&&!this.getChildCount()?!1:!1!==e?(e=CKEDITOR.dtd[t]||CKEDITOR.dtd.span,!(!e||!e['#'])):!0},isIdentical:function(e){var t=this.clone(0,1);e=e.clone(0,1);t.removeAttributes(['_moz_dirty','data-cke-expando','data-cke-saved-href','data-cke-saved-name']);e.removeAttributes(['_moz_dirty','data-cke-expando','data-cke-saved-href','data-cke-saved-name']);if(t.$.isEqualNode)return t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.isEqualNode(e.$);t=t.getOuterHtml();e=e.getOuterHtml();if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is('a')){var n=this.getParent();n.type==CKEDITOR.NODE_ELEMENT&&(n=n.clone(),n.setHtml(t),t=n.getHtml(),n.setHtml(e),e=n.getHtml())};return t==e},isVisible:function(){var e=(this.$.offsetHeight||this.$.offsetWidth)&&'hidden'!=this.getComputedStyle('visibility'),t,n;e&&CKEDITOR.env.webkit&&(t=this.getWindow(),!t.equals(CKEDITOR.document.getWindow())&&(n=t.$.frameElement)&&(e=(new CKEDITOR.dom.element(n)).isVisible()));return!!e},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var n=this.getChildren(),t=0,i=n.count();t<i;t++){var e=n.getItem(t);if(e.type!=CKEDITOR.NODE_ELEMENT||!e.data('cke-bookmark'))if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEmptyInlineRemoveable()||e.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(e.getText()))return!1};return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var n=this.$.attributes,e=0;e<n.length;e++){var t=n[e];switch(t.nodeName){case'class':if(this.getAttribute('class'))return!0;case'data-cke-expando':continue;default:if(t.specified)return!0}};return!1}:function(){var e=this.$.attributes,t=e.length,n={'data-cke-expando':1,_moz_dirty:1};return 0<t&&(2<t||!n[e[0].nodeName]||2==t&&!n[e[1].nodeName])},hasAttribute:function(){function e(e){var t=this.$.attributes.getNamedItem(e);if('input'==this.getName())switch(e){case'class':return 0<this.$.className.length;case'checked':return!!this.$.checked;case'value':return e=this.getAttribute('type'),'checkbox'==e||'radio'==e?'on'!=this.$.value:!!this.$.value};return t?t.specified:!1};return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(t){return'name'==t?!!this.$.name:e.call(this,t)}:e:function(e){return!!this.$.attributes.getNamedItem(e)}}(),hide:function(){this.setStyle('display','none')},moveChildren:function(e,t){var n=this.$;e=e.$;if(n!=e){var i;if(t)for(;i=n.lastChild;)e.insertBefore(n.removeChild(i),e.firstChild);else for(;i=n.firstChild;)e.appendChild(n.removeChild(i))}},mergeSiblings:function(){function e(e,t,n){if(t&&t.type==CKEDITOR.NODE_ELEMENT){for(var o=[];t.data('cke-bookmark')||t.isEmptyInlineRemoveable();)if(o.push(t),t=n?t.getNext():t.getPrevious(),!t||t.type!=CKEDITOR.NODE_ELEMENT)return;if(e.isIdentical(t)){for(var i=n?e.getLast():e.getFirst();o.length;)o.shift().move(e,!n);t.moveChildren(e,!n);t.remove();i&&i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings()}}};return function(t){if(!1===t||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is('a'))e(this,this.getNext(),!0),e(this,this.getPrevious())}}(),show:function(){this.setStyles({display:'',visibility:''})},setAttribute:function(){var e=function(e,t){this.$.setAttribute(e,t);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t,n){'class'==t?this.$.className=n:'style'==t?this.$.style.cssText=n:'tabindex'==t?this.$.tabIndex=n:'checked'==t?this.$.checked=n:'contenteditable'==t?e.call(this,'contentEditable',n):e.apply(this,arguments);return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(t,n){if('src'==t&&n.match(/^http:\/\//))try{e.apply(this,arguments)}catch(i){}
else e.apply(this,arguments);return this}:e}(),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);return this},setValue:function(e){this.$.value=e;return this},removeAttribute:function(){var e=function(e){this.$.removeAttribute(e)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){'class'==e?e='className':'tabindex'==e?e='tabIndex':'contenteditable'==e&&(e='contentEditable');this.$.removeAttribute(e)}:e}(),removeAttributes:function(e){if(CKEDITOR.tools.isArray(e))for(var t=0;t<e.length;t++)this.removeAttribute(e[t]);else for(t in e=e||this.getAttributes(),e)e.hasOwnProperty(t)&&this.removeAttribute(t)},removeStyle:function(e){var t=this.$.style;if(t.removeProperty||'border'!=e&&'margin'!=e&&'padding'!=e)t.removeProperty?t.removeProperty(e):t.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(e)),this.$.style.cssText||this.removeAttribute('style');else{var a=['top','left','right','bottom'],i;'border'==e&&(i=['color','style','width']);for(var t=[],n=0;n<a.length;n++)if(i)for(var o=0;o<i.length;o++)t.push([e,a[n],i[o]].join('-'));else t.push([e,a[n]].join('-'));for(e=0;e<t.length;e++)this.removeStyle(t[e])}},setStyle:function(e,t){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]=t;return this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(e=Math.round(100*e),this.setStyle('filter',100<=e?'':'progid:DXImageTransform.Microsoft.Alpha(opacity\x3d'+e+')')):this.setStyle('opacity',e)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix('user-select','none'));if(CKEDITOR.env.ie){this.setAttribute('unselectable','on');for(var t,n=this.getElementsByTag('*'),e=0,i=n.count();e<i;e++)t=n.getItem(e),t.setAttribute('unselectable','on')}},getPositionedAncestor:function(){for(var e=this;'html'!=e.getName();){if('static'!=e.getComputedStyle('position'))return e;e=e.getParent()};return null},getDocumentPosition:function(e){var i=0,n=0,r=this.getDocument(),l=r.getBody(),d='BackCompat'==r.$.compatMode;if(document.documentElement.getBoundingClientRect&&(CKEDITOR.env.ie?8!==CKEDITOR.env.version:1)){var a=this.$.getBoundingClientRect(),s=r.$.documentElement,t=s.clientTop||l.$.clientTop||0,o=s.clientLeft||l.$.clientLeft||0,c=!0;CKEDITOR.env.ie&&(c=r.getDocumentElement().contains(this),r=r.getBody().contains(this),c=d&&r||!d&&c);c&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(i=l.$.scrollLeft||s.scrollLeft,n=l.$.scrollTop||s.scrollTop):(n=d?l.$:s,i=n.scrollLeft,n=n.scrollTop),i=a.left+i-o,n=a.top+n-t)}
else for(t=this,o=null;t&&'body'!=t.getName()&&'html'!=t.getName();){i+=t.$.offsetLeft-t.$.scrollLeft;n+=t.$.offsetTop-t.$.scrollTop;t.equals(this)||(i+=t.$.clientLeft||0,n+=t.$.clientTop||0);for(;o&&!o.equals(t);)i-=o.$.scrollLeft,n-=o.$.scrollTop,o=o.getParent();o=t;t=(a=t.$.offsetParent)?new CKEDITOR.dom.element(a):null};e&&(a=this.getWindow(),t=e.getWindow(),!a.equals(t)&&a.$.frameElement&&(e=(new CKEDITOR.dom.element(a.$.frameElement)).getDocumentPosition(e),i+=e.x,n+=e.y));document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||d||(i+=this.$.clientLeft?1:0,n+=this.$.clientTop?1:0);return{x:i,y:n}},scrollIntoView:function(e){var n=this.getParent();if(n){do if((n.$.clientWidth&&n.$.clientWidth<n.$.scrollWidth||n.$.clientHeight&&n.$.clientHeight<n.$.scrollHeight)&&!n.is('body')&&this.scrollIntoParent(n,e,1),n.is('html')){var o=n.getWindow();try{var i=o.$.frameElement;i&&(n=new CKEDITOR.dom.element(i))}catch(t){}}
while(n=n.getParent())}},scrollIntoParent:function(e,t,n){var a,o,i,r;function u(t,n){/body|html/.test(e.getName())?e.getWindow().$.scrollBy(t,n):(e.$.scrollLeft+=t,e.$.scrollTop+=n)};function c(e,t){var i={x:0,y:0};if(!e.is(d?'body':'html')){var n=e.$.getBoundingClientRect();i.x=n.left;i.y=n.top};n=e.getWindow();n.equals(t)||(n=c(CKEDITOR.dom.element.get(n.$.frameElement),t),i.x+=n.x,i.y+=n.y);return i};function l(e,t){return parseInt(e.getComputedStyle('margin-'+t)||0,10)||0};!e&&(e=this.getWindow());i=e.getDocument();var d='BackCompat'==i.$.compatMode;e instanceof CKEDITOR.dom.window&&(e=d?i.getBody():i.getDocumentElement());CKEDITOR.env.webkit&&(i=this.getEditor(!1))&&(i._.previousScrollTop=null);i=e.getWindow();o=c(this,i);var s=c(e,i),m=this.$.offsetHeight;a=this.$.offsetWidth;var h=e.$.clientHeight,f=e.$.clientWidth;i=o.x-l(this,'left')-s.x||0;r=o.y-l(this,'top')-s.y||0;a=o.x+a+l(this,'right')-(s.x+f)||0;o=o.y+m+l(this,'bottom')-(s.y+h)||0;(0>r||0<o)&&u(0,!0===t?r:!1===t?o:0>r?r:o);n&&(0>i||0<a)&&u(0>i?i:a,0)},setState:function(e,t,n){t=t||'cke';switch(e){case CKEDITOR.TRISTATE_ON:this.addClass(t+'_on');this.removeClass(t+'_off');this.removeClass(t+'_disabled');n&&this.setAttribute('aria-pressed',!0);n&&this.removeAttribute('aria-disabled');break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(t+'_disabled');this.removeClass(t+'_off');this.removeClass(t+'_on');n&&this.setAttribute('aria-disabled',!0);n&&this.removeAttribute('aria-pressed');break;default:this.addClass(t+'_off'),this.removeClass(t+'_on'),this.removeClass(t+'_disabled'),n&&this.removeAttribute('aria-pressed'),n&&this.removeAttribute('aria-disabled')}},getFrameDocument:function(){var t=this.$;try{t.contentWindow.document}catch(e){t.src=t.src};return t&&new CKEDITOR.dom.document(t.contentWindow.document)},copyAttributes:function(e,t){var r=this.$.attributes;t=t||{};for(var o=0;o<r.length;o++){var a=r[o],n=a.nodeName.toLowerCase(),i;if(!(n in t))if('checked'==n&&(i=this.getAttribute(n)))e.setAttribute(n,i);else if(!CKEDITOR.env.ie||this.hasAttribute(n))i=this.getAttribute(n),null===i&&(i=a.nodeValue),e.setAttribute(n,i)};''!==this.$.style.cssText&&(e.$.style.cssText=this.$.style.cssText)},renameNode:function(e){if(this.getName()!=e){var t=this.getDocument();e=new CKEDITOR.dom.element(e,t);this.copyAttributes(e);this.moveChildren(e);this.getParent(!0)&&this.$.parentNode.replaceChild(e.$,this.$);e.$['data-cke-expando']=this.$['data-cke-expando'];this.$=e.$;delete this.getName}},getChild:function(){function e(e,t){var n=e.childNodes;if(0<=t&&t<n.length)return n[t]};return function(t){var n=this.$;if(t.slice)for(t=t.slice();0<t.length&&n;)n=e(n,t.shift());else n=e(n,t);return n?new CKEDITOR.dom.node(n):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass('cke_enable_context_menu')};this.on('contextmenu',function(t){t.data.getTarget().getAscendant(e,!0)||t.data.preventDefault()})},getDirection:function(e){return e?this.getComputedStyle('direction')||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||'ltr':this.getStyle('direction')||this.getAttribute('dir')},data:function(e,t){e='data-'+e;if(void 0===t)return this.getAttribute(e);!1===t?this.removeAttribute(e):this.setAttribute(e,t);return null},getEditor:function(e){var i=CKEDITOR.instances,o,t,n;e=e||void 0===e;for(o in i)if(t=i[o],t.element.equals(this)&&t.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!e&&(n=t.editable(),n.equals(this)||n.contains(this)))return t;return null},find:function(e){var t=i(this);e=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(o(this,e)));t();return e},findOne:function(e){var t=i(this);e=this.$.querySelector(o(this,e));t();return e?new CKEDITOR.dom.element(e):null},forEach:function(e,t,n){if(!(n||t&&this.type!=t))var i=e(this);if(!1!==i){n=this.getChildren();for(var o=0;o<n.count();o++)i=n.getItem(o),i.type==CKEDITOR.NODE_ELEMENT?i.forEach(e,t):t&&i.type!=t||e(i)}}});var n={width:['border-left-width','border-right-width','padding-left','padding-right'],height:['border-top-width','border-bottom-width','padding-top','padding-bottom']};CKEDITOR.dom.element.prototype.setSize=function(e,t,n){'number'==typeof t&&(!n||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(t-=a.call(this,e)),this.setStyle(e,t+'px'))};CKEDITOR.dom.element.prototype.getSize=function(e,t){var n=Math.max(this.$['offset'+CKEDITOR.tools.capitalize(e)],this.$['client'+CKEDITOR.tools.capitalize(e)])||0;t&&(n-=a.call(this,e));return n}})();CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document;this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e};CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){e=e.$;e.parentNode.insertBefore(this.$,e.nextSibling)},getHtml:function(){var e=new CKEDITOR.dom.element('div');this.clone(1,1).appendTo(e);return e.getHtml().replace(/\s*data-cke-expando=".*?"/g,'')}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});(function(){function e(e,t){var a=this.range;if(this._.end)return null;if(!this._.start){this._.start=1;if(a.collapsed)return this.end(),null;a.optimize()};var n,i=a.startContainer;n=a.endContainer;var s=a.startOffset,l=a.endOffset,o,h=this.guard,r=this.type,f=e?'getPreviousSourceNode':'getNextSourceNode';if(!e&&!this._.guardLTR){var g=n.type==CKEDITOR.NODE_ELEMENT?n:n.getParent(),u=n.type==CKEDITOR.NODE_ELEMENT?n.getChild(l):n.getNext();this._.guardLTR=function(e,t){return(!t||!g.equals(e))&&(!u||!e.equals(u))&&(e.type!=CKEDITOR.NODE_ELEMENT||!t||!e.equals(a.root))}};if(e&&!this._.guardRTL){var m=i.type==CKEDITOR.NODE_ELEMENT?i:i.getParent(),d=i.type==CKEDITOR.NODE_ELEMENT?s?i.getChild(s-1):null:i.getPrevious();this._.guardRTL=function(e,t){return(!t||!m.equals(e))&&(!d||!e.equals(d))&&(e.type!=CKEDITOR.NODE_ELEMENT||!t||!e.equals(a.root))}};var c=e?this._.guardRTL:this._.guardLTR;o=h?function(e,t){return!1===c(e,t)?!1:h(e,t)}:c;this.current?n=this.current[f](!1,r,o):(e?n.type==CKEDITOR.NODE_ELEMENT&&(n=0<l?n.getChild(l-1):!1===o(n,!0)?null:n.getPreviousSourceNode(!0,r,o)):(n=i,n.type==CKEDITOR.NODE_ELEMENT&&((n=n.getChild(s))||(n=!1===o(i,!0)?null:i.getNextSourceNode(!0,r,o)))),n&&!1===o(n)&&(n=null));for(;n&&!this._.end;){this.current=n;if(!this.evaluator||!1!==this.evaluator(n)){if(!t)return n}
else if(t&&this.evaluator)return!1;n=n[f](!1,r,o)};this.end();return this.current=null};function a(t){for(var n,i=null;n=e.call(this,t);)i=n;return i};CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(e){this.range=e;this._={}},proto:{end:function(){this._.end=1},next:function(){return e.call(this)},previous:function(){return e.call(this,1)},checkForward:function(){return!1!==e.call(this,0,1)},checkBackward:function(){return!1!==e.call(this,1,1)},lastForward:function(){return a.call(this)},lastBackward:function(){return a.call(this,1)},reset:function(){delete this.current;this._={}}}});var d={block:1,'list-item':1,table:1,'table-row-group':1,'table-header-group':1,'table-footer-group':1,'table-row':1,'table-column-group':1,'table-column':1,'table-cell':1,'table-caption':1},u={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(e){return'none'!=this.getComputedStyle('float')||this.getComputedStyle('position')in u||!d[this.getComputedStyle('display')]?!!(this.is(CKEDITOR.dtd.$block)||e&&this.is(e)):!0};CKEDITOR.dom.walker.blockBoundary=function(e){return function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary(e))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};CKEDITOR.dom.walker.bookmark=function(e,t){function n(e){return e&&e.getName&&'span'==e.getName()&&e.data('cke-bookmark')};return function(i){var o,a;o=i&&i.type!=CKEDITOR.NODE_ELEMENT&&(a=i.getParent())&&n(a);o=e?o:o||n(i);return!!(t^o)}};CKEDITOR.dom.walker.whitespaces=function(e){return function(t){var n;t&&t.type==CKEDITOR.NODE_TEXT&&(n=!CKEDITOR.tools.trim(t.getText())||CKEDITOR.env.webkit&&t.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE);return!!(e^n)}};CKEDITOR.dom.walker.invisible=function(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.env.webkit?1:0;return function(i){t(i)?i=1:(i.type==CKEDITOR.NODE_TEXT&&(i=i.getParent()),i=i.$.offsetWidth<=n);return!!(e^i)}};CKEDITOR.dom.walker.nodeType=function(e,t){return function(n){return!!(t^n.type==e)}};CKEDITOR.dom.walker.bogus=function(e){function i(e){return!t(e)&&!n(e)};return function(t){var n=CKEDITOR.env.needsBrFiller?t.is&&t.is('br'):t.getText&&o.test(t.getText());n&&(n=t.getParent(),t=t.getNext(i),n=n.isBlockBoundary()&&(!t||t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()));return!!(e^n)}};CKEDITOR.dom.walker.temp=function(e){return function(t){t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent());t=t&&t.hasAttribute('data-cke-temp');return!!(e^t)}};var o=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(),l=CKEDITOR.dom.walker.temp(),c=function(e){return n(e)||t(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$inline)&&!e.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(e){return function(i){i=t(i)||n(i)||l(i);return!!(e^i)}};var i=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(e){return function(t){for(var n=0,o=t.getChildCount();n<o;++n)if(!i(t.getChild(n)))return!!e;return!e}};var r=CKEDITOR.dom.walker.empty(),s=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(e){var n={},t;for(t in e)CKEDITOR.dtd[t]['#']&&(n[t]=1);return n}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(e){return function(t){t=i(t)?!1:t.type==CKEDITOR.NODE_TEXT||t.type==CKEDITOR.NODE_ELEMENT&&(t.is(CKEDITOR.dtd.$inline)||t.is('hr')||'false'==t.getAttribute('contenteditable')||!CKEDITOR.env.needsBrFiller&&t.is(s)&&r(t))?!0:!1;return!!(e^t)}};CKEDITOR.dom.element.prototype.getBogus=function(){var e=this;do e=e.getPreviousSourceNode();while(c(e));return e&&(CKEDITOR.env.needsBrFiller?e.is&&e.is('br'):e.getText&&o.test(e.getText()))?e:!1}})();CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=!0;var t=e instanceof CKEDITOR.dom.document;this.document=t?e:e.getDocument();this.root=t?e.getBody():e};(function(){function e(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer.equals(e.endContainer)&&e.startOffset==e.endOffset};function i(e,t,n,i,o){function I(e,t,n,i){var a=n?e.getPrevious():e.getNext();if(i&&k)return a;E||i?t.append(e.clone(!0,o),n):(e.remove(),x&&t.append(e));return a};function N(){var e,t,n,i=Math.min(u.length,d.length);for(e=0;e<i;e++)if(t=u[e],n=d[e],!t.equals(n))return e;return e-1};function S(){var t=O-1,n=R&&v&&!l.equals(r);t<p-1||t<h-1||n?(n?e.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START):h==t+1&&C?e.moveToPosition(d[t],CKEDITOR.POSITION_BEFORE_END):e.moveToPosition(d[t+1],CKEDITOR.POSITION_BEFORE_START),i&&(t=u[t+1])&&t.type==CKEDITOR.NODE_ELEMENT&&(n=CKEDITOR.dom.element.createFromHtml('\x3cspan data-cke-bookmark\x3d"1" style\x3d"display:none"\x3e\x26nbsp;\x3c/span\x3e',e.document),n.insertAfter(t),t.mergeSiblings(!1),e.moveToBookmark({startNode:n}))):e.collapse(!0)};e.optimizeBookmark();var k=0===t,x=1==t,E=2==t;t=E||x;var l=e.startContainer,r=e.endContainer,m=e.startOffset,g=e.endOffset,D,C,R,v,K,y;if(E&&r.type==CKEDITOR.NODE_TEXT&&l.equals(r))l=e.document.createText(l.substring(m,g)),n.append(l);else{r.type==CKEDITOR.NODE_TEXT?E?y=!0:r=r.split(g):0<r.getChildCount()?g>=r.getChildCount()?(r=r.getChild(g-1),C=!0):r=r.getChild(g):v=C=!0;l.type==CKEDITOR.NODE_TEXT?E?K=!0:l.split(m):0<l.getChildCount()?0===m?(l=l.getChild(m),D=!0):l=l.getChild(m-1):R=D=!0;for(var u=l.getParents(),d=r.getParents(),O=N(),p=u.length-1,h=d.length-1,s=n,T,f,c,b=-1,a=O;a<=p;a++){f=u[a];c=f.getNext();for(a!=p||f.equals(d[a])&&p<h?t&&(T=s.append(f.clone(0,o))):D?I(f,s,!1,R):K&&s.append(e.document.createText(f.substring(m)));c;){if(c.equals(d[a])){b=a;break};c=I(c,s)};s=T};s=n;for(a=O;a<=h;a++)if(n=d[a],c=n.getPrevious(),n.equals(u[a]))t&&(s=s.getChild(0));else{a!=h||n.equals(u[a])&&h<p?t&&(T=s.append(n.clone(0,o))):C?I(n,s,!1,v):y&&s.append(e.document.createText(n.substring(0,g)));if(a>b)for(;c;)c=I(c,s,!0);s=T};E||S()}};function a(){var e=!1,t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!0),i=CKEDITOR.dom.walker.bogus();return function(o){return n(o)||t(o)?!0:i(o)&&!e?e=!0:o.type==CKEDITOR.NODE_TEXT&&(o.hasAscendant('pre')||CKEDITOR.tools.trim(o.getText()).length)||o.type==CKEDITOR.NODE_ELEMENT&&!o.is(s)?!1:!0}};function c(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(1);return function(i){return n(i)||t(i)?!0:!e&&o(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$removeEmpty)}};function r(e){return function(){var t;return this[e?'getPreviousNode':'getNextNode'](function(e){!t&&n(e)&&(t=e);return l(e)&&!(o(e)&&e.equals(t))})}};var s={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,'var':1},o=CKEDITOR.dom.walker.bogus(),t=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,l=CKEDITOR.dom.walker.editable(),n=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);e._setStartContainer(this.startContainer);e.startOffset=this.startOffset;e._setEndContainer(this.endContainer);e.endOffset=this.endOffset;e.collapsed=this.collapsed;return e},collapse:function(e){e?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset);this.collapsed=!0},cloneContents:function(e){var t=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||i(this,2,t,!1,'undefined'==typeof e?!0:e);return t},deleteContents:function(e){this.collapsed||i(this,0,null,e)},extractContents:function(e,t){var n=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||i(this,1,n,e,'undefined'==typeof t?!0:t);return n},createBookmark:function(e){var t,n,o,i,a=this.collapsed;t=this.document.createElement('span');t.data('cke-bookmark',1);t.setStyle('display','none');t.setHtml('\x26nbsp;');e&&(o='cke_bm_'+CKEDITOR.tools.getNextNumber(),t.setAttribute('id',o+(a?'C':'S')));a||(n=t.clone(),n.setHtml('\x26nbsp;'),e&&n.setAttribute('id',o+'E'),i=this.clone(),i.collapse(),i.insertNode(n));i=this.clone();i.collapse(!0);i.insertNode(t);n?(this.setStartAfter(t),this.setEndBefore(n)):this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END);return{startNode:e?o+(a?'C':'S'):t,endNode:e?o+'E':n,serializable:e,collapsed:a}},createBookmark2:function(){function e(t){var a=t.container,r=t.offset,i;i=a;var o=r;i=i.type!=CKEDITOR.NODE_ELEMENT||0===o||o==i.getChildCount()?0:i.getChild(o-1).type==CKEDITOR.NODE_TEXT&&i.getChild(o).type==CKEDITOR.NODE_TEXT;i&&(a=a.getChild(r-1),r=a.getLength());if(a.type==CKEDITOR.NODE_ELEMENT&&0<r){a:{for(i=a;r--;)if(o=i.getChild(r).getIndex(!0),0<=o){r=o;break e};r=-1};r+=1};if(a.type==CKEDITOR.NODE_TEXT){i=a;for(o=0;(i=i.getPrevious())&&i.type==CKEDITOR.NODE_TEXT;)o+=i.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,'').length;i=o;a.getText()?r+=i:(o=a.getPrevious(n),i?(r=i,a=o?o.getNext():a.getParent().getFirst()):(a=a.getParent(),r=o?o.getIndex(!0)+1:0))};t.container=a;t.offset=r};function t(e,t){var i=t.getCustomData('cke-fillingChar');if(i){var n=e.container;i.equals(n)&&(e.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=e.offset&&(e.offset=n.getIndex(),e.container=n.getParent()))}};var n=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(n){var a=this.collapsed,i={container:this.startContainer,offset:this.startOffset},o={container:this.endContainer,offset:this.endOffset};n&&(e(i),t(i,this.root),a||(e(o),t(o,this.root)));return{start:i.container.getAddress(n),end:a?null:o.container.getAddress(n),startOffset:i.offset,endOffset:o.offset,normalized:n,collapsed:a,is2:!0}}}(),moveToBookmark:function(e){if(e.is2){var t=this.document.getByAddress(e.start,e.normalized),n=e.startOffset,i=e.end&&this.document.getByAddress(e.end,e.normalized);e=e.endOffset;this.setStart(t,n);i?this.setEnd(i,e):this.collapse(!0)}
else t=(n=e.serializable)?this.document.getById(e.startNode):e.startNode,e=n?this.document.getById(e.endNode):e.endNode,this.setStartBefore(t),t.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var e=this.startContainer,t=this.endContainer,i=this.startOffset,o=this.endOffset,n;if(e.type==CKEDITOR.NODE_ELEMENT)if(n=e.getChildCount(),n>i)e=e.getChild(i);else if(1>n)e=e.getPreviousSourceNode();else{for(e=e.$;e.lastChild;)e=e.lastChild;e=new CKEDITOR.dom.node(e);e=e.getNextSourceNode()||e};if(t.type==CKEDITOR.NODE_ELEMENT)if(n=t.getChildCount(),n>o)t=t.getChild(o).getPreviousSourceNode(!0);else if(1>n)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=new CKEDITOR.dom.node(t)};e.getPosition(t)&CKEDITOR.POSITION_FOLLOWING&&(e=t);return{startNode:e,endNode:t}},getCommonAncestor:function(e,t){var n=this.startContainer,i=this.endContainer,n=n.equals(i)?e&&n.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?n.getChild(this.startOffset):n:n.getCommonAncestor(i);return t&&!n.is?n.getParent():n},optimize:function(){var e=this.startContainer,t=this.startOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e));e=this.endContainer;t=this.endOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var t=this.startContainer,e=this.endContainer;t.is&&t.is('span')&&t.data('cke-bookmark')&&this.setStartAt(t,CKEDITOR.POSITION_BEFORE_START);e&&e.is&&e.is('span')&&e.data('cke-bookmark')&&this.setEndAt(e,CKEDITOR.POSITION_AFTER_END)},trim:function(e,t){var n=this.startContainer,i=this.startOffset,o=this.collapsed;if((!e||o)&&n&&n.type==CKEDITOR.NODE_TEXT){if(i)if(i>=n.getLength())i=n.getIndex()+1,n=n.getParent();else{var a=n.split(i),i=n.getIndex()+1,n=n.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(a,this.endOffset-this.startOffset):n.equals(this.endContainer)&&(this.endOffset+=1)}
else i=n.getIndex(),n=n.getParent();this.setStart(n,i);if(o){this.collapse(!0);return}};n=this.endContainer;i=this.endOffset;t||o||!n||n.type!=CKEDITOR.NODE_TEXT||(i?(i>=n.getLength()||n.split(i),i=n.getIndex()+1):i=n.getIndex(),n=n.getParent(),this.setEnd(n,i))},enlarge:function(e,t){function O(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute('contenteditable')?null:e};var T=new RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var E=1;case CKEDITOR.ENLARGE_ELEMENT:var D=function(e,t){var n=new CKEDITOR.dom.range(c);n.setStart(e,t);n.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);var n=new CKEDITOR.dom.walker(n),i;for(n.guard=function(e){return!(e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary())};i=n.next();){if(i.type!=CKEDITOR.NODE_TEXT)return!1;s=i!=e?i.getText():i.substring(t);if(T.test(s))return!1};return!0};if(this.collapsed)break;var h=this.getCommonAncestor(),c=this.root,f,m,n,i,d,r=!1,o,s;o=this.startContainer;var a=this.startOffset;o.type==CKEDITOR.NODE_TEXT?(a&&(o=!CKEDITOR.tools.trim(o.substring(0,a)).length&&o,r=!!o),o&&((i=o.getPrevious())||(n=o.getParent()))):(a&&(i=o.getChild(a-1)||o.getLast()),i||(n=o));for(n=O(n);n||i;){if(n&&!i){!d&&n.equals(h)&&(d=!0);if(E?n.isBlockBoundary():!c.contains(n))break;r&&'inline'==n.getComputedStyle('display')||(r=!1,d?f=n:this.setStartBefore(n));i=n.getPrevious()};for(;i;)if(o=!1,i.type==CKEDITOR.NODE_COMMENT)i=i.getPrevious();else{if(i.type==CKEDITOR.NODE_TEXT)s=i.getText(),T.test(s)&&(i=null),o=/[\s\ufeff]$/.test(s);else if((i.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||t&&i.is('br'))&&!i.data('cke-bookmark'))if(r&&CKEDITOR.dtd.$removeEmpty[i.getName()]){s=i.getText();if(T.test(s))i=null;else for(var a=i.$.getElementsByTagName('*'),I=0,p;p=a[I++];)if(!CKEDITOR.dtd.$removeEmpty[p.nodeName.toLowerCase()]){i=null;break};i&&(o=!!s.length)}
else i=null;o&&(r?d?f=n:n&&this.setStartBefore(n):r=!0);if(i){o=i.getPrevious();if(!n&&!o){n=i;i=null;break};i=o}
else n=null};n&&(n=O(n.getParent()))};o=this.endContainer;a=this.endOffset;n=i=null;d=r=!1;o.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(o.substring(a)).length?r=!0:(r=!o.getLength(),a==o.getLength()?(i=o.getNext())||(n=o.getParent()):D(o,a)&&(n=o.getParent())):(i=o.getChild(a))||(n=o);for(;n||i;){if(n&&!i){!d&&n.equals(h)&&(d=!0);if(E?n.isBlockBoundary():!c.contains(n))break;r&&'inline'==n.getComputedStyle('display')||(r=!1,d?m=n:n&&this.setEndAfter(n));i=n.getNext()};for(;i;){o=!1;if(i.type==CKEDITOR.NODE_TEXT)s=i.getText(),D(i,0)||(i=null),o=/^[\s\ufeff]/.test(s);else if(i.type==CKEDITOR.NODE_ELEMENT){if((0<i.$.offsetWidth||t&&i.is('br'))&&!i.data('cke-bookmark'))if(r&&CKEDITOR.dtd.$removeEmpty[i.getName()]){s=i.getText();if(T.test(s))i=null;else for(a=i.$.getElementsByTagName('*'),I=0;p=a[I++];)if(!CKEDITOR.dtd.$removeEmpty[p.nodeName.toLowerCase()]){i=null;break};i&&(o=!!s.length)}
else i=null}
else o=1;o&&r&&(d?m=n:this.setEndAfter(n));if(i){o=i.getNext();if(!n&&!o){n=i;i=null;break};i=o}
else n=null};n&&(n=O(n.getParent()))};f&&m&&(h=f.contains(m)?m:f,this.setStartBefore(h),this.setEndAfter(h));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:n=new CKEDITOR.dom.range(this.root);c=this.root;n.setStartAt(c,CKEDITOR.POSITION_AFTER_START);n.setEnd(this.startContainer,this.startOffset);n=new CKEDITOR.dom.walker(n);var l,g,b=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),u=null,C=function(e){if(e.type==CKEDITOR.NODE_ELEMENT&&'false'==e.getAttribute('contenteditable'))if(u){if(u.equals(e)){u=null;return}}
else u=e;else if(u)return;var t=b(e);t||(l=e);return t},E=function(e){var t=C(e);!t&&e.is&&e.is('br')&&(g=e);return t};n.guard=C;n=n.lastBackward();l=l||c;this.setStartAt(l,!l.is('br')&&(!n&&this.checkStartOfBlock()||n&&l.contains(n))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){n=this.clone();n=new CKEDITOR.dom.walker(n);var R=CKEDITOR.dom.walker.whitespaces(),v=CKEDITOR.dom.walker.bookmark();n.evaluator=function(e){return!R(e)&&!v(e)};if((n=n.previous())&&n.type==CKEDITOR.NODE_ELEMENT&&n.is('br'))break};n=this.clone();n.collapse();n.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);n=new CKEDITOR.dom.walker(n);n.guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?E:C;l=u=g=null;n=n.lastForward();l=l||c;this.setEndAt(l,!n&&this.checkEndOfBlock()||n&&l.contains(n)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);g&&this.setEndAfter(g)}},shrink:function(e,t,n){if(!this.collapsed){e=e||CKEDITOR.SHRINK_TEXT;var i=this.clone(),o=this.startContainer,a=this.endContainer,c=this.startOffset,d=this.endOffset,r=1,s=1;o&&o.type==CKEDITOR.NODE_TEXT&&(c?c>=o.getLength()?i.setStartAfter(o):(i.setStartBefore(o),r=0):i.setStartBefore(o));a&&a.type==CKEDITOR.NODE_TEXT&&(d?d>=a.getLength()?i.setEndAfter(a):(i.setEndAfter(a),s=0):i.setEndBefore(a));var i=new CKEDITOR.dom.walker(i),u=CKEDITOR.dom.walker.bookmark();i.evaluator=function(t){return t.type==(e==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var l;i.guard=function(t,i){if(u(t))return!0;if(e==CKEDITOR.SHRINK_ELEMENT&&t.type==CKEDITOR.NODE_TEXT||i&&t.equals(l)||!1===n&&t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()||t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute('contenteditable'))return!1;i||t.type!=CKEDITOR.NODE_ELEMENT||(l=t);return!0};r&&(o=i[e==CKEDITOR.SHRINK_ELEMENT?'lastForward':'next']())&&this.setStartAt(o,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);s&&(i.reset(),(i=i[e==CKEDITOR.SHRINK_ELEMENT?'lastBackward':'previous']())&&this.setEndAt(i,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END));return!(!r&&!s)}},insertNode:function(e){this.optimizeBookmark();this.trim(!1,!0);var t=this.startContainer,n=t.getChild(this.startOffset);n?e.insertBefore(n):t.append(e);e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++;this.setStartBefore(e)},moveToPosition:function(e,t){this.setStartAt(e,t);this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset);this.setEnd(e.endContainer,e.endOffset)},selectNodeContents:function(e){this.setStart(e,0);this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(t,n){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(n=t.getIndex(),t=t.getParent());this._setStartContainer(t);this.startOffset=n;this.endContainer||(this._setEndContainer(t),this.endOffset=n);e(this)},setEnd:function(t,n){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(n=t.getIndex()+1,t=t.getParent());this._setEndContainer(t);this.endOffset=n;this.startContainer||(this._setStartContainer(t),this.startOffset=n);e(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(t,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setStart(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setStart(t,t.getLength()):this.setStart(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(t)};e(this)},setEndAt:function(t,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setEnd(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setEnd(t,t.getLength()):this.setEnd(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(t)};e(this)},fixBlock:function(e,t){var o=this.createBookmark(),n=this.document.createElement(t);this.collapse(e);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(n);n.trim();this.insertNode(n);var i=n.getBogus();i&&i.remove();n.appendBogus();this.moveToBookmark(o);return n},splitBlock:function(e,t){var o=new CKEDITOR.dom.elementPath(this.startContainer,this.root),a=new CKEDITOR.dom.elementPath(this.endContainer,this.root),n=o.block,i=a.block,r=null;if(!o.blockLimit.equals(a.blockLimit))return null;'br'!=e&&(n||(n=this.fixBlock(!0,e),i=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block),i||(i=this.fixBlock(!1,e)));o=n&&this.checkStartOfBlock();a=i&&this.checkEndOfBlock();this.deleteContents();n&&n.equals(i)&&(a?(r=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(i,CKEDITOR.POSITION_AFTER_END),i=null):o?(r=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),n=null):(i=this.splitElement(n,t||!1),n.is('ul','ol')||n.appendBogus()));return{previousBlock:n,nextBlock:i,wasStartOfBlock:o,wasEndOfBlock:a,elementPath:r}},splitElement:function(e,t){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var i=this.extractContents(!1,t||!1),n=e.clone(!1,t||!1);i.appendTo(n);n.insertAfter(e);this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END);return n},removeEmptyBlocksAtEnd:function(){function n(n){return function(i){return e(i)||t(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.isEmptyInlineRemoveable()||n.is('table')&&i.is('caption')?!1:!0}};var e=CKEDITOR.dom.walker.whitespaces(),t=CKEDITOR.dom.walker.bookmark(!1);return function(e){for(var a=this.createBookmark(),i=this[e?'endPath':'startPath'](),t=i.block||i.blockLimit,o;t&&!t.equals(i.root)&&!t.getFirst(n(t));)o=t.getParent(),this[e?'setEndAt':'setStartAt'](t,CKEDITOR.POSITION_AFTER_END),t.remove(1),t=o;this.moveToBookmark(a)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,t){var i=t==CKEDITOR.START,n=this.clone();n.collapse(i);n[i?'setStartAt':'setEndAt'](e,i?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);n=new CKEDITOR.dom.walker(n);n.evaluator=c(i);return n[i?'checkBackward':'checkForward']()},checkStartOfBlock:function(){var e=this.startContainer,n=this.startOffset;CKEDITOR.env.ie&&n&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.ltrim(e.substring(0,n)),t.test(e)&&this.trim(0,1));this.trim();e=new CKEDITOR.dom.elementPath(this.startContainer,this.root);n=this.clone();n.collapse(!0);n.setStartAt(e.block||e.blockLimit,CKEDITOR.POSITION_AFTER_START);e=new CKEDITOR.dom.walker(n);e.evaluator=a();return e.checkBackward()},checkEndOfBlock:function(){var e=this.endContainer,n=this.endOffset;CKEDITOR.env.ie&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.rtrim(e.substring(n)),t.test(e)&&this.trim(1,0));this.trim();e=new CKEDITOR.dom.elementPath(this.endContainer,this.root);n=this.clone();n.collapse(!1);n.setEndAt(e.block||e.blockLimit,CKEDITOR.POSITION_BEFORE_END);e=new CKEDITOR.dom.walker(n);e.evaluator=a();return e.checkForward()},getPreviousNode:function(e,t,n){var i=this.clone();i.collapse(1);i.setStartAt(n||this.root,CKEDITOR.POSITION_AFTER_START);n=new CKEDITOR.dom.walker(i);n.evaluator=e;n.guard=t;return n.previous()},getNextNode:function(e,t,n){var i=this.clone();i.collapse();i.setEndAt(n||this.root,CKEDITOR.POSITION_BEFORE_END);n=new CKEDITOR.dom.walker(i);n.evaluator=e;n.guard=t;return n.next()},checkReadOnly:function(){function e(e,t){for(;e;){if(e.type==CKEDITOR.NODE_ELEMENT){if('false'==e.getAttribute('contentEditable')&&!e.data('cke-editable'))return 0;if(e.is('html')||'true'==e.getAttribute('contentEditable')&&(e.contains(t)||e.equals(t)))break};e=e.getParent()};return 1};return function(){var t=this.startContainer,n=this.endContainer;return!(e(t,n)&&e(n,t))}}(),moveToElementEditablePosition:function(e,i){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,i?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var r=0;e;){if(e.type==CKEDITOR.NODE_TEXT){i&&this.endContainer&&this.checkEndOfBlock()&&t.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,i?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);r=1;break};if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,i?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),r=1;else if(i&&e.is('br')&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if('false'==e.getAttribute('contenteditable')&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var o=e,s=r,a=void 0;o.type==CKEDITOR.NODE_ELEMENT&&o.isEditable(!1)&&(a=o[i?'getLast':'getFirst'](n));s||a||(a=o[i?'getPrevious':'getNext'](n));e=a};return!!r},moveToClosestEditablePosition:function(e,t){var n,o=0,i,a,r=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];e?(n=new CKEDITOR.dom.range(this.root),n.moveToPosition(e,r[t?0:1])):n=this.clone();if(e&&!e.is(CKEDITOR.dtd.$block))o=1;else if(i=n[t?'getNextEditableNode':'getPreviousEditableNode']())o=1,(a=i.type==CKEDITOR.NODE_ELEMENT)&&i.is(CKEDITOR.dtd.$block)&&'false'==i.getAttribute('contenteditable')?(n.setStartAt(i,CKEDITOR.POSITION_BEFORE_START),n.setEndAt(i,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&a&&i.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(n.setEnd(i,0),n.collapse()):n.moveToPosition(i,r[t?1:0]);o&&this.moveToRange(n);return!!o},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){var e=this.clone();e.optimize();if(e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var e=new CKEDITOR.dom.walker(e),n=CKEDITOR.dom.walker.bookmark(!1,!0),i=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(e){return i(e)&&n(e)};var t=e.next();e.reset();return t&&t.equals(e.previous())?t:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:r(),getPreviousEditableNode:r(1),scrollIntoView:function(){var t=new CKEDITOR.dom.element.createFromHtml('\x3cspan\x3e\x26nbsp;\x3c/span\x3e',this.document),n,i,o,e=this.clone();e.optimize();(o=e.startContainer.type==CKEDITOR.NODE_TEXT)?(i=e.startContainer.getText(),n=e.startContainer.split(e.startOffset),t.insertAfter(e.startContainer)):e.insertNode(t);t.scrollIntoView();o&&(e.startContainer.setText(i),n.remove());t.remove()},_setStartContainer:function(e){this.startContainer=e},_setEndContainer:function(e){this.endContainer=e},_find:function(e,t){var n=this.getCommonAncestor(),o=this.getBoundaryNodes(),r=[],i,a,s,l;if(n&&n.find)for(a=n.find(e),i=0;i<a.count();i++)if(n=a.getItem(i),t||!n.isReadOnly())s=n.getPosition(o.startNode)&CKEDITOR.POSITION_FOLLOWING||o.startNode.equals(n),l=n.getPosition(o.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED,s&&l&&r.push(n);return r}}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.ENLARGE_INLINE=4;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;'use strict';(function(){function n(e){1>arguments.length||(this.range=e,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))};function l(e){var t=[];e.forEach(function(e){if('true'==e.getAttribute('contenteditable'))return t.push(e),!1},CKEDITOR.NODE_ELEMENT,!0);return t};function t(e,n,i,o){a:{null==o&&(o=l(i));for(var a;a=o.shift();)if(a.getDtd().p){o={element:a,remaining:o};break e};o=null};if(!o)return 0;if((a=CKEDITOR.filter.instances[o.element.data('cke-filter')])&&!a.check(n))return t(e,n,i,o.remaining);n=new CKEDITOR.dom.range(o.element);n.selectNodeContents(o.element);n=n.createIterator();n.enlargeBr=e.enlargeBr;n.enforceRealBlocks=e.enforceRealBlocks;n.activeFilter=n.filter=a;e._.nestedEditable={element:o.element,container:i,remaining:o.remaining,iterator:n};return 1};function i(e,t,n){if(!t)return!1;e=e.clone();e.collapse(!n);return e.checkBoundaryOfElement(t,n?CKEDITOR.START:CKEDITOR.END)};var o=/^[\r\n\t ]+$/,e=CKEDITOR.dom.walker.bookmark(!1,!0),a=CKEDITOR.dom.walker.whitespaces(!0),r=function(t){return e(t)&&a(t)},s={dd:1,dt:1,li:1};n.prototype={getNextParagraph:function(n){var d,l,g,u,E;n=n||'p';if(this._.nestedEditable){if(d=this._.nestedEditable.iterator.getNextParagraph(n))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,d;this.activeFilter=this.filter;if(t(this,n,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(n);this._.nestedEditable=null};if(!this.range.root.getDtd()[n])return null;if(!this._.started){var c=this.range.clone();l=c.startPath();var a=c.endPath(),f=!c.collapsed&&i(c,l.block),p=!c.collapsed&&i(c,a.block,1);c.shrink(CKEDITOR.SHRINK_ELEMENT,!0);f&&c.setStartAt(l.block,CKEDITOR.POSITION_BEFORE_END);p&&c.setEndAt(a.block,CKEDITOR.POSITION_AFTER_START);l=c.endContainer.hasAscendant('pre',!0)||c.startContainer.hasAscendant('pre',!0);c.enlarge(this.forceBrBreak&&!l||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);c.collapsed||(l=new CKEDITOR.dom.walker(c.clone()),a=CKEDITOR.dom.walker.bookmark(!0,!0),l.evaluator=a,this._.nextNode=l.next(),l=new CKEDITOR.dom.walker(c.clone()),l.evaluator=a,l=l.previous(),this._.lastNode=l.getNextSourceNode(!0,null,c.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(a=this.range.clone(),a.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),a.checkEndOfBlock()&&(a=new CKEDITOR.dom.elementPath(a.endContainer,a.root),this._.lastNode=(a.block||a.blockLimit).getNextSourceNode(!0))),this._.lastNode&&c.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=c.document.createText(''),this._.lastNode.insertAfter(l)),c=null);this._.started=1;l=c};a=this._.nextNode;c=this._.lastNode;for(this._.nextNode=null;a;){var f=0,p=a.hasAscendant('pre'),m=a.type!=CKEDITOR.NODE_ELEMENT,T=0;if(m)a.type==CKEDITOR.NODE_TEXT&&o.test(a.getText())&&(m=0);else{var h=a.getName();if(CKEDITOR.dtd.$block[h]&&'false'==a.getAttribute('contenteditable')){d=a;t(this,n,d);break}
else if(a.isBlockBoundary(this.forceBrBreak&&!p&&{br:1})){if('br'==h)m=1;else if(!l&&!a.getChildCount()&&'hr'!=h){d=a;g=a.equals(c);break};l&&(l.setEndAt(a,CKEDITOR.POSITION_BEFORE_START),'br'!=h&&(this._.nextNode=a));f=1}
else{if(a.getFirst()){l||(l=this.range.clone(),l.setStartAt(a,CKEDITOR.POSITION_BEFORE_START));a=a.getFirst();continue};m=1}};m&&!l&&(l=this.range.clone(),l.setStartAt(a,CKEDITOR.POSITION_BEFORE_START));g=(!f||m)&&a.equals(c);if(l&&!f)for(;!a.getNext(r)&&!g;){h=a.getParent();if(h.isBlockBoundary(this.forceBrBreak&&!p&&{br:1})){f=1;m=0;g||h.equals(c);l.setEndAt(h,CKEDITOR.POSITION_BEFORE_END);break};a=h;m=1;g=a.equals(c);T=1};m&&l.setEndAt(a,CKEDITOR.POSITION_AFTER_END);a=this._getNextSourceNode(a,T,c);if((g=!a)||f&&l)break};if(!d){if(!l)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;d=new CKEDITOR.dom.elementPath(l.startContainer,l.root);a=d.blockLimit;f={div:1,th:1,td:1};d=d.block;!d&&a&&!this.enforceRealBlocks&&f[a.getName()]&&l.checkStartOfBlock()&&l.checkEndOfBlock()&&!a.equals(l.root)?d=a:!d||this.enforceRealBlocks&&d.is(s)?(d=this.range.document.createElement(n),l.extractContents().appendTo(d),d.trim(),l.insertNode(d),u=E=!0):'li'!=d.getName()?l.checkStartOfBlock()&&l.checkEndOfBlock()||(d=d.clone(!1),l.extractContents().appendTo(d),d.trim(),E=l.splitBlock(),u=!E.wasStartOfBlock,E=!E.wasEndOfBlock,l.insertNode(d)):g||(this._.nextNode=d.equals(c)?null:this._getNextSourceNode(l.getBoundaryNodes().endNode,1,c))};u&&(u=d.getPrevious())&&u.type==CKEDITOR.NODE_ELEMENT&&('br'==u.getName()?u.remove():u.getLast()&&'br'==u.getLast().$.nodeName.toLowerCase()&&u.getLast().remove());E&&(u=d.getLast())&&u.type==CKEDITOR.NODE_ELEMENT&&'br'==u.getName()&&(!CKEDITOR.env.needsBrFiller||u.getPrevious(e)||u.getNext(e))&&u.remove();this._.nextNode||(this._.nextNode=g||d.equals(c)||!c?null:this._getNextSourceNode(d,1,c));return d},_getNextSourceNode:function(t,n,i){function o(e){return!(e.equals(i)||e.equals(a))};var a=this.range.root;for(t=t.getNextSourceNode(n,null,o);!e(t);)t=t.getNextSourceNode(n,null,o);return t}};CKEDITOR.dom.range.prototype.createIterator=function(){return new n(this)}})();CKEDITOR.command=function(e,t){this.uiItems=[];this.exec=function(n){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())return!1;this.editorFocus&&e.focus();return!1===this.fire('exec')?!0:!1!==t.exec.call(this,e,n)};this.refresh=function(e,n){if(!this.readOnly&&e.readOnly)return!0;if(this.context&&!n.isContextFor(this.context)||!this.checkAllowed(!0))return this.disable(),!0;this.startDisabled||this.enable();this.modes&&!this.modes[e.mode]&&this.disable();return!1===this.fire('refresh',{editor:e,path:n})?!0:t.refresh&&!1!==t.refresh.apply(this,arguments)};var n;this.checkAllowed=function(t){return t||'boolean'!=typeof n?n=e.activeFilter.checkFeature(this):n};CKEDITOR.tools.extend(this,t,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!t.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this)};CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&'undefined'!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){if(this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())return!1;this.previousState=this.state;this.state=e;this.fire('state');return!0},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;CKEDITOR.config={customConfig:'config.js',autoUpdateElement:!0,language:'',defaultLanguage:'en',contentsLangDirection:'',enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:'\x3c!DOCTYPE html\x3e',bodyId:'',bodyClass:'',fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl('contents.css'),extraPlugins:'',removePlugins:'',protectedSource:[],tabIndex:0,width:'',baseFloatZIndex:1E4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]};(function(){function f(e,t,o,a,l){var c,d;e=[];for(c in t){d=t[c];d='boolean'==typeof d?{}:'function'==typeof d?{match:d}:i(d);'$'!=c.charAt(0)&&(d.elements=c);o&&(d.featureName=o.toLowerCase());var s=d;s.elements=r(s.elements,/\s+/)||null;s.propertiesOnly=s.propertiesOnly||!0===s.elements;var m=/\s*,\s*/,g=void 0;for(g in u){s[g]=r(s[g],m)||null;var C=s,p=n[g],E=r(s[n[g]],m),f=s[g],O=[],I=!0,h=void 0;E?I=!1:E={};for(h in f)'!'==h.charAt(0)&&(h=h.slice(1),O.push(h),E[h]=!0,I=!1);for(;h=O.pop();)f[h]=f['!'+h],delete f['!'+h];C[p]=(I?!1:E)||null};s.match=s.match||null;a.push(d);e.push(d)};t=l.elements;l=l.generic;var T;o=0;for(a=e.length;o<a;++o){c=i(e[o]);d=!0===c.classes||!0===c.styles||!0===c.attributes;s=c;g=p=m=void 0;for(m in u)s[m]=A(s[m]);C=!0;for(g in n){m=n[g];p=s[m];E=[];f=void 0;for(f in p)-1<f.indexOf('*')?E.push(new RegExp('^'+f.replace(/\*/g,'.*')+'$')):E.push(f);p=E;p.length&&(s[m]=p,C=!1)};s.nothingRequired=C;s.noProperties=!(s.attributes||s.classes||s.styles);if(!0===c.elements||null===c.elements)l[d?'unshift':'push'](c);else for(T in s=c.elements,delete c.elements,s)if(t[T])t[T][d?'unshift':'push'](c);else t[T]=[c]}};function m(e,t,n,i){if(!e.match||e.match(t))if(i||S(e,t))if(e.propertiesOnly||(n.valid=!0),n.allAttributes||(n.allAttributes=g(e.attributes,t.attributes,n.validAttributes)),n.allStyles||(n.allStyles=g(e.styles,t.styles,n.validStyles)),!n.allClasses){e=e.classes;t=t.classes;i=n.validClasses;if(e)if(!0===e)e=!0;else{for(var a=0,r=t.length,o;a<r;++a)o=t[a],i[o]||(i[o]=e(o));e=!1}
else e=!1;n.allClasses=e}};function g(e,t,n){if(!e)return!1;if(!0===e)return!0;for(var i in t)n[i]||(n[i]=e(i));return!1};function E(e,t,n){if(!e.match||e.match(t)){if(e.noProperties)return!1;n.hadInvalidAttribute=p(e.attributes,t.attributes)||n.hadInvalidAttribute;n.hadInvalidStyle=p(e.styles,t.styles)||n.hadInvalidStyle;e=e.classes;t=t.classes;if(e){for(var o=!1,a=!0===e,i=t.length;i--;)if(a||e(t[i]))t.splice(i,1),o=!0;e=o}
else e=!1;n.hadInvalidClass=e||n.hadInvalidClass}};function p(e,t){if(!e)return!1;var i=!1,o=!0===e,n;for(n in t)if(o||e(n))delete t[n],i=!0;return i};function T(e,t,n){if(e.disabled||e.customConfig&&!n||!t)return!1;e._.cachedChecks={};return!0};function r(e,t){if(!e)return!1;if(!0===e)return e;if('string'==typeof e)return e=a(e),'*'==e?!0:CKEDITOR.tools.convertArrayToObject(e.split(t));if(CKEDITOR.tools.isArray(e))return e.length?CKEDITOR.tools.convertArrayToObject(e):!1;var i={},o=0,n;for(n in e)i[n]=e[n],o++;return o?i:!1};function S(e,t){if(e.nothingRequired)return!0;var n,i,o,a;if(o=e.requiredClasses)for(a=t.classes,n=0;n<o.length;++n)if(i=o[n],'string'==typeof i){if(-1==CKEDITOR.tools.indexOf(a,i))return!1}
else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(a,i))return!1;return C(t.styles,e.requiredStyles)&&C(t.attributes,e.requiredAttributes)};function C(e,t){if(!t)return!0;for(var i=0,n;i<t.length;++i)if(n=t[i],'string'==typeof n){if(!(n in e))return!1}
else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(e,n))return!1;return!0};function I(e){if(!e)return{};e=e.split(/\s*,\s*/).sort();for(var t={};e.length;)t[e.shift()]='cke-test';return t};function s(e){var n,t,i,o,r={},s=1;for(e=a(e);n=e.match(y);)(t=n[2])?(i=l(t,'styles'),o=l(t,'attrs'),t=l(t,'classes')):i=o=t=null,r['$'+s++]={elements:n[1],classes:t,styles:i,attributes:o},e=e.slice(n[0].length);return r};function l(e,t){var n=e.match(x[t]);return n?a(n[1]):null};function O(e){var n=e.styleBackup=e.attributes.style,t=e.classBackup=e.attributes['class'];e.styles||(e.styles=CKEDITOR.tools.parseCssText(n||'',1));e.classes||(e.classes=t?t.split(/\s+/):[])};function c(e,t,n,i){var T=0,r;i.toHtml&&(t.name=t.name.replace(k,'$1'));if(i.doCallbacks&&e.elementCallbacks){a:{r=e.elementCallbacks;for(var o=0,l=r.length,u;o<l;++o)if(u=r[o](t)){r=u;break e};r=void 0};if(r)return r};if(i.doTransform&&(r=e._.transformations[t.name])){O(t);for(o=0;o<r.length;++o)b(e,t,r[o]);D(t)};if(i.doFilter){a:{o=t.name;l=e._;e=l.allowedRules.elements[o];r=l.allowedRules.generic;o=l.disallowedRules.elements[o];l=l.disallowedRules.generic;u=i.skipRequired;var d={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},a,c;if(e||r){O(t);if(o)for(a=0,c=o.length;a<c;++a)if(!1===E(o[a],t,d)){e=null;break e};if(l)for(a=0,c=l.length;a<c;++a)E(l[a],t,d);if(e)for(a=0,c=e.length;a<c;++a)m(e[a],t,d,u);if(r)for(a=0,c=r.length;a<c;++a)m(r[a],t,d,u);e=d}
else e=null};if(!e||!e.valid)return n.push(t),1;c=e.validAttributes;var I=e.validStyles;r=e.validClasses;var o=t.attributes,p=t.styles,l=t.classes;u=t.classBackup;var f=t.styleBackup,s,g,h=[],d=[],C=/^data-cke-/;a=!1;delete o.style;delete o['class'];delete t.classBackup;delete t.styleBackup;if(!e.allAttributes)for(s in o)c[s]||(C.test(s)?s==(g=s.replace(/^data-cke-saved-/,''))||c[g]||(delete o[s],a=!0):(delete o[s],a=!0));if(!e.allStyles||e.hadInvalidStyle){for(s in p)e.allStyles||I[s]?h.push(s+':'+p[s]):a=!0;h.length&&(o.style=h.sort().join('; '))}
else f&&(o.style=f);if(!e.allClasses||e.hadInvalidClass){for(s=0;s<l.length;++s)(e.allClasses||r[l[s]])&&d.push(l[s]);d.length&&(o['class']=d.sort().join(' '));u&&d.length<u.split(/\s+/).length&&(a=!0)}
else u&&(o['class']=u);a&&(T=1);if(!i.skipFinalValidation&&!R(t))return n.push(t),1};i.toHtml&&(t.name=t.name.replace(N,'cke:$1'));return T};function w(e){var t=[],n;for(n in e)-1<n.indexOf('*')&&t.push(n.replace(/\*/g,'.*'));return t.length?new RegExp('^(?:'+t.join('|')+')$'):null};function D(e){var t=e.attributes,n;delete t.style;delete t['class'];if(n=CKEDITOR.tools.writeCssText(e.styles,!0))t.style=n;e.classes.length&&(t['class']=e.classes.sort().join(' '))};function R(e){switch(e.name){case'a':if(!(e.children.length||e.attributes.name||e.attributes.id))return!1;break;case'img':if(!e.attributes.src)return!1};return!0};function A(e){if(!e)return!1;if(!0===e)return!0;var t=w(e);return function(n){return n in e||t&&n.match(t)}};function d(){return new CKEDITOR.htmlParser.element('br')};function v(t){return t.type==CKEDITOR.NODE_ELEMENT&&('br'==t.name||e.$block[t.name])};function t(t,n,i){var a=t.name;if(e.$empty[a]||!t.children.length)'hr'==a&&'br'==n?t.replaceWith(d()):(t.parent&&i.push({check:'it',el:t.parent}),t.remove());else if(e.$block[a]||'tr'==a)if('br'==n)t.previous&&!v(t.previous)&&(n=d(),n.insertBefore(t)),t.next&&!v(t.next)&&(n=d(),n.insertAfter(t)),t.replaceWithChildren();else{var a=t.children,r;n:{r=e[n];for(var l=0,c=a.length,o;l<c;++l)if(o=a[l],o.type==CKEDITOR.NODE_ELEMENT&&!r[o.name]){r=!1;break n};r=!0};if(r)t.name=n,t.attributes={},i.push({check:'parent-down',el:t});else{r=t.parent;for(var l=r.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||'body'==r.name,s,u,c=a.length;0<c;)o=a[--c],l&&(o.type==CKEDITOR.NODE_TEXT||o.type==CKEDITOR.NODE_ELEMENT&&e.$inline[o.name])?(s||(s=new CKEDITOR.htmlParser.element(n),s.insertAfter(t),i.push({check:'parent-down',el:s})),s.add(o,0)):(s=null,u=e[r.name]||e.span,o.insertAfter(t),r.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||o.type!=CKEDITOR.NODE_ELEMENT||u[o.name]||i.push({check:'el-up',el:o}));t.remove()}}
else a in{style:1,script:1};?t.remove():(t.parent&&i.push({check:'it',el:t.parent}),t.replaceWithChildren())};function b(e,t,n){var o,i;for(o=0;o<n.length;++o)if(i=n[o],!(i.check&&!e.check(i.check,!1)||i.left&&!i.left(t))){i.right(t,h);break}};function K(e,t){var n=t.getDefinition(),o=n.attributes,r=n.styles,i,a,s,l;if(e.name!=n.element)return!1;for(i in o)if('class'==i)for(n=o[i].split(/\s+/),s=e.classes.join('|');l=n.pop();){if(-1==s.indexOf(l))return!1}
else if(e.attributes[i]!=o[i])return!1;for(a in r)if(e.styles[a]!=r[a])return!1;return!0};function L(e,t){var n,i;'string'==typeof e?n=e:e instanceof CKEDITOR.style?i=e:(n=e[0],i=e[1]);return[{element:n,left:i,right:function(e,n){n.transform(e,t)}}]};function B(e){return function(t){return K(t,e)}};function P(e){return function(t,n){n[e](t)}};var e=CKEDITOR.dtd,i=CKEDITOR.tools.copy,a=CKEDITOR.tools.trim,o=['','p','br','div'];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(e){this.allowedContent=[];this.disallowedContent=[];this.elementCallbacks=null;this.disabled=!1;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}};CKEDITOR.filter.instances[this.id]=this;if(e instanceof CKEDITOR.editor){e=this.editor=e;this.customConfig=!0;var t=e.config.allowedContent;!0===t?this.disabled=!0:(t||(this.customConfig=!1),this.allow(t,'config',1),this.allow(e.config.extraAllowedContent,'extra',1),this.allow(o[e.enterMode]+' '+o[e.shiftEnterMode],'default',1),this.disallow(e.config.disallowedContent))}
else this.customConfig=!1,this.allow(e,'default',1)};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function(e,t,n){if(!T(this,e,n))return!1;var o,a;if('string'==typeof e)e=s(e);else if(e instanceof CKEDITOR.style){if(e.toAllowedContentRules)return this.allow(e.toAllowedContentRules(this.editor),t,n);o=e.getDefinition();e={};n=o.attributes;e[o.element]=o={styles:o.styles,requiredStyles:o.styles&&CKEDITOR.tools.objectKeys(o.styles)};n&&(n=i(n),o.classes=n['class']?n['class'].split(/\s+/):null,o.requiredClasses=o.classes,delete n['class'],o.attributes=n,o.requiredAttributes=n&&CKEDITOR.tools.objectKeys(n))}
else if(CKEDITOR.tools.isArray(e)){for(o=0;o<e.length;++o)a=this.allow(e[o],t,n);return a};f(this,e,t,this.allowedContent,this._.allowedRules);return!0},applyTo:function(n,i,a,r){if(this.disabled)return!1;var m=this,s=[],u=this.editor&&this.editor.config.protectedSource,h,f=!1,g={doFilter:!a,doTransform:!0,doCallbacks:!0,toHtml:i};n.forEach(function(e){if(e.type==CKEDITOR.NODE_ELEMENT){if('off'==e.attributes['data-cke-filter'])return!1;if(!i||'span'!=e.name||!~CKEDITOR.tools.objectKeys(e.attributes).join('|').indexOf('data-cke-'))if(h=c(m,e,s,g),h&1)f=!0;else if(h&2)return!1}
else if(e.type==CKEDITOR.NODE_COMMENT&&e.value.match(/^\{cke_protected\}(?!\{C\})/)){var n;e:{var t=decodeURIComponent(e.value.replace(/^\{cke_protected\}/,''));n=[];var a,o,r;if(u)for(o=0;o<u.length;++o)if((r=t.match(u[o]))&&r[0].length==t.length){n=!0;break e};t=CKEDITOR.htmlParser.fragment.fromHtml(t);1==t.children.length&&(a=t.children[0]).type==CKEDITOR.NODE_ELEMENT&&c(m,a,n,g);n=!n.length};n||s.push(e)}},null,!0);s.length&&(f=!0);var d;n=[];r=o[r||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var l;a=s.pop();)a.type==CKEDITOR.NODE_ELEMENT?t(a,r,n):a.remove();for(;d=n.pop();)if(a=d.el,a.parent)switch(l=e[a.parent.name]||e.span,d.check){case'it':e.$removeEmpty[a.name]&&!a.children.length?t(a,r,n):R(a)||t(a,r,n);break;case'el-up':a.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||l[a.name]||t(a,r,n);break;case'parent-down':a.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||l[a.name]||t(a.parent,r,n)};return f},checkFeature:function(e){if(this.disabled||!e)return!0;e.toFeature&&(e=e.toFeature(this.editor));return!e.requiredContent||this.check(e.requiredContent)},disable:function(){this.disabled=!0},disallow:function(e){if(!T(this,e,!0))return!1;'string'==typeof e&&(e=s(e));f(this,e,null,this.disallowedContent,this._.disallowedRules);return!0},addContentForms:function(e){if(!this.disabled&&e){var t,n,o=[],i;for(t=0;t<e.length&&!i;++t)n=e[t],('string'==typeof n||n instanceof CKEDITOR.style)&&this.check(n)&&(i=n);if(i){for(t=0;t<e.length;++t)o.push(L(e[t],i));this.addTransformations(o)}}},addElementCallback:function(e){this.elementCallbacks||(this.elementCallbacks=[]);this.elementCallbacks.push(e)},addFeature:function(e){if(this.disabled||!e)return!0;e.toFeature&&(e=e.toFeature(this.editor));this.allow(e.allowedContent,e.name);this.addTransformations(e.contentTransformations);this.addContentForms(e.contentForms);return e.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(e.requiredContent):!0},addTransformations:function(e){var i,d;if(!this.disabled&&e){var c=this._.transformations,l;for(l=0;l<e.length;++l){i=e[l];var n=void 0,s=void 0,t=void 0,o=void 0,a=void 0,r=void 0;d=[];for(s=0;s<i.length;++s)t=i[s],'string'==typeof t?(t=t.split(/\s*:\s*/),o=t[0],a=null,r=t[1]):(o=t.check,a=t.left,r=t.right),n||(n=t,n=n.element?n.element:o?o.match(/^([a-z0-9]+)/i)[0]:n.left.getDefinition().element),a instanceof CKEDITOR.style&&(a=B(a)),d.push({check:o==n?null:o,left:a,right:'string'==typeof r?P(r):r});i=n;c[i]||(c[i]=[]);c[i].push(d)}}},check:function(e,t,n){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(e)){for(var o=e.length;o--;)if(this.check(e[o],t,n))return!0;return!1};var a,l;if('string'==typeof e){l=e+'\x3c'+(!1===t?'0':'1')+(n?'1':'0')+'\x3e';if(l in this._.cachedChecks)return this._.cachedChecks[l];o=s(e).$1;a=o.styles;var r=o.classes;o.name=o.elements;o.classes=r=r?r.split(/\s*,\s*/):[];o.styles=I(a);o.attributes=I(o.attributes);o.children=[];r.length&&(o.attributes['class']=r.join(' '));a&&(o.attributes.style=CKEDITOR.tools.writeCssText(o.styles));a=o}
else o=e.getDefinition(),a=o.styles,r=o.attributes||{},a&&!CKEDITOR.tools.isEmpty(a)?(a=i(a),r.style=CKEDITOR.tools.writeCssText(a,!0)):a={},a={name:o.element,attributes:r,classes:r['class']?r['class'].split(/\s+/):[],styles:a,children:[]};var r=CKEDITOR.tools.clone(a),u=[],d;if(!1!==t&&(d=this._.transformations[a.name])){for(o=0;o<d.length;++o)b(this,a,d[o]);D(a)};c(this,r,u,{doFilter:!0,doTransform:!1!==t,skipRequired:!n,skipFinalValidation:!n});t=0<u.length?!1:CKEDITOR.tools.objectCompare(a.attributes,r.attributes,!0)?!0:!1;'string'==typeof e&&(this._.cachedChecks[l]=t);return t},getAllowedEnterMode:function(){var e=['p','div','br'],t={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(n,i){var a=e.slice(),r;if(this.check(o[n]))return n;for(i||(a=a.reverse());r=a.pop();)if(this.check(r))return t[r];return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id];delete this._;delete this.allowedContent;delete this.disallowedContent}};var u={styles:1,attributes:1,classes:1},n={styles:'requiredStyles',attributes:'requiredAttributes',classes:'requiredClasses'},y=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,x={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},k=/^cke:(object|embed|param)$/,N=/^(object|embed|param)$/,h;h=CKEDITOR.filter.transformationsTools={sizeToStyle:function(e){this.lengthToStyle(e,'width');this.lengthToStyle(e,'height')},sizeToAttribute:function(e){this.lengthToAttribute(e,'width');this.lengthToAttribute(e,'height')},lengthToStyle:function(e,t,n){n=n||t;if(!(n in e.styles)){var i=e.attributes[t];i&&(/^\d+$/.test(i)&&(i+='px'),e.styles[n]=i)};delete e.attributes[t]},lengthToAttribute:function(e,t,n){n=n||t;if(!(n in e.attributes)){var i=e.styles[t],o=i&&i.match(/^(\d+)(?:\.\d*)?px$/);o?e.attributes[n]=o[1]:'cke-test'==i&&(e.attributes[n]='cke-test')};delete e.styles[t]},alignmentToStyle:function(e){if(!('float'in e.styles)){var t=e.attributes.align;if('left'==t||'right'==t)e.styles['float']=t};delete e.attributes.align},alignmentToAttribute:function(e){if(!('align'in e.attributes)){var t=e.styles['float'];if('left'==t||'right'==t)e.attributes.align=t};delete e.styles['float']},matchesStyle:K,transform:function(e,t){if('string'==typeof t)e.name=t;else{var n=t.getDefinition(),s=n.styles,o=n.attributes,i,a,l,r;e.name=n.element;for(i in o)if('class'==i)for(n=e.classes.join('|'),l=o[i].split(/\s+/);r=l.pop();)-1==n.indexOf(r)&&e.classes.push(r);else e.attributes[i]=o[i];for(a in s)e.styles[a]=s[a]}}}})();(function(){CKEDITOR.focusManager=function(e){if(e.focusManager)return e.focusManager;this.hasFocus=!1;this.currentActive=null;this._={editor:e};return this};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer);e&&(this.currentActive=e);this.hasFocus||this._.locked||((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass('cke_focus'),this._.editor.fire('focus'))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function n(){if(this.hasFocus){this.hasFocus=!1;var e=this._.editor.container;e&&e.removeClass('cke_focus');this._.editor.fire('blur')}};if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var t=CKEDITOR.focusManager._.blurDelay;e||!t?n.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;n.call(this)},t,this)}},add:function(e,t){var n=e.getCustomData('focusmanager');if(!n||n!=this){n&&n.remove(e);var n='focus',o='blur';t&&(CKEDITOR.env.ie?(n='focusin',o='focusout'):CKEDITOR.event.useCapture=1);var i={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(n,i.focus,this);e.on(o,i.blur,this);t&&(CKEDITOR.event.useCapture=0);e.setCustomData('focusmanager',this);e.setCustomData('focusmanager_handlers',i)}},remove:function(e){e.removeCustomData('focusmanager');var t=e.removeCustomData('focusmanager_handlers');e.removeListener('blur',t.blur);e.removeListener('focus',t.focus)}}})();CKEDITOR.keystrokeHandler=function(e){if(e.keystrokeHandler)return e.keystrokeHandler;this.keystrokes={};this.blockedKeystrokes={};this._={editor:e};return this};(function(){var e,t=function(t){t=t.data;var n=t.getKeystroke(),i=this.keystrokes[n],o=this._.editor;e=!1===o.fire('key',{keyCode:n,domEvent:t});e||(i&&(e=!1!==o.execCommand(i,{from:'keystrokeHandler'})),e||(e=!!this.blockedKeystrokes[n]));e&&t.preventDefault(!0);return!e},n=function(t){e&&(e=!1,t.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on('keydown',t,this);if(CKEDITOR.env.gecko&&CKEDITOR.env.mac)e.on('keypress',n,this)}}})();(function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,'de-ch':1,el:1,'en-au':1,'en-ca':1,'en-gb':1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,'fr-ca':1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,'pt-br':1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,'sr-latn':1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,'zh-cn':1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,t,n){e&&CKEDITOR.lang.languages[e]||(e=this.detect(t,e));var i=this;t=function(){i[e].dir=i.rtl[e]?'rtl':'ltr';n(e,i[e])};this[e]?t():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl('lang/'+e+'.js'),t,this)},detect:function(e,t){var o=this.languages;t=t||navigator.userLanguage||navigator.language||e;var i=t.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),n=i[1],i=i[2];o[n+'-'+i]?n=n+'-'+i:o[n]||(n=null);CKEDITOR.lang.detect=n?function(){return n}:function(e){return e};return n||e}}})();CKEDITOR.scriptLoader=function(){var t={},e={};return{load:function(n,i,o,a){var f='string'==typeof n;f&&(n=[n]);o||(o=CKEDITOR);var l=n.length,d=[],u=[],h=function(e){i&&(f?i.call(o,e):i.call(o,d,u))};if(0===l)h(!0);else{var c=function(e,t){(t?d:u).push(e);0>=--l&&(a&&CKEDITOR.document.getDocumentElement().removeStyle('cursor'),h(t))},s=function(n,i){t[n]=1;var a=e[n];delete e[n];for(var o=0;o<a.length;o++)a[o](n,i)},m=function(n){if(t[n])c(n,!0);else{var a=e[n]||(e[n]=[]);a.push(c);if(!(1<a.length)){var o=new CKEDITOR.dom.element('script');o.setAttributes({type:'text/javascript',src:n});i&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?o.$.onreadystatechange=function(){if('loaded'==o.$.readyState||'complete'==o.$.readyState)o.$.onreadystatechange=null,s(n,!0)}:(o.$.onload=function(){setTimeout(function(){s(n,!0)},0)},o.$.onerror=function(){s(n,!1)}));o.appendTo(CKEDITOR.document.getHead())}}};a&&CKEDITOR.document.getDocumentElement().setStyle('cursor','wait');for(var r=0;r<l;r++)m(n[r])}},queue:function(){function t(){var t;(t=e[0])&&this.load(t.scriptUrl,t.callback,CKEDITOR,0)};var e=[];return function(n,i){var o=this;e.push({scriptUrl:n,callback:function(){i&&i.apply(this,arguments);e.shift();t.call(o)}});1==e.length&&t.call(this)}}()}}();CKEDITOR.resourceManager=function(e,t){this.basePath=e;this.fileName=t;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};CKEDITOR.resourceManager.prototype={add:function(e,t){if(this.registered[e])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.');var n=this.registered[e]=t||{};n.name=e;n.path=this.getPath(e);CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+'Ready',n);return this.get(e)},get:function(e){return this.registered[e]||null},getPath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(t&&t.dir||this.basePath+e+'/')},getFilePath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(t?t.file:this.fileName+'.js'))},addExternal:function(e,t,n){e=e.split(',');for(var i=0;i<e.length;i++){var o=e[i];n||(t=t.replace(/[^\/]+$/,function(e){n=e;return''}));this.externals[o]={dir:t,file:n||this.fileName+'.js'}}},load:function(e,t,n){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var l=this.loaded,d=this.registered,c=[],o={},r={},s=0;s<e.length;s++){var i=e[s];if(i)if(l[i]||d[i])r[i]=this.get(i);else{var a=this.getFilePath(i);c.push(a);a in o||(o[a]=[]);o[a].push(i)}};CKEDITOR.scriptLoader.load(c,function(e,i){if(i.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+o[i[0]].join(',')+'" was not found at "'+i[0]+'".');for(var c=0;c<e.length;c++)for(var d=o[e[c]],s=0;s<d.length;s++){var a=d[s];r[a]=this.get(a);l[a]=1};t.call(n,r)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager('plugins/','plugin');CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(e){var t={};return function(n,i,o){var a={},r=function(n){e.call(this,n,function(e){CKEDITOR.tools.extend(a,e);var u=[],l;for(l in e){var n=e[l],s=n&&n.requires;if(!t[l]){if(n.icons)for(var c=n.icons.split(','),d=c.length;d--;)CKEDITOR.skin.addIcon(c[d],n.path+'icons/'+(CKEDITOR.env.hidpi&&n.hidpi?'hidpi/':'')+c[d]+'.png');t[l]=1};if(s)for(s.split&&(s=s.split(',')),n=0;n<s.length;n++)a[s[n]]||u.push(s[n])};if(u.length)r.call(this,u);else{for(l in a)n=a[l],n.onLoad&&!n.onLoad._called&&(!1===n.onLoad()&&delete a[l],n.onLoad._called=1);i&&i.call(o||window,a)}},this)};r.call(this,n)}});CKEDITOR.plugins.setLang=function(e,t,n){var i=this.get(e);e=i.langEntries||(i.langEntries={});i=i.lang||(i.lang=[]);i.split&&(i=i.split(','));-1==CKEDITOR.tools.indexOf(i,t)&&i.push(t);e[t]=n};CKEDITOR.ui=function(e){if(e.ui)return e.ui;this.items={};this.instances={};this.editor=e;this._={handlers:{}};return this};CKEDITOR.ui.prototype={add:function(e,t,n){n.name=e.toLowerCase();var i=this.items[e]={type:t,command:n.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(i,n)},get:function(e){return this.instances[e]},create:function(e){var n=this.items[e],t=n&&this._.handlers[n.type],i=n&&n.command&&this.editor.getCommand(n.command),t=t&&t.create.apply(this,n.args);this.instances[e]=t;i&&i.uiItems.push(t);t&&!t.type&&(t.type=n.type);return t},addHandler:function(e,t){this._.handlers[e]=t},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+'_'+e}};CKEDITOR.event.implementOn(CKEDITOR.ui);(function(){function n(e,t,n){CKEDITOR.event.call(this);e=e&&CKEDITOR.tools.clone(e);if(void 0!==t){if(!(t instanceof CKEDITOR.dom.element))throw Error('Expect element of type CKEDITOR.dom.element.');if(!n)throw Error('One of the element modes must be specified.');if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&n==CKEDITOR.ELEMENT_MODE_INLINE)throw Error('Inline element mode is not supported on IE quirks.');if(!c(t,n))throw Error('The specified element mode is not supported on element: "'+t.getName()+'".');this.element=t;this.elementMode=n;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(t.getId()||t.getNameAtt())}
else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={};this.commands={};this.templates={};this.name=this.name||l();this.id=CKEDITOR.tools.getNextId();this.status='unloaded';this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on('readOnly',i);this.on('selectionChange',function(e){a(this,e.data.path)});this.on('activeFilterChange',function(){a(this,this.elementPath(),!0)});this.on('mode',i);this.on('instanceReady',function(){this.config.startupFocus&&this.focus()});CKEDITOR.fire('instanceCreated',null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){'destroyed'!==this.status?d(this,e):CKEDITOR.warn('editor-incorrect-destroy')},0,this)};function l(){do var e='editor'+ ++s;while(CKEDITOR.instances[e]);return e};function c(e,t){return t==CKEDITOR.ELEMENT_MODE_INLINE?e.is(CKEDITOR.dtd.$editable)||e.is('textarea'):t==CKEDITOR.ELEMENT_MODE_REPLACE?!e.is(CKEDITOR.dtd.$nonBodyContent):1};function i(){var e=this.commands,t;for(t in e)o(this,e[t])};function o(e,t){t[t.startDisabled?'disable':e.readOnly&&!t.readOnly?'disable':t.modes[e.mode]?'enable':'disable']()};function a(e,t,n){if(t){var i,o,a=e.commands;for(o in a)i=a[o],(n||i.contextSensitive)&&i.refresh(e,t)}};function e(n){var i=n.config.customConfig;if(!i)return!1;var i=CKEDITOR.getUrl(i),o=t[i]||(t[i]={});o.fn?(o.fn.call(n,n.config),CKEDITOR.getUrl(n.config.customConfig)!=i&&e(n)||n.fireOnce('customConfigLoaded')):CKEDITOR.scriptLoader.queue(i,function(){o.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};e(n)});return!0};function d(t,n){t.on('customConfigLoaded',function(){if(n){if(n.on)for(var e in n.on)t.on(e,n.on[e]);CKEDITOR.tools.extend(t.config,n,!0);delete t.config.on};e=t.config;t.readOnly=e.readOnly?!0:t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?t.element.is('textarea')?t.element.hasAttribute('disabled')||t.element.hasAttribute('readonly'):t.element.isReadOnly():t.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.element.hasAttribute('disabled')||t.element.hasAttribute('readonly'):!1;t.blockless=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(t.element.is('textarea')||CKEDITOR.dtd[t.element.getName()].p):!1;t.tabIndex=e.tabIndex||t.element&&t.element.getAttribute('tabindex')||0;t.activeEnterMode=t.enterMode=t.blockless?CKEDITOR.ENTER_BR:e.enterMode;t.activeShiftEnterMode=t.shiftEnterMode=t.blockless?CKEDITOR.ENTER_BR:e.shiftEnterMode;e.skin&&(CKEDITOR.skinName=e.skin);t.fireOnce('configLoaded');t.dataProcessor=new CKEDITOR.htmlDataProcessor(t);t.filter=t.activeFilter=new CKEDITOR.filter(t);u(t)});n&&null!=n.customConfig&&(t.config.customConfig=n.customConfig);e(t)||t.fireOnce('customConfigLoaded')};function u(e){CKEDITOR.skin.loadPart('editor',function(){h(e)})};function h(e){CKEDITOR.lang.load(e.config.language,e.config.defaultLanguage,function(t,n){var i=e.config.title;e.langCode=t;e.lang=CKEDITOR.tools.prototypedCopy(n);e.title='string'==typeof i||!1===i?i:[e.lang.editor,e.name].join(', ');e.config.contentsLangDirection||(e.config.contentsLangDirection=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.getDirection(1):e.lang.dir);e.fire('langLoaded');f(e)})};function f(e){e.getStylesSet(function(t){e.once('loaded',function(){e.fire('stylesSet',{styles:t})},null,null,1);m(e)})};function m(e){var n=e.config,t=n.plugins,i=n.extraPlugins,a=n.removePlugins;if(i)var r=new RegExp('(?:^|,)(?:'+i.replace(/\s*,\s*/g,'|')+')(?\x3d,|$)','g'),t=t.replace(r,''),t=t+(','+i);if(a)var o=new RegExp('(?:^|,)(?:'+a.replace(/\s*,\s*/g,'|')+')(?\x3d,|$)','g'),t=t.replace(o,'');CKEDITOR.env.air&&(t+=',adobeair');CKEDITOR.plugins.load(t.split(','),function(t){var c=[],d=[],h=[];e.plugins=t;for(var l in t){var r=t[l],a=r.lang,i=null,s=r.requires,u;CKEDITOR.tools.isArray(s)&&(s=s.join(','));if(s&&(u=s.match(o)))for(;s=u.pop();)CKEDITOR.error('editor-plugin-required',{plugin:s.replace(',',''),requiredBy:l});a&&!e.lang[l]&&(a.split&&(a=a.split(',')),0<=CKEDITOR.tools.indexOf(a,e.langCode)?i=e.langCode:(i=e.langCode.replace(/-.*/,''),i=i!=e.langCode&&0<=CKEDITOR.tools.indexOf(a,i)?i:0<=CKEDITOR.tools.indexOf(a,'en')?'en':a[0]),r.langEntries&&r.langEntries[i]?(e.lang[l]=r.langEntries[i],i=null):h.push(CKEDITOR.getUrl(r.path+'lang/'+i+'.js')));d.push(i);c.push(r)};CKEDITOR.scriptLoader.load(h,function(){for(var a=['beforeInit','init','afterInit'],o=0;o<a.length;o++)for(var t=0;t<c.length;t++){var i=c[t];0===o&&d[t]&&i.lang&&i.langEntries&&(e.lang[i.name]=i.langEntries[d[t]]);if(i[a[o]])i[a[o]](e)};e.fireOnce('pluginsLoaded');n.keystrokes&&e.setKeystroke(e.config.keystrokes);for(t=0;t<e.config.blockedKeystrokes.length;t++)e.keystrokeHandler.blockedKeystrokes[e.config.blockedKeystrokes[t]]=1;e.status='loaded';e.fireOnce('loaded');CKEDITOR.fire('instanceLoaded',null,e)})})};function r(){var t=this.element;if(t&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var e=this.getData();this.config.htmlEncodeOutput&&(e=CKEDITOR.tools.htmlEncode(e));t.is('textarea')?t.setValue(e):t.setHtml(e);return!0};return!1};n.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=n;var s=0,t={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(e,t){t.name=e.toLowerCase();var n=new CKEDITOR.command(this,t);this.mode&&o(this,n);return this.commands[e]=n},_attachToForm:function(){function i(e){t.updateElement();t._.required&&!n.getValue()&&!1===t.fire('required')&&e.data.preventDefault()};function o(e){return!!(e&&e.call&&e.apply)};var t=this,n=t.element,e=new CKEDITOR.dom.element(n.$.form);n.is('textarea')&&e&&(e.on('submit',i),o(e.$.submit)&&(e.$.submit=CKEDITOR.tools.override(e.$.submit,function(e){return function(){i();e.apply?e.apply(this):e()}})),t.on('destroy',function(){e.removeListener('submit',i)}))},destroy:function(e){this.fire('beforeDestroy');!e&&r.call(this);this.editable(null);this.filter&&(this.filter.destroy(),delete this.filter);delete this.activeFilter;this.status='destroyed';this.fire('destroy');this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire('instanceDestroyed',null,this)},elementPath:function(e){if(!e){e=this.getSelection();if(!e)return null;e=e.getStartElement()};return e?new CKEDITOR.dom.elementPath(e,this.editable()):null},createRange:function(){var e=this.editable();return e?new CKEDITOR.dom.range(e):null},execCommand:function(e,t){var n=this.getCommand(e),i={name:e,commandData:t,command:n};return n&&n.state!=CKEDITOR.TRISTATE_DISABLED&&!1!==this.fire('beforeCommandExec',i)&&(i.returnValue=n.exec(i.commandData),!n.async&&!1!==this.fire('afterCommandExec',i))?i.returnValue:!1},getCommand:function(e){return this.commands[e]},getData:function(e){!e&&this.fire('beforeGetData');var t=this._.data;'string'!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is('textarea')?t.getValue():t.getHtml():'');t={dataValue:t};!e&&this.fire('getData',t);return t.dataValue},getSnapshot:function(){var e=this.fire('getSnapshot');'string'!=typeof e&&(e=(e=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?e.is('textarea')?e.getValue():e.getHtml():'');return e},loadSnapshot:function(e){this.fire('loadSnapshot',e)},setData:function(e,t,n){var o=!0,i=t;t&&'object'==typeof t&&(n=t.internal,i=t.callback,o=!t.noSnapshot);!n&&o&&this.fire('saveSnapshot');if(i||!n)this.once('dataReady',function(e){!n&&o&&this.fire('saveSnapshot');i&&i.call(e.editor)});e={dataValue:e};!n&&this.fire('setData',e);this._.data=e.dataValue;!n&&this.fire('afterSetData',e)},setReadOnly:function(e){e=null==e||e;this.readOnly!=e&&(this.readOnly=e,this.keystrokeHandler.blockedKeystrokes[8]=+e,this.editable().setReadOnly(e),this.fire('readOnly'))},insertHtml:function(e,t,n){this.fire('insertHtml',{dataValue:e,mode:t,range:n})},insertText:function(e){this.fire('insertText',e)},insertElement:function(e){this.fire('insertElement',e)},getSelectedHtml:function(e){var o=this.editable(),n=this.getSelection(),n=n&&n.getRanges();if(!o||!n||0===n.length)return null;for(var r=new CKEDITOR.dom.documentFragment,t,s,l,c=0;c<n.length;c++){var a=n[c],i=a.startContainer;i.getName&&'tr'==i.getName()?(t||(t=i.getAscendant('table').clone(),t.append(i.getAscendant('tbody').clone()),r.append(t),t=t.findOne('tbody')),s&&s.equals(i)||(s=i,l=i.clone(),t.append(l)),l.append(a.cloneContents())):r.append(a.cloneContents())};o=t?r:o.getHtmlFromRange(n[0]);return e?o.getHtml():o},extractSelectedHtml:function(e,t){var n=this.editable(),i=this.getSelection().getRanges();if(!n||0===i.length)return null;i=i[0];n=n.extractHtmlFromRange(i,t);t||this.getSelection().selectRanges([i]);return e?n.getHtml():n},focus:function(){this.fire('beforeFocus')},checkDirty:function(){return'ready'==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return r.call(this)},setKeystroke:function(){for(var n=this.keystrokeHandler.keystrokes,i=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],e,t,o=i.length;o--;)e=i[o],t=0,CKEDITOR.tools.isArray(e)&&(t=e[1],e=e[0]),t?n[e]=t:delete n[e]},addFeature:function(e){return this.filter.addFeature(e)},setActiveFilter:function(e){e||(e=this.filter);this.activeFilter!==e&&(this.activeFilter=e,this.fire('activeFilterChange'),e===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(e.getAllowedEnterMode(this.enterMode),e.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(e,t){e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.enterMode;t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.shiftEnterMode;if(this.activeEnterMode!=e||this.activeShiftEnterMode!=t)this.activeEnterMode=e,this.activeShiftEnterMode=t,this.fire('activeEnterModeChange')},showNotification:function(e){alert(e)}})})();CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.ELEMENT_MODE_INLINE=3;CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}};(function(){var e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(n){for(var o,i,s=0,a;o=this._.htmlPartsRegex.exec(n);){i=o.index;if(i>s)if(s=n.substring(s,i),a)a.push(s);else this.onText(s);s=this._.htmlPartsRegex.lastIndex;if(i=o[1])if(i=i.toLowerCase(),a&&CKEDITOR.dtd.$cdata[i]&&(this.onCDATA(a.join('')),a=null),!a){this.onTagClose(i);continue};if(a)a.push(o[0]);else if(i=o[3]){if(i=i.toLowerCase(),!/="/.test(i)){var c={},r,d=o[4];o=!!o[5];if(d)for(;r=e.exec(d);){var l=r[1].toLowerCase();r=r[2]||r[3]||r[4]||'';c[l]=!r&&t[l]?l:CKEDITOR.tools.htmlDecodeAttr(r)};this.onTagOpen(i,c,o);!a&&CKEDITOR.dtd.$cdata[i]&&(a=[])}}
else if(i=o[2])this.onComment(i)};if(n.length>s)this.onText(n.substring(s,n.length))}}})();CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(e){this._.output.push('\x3c',e)},openTagClose:function(e,t){t?this._.output.push(' /\x3e'):this._.output.push('\x3e')},attribute:function(e,t){'string'==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t));this._.output.push(' ',e,'\x3d"',t,'"')},closeTag:function(e){this._.output.push('\x3c/',e,'\x3e')},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push('\x3c!--',e,'--\x3e')},write:function(e){this._.output.push(e)},reset:function(){this._.output=[];this._.indent=!1},getHtml:function(e){var t=this._.output.join('');e&&this.reset();return t}}});'use strict';(function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var n=this.parent.children,i=CKEDITOR.tools.indexOf(n,this),e=this.previous,t=this.next;e&&(e.next=t);t&&(t.previous=e);n.splice(i,1);this.parent=null},replaceWith:function(e){var t=this.parent.children,o=CKEDITOR.tools.indexOf(t,this),n=e.previous=this.previous,i=e.next=this.next;n&&(n.next=e);i&&(i.previous=e);t[o]=e;e.parent=this.parent;this.parent=null},insertAfter:function(e){var t=e.parent.children,i=CKEDITOR.tools.indexOf(t,e),n=e.next;t.splice(i+1,0,this);this.next=e.next;this.previous=e;e.next=this;n&&(n.previous=this);this.parent=e.parent},insertBefore:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e);t.splice(n,0,this);this.next=e;(this.previous=e.previous)&&(e.previous.next=this);e.previous=this;this.parent=e.parent},getAscendant:function(e){var n='function'==typeof e?e:'string'==typeof e?function(t){return t.name==e}:function(t){return t.name in e},t=this.parent;for(;t&&t.type==CKEDITOR.NODE_ELEMENT;){if(n(t))return t;t=t.parent};return null},wrapWith:function(e){this.replaceWith(e);e.add(this);return e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}}})();'use strict';CKEDITOR.htmlParser.comment=function(e){this.value=e;this._={isBlockLike:!1}};CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,t){var n=this.value;if(!(n=e.onComment(t,n,this)))return this.remove(),!1;if('string'!=typeof n)return this.replaceWith(n),!1;this.value=n;return!0},writeHtml:function(e,t){t&&this.filter(t);e.comment(this.value)}});'use strict';(function(){CKEDITOR.htmlParser.text=function(e){this.value=e;this._={isBlockLike:!1}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,t){if(!(this.value=e.onText(t,this.value,this)))return this.remove(),!1},writeHtml:function(e,t){t&&this.filter(t);e.text(this.value)}})})();'use strict';(function(){CKEDITOR.htmlParser.cdata=function(e){this.value=e};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}})})();'use strict';CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:!0,hasInlineStarted:!1}};(function(){function i(e){return e.attributes['data-cke-survive']?!1:'a'==e.name&&e.attributes.href||CKEDITOR.dtd.$removeEmpty[e.name]};var e=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),t={ol:1,ul:1},n=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),o={ul:'li',ol:'li',dl:'dd',table:'tbody',tbody:'tr',thead:'tr',tfoot:'tr',tr:'td'};CKEDITOR.htmlParser.fragment.fromHtml=function(a,r,s){function p(e){var r;if(0<d.length)for(var t=0;t<d.length;t++){var n=d[t],i=n.name,o=CKEDITOR.dtd[i],a=l.name&&CKEDITOR.dtd[l.name];a&&!a[i]||e&&o&&!o[e]&&CKEDITOR.dtd[e]?i==l.name&&(h(l,l.parent,1),t--):(r||(f(),r=1),n=n.clone(),n.parent=l,l=n,d.splice(t,1),t--)}};function f(){for(;E.length;)h(E.shift(),l)};function T(e){if(e._.isBlockLike&&'pre'!=e.name&&'textarea'!=e.name){var n=e.children.length,t=e.children[n-1],i;t&&t.type==CKEDITOR.NODE_TEXT&&((i=CKEDITOR.tools.rtrim(t.value))?t.value=i:e.children.length=n-1)}};function h(e,t,n){t=t||l||u;var o=l;void 0===e.previous&&(C(t,e)&&(l=t,c.onTagOpen(s,{}),e.returnPoint=t=l),T(e),i(e)&&!e.children.length||t.add(e),'pre'==e.name&&(g=!1),'textarea'==e.name&&(m=!1));e.returnPoint?(l=e.returnPoint,delete e.returnPoint):l=n?t:o};function C(e,t){if((e==u||'body'==e.name)&&s&&(!e.name||CKEDITOR.dtd[e.name][s])){var n,i;return(n=t.attributes&&(i=t.attributes['data-cke-real-element-type'])?i:t.name)&&n in CKEDITOR.dtd.$inline&&!(n in CKEDITOR.dtd.head)&&!t.isOrphan||t.type==CKEDITOR.NODE_TEXT}};function I(e,t){return e in CKEDITOR.dtd.$listItem||e in CKEDITOR.dtd.$tableContent?e==t||'dt'==e&&'dd'==t||'dd'==e&&'dt'==t:!1};var c=new CKEDITOR.htmlParser,u=r instanceof CKEDITOR.htmlParser.element?r:'string'==typeof r?new CKEDITOR.htmlParser.element(r):new CKEDITOR.htmlParser.fragment,d=[],E=[],l=u,m='textarea'==u.name,g='pre'==u.name;c.onTagOpen=function(o,a,r,s){a=new CKEDITOR.htmlParser.element(o,a);a.isUnknown&&r&&(a.isEmpty=!0);a.isOptionalClose=s;if(i(a))d.push(a);else{if('pre'==o)g=!0;else{if('br'==o&&g){l.add(new CKEDITOR.htmlParser.text('\n'));return};'textarea'==o&&(m=!0)};if('br'==o)E.push(a);else{for(;!(s=(r=l.name)?CKEDITOR.dtd[r]||(l._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):n,a.isUnknown||l.isUnknown||s[o]);)if(l.isOptionalClose)c.onTagClose(r);else if(o in t&&r in t)r=l.children,(r=r[r.length-1])&&'li'==r.name||h(r=new CKEDITOR.htmlParser.element('li'),l),!a.returnPoint&&(a.returnPoint=l),l=r;else if(o in CKEDITOR.dtd.$listItem&&!I(o,r))c.onTagOpen('li'==o?'ul':'dl',{},0,1);else if(r in e&&!I(o,r))!a.returnPoint&&(a.returnPoint=l),l=l.parent;else if(r in CKEDITOR.dtd.$inline&&d.unshift(l),l.parent)h(l,l.parent,1);else{a.isOrphan=1;break};p(o);f();a.parent=l;a.isEmpty?h(a):l=a}}};c.onTagClose=function(e){for(var n=d.length-1;0<=n;n--)if(e==d[n].name){d.splice(n,1);return};for(var i=[],a=[],t=l;t!=u&&t.name!=e;)t._.isBlockLike||a.unshift(t),i.push(t),t=t.returnPoint||t.parent;if(t!=u){for(n=0;n<i.length;n++){var o=i[n];h(o,o.parent)};l=t;t._.isBlockLike&&f();h(t,t.parent);t==l&&(l=l.parent);d=d.concat(a)};'body'==e&&(s=!1)};c.onText=function(t){if(!(l._.hasInlineStarted&&!E.length||g||m)&&(t=CKEDITOR.tools.ltrim(t),0===t.length))return;var i=l.name,a=i?CKEDITOR.dtd[i]||(l._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):n;if(!m&&!a['#']&&i in e)c.onTagOpen(o[i]||''),c.onText(t);else{f();p();g||m||(t=t.replace(/[\t\r\n ]{2,}|[\t\r\n]/g,' '));t=new CKEDITOR.htmlParser.text(t);if(C(l,t))this.onTagOpen(s,{},0,1);l.add(t)}};c.onCDATA=function(e){l.add(new CKEDITOR.htmlParser.cdata(e))};c.onComment=function(e){f();p();l.add(new CKEDITOR.htmlParser.comment(e))};c.parse(a);for(f();l!=u;)h(l,l.parent,1);T(u);return u};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(e,t){isNaN(t)&&(t=this.children.length);var n=0<t?this.children[t-1]:null;if(n){if(e._.isBlockLike&&n.type==CKEDITOR.NODE_TEXT&&(n.value=CKEDITOR.tools.rtrim(n.value),0===n.value.length)){this.children.pop();this.add(e);return};n.next=e};e.previous=n;e.parent=this;this.children.splice(t,0,e);this._.hasInlineStarted||(this._.hasInlineStarted=e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&!e._.isBlockLike)},filter:function(e,t){t=this.getFilterContext(t);e.onRoot(t,this);this.filterChildren(e,!1,t)},filterChildren:function(e,t,n){if(this.childrenFilteredBy!=e.id){n=this.getFilterContext(n);if(t&&!this.parent)e.onRoot(n,this);this.childrenFilteredBy=e.id;for(t=0;t<this.children.length;t++)!1===this.children[t].filter(e,n)&&t--}},writeHtml:function(e,t){t&&this.filter(t);this.writeChildrenHtml(e)},writeChildrenHtml:function(e,t,n){var i=this.getFilterContext();if(n&&!this.parent&&t)t.onRoot(i,this);t&&this.filterChildren(t,!1,i);t=0;n=this.children;for(i=n.length;t<i;t++)n[t].writeHtml(e)},forEach:function(e,t,n){if(!(n||t&&this.type!=t))var i=e(this);if(!1!==i){n=this.children;for(var o=0;o<n.length;o++)i=n[o],i.type==CKEDITOR.NODE_ELEMENT?i.forEach(e,t):t&&i.type!=t||e(i)}},getFilterContext:function(e){return e||{}}}})();'use strict';(function(){function e(){this.rules=[]};function t(t,n,i,o){var a,r;for(a in n)(r=t[a])||(r=t[a]=new e),r.add(n[a],i,o)};CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(t){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new e;this.attributeNameRules=new e;this.elementsRules={};this.attributesRules={};this.textRules=new e;this.commentRules=new e;this.rootRules=new e;t&&this.addRules(t,10)},proto:{addRules:function(e,n){var i;'number'==typeof n?i=n:n&&'priority'in n&&(i=n.priority);'number'!=typeof i&&(i=10);'object'!=typeof n&&(n={});e.elementNames&&this.elementNameRules.addMany(e.elementNames,i,n);e.attributeNames&&this.attributeNameRules.addMany(e.attributeNames,i,n);e.elements&&t(this.elementsRules,e.elements,i,n);e.attributes&&t(this.attributesRules,e.attributes,i,n);e.text&&this.textRules.add(e.text,i,n);e.comment&&this.commentRules.add(e.comment,i,n);e.root&&this.rootRules.add(e.root,i,n)},applyTo:function(e){e.filter(this)},onElementName:function(e,t){return this.elementNameRules.execOnName(e,t)},onAttributeName:function(e,t){return this.attributeNameRules.execOnName(e,t)},onText:function(e,t,n){return this.textRules.exec(e,t,n)},onComment:function(e,t,n){return this.commentRules.exec(e,t,n)},onRoot:function(e,t){return this.rootRules.exec(e,t)},onElement:function(e,t){for(var o=[this.elementsRules['^'],this.elementsRules[t.name],this.elementsRules.$],n,i=0;3>i;i++)if(n=o[i]){n=n.exec(e,t,this);if(!1===n)return null;if(n&&n!=t)return this.onNode(e,n);if(t.parent&&!t.name)break};return t},onNode:function(e,t){var n=t.type;return n==CKEDITOR.NODE_ELEMENT?this.onElement(e,t):n==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,t.value)):n==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,t.value)):null},onAttribute:function(e,t,n,i){return(n=this.attributesRules[n])?n.exec(e,i,t,this):i}}});CKEDITOR.htmlParser.filterRulesGroup=e;e.prototype={add:function(e,t,n){this.rules.splice(this.findIndex(t),0,{value:e,priority:t,options:n})},addMany:function(e,t,n){for(var o=[this.findIndex(t),0],i=0,a=e.length;i<a;i++)o.push({value:e[i],priority:t,options:n});this.rules.splice.apply(this.rules,o)},findIndex:function(e){for(var n=this.rules,t=n.length-1;0<=t&&e<n[t].priority;)t--;return t+1},exec:function(e,t){var o=t instanceof CKEDITOR.htmlParser.node||t instanceof CKEDITOR.htmlParser.fragment,a=Array.prototype.slice.call(arguments,1),r=this.rules,c=r.length,s,l,n,i;for(i=0;i<c;i++)if(o&&(s=t.type,l=t.name),n=r[i],!(e.nonEditable&&!n.options.applyToAll||e.nestedEditable&&n.options.excludeNestedEditable)){n=n.value.apply(null,a);if(!1===n||o&&n&&(n.name!=l||n.type!=s))return n;null!=n&&(a[0]=t=n)};return t},execOnName:function(e,t){for(var i=0,o=this.rules,a=o.length,n;t&&i<a;i++)n=o[i],e.nonEditable&&!n.options.applyToAll||e.nestedEditable&&n.options.excludeNestedEditable||(t=t.replace(n.value[0],n.value[1]));return t}}})();(function(){function c(t,a){function f(e){return e||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(' '):new CKEDITOR.htmlParser.element('br',{'data-cke-bogus':1})};function m(t,n){return function(o){if(o.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var a=[],s=u(o),l,c;if(s)for(g(s,1)&&a.push(s);s;)e(s)&&(l=i(s))&&g(l)&&((c=i(l))&&!e(c)?a.push(l):(f(r).insertAfter(l),l.remove())),s=s.previous;for(s=0;s<a.length;s++)a[s].remove();if(a=!t||!1!==('function'==typeof n?n(o):n))r||CKEDITOR.env.needsBrFiller||o.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT?r||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||o.name in CKEDITOR.dtd.tr||o.name in CKEDITOR.dtd.$listItem)?(a=u(o),a=!a||'form'==o.name&&'input'==a.name):a=!1:a=!1;a&&o.add(f(t))}}};function g(t,n){if((!r||CKEDITOR.env.needsBrFiller)&&t.type==CKEDITOR.NODE_ELEMENT&&'br'==t.name&&!t.attributes['data-cke-eol'])return!0;var i;return t.type==CKEDITOR.NODE_TEXT&&(i=t.value.match(K))&&(i.index&&((new CKEDITOR.htmlParser.text(t.value.substring(0,i.index))).insertBefore(t),t.value=i[0]),!CKEDITOR.env.needsBrFiller&&r&&(!n||t.parent.name in d)||!r&&((i=t.previous)&&'br'==i.name||!i||e(i)))?!0:!1};var c={elements:{}},r='html'==a,d=CKEDITOR.tools.extend({},s),l;for(l in d)'#'in n[l]||delete d[l];for(l in d)c.elements[l]=m(r,t.config.fillEmptyBlocks);c.root=m(r,!1);c.elements.br=function(t){return function(n){if(n.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var a=n.attributes;if('data-cke-bogus'in a||'data-cke-eol'in a)delete a['data-cke-bogus'];else{for(a=n.next;a&&o(a);)a=a.next;var r=i(n);!a&&e(n.parent)?h(n.parent,f(t)):e(a)&&r&&!e(r)&&f(t).insertBefore(a)}}}}(r);return c};function d(e,t){return e!=CKEDITOR.ENTER_BR&&!1!==t?e==CKEDITOR.ENTER_DIV?'div':'p':!1};function u(e){for(e=e.children[e.children.length-1];e&&o(e);)e=e.previous;return e};function i(e){for(e=e.previous;e&&o(e);)e=e.previous;return e};function o(e){return e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(e.value)||e.type==CKEDITOR.NODE_ELEMENT&&e.attributes['data-cke-bookmark']};function e(e){return e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.name in s||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)};function h(e,t){var n=e.children[e.children.length-1];e.children.push(t);t.parent=e;n&&(n.next=t,t.previous=n)};function f(e){e=e.attributes;'false'!=e.contenteditable&&(e['data-cke-editable']=e.contenteditable?'true':1);e.contenteditable='false'};function m(e){e=e.attributes;switch(e['data-cke-editable']){case'true':e.contenteditable='true';break;case'1':delete e.contenteditable}};function N(e){return e.replace(p,function(e,t,n){return'\x3c'+t+n.replace(T,function(e,t){return C.test(t)&&-1==n.indexOf('data-cke-saved-'+t)?' data-cke-saved-'+e+' data-cke-'+CKEDITOR.rnd+'-'+e:e})+'\x3e'})};function g(e,n){return e.replace(n,function(e,n,i){0===e.indexOf('\x3ctextarea')&&(e=n+t(i).replace(/</g,'\x26lt;').replace(/>/g,'\x26gt;')+'\x3c/textarea\x3e');return'\x3ccke:encoded\x3e'+encodeURIComponent(e)+'\x3c/cke:encoded\x3e'})};function S(e){return e.replace(D,function(e,t){return decodeURIComponent(t)})};function w(e){return e.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(e){return'\x3c!--'+a+'{C}'+encodeURIComponent(e).replace(/--/g,'%2D%2D')+'--\x3e'})};function t(e){return e.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(e,t){return decodeURIComponent(t)})};function E(e,t){var n=t._.dataStore;return e.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(e,t){return decodeURIComponent(t)}).replace(/\{cke_protected_(\d+)\}/g,function(e,t){return n&&n[t]||''})};function A(e,n){var i=[],o=n.config.protectedSource,s=n._.dataStore||(n._.dataStore={id:1}),l=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,o=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(o);e=e.replace(/\x3c!--[\s\S]*?--\x3e/g,function(e){return'\x3c!--{cke_tempcomment}'+(i.push(e)-1)+'--\x3e'});for(var r=0;r<o.length;r++)e=e.replace(o[r],function(e){e=e.replace(l,function(e,t,n){return i[n]});return/cke_temp(comment)?/.test(e)?e:'\x3c!--{cke_temp}'+(i.push(e)-1)+'--\x3e'});e=e.replace(l,function(e,t,n){return'\x3c!--'+a+(t?'{C}':'')+encodeURIComponent(i[n]).replace(/--/g,'%2D%2D')+'--\x3e'});e=e.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(e){return e.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(e,t){s[s.id]=decodeURIComponent(t);return'{cke_protected_'+s.id++ +'}'})});return e=e.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(e,i,o,a){return'\x3c'+i+o+'\x3e'+E(t(a),n)+'\x3c/'+i+'\x3e'})};CKEDITOR.htmlDataProcessor=function(e){var n,i,o=this;this.editor=e;this.dataFilter=n=new CKEDITOR.htmlParser.filter;this.htmlFilter=i=new CKEDITOR.htmlParser.filter;this.writer=new CKEDITOR.htmlParser.basicWriter;n.addRules(y);n.addRules(x,{applyToAll:!0});n.addRules(c(e,'data'),{applyToAll:!0});i.addRules(k);i.addRules(l,{applyToAll:!0});i.addRules(c(e,'html'),{applyToAll:!0});e.on('toHtml',function(n){n=n.data;var i=n.dataValue,o,i=A(i,e),i=g(i,O),i=N(i),i=g(i,I),i=i.replace(R,'$1cke:$2'),i=i.replace(b,'\x3ccke:$1$2\x3e\x3c/cke:$1\x3e'),i=i.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,'$1$2$2'),i=i.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,'$1data-cke-'+CKEDITOR.rnd+'-$2');o=n.context||e.editable().getName();var a;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&'pre'==o&&(o='div',i='\x3cpre\x3e'+i+'\x3c/pre\x3e',a=1);o=e.document.createElement(o);o.setHtml('a'+i);i=o.getHtml().substr(1);i=i.replace(new RegExp('data-cke-'+CKEDITOR.rnd+'-','ig'),'');a&&(i=i.replace(/^<pre>|<\/pre>$/gi,''));i=i.replace(v,'$1$2');i=S(i);i=t(i);o=!1===n.fixForBody?!1:d(n.enterMode,e.config.autoParagraph);i=CKEDITOR.htmlParser.fragment.fromHtml(i,n.context,o);o&&(a=i,!a.children.length&&CKEDITOR.dtd[a.name][o]&&(o=new CKEDITOR.htmlParser.element(o),a.add(o)));n.dataValue=i},null,null,5);e.on('toHtml',function(t){t.data.filter.applyTo(t.data.dataValue,!0,t.data.dontFilter,t.data.enterMode)&&e.fire('dataFiltered')},null,null,6);e.on('toHtml',function(e){e.data.dataValue.filterChildren(o.dataFilter,!0)},null,null,10);e.on('toHtml',function(e){e=e.data;var t=e.dataValue,n=new CKEDITOR.htmlParser.basicWriter;t.writeChildrenHtml(n);t=n.getHtml(!0);e.dataValue=w(t)},null,null,15);e.on('toDataFormat',function(t){var n=t.data.dataValue;t.data.enterMode!=CKEDITOR.ENTER_BR&&(n=n.replace(/^<br *\/?>/i,''));t.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(n,t.data.context,d(t.data.enterMode,e.config.autoParagraph))},null,null,5);e.on('toDataFormat',function(e){e.data.dataValue.filterChildren(o.htmlFilter,!0)},null,null,10);e.on('toDataFormat',function(e){e.data.filter.applyTo(e.data.dataValue,!1,!0)},null,null,11);e.on('toDataFormat',function(n){var i=n.data.dataValue,a=o.writer;a.reset();i.writeChildrenHtml(a);i=a.getHtml(!0);i=t(i);i=E(i,e);n.data.dataValue=i},null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(e,t,n,i){var a=this.editor,o,r,s,l;t&&'object'==typeof t?(o=t.context,n=t.fixForBody,i=t.dontFilter,r=t.filter,s=t.enterMode,l=t.protectedWhitespaces):o=t;o||null===o||(o=a.editable().getName());return a.fire('toHtml',{dataValue:e,context:o,fixForBody:n,dontFilter:i,filter:r||a.filter,enterMode:s||a.enterMode,protectedWhitespaces:l}).dataValue},toDataFormat:function(e,t){var n,i,o;t&&(n=t.context,i=t.filter,o=t.enterMode);n||null===n||(n=this.editor.editable().getName());return this.editor.fire('toDataFormat',{dataValue:e,filter:i||this.editor.filter,context:n,enterMode:o||this.editor.enterMode}).dataValue}};var K=/(?:&nbsp;|\xa0)$/,a='{cke_protected}',n=CKEDITOR.dtd,r='caption colgroup col thead tfoot tbody'.split(' '),s=CKEDITOR.tools.extend({},n.$blockLimit,n.$block),y={elements:{input:f,textarea:f}},x={attributeNames:[[/^on/,'data-cke-pa-on'],[/^data-cke-expando$/,'']]},k={elements:{embed:function(e){var t=e.parent;if(t&&'object'==t.name){var n=t.attributes.width,t=t.attributes.height;n&&(e.attributes.width=n);t&&(e.attributes.height=t)}},a:function(e){var t=e.attributes;if(!(e.children.length||t.name||t.id||e.attributes['data-cke-saved-name']))return!1}}},l={elementNames:[[/^cke:/,''],[/^\?xml:namespace$/,'']],attributeNames:[[/^data-cke-(saved|pa)-/,''],[/^data-cke-.*/,''],['hidefocus','']],elements:{$:function(e){var n=e.attributes;if(n){if(n['data-cke-temp'])return!1;for(var i=['name','href','src'],o,t=0;t<i.length;t++)o='data-cke-saved-'+i[t],o in n&&delete n[i[t]]};return e},table:function(e){e.children.slice(0).sort(function(e,t){var n,i;e.type==CKEDITOR.NODE_ELEMENT&&t.type==e.type&&(n=CKEDITOR.tools.indexOf(r,e.name),i=CKEDITOR.tools.indexOf(r,t.name));-1<n&&-1<i&&n!=i||(n=e.parent?e.getIndex():-1,i=t.parent?t.getIndex():-1);return n>i?1:-1})},param:function(e){e.children=[];e.isEmpty=!0;return e},span:function(e){'Apple-style-span'==e.attributes['class']&&delete e.name},html:function(e){delete e.attributes.contenteditable;delete e.attributes['class']},body:function(e){delete e.attributes.spellcheck;delete e.attributes.contenteditable},style:function(e){var t=e.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value));e.attributes.type||(e.attributes.type='text/css')},title:function(e){var t=e.children[0];!t&&h(e,t=new CKEDITOR.htmlParser.text);t.value=e.attributes['data-cke-title']||''},input:m,textarea:m},attributes:{'class':function(e){return CKEDITOR.tools.ltrim(e.replace(/(?:^|\s+)cke_[^\s]*/g,''))||!1}}};CKEDITOR.env.ie&&(l.attributes.style=function(e){return e.replace(/(^|;)([^\:]+)/g,function(e){return e.toLowerCase()})});var p=/<(a|area|img|input|source)\b([^>]*)>/gi,T=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,C=/^(href|src|name)$/i,I=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,O=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,D=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,R=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,v=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,b=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi})();'use strict';CKEDITOR.htmlParser.element=function(e,t){this.name=e;this.attributes=t||{};this.children=[];var n=e||'',i=n.match(/^cke:(.*)/);i&&(n=i[1]);n=!!(CKEDITOR.dtd.$nonBodyContent[n]||CKEDITOR.dtd.$block[n]||CKEDITOR.dtd.$listItem[n]||CKEDITOR.dtd.$tableContent[n]||CKEDITOR.dtd.$nonEditable[n]||'br'==n);this.isEmpty=!!CKEDITOR.dtd.$empty[e];this.isUnknown=!CKEDITOR.dtd[e];this._={isBlockLike:n,hasInlineStarted:this.isEmpty||!n}};CKEDITOR.htmlParser.cssStyle=function(e){var t={};((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||'').replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,n,i){'font-family'==n&&(i=i.replace(/["']/g,''));t[n.toLowerCase()]=i});return{rules:t,populate:function(e){var t=this.toString();t&&(e instanceof CKEDITOR.dom.element?e.setAttribute('style',t):e instanceof CKEDITOR.htmlParser.element?e.attributes.style=t:e.style=t)},toString:function(){var n=[],e;for(e in t)t[e]&&n.push(e,':',t[e],';');return n.join('')}}};(function(){function n(e){return function(t){return t.type==CKEDITOR.NODE_ELEMENT&&('string'==typeof e?t.name==e:t.name in e)}};var t=function(e,t){e=e[0];t=t[0];return e<t?-1:e>t?1:0},e=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:e.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(e,t){var n=this,i,r;t=n.getFilterContext(t);if(t.off)return!0;if(!n.parent)e.onRoot(t,n);for(;;){i=n.name;if(!(r=e.onElementName(t,i)))return this.remove(),!1;n.name=r;if(!(n=e.onElement(t,n)))return this.remove(),!1;if(n!==this)return this.replaceWith(n),!1;if(n.name==i)break;if(n.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(n),!1;if(!n.name)return this.replaceWithChildren(),!1};i=n.attributes;var o,a;for(o in i){for(r=i[o];;)if(a=e.onAttributeName(t,o))if(a!=o)delete i[o],o=a;else break;else{delete i[o];break};a&&(!1===(r=e.onAttribute(t,n,a,r))?delete i[a]:i[a]=r)};n.isEmpty||this.filterChildren(e,!1,t);return!0},filterChildren:e.filterChildren,writeHtml:function(e,n){n&&this.filter(n);var r=this.name,a=[],o=this.attributes,i,s;e.openTag(r,o);for(i in o)a.push([i,o[i]]);e.sortAttributes&&a.sort(t);i=0;for(s=a.length;i<s;i++)o=a[i],e.attribute(o[0],o[1]);e.openTagClose(r,this.isEmpty);this.writeChildrenHtml(e);this.isEmpty||e.closeTag(r)},writeChildrenHtml:e.writeChildrenHtml,replaceWithChildren:function(){for(var e=this.children,t=e.length;t;)e[--t].insertAfter(this);this.remove()},forEach:e.forEach,getFirst:function(e){if(!e)return this.children.length?this.children[0]:null;'function'!=typeof e&&(e=n(e));for(var t=0,i=this.children.length;t<i;++t)if(e(this.children[t]))return this.children[t];return null},getHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(e);return e.getHtml()},setHtml:function(e){e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(e).children;for(var t=0,n=e.length;t<n;++t)e[t].parent=this},getOuterHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;this.writeHtml(e);return e.getHtml()},split:function(e){for(var t=this.children.splice(e,this.children.length-e),n=this.clone(),i=0;i<t.length;++i)t[i].parent=n;n.children=t;t[0]&&(t[0].previous=null);0<e&&(this.children[e-1].next=null);this.parent.add(n,this.getIndex()+1);return n},addClass:function(e){if(!this.hasClass(e)){var t=this.attributes['class']||'';this.attributes['class']=t+(t?' ':'')+e}},removeClass:function(e){var t=this.attributes['class'];t&&((t=CKEDITOR.tools.trim(t.replace(new RegExp('(?:\\s+|^)'+e+'(?:\\s+|$)'),' ')))?this.attributes['class']=t:delete this.attributes['class'])},hasClass:function(e){var t=this.attributes['class'];return t?(new RegExp('(?:^|\\s)'+e+'(?\x3d\\s|$)')).test(t):!1},getFilterContext:function(e){var t=[];e||(e={off:!1,nonEditable:!1,nestedEditable:!1});e.off||'off'!=this.attributes['data-cke-processor']||t.push('off',!0);e.nonEditable||'false'!=this.attributes.contenteditable?e.nonEditable&&!e.nestedEditable&&'true'==this.attributes.contenteditable&&t.push('nestedEditable',!0):t.push('nonEditable',!0);if(t.length){e=CKEDITOR.tools.copy(e);for(var n=0;n<t.length;n+=2)e[t[n]]=t[n+1]};return e}},!0)})();(function(){var e={},t=/{([^}]+)}/g,n=/([\\'])/g,i=/\n/g,o=/\r/g;CKEDITOR.template=function(a){if(e[a])this.output=e[a];else{var r=a.replace(n,'\\$1').replace(i,'\\n').replace(o,'\\r').replace(t,function(e,t){return'\',data[\''+t+'\']\x3d\x3dundefined?\'{'+t+'}\':data[\''+t+'\'],\''});this.output=e[a]=Function('data','buffer','return buffer?buffer.push(\''+r+'\'):[\''+r+'\'].join(\'\');')}}})();delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);CKEDITOR.add=function(e){CKEDITOR.instances[e.name]=e;e.on('focus',function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire('currentInstance'))});e.on('blur',function(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire('currentInstance'))});CKEDITOR.fire('instance',null,e)};CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]};(function(){var e={};CKEDITOR.addTemplate=function(t,n){var i=e[t];if(i)return i;i={name:t,source:n};CKEDITOR.fire('template',i);return e[t]=new CKEDITOR.template(i.source)};CKEDITOR.getTemplate=function(t){return e[t]}})();(function(){var e=[];CKEDITOR.addCss=function(t){e.push(t)};CKEDITOR.getCss=function(){return e.join('\n')}})();CKEDITOR.on('instanceDestroyed',function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire('reset')});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;CKEDITOR.TRISTATE_DISABLED=0;(function(){CKEDITOR.inline=function(e,t){if(!CKEDITOR.env.isCompatible)return null;e=CKEDITOR.dom.element.get(e);if(e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var n=new CKEDITOR.editor(t,e,CKEDITOR.ELEMENT_MODE_INLINE),i=e.is('textarea')?e:null;i?(n.setData(i.getValue(),null,!0),e=CKEDITOR.dom.element.createFromHtml('\x3cdiv contenteditable\x3d"'+!!n.readOnly+'" class\x3d"cke_textarea_inline"\x3e'+i.getValue()+'\x3c/div\x3e',CKEDITOR.document),e.insertAfter(i),i.hide(),i.$.form&&n._attachToForm()):n.setData(e.getHtml(),null,!0);n.on('loaded',function(){n.fire('uiReady');n.editable(e);n.container=e;n.ui.contentsElement=e;n.setData(n.getData(1));n.resetDirty();n.fire('contentDom');n.mode='wysiwyg';n.fire('mode');n.status='ready';n.fireOnce('instanceReady');CKEDITOR.fire('instanceReady',null,n)},null,null,1E4);n.on('destroy',function(){i&&(n.container.clearCustomData(),n.container.remove(),i.show());n.element.clearCustomData();delete n.element});return n};CKEDITOR.inlineAll=function(){var e,n,o;for(o in CKEDITOR.dtd.$editable)for(var i=CKEDITOR.document.getElementsByTag(o),t=0,a=i.count();t<a;t++)e=i.getItem(t),'true'==e.getAttribute('contenteditable')&&(n={element:e,config:{}},!1!==CKEDITOR.fire('inline',n)&&CKEDITOR.inline(e,n.config))};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})})();CKEDITOR.replaceClass='ckeditor';(function(){function e(e,i,o,a){if(!CKEDITOR.env.isCompatible)return null;e=CKEDITOR.dom.element.get(e);if(e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var r=new CKEDITOR.editor(i,e,a);a==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.setStyle('visibility','hidden'),r._.required=e.hasAttribute('required'),e.removeAttribute('required'));o&&r.setData(o,null,!0);r.on('loaded',function(){n(r);a==CKEDITOR.ELEMENT_MODE_REPLACE&&r.config.autoUpdateElement&&e.$.form&&r._attachToForm();r.setMode(r.config.startupMode,function(){r.resetDirty();r.status='ready';r.fireOnce('instanceReady');CKEDITOR.fire('instanceReady',null,r)})});r.on('destroy',t);return r};function t(){var t=this.container,e=this.element;t&&(t.clearCustomData(),t.remove());e&&(e.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.show(),this._.required&&e.setAttribute('required','required')),delete this.element)};function n(e){var t=e.name,n=e.element,i=e.elementMode,o=e.fire('uiSpace',{space:'top',html:''}).html,a=e.fire('uiSpace',{space:'bottom',html:''}).html,r=new CKEDITOR.template('\x3c{outerEl} id\x3d"cke_{name}" class\x3d"{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"application"'+(e.title?' aria-labelledby\x3d"cke_{name}_arialbl"':'')+'\x3e'+(e.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':'')+'\x3c{outerEl} class\x3d"cke_inner cke_reset" role\x3d"presentation"\x3e{topHtml}\x3c{outerEl} id\x3d"{contentId}" class\x3d"cke_contents cke_reset" role\x3d"presentation"\x3e\x3c/{outerEl}\x3e{bottomHtml}\x3c/{outerEl}\x3e\x3c/{outerEl}\x3e'),t=CKEDITOR.dom.element.createFromHtml(r.output({id:e.id,name:t,langDir:e.lang.dir,langCode:e.langCode,voiceLabel:e.title,topHtml:o?'\x3cspan id\x3d"'+e.ui.spaceId('top')+'" class\x3d"cke_top cke_reset_all" role\x3d"presentation" style\x3d"height:auto"\x3e'+o+'\x3c/span\x3e':'',contentId:e.ui.spaceId('contents'),bottomHtml:a?'\x3cspan id\x3d"'+e.ui.spaceId('bottom')+'" class\x3d"cke_bottom cke_reset_all" role\x3d"presentation"\x3e'+a+'\x3c/span\x3e':'',outerEl:CKEDITOR.env.ie?'span':'div'}));i==CKEDITOR.ELEMENT_MODE_REPLACE?(n.hide(),t.insertAfter(n)):n.append(t);e.container=t;e.ui.contentsElement=e.ui.space('contents');o&&e.ui.space('top').unselectable();a&&e.ui.space('bottom').unselectable();n=e.config.width;i=e.config.height;n&&t.setStyle('width',CKEDITOR.tools.cssLength(n));i&&e.ui.space('contents').setStyle('height',CKEDITOR.tools.cssLength(i));t.disableContextMenu();CKEDITOR.env.webkit&&t.on('focus',function(){e.focus()});e.fireOnce('uiReady')};CKEDITOR.replace=function(t,n){return e(t,n,null,CKEDITOR.ELEMENT_MODE_REPLACE)};CKEDITOR.appendTo=function(t,n,i){return e(t,n,i,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var i=document.getElementsByTagName('textarea'),n=0;n<i.length;n++){var t=null,e=i[n];if(e.name||e.id){if('string'==typeof arguments[0]){if(!(new RegExp('(?:^|\\s)'+arguments[0]+'(?:$|\\s)')).test(e.className))continue}
else if('function'==typeof arguments[0]&&(t={},!1===arguments[0](e,t)))continue;this.replace(e,t)}}};CKEDITOR.editor.prototype.addMode=function(e,t){(this._.modes||(this._.modes={}))[e]=t};CKEDITOR.editor.prototype.setMode=function(e,t){var n=this,i=this._.modes;if(e!=n.mode&&i&&i[e]){n.fire('beforeSetMode',e);if(n.mode){var o=n.checkDirty(),i=n._.previousModeData,a,r=0;n.fire('beforeModeUnload');n.editable(0);n._.previousMode=n.mode;n._.previousModeData=a=n.getData(1);'source'==n.mode&&i==a&&(n.fire('lockSnapshot',{forceUpdate:!0}),r=1);n.ui.space('contents').setHtml('');n.mode=''}
else n._.previousModeData=n.getData(1);this._.modes[e](function(){n.mode=e;void 0!==o&&!o&&n.resetDirty();r?n.fire('unlockSnapshot'):'wysiwyg'==e&&n.fire('saveSnapshot');setTimeout(function(){n.fire('mode');t&&t.call(n)},0)})}};CKEDITOR.editor.prototype.resize=function(e,t,n,i){var o=this.container,s=this.ui.space('contents'),a=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;i=i?this.container.getFirst(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass('cke_inner')}):o;i.setSize('width',e,!0);a&&(a.style.width='1%');var r=(i.$.offsetHeight||0)-(s.$.clientHeight||0),o=Math.max(t-(n?0:r),0);t=n?t+r:t;s.setStyle('height',o+'px');a&&(a.style.width='100%');this.fire('resize',{outerHeight:t,contentsHeight:o,outerWidth:e||i.getSize('width')})};CKEDITOR.editor.prototype.getResizable=function(e){return e?this.ui.space('contents'):this.container};CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})})();CKEDITOR.config.startupMode='wysiwyg';(function(){function m(t){var n=t.editor,i=t.data.path,a=i.blockLimit,r=t.data.selection,o=r.getRanges()[0],s;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)if(r=g(r,i))r.appendBogus(),s=CKEDITOR.env.ie;l(n,i.block,a)&&o.collapsed&&!o.getCommonAncestor().isReadOnly()&&(i=o.clone(),i.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),a=new CKEDITOR.dom.walker(i),a.guard=function(t){return!e(t)||t.type==CKEDITOR.NODE_COMMENT||t.isReadOnly()},!a.checkForward()||i.checkStartOfBlock()&&i.checkEndOfBlock())&&(n=o.fixBlock(!0,n.activeEnterMode==CKEDITOR.ENTER_DIV?'div':'p'),CKEDITOR.env.needsBrFiller||(n=n.getFirst(e))&&n.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(n.getText()).match(/^(?:&nbsp;|\xa0)$/)&&n.remove(),s=1,t.cancel());s&&o.select()};function g(t,n){if(t.isFake)return 0;var i=n.block||n.blockLimit,o=i&&i.getLast(e);if(!(!i||!i.isBlockBoundary()||o&&o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()||i.is('pre')||i.getBogus()))return i};function E(e){var t=e.data.getTarget();t.is('input')&&(t=t.getAttribute('type'),'submit'!=t&&'reset'!=t||e.data.preventDefault())};function e(e){return n(e)&&a(e)};function p(e,t){return function(n){var i=n.data.$.toElement||n.data.$.fromElement||n.data.$.relatedTarget;(i=i&&i.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(i):null)&&(t.equals(i)||t.contains(i))||e.call(this,n)}};function T(t){function s(t){return function(n,a){a&&n.type==CKEDITOR.NODE_ELEMENT&&n.is(r)&&(i=n);if(!(a||!e(n)||t&&o(n)))return!1}};var i,a=t.getRanges()[0];t=t.root;var r={table:1,ul:1,ol:1,dl:1};if(a.startPath().contains(r)){var n=a.clone();n.collapse(1);n.setStartAt(t,CKEDITOR.POSITION_AFTER_START);t=new CKEDITOR.dom.walker(n);t.guard=s();t.checkBackward();if(i)return n=a.clone(),n.collapse(),n.setEndAt(i,CKEDITOR.POSITION_AFTER_END),t=new CKEDITOR.dom.walker(n),t.guard=s(!0),i=!1,t.checkForward(),i};return null};function l(e,t,n){return!1!==e.config.autoParagraph&&e.activeEnterMode!=CKEDITOR.ENTER_BR&&(e.editable().equals(n)&&!t||t&&'true'==t.getAttribute('contenteditable'))};function u(e){return e.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==e.config.autoParagraph?e.activeEnterMode==CKEDITOR.ENTER_DIV?'div':'p':!1};function h(e){var t=e.editor;t.getSelection().scrollIntoView();setTimeout(function(){t.fire('saveSnapshot')},0)};function f(e,t,n){var i=e.getCommonAncestor(t);for(t=e=n?t:e;(e=e.getParent())&&!i.equals(e)&&1==e.getChildCount();)t=e;t.remove()};var n,a,i,o,r,s,c,t,d;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(e,t){this.base(t.$||t);this.editor=e;this.status='unloaded';this.hasFocus=!1;this.setup()},proto:{focus:function(){var t;if(CKEDITOR.env.webkit&&!this.hasFocus&&(t=this.editor._.previousActive||this.getDocument().getActive(),this.contains(t))){t.focus();return};CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document)?this.$.focus():this.$.setActive()}catch(e){if(!CKEDITOR.env.ie)throw e};CKEDITOR.env.safari&&!this.isInline()&&(t=CKEDITOR.document.getActive(),t.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(e,t){var n=Array.prototype.slice.call(arguments,0);CKEDITOR.env.ie&&/^focus|blur$/.exec(e)&&(e='focus'==e?'focusin':'focusout',t=p(t,this),n[0]=e,n[1]=t);return CKEDITOR.dom.element.prototype.on.apply(this,n)},attachListener:function(e){!this._.listeners&&(this._.listeners=[]);var t=Array.prototype.slice.call(arguments,1),t=e.on.apply(e,t);this._.listeners.push(t);return t},clearListeners:function(){var t=this._.listeners;try{for(;t.length;)t.pop().removeListener()}catch(e){}},restoreAttrs:function(){var t=this._.attrChanges,n,e;for(e in t)t.hasOwnProperty(e)&&(n=t[e],null!==n?this.setAttribute(e,n):this.removeAttribute(e))},attachClass:function(e){var t=this.getCustomData('classes');this.hasClass(e)||(!t&&(t=[]),t.push(e),this.setCustomData('classes',t),this.addClass(e))},changeAttr:function(e,t){var n=this.getAttribute(e);t!==n&&(!this._.attrChanges&&(this._.attrChanges={}),e in this._.attrChanges||(this._.attrChanges[e]=n),this.setAttribute(e,t))},insertText:function(e){this.editor.focus();this.insertHtml(this.transformPlainTextToHtml(e),'text')},transformPlainTextToHtml:function(e){var t=this.editor.getSelection().getStartElement().hasAscendant('pre',!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(e,t)},insertHtml:function(e,t,n){var i=this.editor;i.focus();i.fire('saveSnapshot');n||(n=i.getSelection().getRanges()[0]);s(this,t||'html',e,n);n.select();h(this);this.editor.fire('afterInsertHtml',{})},insertHtmlIntoRange:function(e,t,n){s(this,n||'html',e,t);this.editor.fire('afterInsertHtml',{intoRange:t})},insertElement:function(t,n){var a=this.editor;a.focus();a.fire('saveSnapshot');var r=a.activeEnterMode,a=a.getSelection(),i=t.getName(),i=CKEDITOR.dtd.$block[i];n||(n=a.getRanges()[0]);this.insertElementIntoRange(t,n)&&(n.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),i&&((i=t.getNext(function(t){return e(t)&&!o(t)}))&&i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$block)?i.getDtd()['#']?n.moveToElementEditStart(i):n.moveToElementEditEnd(t):i||r==CKEDITOR.ENTER_BR||(i=n.fixBlock(!0,r==CKEDITOR.ENTER_DIV?'div':'p'),n.moveToElementEditStart(i))));a.selectRanges([n]);h(this)},insertElementIntoSelection:function(e){this.insertElement(e)},insertElementIntoRange:function(e,t){var o=this.editor,r=o.config.enterMode,a=e.getName(),s=CKEDITOR.dtd.$block[a];if(t.checkReadOnly())return!1;t.deleteContents(1);t.startContainer.type==CKEDITOR.NODE_ELEMENT&&t.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&c(t);var n,i;if(s)for(;(n=t.getCommonAncestor(0,1))&&(i=CKEDITOR.dtd[n.getName()])&&(!i||!i[a]);)n.getName()in CKEDITOR.dtd.span?t.splitElement(n):t.checkStartOfBlock()&&t.checkEndOfBlock()?(t.setStartBefore(n),t.collapse(!0),n.remove()):t.splitBlock(r==CKEDITOR.ENTER_DIV?'div':'p',o.editable());t.insertNode(e);return!0},setData:function(e,t){t||(e=this.editor.dataProcessor.toHtml(e));this.setHtml(e);this.fixInitialSelection();'unloaded'==this.status&&(this.status='ready');this.editor.fire('dataReady')},getData:function(e){var t=this.getHtml();e||(t=this.editor.dataProcessor.toDataFormat(t));return t},setReadOnly:function(e){this.setAttribute('contenteditable',!e)},detach:function(){this.removeClass('cke_editable');this.status='detached';var e=this.editor;this._.detach();delete e.document;delete e.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function t(){var i=e.getDocument().$,o=i.getSelection(),n;t:if(o.anchorNode&&o.anchorNode==e.$)n=!0;else{if(CKEDITOR.env.webkit&&(n=e.getDocument().getActive())&&n.equals(e)&&!o.anchorNode){n=!0;break t};n=void 0};n&&(n=new CKEDITOR.dom.range(e),n.moveToElementEditStart(e),i=i.createRange(),i.setStart(n.startContainer.$,n.startOffset),i.collapse(!0),o.removeAllRanges(),o.addRange(i))};function n(){var n=e.getDocument().$,t=n.selection,i=e.getDocument().getActive();'None'==t.type&&i.equals(e)&&(t=new CKEDITOR.dom.range(e),n=n.body.createTextRange(),t.moveToElementEditStart(e),t=t.startContainer,t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),n.moveToElementText(t.$),n.collapse(!0),n.select())};var e=this;if(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks))this.hasFocus&&(this.focus(),n());else if(this.hasFocus)this.focus(),t();else this.once('focus',function(){t()},null,null,-999)},getHtmlFromRange:function(e){if(e.collapsed)return new CKEDITOR.dom.documentFragment(e.document);e={doc:this.getDocument(),range:e.clone()};t.eol.detect(e,this);t.bogus.exclude(e);t.cell.shrink(e);e.fragment=e.range.cloneContents();t.tree.rebuild(e,this);t.eol.fix(e,this);return new CKEDITOR.dom.documentFragment(e.fragment.$)},extractHtmlFromRange:function(e,t){var o=d,n={range:e,doc:e.document},l=this.getHtmlFromRange(e);if(e.collapsed)return e.optimize(),l;e.enlarge(CKEDITOR.ENLARGE_INLINE,1);o.table.detectPurge(n);n.bookmark=e.createBookmark();delete n.range;var r=this.editor.createRange();r.moveToPosition(n.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START);n.targetBookmark=r.createBookmark();o.list.detectMerge(n,this);o.table.detectRanges(n,this);o.block.detectMerge(n,this);n.tableContentsRanges?(o.table.deleteRanges(n),e.moveToBookmark(n.bookmark),n.range=e):(e.moveToBookmark(n.bookmark),n.range=e,e.extractContents(o.detectExtractMerge(n)));e.moveToBookmark(n.targetBookmark);e.optimize();o.fixUneditableRangePosition(e);o.list.merge(n,this);o.table.purge(n,this);o.block.merge(n,this);if(t){o=e.startPath();if(n=e.checkStartOfBlock()&&e.checkEndOfBlock()&&o.block&&!e.root.equals(o.block)){a:{var n=o.block.getElementsByTag('span'),r=0,s;if(n)for(;s=n.getItem(r++);)if(!a(s)){n=!0;break e};n=!1};n=!n};n&&(e.moveToPosition(o.block,CKEDITOR.POSITION_BEFORE_START),o.block.remove())}
else o.autoParagraph(this.editor,e),i(e.startContainer)&&e.startContainer.appendBogus();e.startContainer.mergeSiblings();return l},setup:function(){var t=this.editor;this.attachListener(t,'beforeGetData',function(){var e=this.getData();this.is('textarea')||!1!==t.config.ignoreEmptyParagraph&&(e=e.replace(r,function(e,t){return t}));t.setData(e,null,1)},this);this.attachListener(t,'getSnapshot',function(e){e.data=this.getData(1)},this);this.attachListener(t,'afterSetData',function(){this.setData(t.getData(1))},this);this.attachListener(t,'loadSnapshot',function(e){this.setData(e.data,1)},this);this.attachListener(t,'beforeFocus',function(){var e=t.getSelection();(e=e&&e.getNative())&&'Control'==e.type||this.focus()},this);this.attachListener(t,'insertHtml',function(e){this.insertHtml(e.data.dataValue,e.data.mode,e.data.range)},this);this.attachListener(t,'insertElement',function(e){this.insertElement(e.data)},this);this.attachListener(t,'insertText',function(e){this.insertText(e.data)},this);this.setReadOnly(t.readOnly);this.attachClass('cke_editable');t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass('cke_editable_inline'):t.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&t.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass('cke_editable_themed');this.attachClass('cke_contents_'+t.config.contentsLangDirection);t.keystrokeHandler.blockedKeystrokes[8]=+t.readOnly;t.keystrokeHandler.attach(this);this.on('blur',function(){this.hasFocus=!1},null,null,-1);this.on('focus',function(){this.hasFocus=!0},null,null,-1);if(CKEDITOR.env.webkit)this.on('scroll',function(){t._.previousScrollTop=t.editable().$.scrollTop},null,null,-1);if(CKEDITOR.env.edge&&14<CKEDITOR.env.version){var c=function(){var e=t.editable();null!=t._.previousScrollTop&&e.getDocument().equals(CKEDITOR.document)&&(e.$.scrollTop=t._.previousScrollTop,t._.previousScrollTop=null,this.removeListener('scroll',c))};this.on('scroll',c)};t.focusManager.add(this);this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,t.once('contentDom',function(){t.focusManager.focus(this)},this));this.isInline()&&this.changeAttr('tabindex',t.tabIndex);if(!this.is('textarea')){t.document=this.getDocument();t.window=this.getWindow();var s=t.document;this.changeAttr('spellcheck',!t.config.disableNativeSpellChecker);var o=t.config.contentsLangDirection;this.getDirection(1)!=o&&this.changeAttr('dir',o);var i=CKEDITOR.getCss();if(i){var o=s.getHead(),a=o.getCustomData('stylesheet');a?i!=a.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?a.$.styleSheet.cssText=i:a.setText(i)):(i=s.appendStyleText(i),i=new CKEDITOR.dom.element(i.ownerNode||i.owningElement),o.setCustomData('stylesheet',i),i.data('cke-temp',1))};o=s.getCustomData('stylesheet_ref')||0;s.setCustomData('stylesheet_ref',o+1);this.setCustomData('cke_includeReadonly',!t.config.disableReadonlyStyling);this.attachListener(this,'click',function(e){e=e.data;var t=(new CKEDITOR.dom.elementPath(e.getTarget(),this)).contains('a');t&&2!=e.$.button&&t.isReadOnly()&&e.preventDefault()});var l={8:1,46:1};this.attachListener(t,'key',function(e){if(t.readOnly)return!0;var o=e.data.domEvent.getKey(),c;if(o in l){e=t.getSelection();var d,i=e.getRanges()[0],r=i.startPath(),u,s,a,o=8==o;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(d=e.getSelectedElement())||(d=T(e))?(t.fire('saveSnapshot'),i.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START),d.remove(),i.select(),t.fire('saveSnapshot'),c=1):i.collapsed&&((u=r.block)&&(a=u[o?'getPrevious':'getNext'](n))&&a.type==CKEDITOR.NODE_ELEMENT&&a.is('table')&&i[o?'checkStartOfBlock':'checkEndOfBlock']()?(t.fire('saveSnapshot'),i[o?'checkEndOfBlock':'checkStartOfBlock']()&&u.remove(),i['moveToElementEdit'+(o?'End':'Start')](a),i.select(),t.fire('saveSnapshot'),c=1):r.blockLimit&&r.blockLimit.is('td')&&(s=r.blockLimit.getAscendant('table'))&&i.checkBoundaryOfElement(s,o?CKEDITOR.START:CKEDITOR.END)&&(a=s[o?'getPrevious':'getNext'](n))?(t.fire('saveSnapshot'),i['moveToElementEdit'+(o?'End':'Start')](a),i.checkStartOfBlock()&&i.checkEndOfBlock()?a.remove():i.select(),t.fire('saveSnapshot'),c=1):(s=r.contains(['td','th','caption']))&&i.checkBoundaryOfElement(s,o?CKEDITOR.START:CKEDITOR.END)&&(c=1))};return!c});t.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,'keyup',function(n){n.data.getKeystroke()in l&&!this.getFirst(e)&&(this.appendBogus(),n=t.createRange(),n.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),n.select())});this.attachListener(this,'dblclick',function(e){if(t.readOnly)return!1;e={element:e.data.getTarget()};t.fire('doubleclick',e)});CKEDITOR.env.ie&&this.attachListener(this,'click',E);CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,'mousedown',function(e){var n=e.data.getTarget();n.is('img','hr','input','textarea','select')&&!n.isReadOnly()&&(t.getSelection().selectElement(n),n.is('input','textarea','select')&&e.data.preventDefault())});CKEDITOR.env.edge&&this.attachListener(this,'mouseup',function(e){(e=e.data.getTarget())&&e.is('img')&&t.getSelection().selectElement(e)});CKEDITOR.env.gecko&&this.attachListener(this,'mouseup',function(e){if(2==e.data.$.button&&(e=e.data.getTarget(),!e.getOuterHtml().replace(r,''))){var n=t.createRange();n.moveToElementEditStart(e);n.select(!0)}});CKEDITOR.env.webkit&&(this.attachListener(this,'click',function(e){e.data.getTarget().is('input','select')&&e.data.preventDefault()}),this.attachListener(this,'mouseup',function(e){e.data.getTarget().is('input','textarea')&&e.data.preventDefault()}));CKEDITOR.env.webkit&&this.attachListener(t,'key',function(e){if(t.readOnly)return!0;e=e.data.domEvent.getKey();if(e in l){var i=8==e,n=t.getSelection().getRanges()[0];e=n.startPath();if(n.collapsed)t:{var a=e.block;if(a&&n[i?'checkStartOfBlock':'checkEndOfBlock']()&&n.moveToClosestEditablePosition(a,!i)&&n.collapsed){if(n.startContainer.type==CKEDITOR.NODE_ELEMENT){var r=n.startContainer.getChild(n.startOffset-(i?1:0));if(r&&r.type==CKEDITOR.NODE_ELEMENT&&r.is('hr')){t.fire('saveSnapshot');r.remove();e=!0;break t}};n=n.startPath().block;if(!n||n&&n.contains(a))e=void 0;else{t.fire('saveSnapshot');var o;(o=(i?n:a).getBogus())&&o.remove();o=t.getSelection();r=o.createBookmarks();(i?a:n).moveChildren(i?n:a,!1);e.lastElement.mergeSiblings();f(a,n,!i);o.selectBookmarks(r);e=!0}}
else e=!1}
else i=n,o=e.block,n=i.endPath().block,o&&n&&!o.equals(n)?(t.fire('saveSnapshot'),(a=o.getBogus())&&a.remove(),i.enlarge(CKEDITOR.ENLARGE_INLINE),i.deleteContents(),n.getParent()&&(n.moveChildren(o,!1),e.lastElement.mergeSiblings(),f(o,n,!0)),i=t.getSelection().getRanges()[0],i.collapse(1),i.optimize(),''===i.startContainer.getHtml()&&i.startContainer.appendBogus(),i.select(),e=!0):e=!1;if(!e)return;t.getSelection().scrollIntoView();t.fire('saveSnapshot');return!1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1);this.clearListeners();this.restoreAttrs();var e;if(e=this.removeCustomData('classes'))for(;e.length;)this.removeClass(e.pop());if(!this.is('textarea')){e=this.getDocument();var n=e.getHead();if(n.getCustomData('stylesheet')){var t=e.getCustomData('stylesheet_ref');--t?e.setCustomData('stylesheet_ref',t):(e.removeCustomData('stylesheet_ref'),n.removeCustomData('stylesheet').remove())}};this.editor.fire('contentDomUnload');delete this.editor}}});CKEDITOR.editor.prototype.editable=function(e){var t=this._.editable;if(t&&e)return 0;arguments.length&&(t=this._.editable=e?e instanceof CKEDITOR.editable?e:new CKEDITOR.editable(this,e):(t&&t.detach(),null));return t};CKEDITOR.on('instanceLoaded',function(e){var t=e.editor;t.on('insertElement',function(e){e=e.data;e.type==CKEDITOR.NODE_ELEMENT&&(e.is('input')||e.is('textarea'))&&('false'!=e.getAttribute('contentEditable')&&e.data('cke-editable',e.hasAttribute('contenteditable')?'true':'1'),e.setAttribute('contentEditable',!1))});t.on('selectionChange',function(e){if(!t.readOnly){var n=t.getSelection();n&&!n.isLocked&&(n=t.checkDirty(),t.fire('lockSnapshot'),m(e),t.fire('unlockSnapshot'),!n&&t.resetDirty())}})});CKEDITOR.on('instanceCreated',function(e){var t=e.editor;t.on('mode',function(){var e=t.editable();if(e&&e.isInline()){var n=t.title;e.changeAttr('role','textbox');e.changeAttr('aria-label',n);n&&e.changeAttr('title',n);var i=t.fire('ariaEditorHelpLabel',{}).label;if(i&&(n=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?'top':'contents'))){var o=CKEDITOR.tools.getNextId(),i=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+o+'" class\x3d"cke_voice_label"\x3e'+i+'\x3c/span\x3e');n.append(i);e.changeAttr('aria-describedby',o)}}})});CKEDITOR.addCss('.cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}');n=CKEDITOR.dom.walker.whitespaces(!0);a=CKEDITOR.dom.walker.bookmark(!1,!0);i=CKEDITOR.dom.walker.empty();o=CKEDITOR.dom.walker.bogus();r=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi;s=function(){function t(e){return e.type==CKEDITOR.NODE_ELEMENT};function a(e,i){var r,s,c,u,l=[],h=i.range.startContainer;r=i.range.startPath();for(var h=n[h.getName()],o=0,f=e.getChildren(),E=f.count(),d=-1,m=-1,g=0,p=r.contains(n.$list);o<E;++o)r=f.getItem(o),t(r)?(c=r.getName(),p&&c in CKEDITOR.dtd.$list?l=l.concat(a(r,i)):(u=!!h[c],'br'!=c||!r.data('cke-eol')||o&&o!=E-1||(g=(s=o?l[o-1].node:f.getItem(o+1))&&(!t(s)||!s.is('br')),s=s&&t(s)&&n.$block[s.getName()]),-1!=d||u||(d=o),u||(m=o),l.push({isElement:1,isLineBreak:g,isBlock:r.isBlockBoundary(),hasBlockSibling:s,node:r,name:c,allowed:u}),s=g=0)):l.push({isElement:0,node:r,allowed:1});-1<d&&(l[d].firstNotAllowed=1);-1<m&&(l[m].lastNotAllowed=1);return l};function r(e,i){var o=[],l=e.getChildren(),d=l.count(),a,s=0,u=n[i],c=!e.is(n.$inline)||e.is('br');for(c&&o.push(' ');s<d;s++)a=l.getItem(s),t(a)&&!a.is(u)?o=o.concat(r(a,i)):o.push(a);c&&o.push(' ');return o};function s(e){return t(e.startContainer)&&e.startContainer.getChild(e.startOffset-1)};function i(e){return e&&t(e)&&(e.is(n.$removeEmpty)||e.is('a')&&!e.isBlockBoundary())};function c(e,n,i,o){var s=e.clone(),a,r;s.setEndAt(n,CKEDITOR.POSITION_BEFORE_END);(a=(new CKEDITOR.dom.walker(s)).next())&&t(a)&&d[a.getName()]&&(r=a.getPrevious())&&t(r)&&!r.getParent().equals(e.startContainer)&&i.contains(r)&&o.contains(a)&&a.isIdentical(r)&&(a.moveChildren(r),a.remove(),c(e,n,i,o))};function f(e,n){function a(e,n){if(n.isBlock&&n.isElement&&!n.node.is('br')&&t(e)&&e.is('br'))return e.remove(),1};var i=n.endContainer.getChild(n.endOffset),o=n.endContainer.getChild(n.endOffset-1);i&&a(i,e[e.length-1]);o&&a(o,e[0])&&(n.setEnd(n.endContainer,n.endOffset-1),n.collapse())};var n=CKEDITOR.dtd,d={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},h={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},o=CKEDITOR.tools.extend({},n.$inline);delete o.br;return function(d,m,g,E){var T=d.editor,k=!1;'unfiltered_html'==m&&(m='html',k=!0);if(!E.checkReadOnly()){var v=(new CKEDITOR.dom.elementPath(E.startContainer,E.root)).blockLimit||E.root;d={type:m,dontFilter:k,editable:d,editor:T,range:E,blockLimit:v,mergeCandidates:[],zombies:[]};m=d.range;E=d.mergeCandidates;var C,O;'text'==d.type&&m.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(C=CKEDITOR.dom.element.createFromHtml('\x3cspan\x3e\x26nbsp;\x3c/span\x3e',m.document),m.insertNode(C),m.setStartAfter(C));k=new CKEDITOR.dom.elementPath(m.startContainer);d.endPath=v=new CKEDITOR.dom.elementPath(m.endContainer);if(!m.collapsed){var T=v.block||v.blockLimit,B=m.getCommonAncestor();T&&!T.equals(B)&&!T.contains(B)&&m.checkEndOfBlock()&&d.zombies.push(T);m.deleteContents()};for(;(O=s(m))&&t(O)&&O.isBlockBoundary()&&k.contains(O);)m.moveToPosition(O,CKEDITOR.POSITION_BEFORE_END);c(m,d.blockLimit,k,v);C&&(m.setEndBefore(C),m.collapse(),C.remove());C=m.startPath();if(T=C.contains(i,!1,1))m.splitElement(T),d.inlineStylesRoot=T,d.inlineStylesPeak=C.lastElement;C=m.createBookmark();(T=C.startNode.getPrevious(e))&&t(T)&&i(T)&&E.push(T);(T=C.startNode.getNext(e))&&t(T)&&i(T)&&E.push(T);for(T=C.startNode;(T=T.getParent())&&i(T);)E.push(T);m.moveToBookmark(C);if(C=g){C=d.range;if('text'==d.type&&d.inlineStylesRoot){O=d.inlineStylesPeak;m=O.getDocument().createText('{cke-peak}');for(E=d.inlineStylesRoot.getParent();!O.equals(E);)m=m.appendTo(O.clone()),O=O.getParent();g=m.getOuterHtml().split('{cke-peak}').join(g)};O=d.blockLimit.getName();if(/^\s+|\s+$/.test(g)&&'span'in CKEDITOR.dtd[O]){var K='\x3cspan data-cke-marker\x3d"1"\x3e\x26nbsp;\x3c/span\x3e';g=K+g+K};g=d.editor.dataProcessor.toHtml(g,{context:null,fixForBody:!1,protectedWhitespaces:!!K,dontFilter:d.dontFilter,filter:d.editor.activeFilter,enterMode:d.editor.activeEnterMode});O=C.document.createElement('body');O.setHtml(g);K&&(O.getFirst().remove(),O.getLast().remove());if((K=C.startPath().block)&&(1!=K.getChildCount()||!K.getBogus()))t:{var I;if(1==O.getChildCount()&&t(I=O.getFirst())&&I.is(h)&&!I.hasAttribute('contenteditable')){K=I.getElementsByTag('*');C=0;for(E=K.count();C<E;C++)if(m=K.getItem(C),!m.is(o))break t;I.moveChildren(I.getParent(1));I.remove()}};d.dataWrapper=O;C=g};if(C){I=d.range;C=I.document;var p;O=d.blockLimit;E=0;var R,K=[],D,x;g=T=0;var b,S;m=I.startContainer;var k=d.endPath.elements[0],N,v=k.getPosition(m),B=!!k.getCommonAncestor(m)&&v!=CKEDITOR.POSITION_IDENTICAL&&!(v&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);m=a(d.dataWrapper,d);for(f(m,I);E<m.length;E++){v=m[E];if(p=v.isLineBreak){p=I;b=O;var y=void 0,A=void 0;v.hasBlockSibling?p=1:(y=p.startContainer.getAscendant(n.$block,1))&&y.is({div:1,p:1})?(A=y.getPosition(b),A==CKEDITOR.POSITION_IDENTICAL||A==CKEDITOR.POSITION_CONTAINS?p=0:(b=p.splitElement(y),p.moveToPosition(b,CKEDITOR.POSITION_AFTER_START),p=1)):p=0};if(p)g=0<E;else{p=I.startPath();!v.isBlock&&l(d.editor,p.block,p.blockLimit)&&(x=u(d.editor))&&(x=C.createElement(x),x.appendBogus(),I.insertNode(x),CKEDITOR.env.needsBrFiller&&(R=x.getBogus())&&R.remove(),I.moveToPosition(x,CKEDITOR.POSITION_BEFORE_END));if((p=I.startPath().block)&&!p.equals(D)){if(R=p.getBogus())R.remove(),K.push(p);D=p};v.firstNotAllowed&&(T=1);if(T&&v.isElement){p=I.startContainer;for(b=null;p&&!n[p.getName()][v.name];){if(p.equals(O)){p=null;break};b=p;p=p.getParent()};if(p)b&&(S=I.splitElement(b),d.zombies.push(S),d.zombies.push(b));else{b=O.getName();N=!E;p=E==m.length-1;b=r(v.node,b);for(var y=[],A=b.length,L=0,P=void 0,F=0,M=-1;L<A;L++)P=b[L],' '==P?(F||N&&!L||(y.push(new CKEDITOR.dom.text(' ')),M=y.length),F=1):(y.push(P),F=0);p&&M==y.length&&y.pop();N=y}};if(N){for(;p=N.pop();)I.insertNode(p);N=0}
else I.insertNode(v.node);v.lastNotAllowed&&E<m.length-1&&((S=B?k:S)&&I.setEndAt(S,CKEDITOR.POSITION_AFTER_START),T=0);I.collapse()}};1!=m.length?R=!1:(R=m[0],R=R.isElement&&'false'==R.node.getAttribute('contenteditable'));R&&(g=!0,p=m[0].node,I.setStartAt(p,CKEDITOR.POSITION_BEFORE_START),I.setEndAt(p,CKEDITOR.POSITION_AFTER_END));d.dontMoveCaret=g;d.bogusNeededBlocks=K};R=d.range;var w;S=d.bogusNeededBlocks;for(N=R.createBookmark();D=d.zombies.pop();)D.getParent()&&(x=R.clone(),x.moveToElementEditStart(D),x.removeEmptyBlocksAtEnd());if(S)for(;D=S.pop();)CKEDITOR.env.needsBrFiller?D.appendBogus():D.append(R.document.createText(' '));for(;D=d.mergeCandidates.pop();)D.mergeSiblings();R.moveToBookmark(N);if(!d.dontMoveCaret){for(D=s(R);D&&t(D)&&!D.is(n.$empty);){if(D.isBlockBoundary())R.moveToPosition(D,CKEDITOR.POSITION_BEFORE_END);else{if(i(D)&&D.getHtml().match(/(\s|&nbsp;)$/g)){w=null;break};w=R.clone();w.moveToPosition(D,CKEDITOR.POSITION_BEFORE_END)};D=D.getLast(e)};w&&R.moveToRange(w)}}}}();c=function(){function e(e){e=new CKEDITOR.dom.walker(e);e.guard=function(e,t){if(t)return!1;if(e.type==CKEDITOR.NODE_ELEMENT)return e.is(CKEDITOR.dtd.$tableContent)};e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT};return e};function t(e,t,n){t=e.getDocument().createElement(t);e.append(t,n);return t};function n(e){var n=e.count(),t;for(n;0<n--;)t=e.getItem(n),CKEDITOR.tools.trim(t.getHtml())||(t.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&t.getChildCount()&&t.getFirst().remove())};return function(i){var a=i.startContainer,o=a.getAscendant('table',1),r=!1;n(o.getElementsByTag('td'));n(o.getElementsByTag('th'));o=i.clone();o.setStart(a,0);o=e(o).lastBackward();o||(o=i.clone(),o.setEndAt(a,CKEDITOR.POSITION_BEFORE_END),o=e(o).lastForward(),r=!0);o||(o=a);o.is('table')?(i.setStartAt(o,CKEDITOR.POSITION_BEFORE_START),i.collapse(!0),o.remove()):(o.is({tbody:1,thead:1,tfoot:1})&&(o=t(o,'tr',r)),o.is('tr')&&(o=t(o,o.getParent().is('thead')?'th':'td',r)),(a=o.getBogus())&&a.remove(),i.moveToPosition(o,r?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}();t={eol:{detect:function(e,t){var n=e.range,a=n.clone(),r=n.clone(),i=new CKEDITOR.dom.elementPath(n.startContainer,t),o=new CKEDITOR.dom.elementPath(n.endContainer,t);a.collapse(1);r.collapse();i.block&&a.checkBoundaryOfElement(i.block,CKEDITOR.END)&&(n.setStartAfter(i.block),e.prependEolBr=1);o.block&&r.checkBoundaryOfElement(o.block,CKEDITOR.START)&&(n.setEndBefore(o.block),e.appendEolBr=1)},fix:function(e,t){var i=t.getDocument(),n;e.appendEolBr&&(n=this.createEolBr(i),e.fragment.append(n));!e.prependEolBr||n&&!n.getPrevious()||e.fragment.append(this.createEolBr(i),1)},createEolBr:function(e){return e.createElement('br',{attributes:{'data-cke-eol':1}})}},bogus:{exclude:function(e){var t=e.range.getBoundaryNodes(),n=t.startNode,t=t.endNode;!t||!o(t)||n&&n.equals(t)||e.range.setEndBefore(t)}},tree:{rebuild:function(e,t){var n=e.range,o=n.getCommonAncestor(),i=new CKEDITOR.dom.elementPath(o,t),r=new CKEDITOR.dom.elementPath(n.startContainer,t),n=new CKEDITOR.dom.elementPath(n.endContainer,t),a;o.type==CKEDITOR.NODE_TEXT&&(o=o.getParent());if(i.blockLimit.is({tr:1,table:1})){var l=i.contains('table').getParent();a=function(e){return!e.equals(l)}}
else if(i.block&&i.block.is(CKEDITOR.dtd.$listItem)&&(r=r.contains(CKEDITOR.dtd.$list),n=n.contains(CKEDITOR.dtd.$list),!r.equals(n))){var s=i.contains(CKEDITOR.dtd.$list).getParent();a=function(e){return!e.equals(s)}};a||(a=function(e){return!e.equals(i.block)&&!e.equals(i.blockLimit)});this.rebuildFragment(e,t,o,a)},rebuildFragment:function(e,t,n,i){for(var o;n&&!n.equals(t)&&i(n);)o=n.clone(0,1),e.fragment.appendTo(o),e.fragment=o,n=n.getParent()}},cell:{shrink:function(e){e=e.range;var t=e.startContainer,n=e.endContainer,i=e.startOffset,o=e.endOffset;t.type==CKEDITOR.NODE_ELEMENT&&t.equals(n)&&t.is('tr')&&++i==o&&e.shrink(CKEDITOR.SHRINK_TEXT)}}};d=function(){function e(e,t){var n=e.getParent();if(n.is(CKEDITOR.dtd.$inline))e[t?'insertBefore':'insertAfter'](n)};function t(t,n,o){e(n);e(o,1);for(var a;a=o.getNext();)a.insertAfter(n),n=a;i(t)&&t.remove()};function n(e,t){var n=new CKEDITOR.dom.range(e);n.setStartAfter(t.startNode);n.setEndBefore(t.endNode);return n};return{list:{detectMerge:function(e,t){var i=n(t,e.bookmark),o=i.startPath(),a=i.endPath(),r=o.contains(CKEDITOR.dtd.$list),s=a.contains(CKEDITOR.dtd.$list);e.mergeList=r&&s&&r.getParent().equals(s.getParent())&&!r.equals(s);e.mergeListItems=o.block&&a.block&&o.block.is(CKEDITOR.dtd.$listItem)&&a.block.is(CKEDITOR.dtd.$listItem);if(e.mergeList||e.mergeListItems)i=i.clone(),i.setStartBefore(e.bookmark.startNode),i.setEndAfter(e.bookmark.endNode),e.mergeListBookmark=i.createBookmark()},merge:function(e,n){if(e.mergeListBookmark){var r=e.mergeListBookmark.startNode,s=e.mergeListBookmark.endNode,o=new CKEDITOR.dom.elementPath(r,n),i=new CKEDITOR.dom.elementPath(s,n);if(e.mergeList){var l=o.contains(CKEDITOR.dtd.$list),a=i.contains(CKEDITOR.dtd.$list);l.equals(a)||(a.moveChildren(l),a.remove())};e.mergeListItems&&(o=o.contains(CKEDITOR.dtd.$listItem),i=i.contains(CKEDITOR.dtd.$listItem),o.equals(i)||t(i,r,s));r.remove();s.remove()}}},block:{detectMerge:function(e,t){if(!e.tableContentsRanges&&!e.mergeListBookmark){var n=new CKEDITOR.dom.range(t);n.setStartBefore(e.bookmark.startNode);n.setEndAfter(e.bookmark.endNode);e.mergeBlockBookmark=n.createBookmark()}},merge:function(e,n){if(e.mergeBlockBookmark&&!e.purgeTableBookmark){var a=e.mergeBlockBookmark.startNode,r=e.mergeBlockBookmark.endNode,o=new CKEDITOR.dom.elementPath(a,n),i=new CKEDITOR.dom.elementPath(r,n),o=o.block,i=i.block;o&&i&&!o.equals(i)&&t(i,a,r);a.remove();r.remove()}}},table:function(){function t(t){var r=[],n,s=new CKEDITOR.dom.walker(t),i=t.startPath().contains(e),a=t.endPath().contains(e),l={};s.guard=function(s,c){if(s.type==CKEDITOR.NODE_ELEMENT){var d='visited_'+(c?'out':'in');if(s.getCustomData(d))return;CKEDITOR.dom.element.setMarker(l,s,d,1)};if(c&&i&&s.equals(i))n=t.clone(),n.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),r.push(n);else if(!c&&a&&s.equals(a))n=t.clone(),n.setStartAt(a,CKEDITOR.POSITION_AFTER_START),r.push(n);else{if(d=!c)d=s.type==CKEDITOR.NODE_ELEMENT&&s.is(e)&&(!i||o(s,i))&&(!a||o(s,a));d&&(n=t.clone(),n.selectNodeContents(s),r.push(n))}};s.lastForward();CKEDITOR.dom.element.clearAllMarkers(l);return r};function o(e,t){var i=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,n=e.getPosition(t);return n===CKEDITOR.POSITION_IDENTICAL?!1:0===(n&i)};var e={td:1,th:1,caption:1};return{detectPurge:function(t){var i=t.range,n=i.clone();n.enlarge(CKEDITOR.ENLARGE_ELEMENT);var n=new CKEDITOR.dom.walker(n),a=0;n.evaluator=function(t){t.type==CKEDITOR.NODE_ELEMENT&&t.is(e)&&++a};n.checkForward();if(1<a){var n=i.startPath().contains('table'),o=i.endPath().contains('table');n&&o&&i.checkBoundaryOfElement(n,CKEDITOR.START)&&i.checkBoundaryOfElement(o,CKEDITOR.END)&&(i=t.range.clone(),i.setStartBefore(n),i.setEndAfter(o),t.purgeTableBookmark=i.createBookmark())}},detectRanges:function(i,a){var c=n(a,i.bookmark),l=c.clone(),d,s,r=c.getCommonAncestor();r.is(CKEDITOR.dtd.$tableContent)&&!r.is(e)&&(r=r.getAscendant('table',!0));s=r;r=new CKEDITOR.dom.elementPath(c.startContainer,s);s=new CKEDITOR.dom.elementPath(c.endContainer,s);r=r.contains('table');s=s.contains('table');if(r||s)r&&s&&o(r,s)?(i.tableSurroundingRange=l,l.setStartAt(r,CKEDITOR.POSITION_AFTER_END),l.setEndAt(s,CKEDITOR.POSITION_BEFORE_START),l=c.clone(),l.setEndAt(r,CKEDITOR.POSITION_AFTER_END),d=c.clone(),d.setStartAt(s,CKEDITOR.POSITION_BEFORE_START),d=t(l).concat(t(d))):r?s||(i.tableSurroundingRange=l,l.setStartAt(r,CKEDITOR.POSITION_AFTER_END),c.setEndAt(r,CKEDITOR.POSITION_AFTER_END)):(i.tableSurroundingRange=l,l.setEndAt(s,CKEDITOR.POSITION_BEFORE_START),c.setStartAt(s,CKEDITOR.POSITION_AFTER_START)),i.tableContentsRanges=d?d:t(c)},deleteRanges:function(e){for(var t;t=e.tableContentsRanges.pop();)t.extractContents(),i(t.startContainer)&&t.startContainer.appendBogus();e.tableSurroundingRange&&e.tableSurroundingRange.extractContents()},purge:function(e){if(e.purgeTableBookmark){var t=e.doc,n=e.range.clone(),t=t.createElement('p');t.insertBefore(e.purgeTableBookmark.startNode);n.moveToBookmark(e.purgeTableBookmark);n.deleteContents();e.range.moveToPosition(t,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(e){return!(e.range.startPath().contains(CKEDITOR.dtd.$listItem)&&e.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(e){e.startContainer.getDtd()['#']||e.moveToClosestEditablePosition(null,!0)},autoParagraph:function(e,t){var i=t.startPath(),n;l(e,i.block,i.blockLimit)&&(n=u(e))&&(n=t.document.createElement(n),n.appendBogus(),t.insertNode(n),t.moveToPosition(n,CKEDITOR.POSITION_AFTER_START))}}}()})();(function(){function c(){var e=this._.fakeSelection,t;e&&(t=this.getSelection(1),t&&t.isHidden()||(e.reset(),e=0));if(!e&&(e=t||this.getSelection(1),!e||e.getType()==CKEDITOR.SELECTION_NONE))return;this.fire('selectionCheck',e);t=this.elementPath();if(!t.compare(this._.selectionPreviousPath)){var n=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(t.blockLimit);CKEDITOR.env.webkit&&!n&&(this._.previousActive=this.document.getActive());this._.selectionPreviousPath=t;this.fire('selectionChange',{selection:e,path:t})}};function i(){l=!0;s||(d.call(this),s=CKEDITOR.tools.setTimeout(d,200,this))};function d(){s=null;l&&(CKEDITOR.tools.setTimeout(c,0,this),l=!1)};function u(e){return m(e)||e.type==CKEDITOR.NODE_ELEMENT&&!e.is(CKEDITOR.dtd.$empty)?!0:!1};function E(e){function o(t,n){return t&&t.type!=CKEDITOR.NODE_TEXT?e.clone()['moveToElementEdit'+(n?'End':'Start')](t):!1};if(!(e.root instanceof CKEDITOR.editable))return!1;var t=e.startContainer,n=e.getPreviousNode(u,null,t),i=e.getNextNode(u,null,t);return o(n)||o(i,1)||!(n||i||t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()&&t.getBogus())?!0:!1};function h(e){n(e,!1);var i=e.getDocument().createText(t);e.setCustomData('cke-fillingChar',i);return i};function n(e,n){var a=e&&e.removeCustomData('cke-fillingChar');if(a){if(!1!==n){var i=e.getDocument().getSelection().getNative(),l=i&&'None'!=i.type&&i.getRangeAt(0),s=t.length;if(a.getLength()>s&&l&&l.intersectsNode(a.$)){var r=[{node:i.anchorNode,offset:i.anchorOffset},{node:i.focusNode,offset:i.focusOffset}];i.anchorNode==a.$&&i.anchorOffset>s&&(r[0].offset-=s);i.focusNode==a.$&&i.focusOffset>s&&(r[1].offset-=s)}};a.setText(o(a.getText(),1));r&&(a=e.getDocument().$,i=a.getSelection(),a=a.createRange(),a.setStart(r[0].node,r[0].offset),a.collapse(!0),i.removeAllRanges(),i.addRange(a),i.extend(r[1].node,r[1].offset))}};function o(e,n){return n?e.replace(f,function(e,t){return t?' ':''}):e.replace(t,'')};function p(e,t){var n=CKEDITOR.dom.element.createFromHtml('\x3cdiv data-cke-hidden-sel\x3d"1" data-cke-temp\x3d"1" style\x3d"'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?'display:none':'position:fixed;top:0;left:-1000px')+'"\x3e'+(t||'\x26nbsp;')+'\x3c/div\x3e',e.document);e.fire('lockSnapshot');e.editable().append(n);var o=e.getSelection(1),i=e.createRange(),a=o.root.on('selectionchange',function(e){e.cancel()},null,null,0);i.setStartAt(n,CKEDITOR.POSITION_AFTER_START);i.setEndAt(n,CKEDITOR.POSITION_BEFORE_END);o.selectRanges([i]);a.removeListener();e.fire('unlockSnapshot');e._.hiddenSelectionContainer=n};function T(e){var t={37:1,39:1,8:1,46:1};return function(n){var i=n.data.getKeystroke();if(t[i]){var o=e.getSelection().getRanges(),a=o[0];1==o.length&&a.collapsed&&(i=a[38>i?'getPreviousEditableNode':'getNextEditableNode']())&&i.type==CKEDITOR.NODE_ELEMENT&&'false'==i.getAttribute('contenteditable')&&(e.getSelection().fake(i),n.data.preventDefault(),n.cancel())}}};function C(e){for(var a=0;a<e.length;a++){var n=e[a];n.getCommonAncestor().isReadOnly()&&e.splice(a,1);if(!n.collapsed){if(n.startContainer.isReadOnly())for(var t=n.startContainer,i;t&&!((i=t.type==CKEDITOR.NODE_ELEMENT)&&t.is('body')||!t.isReadOnly());)i&&'false'==t.getAttribute('contentEditable')&&n.setStartAfter(t),t=t.getParent();t=n.startContainer;i=n.endContainer;var r=n.startOffset,s=n.endOffset,o=n.clone();t&&t.type==CKEDITOR.NODE_TEXT&&(r>=t.getLength()?o.setStartAfter(t):o.setStartBefore(t));i&&i.type==CKEDITOR.NODE_TEXT&&(s?o.setEndAfter(i):o.setEndBefore(i));t=new CKEDITOR.dom.walker(o);t.evaluator=function(t){if(t.type==CKEDITOR.NODE_ELEMENT&&t.isReadOnly()){var i=n.clone();n.setEndBefore(t);n.collapsed&&e.splice(a--,1);t.getPosition(o.endContainer)&CKEDITOR.POSITION_CONTAINS||(i.setStartAfter(t),i.collapsed||e.splice(a+1,0,i));return!0};return!1};t.next()}};return e};var e='function'!=typeof window.getSelection,r=1,t=CKEDITOR.tools.repeat('​',7),f=new RegExp(t+'( )?','g'),s,l,m=CKEDITOR.dom.walker.invisible(1),g=function(){function n(e){return function(t){var n=t.editor.createRange();n.moveToClosestEditablePosition(t.selected,e)&&t.editor.getSelection().selectRanges([n]);return!1}};function i(e){return function(t){var n=t.editor,i=n.createRange(),o;(o=i.moveToClosestEditablePosition(t.selected,e))||(o=i.moveToClosestEditablePosition(t.selected,!e));o&&n.getSelection().selectRanges([i]);n.fire('saveSnapshot');t.selected.remove();o||(i.moveToElementEditablePosition(n.editable()),n.getSelection().selectRanges([i]));n.fire('saveSnapshot');return!1}};var e=n(),t=n(1);return{37:e,38:e,39:t,40:t,8:i(),46:i(1)}}();CKEDITOR.on('instanceCreated',function(t){function a(){var e=o.getSelection();e&&e.removeAllRanges()};var o=t.editor;o.on('contentDom',function(){function C(){g=new CKEDITOR.dom.selection(o.getSelection());g.lock()};function h(){u.removeListener('mouseup',h);a.removeListener('mouseup',h);var e=CKEDITOR.document.$.selection,t=e.createRange();'None'!=e.type&&t.parentElement().ownerDocument==r.$&&t.select()};var r=o.document,u=CKEDITOR.document,t=o.editable(),p=r.getBody(),a=r.getDocumentElement(),m=t.isInline(),s,g;CKEDITOR.env.gecko&&t.attachListener(t,'focus',function(e){e.removeListener();0!==s&&(e=o.getSelection().getNative())&&e.isCollapsed&&e.anchorNode==t.$&&(e=o.createRange(),e.moveToElementEditStart(t),e.select())},null,null,-2);t.attachListener(t,CKEDITOR.env.webkit?'DOMFocusIn':'focus',function(){s&&CKEDITOR.env.webkit&&(s=o._.previousActive&&o._.previousActive.equals(r.getActive()))&&null!=o._.previousScrollTop&&o._.previousScrollTop!=t.$.scrollTop&&(t.$.scrollTop=o._.previousScrollTop);o.unlockSelection(s);s=0},null,null,-1);t.attachListener(t,'mousedown',function(){s=0});if(CKEDITOR.env.ie||m)e?t.attachListener(t,'beforedeactivate',C,null,null,-1):t.attachListener(o,'selectionCheck',C,null,null,-1),t.attachListener(t,CKEDITOR.env.webkit?'DOMFocusOut':'blur',function(){o.lockSelection(g);s=1},null,null,-1),t.attachListener(t,'mousedown',function(){s=0});if(CKEDITOR.env.ie&&!m){var d;t.attachListener(t,'mousedown',function(e){2==e.data.$.button&&((e=o.document.getSelection())&&e.getType()!=CKEDITOR.SELECTION_NONE||(d=o.window.getScrollPosition()))});t.attachListener(t,'mouseup',function(e){2==e.data.$.button&&d&&(o.document.$.documentElement.scrollLeft=d.x,o.document.$.documentElement.scrollTop=d.y);d=null});if('BackCompat'!=r.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){var l,E;a.on('mousedown',function(e){function i(e){e=e.data.$;if(l){var n=p.$.createTextRange();try{n.moveToPoint(e.clientX,e.clientY)}catch(t){};l.setEndPoint(0>E.compareEndPoints('StartToStart',n)?'EndToEnd':'StartToStart',n);l.select()}};function n(){a.removeListener('mousemove',i);u.removeListener('mouseup',n);a.removeListener('mouseup',n);l.select()};e=e.data;if(e.getTarget().is('html')&&e.$.y<a.$.clientHeight&&e.$.x<a.$.clientWidth){l=p.$.createTextRange();try{l.moveToPoint(e.$.clientX,e.$.clientY)}catch(t){};E=l.duplicate();a.on('mousemove',i);u.on('mouseup',n);a.on('mouseup',n)}})};if(7<CKEDITOR.env.version&&11>CKEDITOR.env.version)a.on('mousedown',function(e){e.data.getTarget().is('html')&&(u.on('mouseup',h),a.on('mouseup',h))})}};t.attachListener(t,'selectionchange',c,o);t.attachListener(t,'keyup',i,o);t.attachListener(t,CKEDITOR.env.webkit?'DOMFocusIn':'focus',function(){o.forceNextSelectionCheck();o.selectionChange(1)});if(m&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var f;t.attachListener(t,'mousedown',function(){f=1});t.attachListener(r.getDocumentElement(),'mouseup',function(){f&&i.call(o);f=0})}
else t.attachListener(CKEDITOR.env.ie?t:r.getDocumentElement(),'mouseup',i,o);CKEDITOR.env.webkit&&t.attachListener(r,'keydown',function(e){switch(e.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:n(t)}},null,null,-1);t.attachListener(t,'keydown',T(o),null,null,-1)});o.on('setData',function(){o.unlockSelection();CKEDITOR.env.webkit&&a()});o.on('contentDomUnload',function(){o.unlockSelection()});if(CKEDITOR.env.ie9Compat)o.on('beforeDestroy',a,null,null,9);o.on('dataReady',function(){delete o._.fakeSelection;delete o._.hiddenSelectionContainer;o.selectionChange(1)});o.on('loadSnapshot',function(){var e=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),t=o.editable().getLast(e);t&&t.hasAttribute('data-cke-hidden-sel')&&(t.remove(),CKEDITOR.env.gecko&&(e=o.editable().getFirst(e))&&e.is('br')&&e.getAttribute('_moz_editor_bogus_node')&&e.remove())},null,null,100);o.on('key',function(e){if('wysiwyg'==o.mode){var t=o.getSelection();if(t.isFake){var n=g[e.data.keyCode];if(n)return n({editor:o,selected:t.getSelectedElement(),selection:t,keyEvent:e})}}})});if(CKEDITOR.env.webkit)CKEDITOR.on('instanceReady',function(e){var t=e.editor;t.on('selectionChange',function(){var i=t.editable(),e=i.getCustomData('cke-fillingChar');e&&(e.getCustomData('ready')?n(i):e.setCustomData('ready',1))},null,null,-1);t.on('beforeSetMode',function(){n(t.editable())},null,null,-1);t.on('getSnapshot',function(e){e.data&&(e.data=o(e.data))},t,null,20);t.on('toDataFormat',function(e){e.data.dataValue=o(e.data.dataValue)},null,null,0)});CKEDITOR.editor.prototype.selectionChange=function(e){(e?c:i).call(this)};CKEDITOR.editor.prototype.getSelection=function(e){return!this._.savedSelection&&!this._.fakeSelection||e?(e=this.editable())&&'wysiwyg'==this.mode?new CKEDITOR.dom.selection(e):null:this._.savedSelection||this._.fakeSelection};CKEDITOR.editor.prototype.lockSelection=function(e){e=e||this.getSelection(1);return e.getType()!=CKEDITOR.SELECTION_NONE?(!e.isLocked&&e.lock(),this._.savedSelection=e,!0):!1};CKEDITOR.editor.prototype.unlockSelection=function(e){var t=this._.savedSelection;return t?(t.unlock(e),delete this._.savedSelection,!0):!1};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)};CKEDITOR.dom.range.prototype.select=function(){var e=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);e.selectRanges([this]);return e};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;CKEDITOR.dom.selection=function(e){if(e instanceof CKEDITOR.dom.selection){var o=e;e=e.root};var a=e instanceof CKEDITOR.dom.element;this.rev=o?o.rev:r++;this.document=e instanceof CKEDITOR.dom.document?e:e.getDocument();this.root=a?e:this.document.getBody();this.isLocked=0;this._={cache:{}};if(o)return CKEDITOR.tools.extend(this._.cache,o._.cache),this.isFake=o.isFake,this.isLocked=o.isLocked,this;e=this.getNative();var n,i;if(e)if(e.getRangeAt)n=(i=e.rangeCount&&e.getRangeAt(0))&&new CKEDITOR.dom.node(i.commonAncestorContainer);else{try{i=e.createRange()}catch(t){};n=i&&CKEDITOR.dom.element.get(i.item&&i.item(0)||i.parentElement())};if(!n||n.type!=CKEDITOR.NODE_ELEMENT&&n.type!=CKEDITOR.NODE_TEXT||!this.root.equals(n)&&!this.root.contains(n))this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText='',this._.cache.ranges=new CKEDITOR.dom.rangeList;return this};var a={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:o,_createFillingCharSequenceNode:h,FILLING_CHAR_SEQUENCE:t});CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=e?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:e?function(){var n=this._.cache;if(n.type)return n.type;var t=CKEDITOR.SELECTION_NONE;try{var i=this.getNative(),o=i.type;'Text'==o&&(t=CKEDITOR.SELECTION_TEXT);'Control'==o&&(t=CKEDITOR.SELECTION_ELEMENT);i.createRange().parentElement()&&(t=CKEDITOR.SELECTION_TEXT)}catch(e){};return n.type=t}:function(){var i=this._.cache;if(i.type)return i.type;var n=CKEDITOR.SELECTION_TEXT,e=this.getNative();if(!e||!e.rangeCount)n=CKEDITOR.SELECTION_NONE;else if(1==e.rangeCount){var e=e.getRangeAt(0),t=e.startContainer;t==e.endContainer&&1==t.nodeType&&1==e.endOffset-e.startOffset&&a[t.childNodes[e.startOffset].nodeName.toLowerCase()]&&(n=CKEDITOR.SELECTION_ELEMENT)};return i.type=n},getRanges:function(){var t=e?function(){function e(e){return(new CKEDITOR.dom.node(e)).getIndex()};var t=function(t,n){t=t.duplicate();t.collapse(n);var a=t.parentElement();if(!a.hasChildNodes())return{container:a,offset:0};for(var s=a.children,r,l,o=t.duplicate(),h=0,f=s.length-1,d=-1,c,u;h<=f;)if(d=Math.floor((h+f)/2),r=s[d],o.moveToElementText(r),c=o.compareEndPoints('StartToStart',t),0<c)f=d-1;else if(0>c)h=d+1;else return{container:a,offset:e(r)};if(-1==d||d==s.length-1&&0>c){o.moveToElementText(a);o.setEndPoint('StartToStart',t);o=o.text.replace(/(\r\n|\r)/g,'\n').length;s=a.childNodes;if(!o)return r=s[s.length-1],r.nodeType!=CKEDITOR.NODE_TEXT?{container:a,offset:s.length}:{container:r,offset:r.nodeValue.length};for(a=s.length;0<o&&0<a;)l=s[--a],l.nodeType==CKEDITOR.NODE_TEXT&&(u=l,o-=l.nodeValue.length);return{container:u,offset:-o}};o.collapse(0<c?!0:!1);o.setEndPoint(0<c?'StartToStart':'EndToStart',t);o=o.text.replace(/(\r\n|\r)/g,'\n').length;if(!o)return{container:a,offset:e(r)+(0<c?0:1)};for(;0<o;)try{l=r[0<c?'previousSibling':'nextSibling'],l.nodeType==CKEDITOR.NODE_TEXT&&(o-=l.nodeValue.length,u=l),r=l}catch(i){return{container:a,offset:e(r)}};return{container:u,offset:0<c?-o:u.nodeValue.length+o}};return function(){var e=this.getNative(),a=e&&e.createRange(),n=this.getType();if(!e)return[];if(n==CKEDITOR.SELECTION_TEXT)return e=new CKEDITOR.dom.range(this.root),n=t(a,!0),e.setStart(new CKEDITOR.dom.node(n.container),n.offset),n=t(a),e.setEnd(new CKEDITOR.dom.node(n.container),n.offset),e.endContainer.getPosition(e.startContainer)&CKEDITOR.POSITION_PRECEDING&&e.endOffset<=e.startContainer.getIndex()&&e.collapse(),[e];if(n==CKEDITOR.SELECTION_ELEMENT){for(var n=[],r=0;r<a.length;r++){for(var s=a.item(r),o=s.parentNode,i=0,e=new CKEDITOR.dom.range(this.root);i<o.childNodes.length&&o.childNodes[i]!=s;i++);e.setStart(new CKEDITOR.dom.node(o),i);e.setEnd(new CKEDITOR.dom.node(o),i+1);n.push(e)};return n};return[]}}():function(){var i=[],t,o=this.getNative();if(!o)return i;for(var n=0;n<o.rangeCount;n++){var e=o.getRangeAt(n);t=new CKEDITOR.dom.range(this.root);t.setStart(new CKEDITOR.dom.node(e.startContainer),e.startOffset);t.setEnd(new CKEDITOR.dom.node(e.endContainer),e.endOffset);i.push(t)};return i};return function(e){var i=this._.cache,n=i.ranges;n||(i.ranges=n=new CKEDITOR.dom.rangeList(t.call(this)));return e?C(new CKEDITOR.dom.rangeList(n.slice())):n}}(),getStartElement:function(){var n=this._.cache;if(void 0!==n.startElement)return n.startElement;var e;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var t=this.getRanges()[0];if(t){if(t.collapsed)e=t.startContainer,e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent());else{for(t.optimize();e=t.startContainer,t.startOffset==(e.getChildCount?e.getChildCount():e.getLength())&&!e.isBlockBoundary();)t.setStartAfter(e);e=t.startContainer;if(e.type!=CKEDITOR.NODE_ELEMENT)return e.getParent();if((e=e.getChild(t.startOffset))&&e.type==CKEDITOR.NODE_ELEMENT)for(t=e.getFirst();t&&t.type==CKEDITOR.NODE_ELEMENT;)e=t,t=t.getFirst();else e=t.startContainer};e=e.$}};return n.startElement=e?new CKEDITOR.dom.element(e):null},getSelectedElement:function(){var e=this._.cache;if(void 0!==e.selectedElement)return e.selectedElement;var t=this,n=CKEDITOR.tools.tryThese(function(){return t.getNative().createRange().item(0)},function(){for(var i=t.getRanges()[0].clone(),e,n,o=2;o&&!((e=i.getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT&&a[e.getName()]&&(n=e));o--)i.shrink(CKEDITOR.SHRINK_ELEMENT);return n&&n.$});return e.selectedElement=n?new CKEDITOR.dom.element(n):null},getSelectedText:function(){var n=this._.cache;if(void 0!==n.selectedText)return n.selectedText;var t=this.getNative(),t=e?'Control'==t.type?'':t.createRange().text:t.toString();return n.selectedText=t},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1},unlock:function(e){if(this.isLocked){if(e)var t=this.getSelectedElement(),n=!t&&this.getRanges(),i=this.isFake;this.isLocked=0;this.reset();e&&(e=t||n[0]&&n[0].getCommonAncestor())&&e.getAscendant('body',1)&&(i?this.fake(t):t?this.selectElement(t):this.selectRanges(n))}},reset:function(){this._.cache={};this.isFake=0;var e=this.root.editor;if(e&&e._.fakeSelection)if(this.rev==e._.fakeSelection.rev){delete e._.fakeSelection;var t=e._.hiddenSelectionContainer;if(t){var n=e.checkDirty();e.fire('lockSnapshot');t.remove();e.fire('unlockSnapshot');!n&&e.resetDirty()};delete e._.hiddenSelectionContainer}
else CKEDITOR.warn('selection-fake-reset');this.rev=r++},selectElement:function(e){var t=new CKEDITOR.dom.range(this.root);t.setStartBefore(e);t.setEndAfter(e);this.selectRanges([t])},selectRanges:function(t){var l=this.root.editor,l=l&&l._.hiddenSelectionContainer;this.reset();if(l)for(var l=this.root,f,g=0;g<t.length;++g)f=t[g],f.endContainer.equals(l)&&(f.endOffset=Math.min(f.endOffset,l.getChildCount()));if(t.length)if(this.isLocked){var u=CKEDITOR.document.getActive();this.unlock();this.selectRanges(t);this.lock();u&&!u.equals(this.root)&&u.focus()}
else{var o;t:{var s,m;if(1==t.length&&!(m=t[0]).collapsed&&(o=m.getEnclosedNode())&&o.type==CKEDITOR.NODE_ELEMENT&&(m=m.clone(),m.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(s=m.getEnclosedNode())&&s.type==CKEDITOR.NODE_ELEMENT&&(o=s),'false'==o.getAttribute('contenteditable')))break t;o=void 0};if(o)this.fake(o);else{if(e){m=CKEDITOR.dom.walker.whitespaces(!0);s=/\ufeff|\u00a0/;l={table:1,tbody:1,tr:1};1<t.length&&(o=t[t.length-1],t[0].setEnd(o.endContainer,o.endOffset));o=t[0];t=o.collapsed;var c,d,r;if((f=o.getEnclosedNode())&&f.type==CKEDITOR.NODE_ELEMENT&&f.getName()in a&&(!f.is('a')||!f.getText()))try{r=f.$.createControlRange();r.addElement(f.$);r.select();return}catch(i){};if(o.startContainer.type==CKEDITOR.NODE_ELEMENT&&o.startContainer.getName()in l||o.endContainer.type==CKEDITOR.NODE_ELEMENT&&o.endContainer.getName()in l)o.shrink(CKEDITOR.NODE_ELEMENT,!0),t=o.collapsed;r=o.createBookmark();l=r.startNode;t||(u=r.endNode);r=o.document.$.body.createTextRange();r.moveToElementText(l.$);r.moveStart('character',1);u?(s=o.document.$.body.createTextRange(),s.moveToElementText(u.$),r.setEndPoint('EndToEnd',s),r.moveEnd('character',-1)):(c=l.getNext(m),d=l.hasAscendant('pre'),c=!(c&&c.getText&&c.getText().match(s))&&(d||!l.hasPrevious()||l.getPrevious().is&&l.getPrevious().is('br')),d=o.document.createElement('span'),d.setHtml('\x26#65279;'),d.insertBefore(l),c&&o.document.createText('﻿').insertBefore(l));o.setStartBefore(l);l.remove();t?(c?(r.moveStart('character',-1),r.select(),o.document.$.selection.clear()):r.select(),o.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START),d.remove()):(o.setEndBefore(u),u.remove(),r.select())}
else{u=this.getNative();if(!u)return;this.removeAllRanges();for(r=0;r<t.length;r++){if(r<t.length-1&&(c=t[r],d=t[r+1],s=c.clone(),s.setStart(c.endContainer,c.endOffset),s.setEnd(d.startContainer,d.startOffset),!s.collapsed&&(s.shrink(CKEDITOR.NODE_ELEMENT,!0),o=s.getCommonAncestor(),s=s.getEnclosedNode(),o.isReadOnly()||s&&s.isReadOnly()))){d.setStart(c.startContainer,c.startOffset);t.splice(r--,1);continue};o=t[r];d=this.document.$.createRange();o.collapsed&&CKEDITOR.env.webkit&&E(o)&&(s=h(this.root),o.insertNode(s),(c=s.getNext())&&!s.getPrevious()&&c.type==CKEDITOR.NODE_ELEMENT&&'br'==c.getName()?(n(this.root),o.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START)):o.moveToPosition(s,CKEDITOR.POSITION_AFTER_END));d.setStart(o.startContainer.$,o.startOffset);try{d.setEnd(o.endContainer.$,o.endOffset)}catch(i){if(0<=i.toString().indexOf('NS_ERROR_ILLEGAL_VALUE'))o.collapse(1),d.setEnd(o.endContainer.$,o.endOffset);else throw i};u.addRange(d)}};this.reset();this.root.fire('selectionchange')}}},fake:function(e,t){var o=this.root.editor;void 0===t&&e.hasAttribute('aria-label')&&(t=e.getAttribute('aria-label'));this.reset();p(o,t);var n=this._.cache,i=new CKEDITOR.dom.range(this.root);i.setStartBefore(e);i.setEndAfter(e);n.ranges=new CKEDITOR.dom.rangeList(i);n.selectedElement=n.startElement=e;n.type=CKEDITOR.SELECTION_ELEMENT;n.selectedText=n.nativeSel=null;this.isFake=1;this.rev=r++;o._.fakeSelection=this;this.root.fire('selectionchange')},isHidden:function(){var e=this.getCommonAncestor();e&&e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent());return!(!e||!e.data('cke-hidden-sel'))},createBookmarks:function(e){e=this.getRanges().createBookmarks(e);this.isFake&&(e.isFake=1);return e},createBookmarks2:function(e){e=this.getRanges().createBookmarks2(e);this.isFake&&(e.isFake=1);return e},selectBookmarks:function(e){for(var n=[],t,i=0;i<e.length;i++){var o=new CKEDITOR.dom.range(this.root);o.moveToBookmark(e[i]);n.push(o)};e.isFake&&(t=n[0].getEnclosedNode(),t&&t.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn('selection-not-fake'),e.isFake=0));e.isFake?this.fake(t):this.selectRanges(n);return this},getCommonAncestor:function(){var e=this.getRanges();return e.length?e[0].startContainer.getCommonAncestor(e[e.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var n=this.getNative();try{n&&n[e?'empty':'removeAllRanges']()}catch(t){};this.reset()}}}})();'use strict';CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;(function(){function h(e,t){for(var n,o;(e=e.getParent())&&!e.equals(t);)if(e.getAttribute('data-nostyle'))n=e;else if(!o){var i=e.getAttribute('contentEditable');'false'==i?n=e:'true'==i&&(o=1)};return n};function f(e,t,n,i){return(e.getPosition(t)|i)==i&&(!n.childRule||n.childRule(e))};function m(e){var b=e.document;if(e.collapsed)b=l(this,b),e.insertNode(b),e.moveToPosition(b,CKEDITOR.POSITION_BEFORE_END);else{var w=this.element,T=this._.definition,L,t=T.ignoreReadonly,k=t||T.includeReadonly;null==k&&(k=e.root.getCustomData('cke_includeReadonly'));var x=CKEDITOR.dtd[w];x||(L=!0,x=CKEDITOR.dtd.span);e.enlarge(CKEDITOR.ENLARGE_INLINE,1);e.trim();var N=e.createBookmark(),S=N.startNode,I=N.endNode,n=S,a;if(!t){var o=e.getCommonAncestor(),t=h(S,o),o=h(I,o);t&&(n=t.getNextSourceNode(!0));o&&(I=o)};for(n.getPosition(I)==CKEDITOR.POSITION_FOLLOWING&&(n=0);n;){t=!1;if(n.equals(I))n=null,t=!0;else{var i=n.type==CKEDITOR.NODE_ELEMENT?n.getName():null,o=i&&'false'==n.getAttribute('contentEditable'),d=i&&n.getAttribute('data-nostyle');if(i&&n.data('cke-bookmark')){n=n.getNextSourceNode(!0);continue};if(o&&k&&CKEDITOR.dtd.$block[i])for(var O=n,s=v(O),c=void 0,g=s.length,R=0,O=g&&new CKEDITOR.dom.range(O.getDocument());R<g;++R){var c=s[R],A=CKEDITOR.filter.instances[c.data('cke-filter')];if(A?A.check(this):1)O.selectNodeContents(c),m.call(this,O)};s=i?!x[i]||d?0:o&&!k?0:f(n,I,T,r):1;if(s)if(c=n.getParent(),s=T,g=w,R=L,!c||!(c.getDtd()||CKEDITOR.dtd.span)[g]&&!R||s.parentRule&&!s.parentRule(c))t=!0;else{if(a||i&&CKEDITOR.dtd.$removeEmpty[i]&&(n.getPosition(I)|r)!=r||(a=e.clone(),a.setStartBefore(n)),i=n.type,i==CKEDITOR.NODE_TEXT||o||i==CKEDITOR.NODE_ELEMENT&&!n.getChildCount()){for(var i=n,y;(t=!i.getNext(D))&&(y=i.getParent(),x[y.getName()])&&f(y,S,T,C);)i=y;a.setEndAfter(i)}}
else t=!0;n=n.getNextSourceNode(d||o)};if(t&&a&&!a.collapsed){for(var t=l(this,b),o=t.hasAttributes(),d=a.getCommonAncestor(),i={},s={},c={},g={},p,u,K;t&&d;){if(d.getName()==w){for(p in T.attributes)!g[p]&&(K=d.getAttribute(u))&&(t.getAttribute(p)==K?s[p]=1:g[p]=1);for(u in T.styles)!c[u]&&(K=d.getStyle(u))&&(t.getStyle(u)==K?i[u]=1:c[u]=1)};d=d.getParent()};for(p in s)t.removeAttribute(p);for(u in i)t.removeStyle(u);o&&!t.hasAttributes()&&(t=null);t?(a.extractContents().appendTo(t),a.insertNode(t),E.call(this,t),t.mergeSiblings(),CKEDITOR.env.ie||t.$.normalize()):(t=new CKEDITOR.dom.element('span'),a.extractContents().appendTo(t),a.insertNode(t),E.call(this,t),t.remove(!0));a=null}};e.moveToBookmark(N);e.shrink(CKEDITOR.SHRINK_TEXT);e.shrink(CKEDITOR.NODE_ELEMENT,!0)}};function R(e){function f(){for(var n=new CKEDITOR.dom.elementPath(l.getParent()),i=new CKEDITOR.dom.elementPath(d.getParent()),o=null,a=null,t=0;t<n.elements.length;t++){var e=n.elements[t];if(e==n.block||e==n.blockLimit)break;h.checkElementRemovable(e,!0)&&(o=e)};for(t=0;t<i.elements.length;t++){e=i.elements[t];if(e==i.block||e==i.blockLimit)break;h.checkElementRemovable(e,!0)&&(a=e)};a&&d.breakParent(a);o&&l.breakParent(o)};e.enlarge(CKEDITOR.ENLARGE_INLINE,1);var u=e.createBookmark(),l=u.startNode;if(e.collapsed){for(var a=new CKEDITOR.dom.elementPath(l.getParent(),e.root),r,c=0,o;c<a.elements.length&&(o=a.elements[c])&&o!=a.block&&o!=a.blockLimit;c++)if(this.checkElementRemovable(o)){var s;e.collapsed&&(e.checkBoundaryOfElement(o,CKEDITOR.END)||(s=e.checkBoundaryOfElement(o,CKEDITOR.START)))?(r=o,r.match=s?'start':'end'):(o.mergeSiblings(),o.is(this.element)?n.call(this,o):i(o,t(this)[o.getName()]))};if(r){o=l;for(c=0;;c++){s=a.elements[c];if(s.equals(r))break;else if(s.match)continue;else s=s.clone();s.append(o);o=s};o['start'==r.match?'insertBefore':'insertAfter'](r)}}
else{var d=u.endNode,h=this;f();for(a=l;!a.equals(d);)r=a.getNextSourceNode(),a.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(a)&&(a.getName()==this.element?n.call(this,a):i(a,t(this)[a.getName()]),r.type==CKEDITOR.NODE_ELEMENT&&r.contains(l)&&(f(),r=l.getNext())),a=r};e.moveToBookmark(u);e.shrink(CKEDITOR.NODE_ELEMENT,!0)};function v(e){var t=[];e.forEach(function(e){if('true'==e.getAttribute('contenteditable'))return t.push(e),!1},CKEDITOR.NODE_ELEMENT,!0);return t};function b(e){var t=e.getEnclosedNode()||e.getCommonAncestor(!1,!0);(e=(new CKEDITOR.dom.elementPath(t,e.root)).contains(this.element,1))&&!e.isReadOnly()&&c(e,this)};function K(e){var t=e.getCommonAncestor(!0,!0);if(e=(new CKEDITOR.dom.elementPath(t,e.root)).contains(this.element,1)){var t=this._.definition,n=t.attributes;if(n)for(var o in n)e.removeAttribute(o,n[o]);if(t.styles)for(var i in t.styles)t.styles.hasOwnProperty(i)&&e.removeStyle(i)}};function y(e){var a=e.createBookmark(!0),t=e.createIterator();t.enforceRealBlocks=!0;this._.enterMode&&(t.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var n,o=e.document,i;n=t.getNextParagraph();)!n.isReadOnly()&&(t.activeFilter?t.activeFilter.check(this):1)&&(i=l(this,o,n),g(n,i));e.moveToBookmark(a)};function x(e){var a=e.createBookmark(1),o=e.createIterator();o.enforceRealBlocks=!0;o.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var t,i;t=o.getNextParagraph();)this.checkElementRemovable(t)&&(t.is('pre')?((i=this._.enterMode==CKEDITOR.ENTER_BR?null:e.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?'p':'div'))&&t.copyAttributes(i),g(t,i)):n.call(this,t));e.moveToBookmark(a)};function g(t,n){var r=!n;r&&(n=t.getDocument().createElement('div'),t.copyAttributes(n));var l=n&&n.is('pre'),a=t.is('pre'),i=!l&&a;if(l&&!a){a=n;(i=t.getBogus())&&i.remove();i=t.getHtml();i=e(i,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,'');i=i.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,'$1');i=i.replace(/([ \t\n\r]+|&nbsp;)/g,' ');i=i.replace(/<br\b[^>]*>/gi,'\n');if(CKEDITOR.env.ie){var d=t.getDocument().createElement('div');d.append(a);a.$.outerHTML='\x3cpre\x3e'+i+'\x3c/pre\x3e';a.copyAttributes(d.getFirst());a=d.getFirst().remove()}
else a.setHtml(i);n=a}
else i?n=N(r?[t.getHtml()]:k(t),n):t.moveChildren(n);n.replace(t);if(l){var r=n,c;(c=r.getPrevious(s))&&c.type==CKEDITOR.NODE_ELEMENT&&c.is('pre')&&(l=e(c.getHtml(),/\n$/,'')+'\n\n'+e(r.getHtml(),/^\n/,''),CKEDITOR.env.ie?r.$.outerHTML='\x3cpre\x3e'+l+'\x3c/pre\x3e':r.setHtml(l),c.remove())}
else r&&o(n)};function k(t){var n=[];e(t.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(e,t,n){return t+'\x3c/pre\x3e'+n+'\x3cpre\x3e'}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(e,t){n.push(t)});return n};function e(e,t,n){var i='',o='';e=e.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(e,t,n){t&&(i=t);n&&(o=n);return''});return i+e.replace(t,n)+o};function N(t,n){var o;1<t.length&&(o=new CKEDITOR.dom.documentFragment(n.getDocument()));for(var a=0;a<t.length;a++){var i=t[a],i=i.replace(/(\r\n|\r)/g,'\n'),i=e(i,/^[ \t]*\n/,''),i=e(i,/\n$/,''),i=e(i,/^[ \t]+|[ \t]+$/g,function(e,t){return 1==e.length?'\x26nbsp;':t?' '+CKEDITOR.tools.repeat('\x26nbsp;',e.length-1):CKEDITOR.tools.repeat('\x26nbsp;',e.length-1)+' '}),i=i.replace(/\n/g,'\x3cbr\x3e'),i=i.replace(/[ \t]{2,}/g,function(e){return CKEDITOR.tools.repeat('\x26nbsp;',e.length-1)+' '});if(o){var r=n.clone();r.setHtml(i);o.append(r)}
else n.setHtml(i)};return o||n};function n(e,n){var r=this._.definition,c=r.attributes,r=r.styles,u=t(this)[e.getName()],l=CKEDITOR.tools.isEmpty(c)&&CKEDITOR.tools.isEmpty(r),a;for(a in c)if('class'!=a&&!this._.definition.fullMatch||e.getAttribute(a)==T(a,c[a]))n&&'data-'==a.slice(0,5)||(l=e.hasAttribute(a),e.removeAttribute(a));for(var s in r)this._.definition.fullMatch&&e.getStyle(s)!=T(s,r[s],!0)||(l=l||!!e.getStyle(s),e.removeStyle(s));i(e,u,d[e.getName()]);l&&(this._.definition.alwaysRemoveElement?o(e,1):!CKEDITOR.dtd.$block[e.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!e.hasAttributes()?o(e):e.renameNode(this._.enterMode==CKEDITOR.ENTER_P?'p':'div'))};function E(e){for(var l=t(this),r=e.getElementsByTag(this.element),o,a=r.count();0<=--a;)o=r.getItem(a),o.isReadOnly()||n.call(this,o,!0);for(var s in l)if(s!=this.element)for(r=e.getElementsByTag(s),a=r.count()-1;0<=a;a--)o=r.getItem(a),o.isReadOnly()||i(o,l[s])};function i(e,t,n){if(t=t&&t.attributes)for(var a=0;a<t.length;a++){var s=t[a][0],r;if(r=e.getAttribute(s)){var i=t[a][1];(null===i||i.test&&i.test(r)||'string'==typeof i&&r==i)&&e.removeAttribute(s)}};n||o(e)};function o(e,t){if(!e.hasAttributes()||t)if(CKEDITOR.dtd.$block[e.getName()]){var n=e.getPrevious(s),i=e.getNext(s);!n||n.type!=CKEDITOR.NODE_TEXT&&n.isBlockBoundary({br:1})||e.append('br',1);!i||i.type!=CKEDITOR.NODE_TEXT&&i.isBlockBoundary({br:1})||e.append('br');e.remove(!0)}
else n=e.getFirst(),i=e.getLast(),e.remove(!0),n&&(n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings(),i&&!n.equals(i)&&i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings())};function l(e,t,n){var i;i=e.element;'*'==i&&(i='span');i=new CKEDITOR.dom.element(i,t);n&&n.copyAttributes(i);i=c(i,e);t.getCustomData('doc_processing_style')&&i.hasAttribute('id')?i.removeAttribute('id'):t.setCustomData('doc_processing_style',1);return i};function c(e,t){var n=t._.definition,i=n.attributes,n=CKEDITOR.style.getStyleText(n);if(i)for(var o in i)e.setAttribute(o,i[o]);n&&e.setAttribute('style',n);return e};function p(e,t){for(var n in e)e[n]=e[n].replace(O,function(e,n){return t[n]})};function t(e){if(e._.overrides)return e._.overrides;var s=e._.overrides={},n=e._.definition.overrides;if(n){CKEDITOR.tools.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var t=n[r],i,o;'string'==typeof t?i=t.toLowerCase():(i=t.element?t.element.toLowerCase():e.element,o=t.attributes);t=s[i]||(s[i]={});if(o){var t=t.attributes=t.attributes||[],a;for(a in o)t.push([a.toLowerCase(),o[a]])}}};return s};function T(e,t,n){var i=new CKEDITOR.dom.element('span');i[n?'setStyle':'setAttribute'](e,t);return i[n?'getStyle':'getAttribute'](e)};function S(e,t){function i(e,t){return'font-family'==t.toLowerCase()?e.replace(/["']/g,''):e};'string'==typeof e&&(e=CKEDITOR.tools.parseCssText(e));'string'==typeof t&&(t=CKEDITOR.tools.parseCssText(t,!0));for(var n in e)if(!(n in t)||i(t[n],n)!=i(e[n],n)&&'inherit'!=e[n]&&'inherit'!=t[n])return!1;return!0};function a(e,t,n){var r=e.document,o=e.getRanges();t=t?this.removeFromRange:this.applyToRange;for(var i,a=o.createIterator();i=a.getNextRange();)t.call(this,i,n);e.selectRanges(o);r.removeCustomData('doc_processing_style')};var d={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},I={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},u=/\s*(?:;\s*|$)/,O=/#\((.+?)\)/g,D=CKEDITOR.dom.walker.bookmark(0,1),s=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(e,t){if('string'==typeof e.type)return new CKEDITOR.style.customHandlers[e.type](e);var n=e.attributes;n&&n.style&&(e.styles=CKEDITOR.tools.extend({},e.styles,CKEDITOR.tools.parseCssText(n.style)),delete n.style);t&&(e=CKEDITOR.tools.clone(e),p(e.attributes,t),p(e.styles,t));n=this.element=e.element?'string'==typeof e.element?e.element.toLowerCase():e.element:'*';this.type=e.type||(d[n]?CKEDITOR.STYLE_BLOCK:I[n]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE);'object'==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT);this._={definition:e}};CKEDITOR.style.prototype={apply:function(e){if(e instanceof CKEDITOR.dom.document)return a.call(this,e.getSelection());if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode);a.call(this,e.getSelection(),0,e);this._.enterMode=t}},remove:function(e){if(e instanceof CKEDITOR.dom.document)return a.call(this,e.getSelection(),1);if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode);a.call(this,e.getSelection(),1,e);this._.enterMode=t}},applyToRange:function(e){this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?m:this.type==CKEDITOR.STYLE_BLOCK?y:this.type==CKEDITOR.STYLE_OBJECT?b:null;return this.applyToRange(e)},removeFromRange:function(e){this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?R:this.type==CKEDITOR.STYLE_BLOCK?x:this.type==CKEDITOR.STYLE_OBJECT?K:null;return this.removeFromRange(e)},applyToObject:function(e){c(e,this)},checkActive:function(e,t){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(e.block||e.blockLimit,!0,t);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var a=e.elements,i=0,n;i<a.length;i++)if(n=a[i],this.type!=CKEDITOR.STYLE_INLINE||n!=e.block&&n!=e.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var o=n.getName();if(!('string'==typeof this.element?o==this.element:o in this.element))continue};if(this.checkElementRemovable(n,!0,t))return!0}};return!1},checkApplicable:function(e,t,n){t&&t instanceof CKEDITOR.filter&&(n=t);if(n&&!n.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!e.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!e.blockLimit.getDtd()[this.element]};return!0},checkElementMatch:function(e,t){var i=this._.definition;if(!e||!i.ignoreReadonly&&e.isReadOnly())return!1;var n=e.getName();if('string'==typeof this.element?n==this.element:n in this.element){if(!t&&!e.hasAttributes())return!0;if(n=i._AC)i=n;else{var n={},r=0,s=i.attributes;if(s)for(var a in s)r++,n[a]=s[a];if(a=CKEDITOR.style.getStyleText(i))n.style||r++,n.style=a;n._length=r;i=i._AC=n};if(i._length){for(var o in i)if('_length'!=o)if(n=e.getAttribute(o)||'','style'==o?S(i[o],n):i[o]==n){if(!t)return!0}
else if(t)return!1;if(t)return!0}
else return!0};return!1},checkElementRemovable:function(e,n,i){if(this.checkElementMatch(e,n,i))return!0;if(n=t(this)[e.getName()]){var o;if(!(n=n.attributes))return!0;for(i=0;i<n.length;i++)if(o=n[i][0],o=e.getAttribute(o)){var a=n[i][1];if(null===a)return!0;if('string'==typeof a){if(o==a)return!0}
else if(a.test(o))return!0}};return!1},buildPreview:function(e){var i=this._.definition,t=[],o=i.element;'bdo'==o&&(o='span');var t=['\x3c',o],n=i.attributes;if(n)for(var a in n)t.push(' ',a,'\x3d"',n[a],'"');(n=CKEDITOR.style.getStyleText(i))&&t.push(' style\x3d"',n,'"');t.push('\x3e',e||i.name,'\x3c/',o,'\x3e');return t.join('')},getDefinition:function(){return this._.definition}};CKEDITOR.style.getStyleText=function(e){var n=e._ST;if(n)return n;var n=e.styles,t=e.attributes&&e.attributes.style||'',r='';t.length&&(t=t.replace(u,';'));for(var a in n){var i=n[a],o=(a+':'+i).replace(u,';');'inherit'==i?r+=o:t+=o};t.length&&(t=CKEDITOR.tools.normalizeCssText(t,!0));return e._ST=t+r};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(e){var t=function(e){this._={definition:e};this.setup&&this.setup(e)};t.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},e,!0);return this.customHandlers[e.type]=t};var r=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,C=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED})();CKEDITOR.styleCommand=function(e,t){this.requiredContent=this.allowedContent=this.style=e;CKEDITOR.tools.extend(this,t,!0)};CKEDITOR.styleCommand.prototype.exec=function(e){e.focus();this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)};CKEDITOR.stylesSet=new CKEDITOR.resourceManager('','stylesSet');CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(e,t,n){CKEDITOR.stylesSet.addExternal(e,t,'');CKEDITOR.stylesSet.load(e,n)};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(e,t){var n=this._.styleStateChangeCallbacks;n||(n=this._.styleStateChangeCallbacks=[],this.on('selectionChange',function(e){for(var t=0;t<n.length;t++){var i=n[t],o=i.style.checkActive(e.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;i.fn.call(this,o)}}));n.push({style:e,fn:t})},applyStyle:function(e){e.apply(this)},removeStyle:function(e){e.remove(this)},getStylesSet:function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var n=this,t=n.config.stylesCombo_stylesSet||n.config.stylesSet;if(!1===t)e(null);else if(t instanceof Array)n._.stylesDefinitions=t,e(t);else{t||(t='default');var t=t.split(':'),i=t[0];CKEDITOR.stylesSet.addExternal(i,t[1]?t.slice(1).join(':'):CKEDITOR.getUrl('styles.js'),'');CKEDITOR.stylesSet.load(i,function(t){n._.stylesDefinitions=t[i];e(n._.stylesDefinitions)})}}}});CKEDITOR.dom.comment=function(e,t){'string'==typeof e&&(e=(t?t.$:document).createComment(e));CKEDITOR.dom.domObject.call(this,e)};CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return'\x3c!--'+this.$.nodeValue+'--\x3e'}});'use strict';(function(){var t={},n={},e;for(e in CKEDITOR.dtd.$blockLimit)e in CKEDITOR.dtd.$list||(t[e]=1);for(e in CKEDITOR.dtd.$block)e in CKEDITOR.dtd.$blockLimit||e in CKEDITOR.dtd.$empty||(n[e]=1);CKEDITOR.dom.elementPath=function(e,i){var s=null,r=null,d=[],o=e,a;i=i||e.getDocument().getBody();do if(o.type==CKEDITOR.NODE_ELEMENT){d.push(o);if(!this.lastElement&&(this.lastElement=o,o.is(CKEDITOR.dtd.$object)||'false'==o.getAttribute('contenteditable')))continue;if(o.equals(i))break;if(!r&&(a=o.getName(),'true'==o.getAttribute('contenteditable')?r=o:!s&&n[a]&&(s=o),t[a])){if(a=!s&&'div'==a){a:{a=o.getChildren();for(var l=0,u=a.count();l<u;l++){var c=a.getItem(l);if(c.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[c.getName()]){a=!0;break t}};a=!1};a=!a};a?s=o:r=o}}
while(o=o.getParent());r||(r=i);this.block=s;this.blockLimit=r;this.root=i;this.elements=d}})();CKEDITOR.dom.elementPath.prototype={compare:function(e){var n=this.elements;e=e&&e.elements;if(!e||n.length!=e.length)return!1;for(var t=0;t<n.length;t++)if(!n[t].equals(e[t]))return!1;return!0},contains:function(e,t,n){var o;'string'==typeof e&&(o=function(t){return t.getName()==e});e instanceof CKEDITOR.dom.element?o=function(t){return t.equals(e)}:CKEDITOR.tools.isArray(e)?o=function(t){return-1<CKEDITOR.tools.indexOf(e,t.getName())}:'function'==typeof e?o=e:'object'==typeof e&&(o=function(t){return t.getName()in e});var i=this.elements,a=i.length;t&&a--;n&&(i=Array.prototype.slice.call(i,0),i.reverse());for(t=0;t<a;t++)if(o(i[t]))return i[t];return null},isContextFor:function(e){var t;return e in CKEDITOR.dtd.$block?(t=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!t.getDtd()[e]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}};CKEDITOR.dom.text=function(e,t){'string'==typeof e&&(e=(t?t.$:document).createTextNode(e));this.$=e};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},split:function(e){var i=this.$.parentNode,o=i.childNodes.length,a=this.getLength(),n=this.getDocument(),t=new CKEDITOR.dom.text(this.$.splitText(e),n);i.childNodes.length==o&&(e>=a?(t=n.createText(''),t.insertAfter(this)):(e=n.createText(''),e.insertAfter(t),e.remove()));return t},substring:function(e,t){return'number'!=typeof t?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}});(function(){function e(e,t,n){var o=e.serializable,i=t[n?'endContainer':'startContainer'],a=n?'endOffset':'startOffset',r=o?t.document.getById(e.startNode):e.startNode;e=o?t.document.getById(e.endNode):e.endNode;i.equals(r.getPrevious())?(t.startOffset=t.startOffset-i.getLength()-e.getPrevious().getLength(),i=e.getNext()):i.equals(e.getPrevious())&&(t.startOffset-=i.getLength(),i=e.getNext());i.equals(r.getParent())&&t[a]++;i.equals(e.getParent())&&t[a]++;t[n?'endContainer':'startContainer']=i;return t};CKEDITOR.dom.rangeList=function(e){if(e instanceof CKEDITOR.dom.rangeList)return e;e?e instanceof CKEDITOR.dom.range&&(e=[e]):e=[];return CKEDITOR.tools.extend(e,t)};var t={createIterator:function(){var t=this,i=CKEDITOR.dom.walker.bookmark(),n=[],e;return{getNextRange:function(o){e=void 0===e?0:e+1;var s=t[e];if(s&&1<t.length){if(!e)for(var a=t.length-1;0<=a;a--)n.unshift(t[a].createBookmark(!0));if(o)for(var r=0;t[e+r+1];){var l=s.document;o=0;a=l.getById(n[r].endNode);for(l=l.getById(n[r+1].startNode);;){a=a.getNextSourceNode(!1);if(l.equals(a))o=1;else if(i(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())continue;break};if(!o)break;r++};for(s.moveToBookmark(n.shift());r--;)a=t[++e],a.moveToBookmark(n.shift()),s.setEnd(a.endContainer,a.endOffset)};return s}}},createBookmarks:function(t){for(var a=[],o,i=0;i<this.length;i++){a.push(o=this[i].createBookmark(t,!0));for(var n=i+1;n<this.length;n++)this[n]=e(o,this[n]),this[n]=e(o,this[n],!0)};return a},createBookmarks2:function(e){for(var n=[],t=0;t<this.length;t++)n.push(this[t].createBookmark2(e));return n},moveToBookmarks:function(e){for(var t=0;t<this.length;t++)this[t].moveToBookmark(e[t])}}})();(function(){function e(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(',')[1]||'skins/'+CKEDITOR.skinName.split(',')[0]+'/')};function r(t){var n=CKEDITOR.skin['ua_'+t],a=CKEDITOR.env;if(n)for(var n=n.split(',').sort(function(e,t){return e>t?-1:1}),o=0,i;o<n.length;o++)if(i=n[o],a.ie&&(i.replace(/^ie/,'')==a.version||a.quirks&&'iequirks'==i)&&(i='ie'),a[i]){t+='_'+n[o];break};return CKEDITOR.getUrl(e()+t+'.css')};function s(e,t){a[e]||(CKEDITOR.document.appendStyleSheet(r(e)),a[e]=1);t&&t()};function l(e){var t=e.getById(n);t||(t=e.getHead().append('style'),t.setAttribute('id',n),t.setAttribute('type','text/css'));return t};function t(e,t,n){var i,o,a;if(CKEDITOR.env.webkit)for(t=t.split('}').slice(0,-1),o=0;o<t.length;o++)t[o]=t[o].split('{');for(var r=0;r<e.length;r++)if(CKEDITOR.env.webkit)for(o=0;o<t.length;o++){a=t[o][1];for(i=0;i<n.length;i++)a=a.replace(n[i][0],n[i][1]);e[r].$.sheet.addRule(t[o][0],a)}
else{a=t;for(i=0;i<n.length;i++)a=a.replace(n[i][0],n[i][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?e[r].$.styleSheet.cssText+=a:e[r].$.innerHTML+=a}};var a={};CKEDITOR.skin={path:e,loadPart:function(t,n){CKEDITOR.skin.name!=CKEDITOR.skinName.split(',')[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e()+'skin.js'),function(){s(t,n)}):s(t,n)},getPath:function(e){return CKEDITOR.getUrl(r(e))},icons:{},addIcon:function(e,t,n,i){e=e.toLowerCase();this.icons[e]||(this.icons[e]={path:t,offset:n||0,bgsize:i||'16px'})},getIconStyle:function(e,t,n,i,o){var a;e&&(e=e.toLowerCase(),t&&(a=this.icons[e+'-rtl']),a||(a=this.icons[e]));e=n||a&&a.path||'';i=i||a&&a.offset;o=o||a&&a.bgsize||'16px';e&&(e=e.replace(/'/g,'\\\''));return e&&'background-image:url(\''+CKEDITOR.getUrl(e)+'\');background-position:0 '+i+'px;background-size:'+o+';'}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(e){var n=l(CKEDITOR.document);return(this.setUiColor=function(e){this.uiColor=e;var a=CKEDITOR.skin.chameleon,r='',s='';'function'==typeof a&&(r=a(this,'editor'),s=a(this,'panel'));e=[[o,e]];t([n],r,e);t(i,s,e)}).call(this,e)}});var n='cke_ui_color',i=[],o=/\$color/g;CKEDITOR.on('instanceLoaded',function(e){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var n=e.editor;e=function(e){e=(e.data[0]||e.data).element.getElementsByTag('iframe').getItem(0).getFrameDocument();if(!e.getById('cke_ui_color')){e=l(e);i.push(e);var a=n.getUiColor();a&&t([e],CKEDITOR.skin.chameleon(n,'panel'),[[o,a]])}};n.on('panelShow',e);n.on('menuShow',e);n.config.uiColor&&n.setUiColor(n.config.uiColor)}})})();(function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var t=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"\x3e\x3c/div\x3e',CKEDITOR.document);t.appendTo(CKEDITOR.document.getHead());try{var n=t.getComputedStyle('border-top-color'),i=t.getComputedStyle('border-right-color');CKEDITOR.env.hc=!(!n||n!=i)}catch(e){CKEDITOR.env.hc=!1};t.remove()};CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=' cke_hc');CKEDITOR.document.appendStyleText('.cke{visibility:hidden;}');CKEDITOR.status='loaded';CKEDITOR.fireOnce('loaded');if(t=CKEDITOR._.pending)for(delete CKEDITOR._.pending,n=0;n<t.length;n++)CKEDITOR.editor.prototype.constructor.apply(t[n][0],t[n][1]),CKEDITOR.add(t[n][0])})();CKEDITOR.skin.name='moono';CKEDITOR.skin.ua_editor='ie,iequirks,ie7,ie8,gecko';CKEDITOR.skin.ua_dialog='ie,iequirks,ie7,ie8';CKEDITOR.skin.chameleon=function(){var e=function(){return function(e,t){for(var o=e.match(/[^#]./g),i=0;3>i;i++){var a=i,n;n=parseInt(o[i],16);n=('0'+(0>t?0|n*(1+t):0|n+(255-n)*t).toString(16)).slice(-2);o[a]=n};return'#'+o.join('')}}(),t=function(){var e=new CKEDITOR.template('background:#{to};background-image:linear-gradient(to bottom,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType\x3d0,startColorstr\x3d\'{from}\',endColorstr\x3d\'{to}\');');return function(t,n){return e.output({from:t,to:n})}}(),n={editor:new CKEDITOR.template('{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] '),panel:new CKEDITOR.template('.cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ')};return function(i,o){var a=i.uiColor,a={id:'.'+i.id,defaultBorder:e(a,-.1),defaultGradient:t(e(a,.9),a),lightGradient:t(e(a,1),e(a,.7)),mediumGradient:t(e(a,.8),e(a,.5)),ckeButtonOn:t(e(a,.6),e(a,.7)),ckeResizer:e(a,-.4),ckeToolbarSeparator:e(a,.5),ckeColorauto:e(a,.8),dialogBody:e(a,.7),dialogTabSelected:t('#FFFFFF','#FFFFFF'),dialogTabSelectedBorder:'#FFF',elementsPathColor:e(a,-.6),elementsPathBg:a,menubuttonIcon:e(a,.5),menubuttonIconHover:e(a,.3)};return n[o].output(a).replace(/\[/g,'{').replace(/\]/g,'}')}}();CKEDITOR.plugins.add('dialogui',{onLoad:function(){var e=function(e){this._||(this._={});this._['default']=this._.initValue=e['default']||'';this._.required=e.required||!1;for(var t=[this._],n=1;n<arguments.length;n++)t.push(arguments[n]);t.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,t);return this._},a={build:function(e,t,n){return new CKEDITOR.ui.dialog.textInput(e,t,n)}},t={build:function(e,t,n){return new CKEDITOR.ui.dialog[t.type](e,t,n)}},n={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(e){this.setValue(this.getInitValue(),e)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._['default']},getInitValue:function(){return this._.initValue}},o=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(e,t){this._.domOnChangeRegistered||(e.on('load',function(){this.getInputElement().on('change',function(){e.parts.dialog.isVisible()&&this.fire('change',{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on('change',t)}},!0),s=/^on([A-Z]\w+)/,i=function(e){for(var t in e)(s.test(t)||'title'==t||'type'==t)&&delete e[t];return e},r=function(e){e=e.data.getKeystroke();e==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker('ltr'):e==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker('rtl')};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(t,n,i,o){if(!(4>arguments.length)){var a=e.call(this,n);a.labelId=CKEDITOR.tools.getNextId()+'_label';this._.children=[];var r={role:n.role||'presentation'};n.includeLabel&&(r['aria-labelledby']=a.labelId);CKEDITOR.ui.dialog.uiElement.call(this,t,n,i,'div',null,r,function(){var i=[],e=n.required?' cke_required':'';'horizontal'!=n.labelLayout?i.push('\x3clabel class\x3d"cke_dialog_ui_labeled_label'+e+'" ',' id\x3d"'+a.labelId+'"',a.inputId?' for\x3d"'+a.inputId+'"':'',(n.labelStyle?' style\x3d"'+n.labelStyle+'"':'')+'\x3e',n.label,'\x3c/label\x3e','\x3cdiv class\x3d"cke_dialog_ui_labeled_content"',n.controlStyle?' style\x3d"'+n.controlStyle+'"':'',' role\x3d"presentation"\x3e',o.call(this,t,n),'\x3c/div\x3e'):(e={type:'hbox',widths:n.widths,padding:0,children:[{type:'html',html:'\x3clabel class\x3d"cke_dialog_ui_labeled_label'+e+'" id\x3d"'+a.labelId+'" for\x3d"'+a.inputId+'"'+(n.labelStyle?' style\x3d"'+n.labelStyle+'"':'')+'\x3e'+CKEDITOR.tools.htmlEncode(n.label)+'\x3c/label\x3e'},{type:'html',html:'\x3cspan class\x3d"cke_dialog_ui_labeled_content"'+(n.controlStyle?' style\x3d"'+n.controlStyle+'"':'')+'\x3e'+o.call(this,t,n)+'\x3c/span\x3e'}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(t,e,i));return i.join('')})}},textInput:function(t,n,i){if(!(3>arguments.length)){e.call(this,n);var l=this._.inputId=CKEDITOR.tools.getNextId()+'_textInput',o={'class':'cke_dialog_ui_input_'+n.type,id:l,type:n.type};n.validate&&(this.validate=n.validate);n.maxLength&&(o.maxlength=n.maxLength);n.size&&(o.size=n.size);n.inputStyle&&(o.style=n.inputStyle);var a=this,s=!1;t.on('load',function(){a.getInputElement().on('keydown',function(e){13==e.data.getKeystroke()&&(s=!0)});a.getInputElement().on('keyup',function(e){13==e.data.getKeystroke()&&s&&(t.getButton('ok')&&setTimeout(function(){t.getButton('ok').click()},0),s=!1);a.bidi&&r.call(a,e)},null,null,1E3)});CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,function(){var e=['\x3cdiv class\x3d"cke_dialog_ui_input_',n.type,'" role\x3d"presentation"'];n.width&&e.push('style\x3d"width:'+n.width+'" ');e.push('\x3e\x3cinput ');o['aria-labelledby']=this._.labelId;this._.required&&(o['aria-required']=this._.required);for(var t in o)e.push(t+'\x3d"'+o[t]+'" ');e.push(' /\x3e\x3c/div\x3e');return e.join('')})}},textarea:function(t,n,i){if(!(3>arguments.length)){e.call(this,n);var a=this,s=this._.inputId=CKEDITOR.tools.getNextId()+'_textarea',o={};n.validate&&(this.validate=n.validate);o.rows=n.rows||5;o.cols=n.cols||20;o['class']='cke_dialog_ui_input_textarea '+(n['class']||'');'undefined'!=typeof n.inputStyle&&(o.style=n.inputStyle);n.dir&&(o.dir=n.dir);if(a.bidi)t.on('load',function(){a.getInputElement().on('keyup',r)},a);CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,function(){o['aria-labelledby']=this._.labelId;this._.required&&(o['aria-required']=this._.required);var e=['\x3cdiv class\x3d"cke_dialog_ui_input_textarea" role\x3d"presentation"\x3e\x3ctextarea id\x3d"',s,'" '],t;for(t in o)e.push(t+'\x3d"'+CKEDITOR.tools.htmlEncode(o[t])+'" ');e.push('\x3e',CKEDITOR.tools.htmlEncode(a._['default']),'\x3c/textarea\x3e\x3c/div\x3e');return e.join('')})}},checkbox:function(t,n,o){if(!(3>arguments.length)){var a=e.call(this,n,{'default':!!n['default']});n.validate&&(this.validate=n.validate);CKEDITOR.ui.dialog.uiElement.call(this,t,n,o,'span',null,null,function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+'_checkbox':CKEDITOR.tools.getNextId()+'_checkbox'},!0),o=[],s=CKEDITOR.tools.getNextId()+'_label',r={'class':'cke_dialog_ui_checkbox_input',type:'checkbox','aria-labelledby':s};i(e);n['default']&&(r.checked='checked');'undefined'!=typeof e.inputStyle&&(e.style=e.inputStyle);a.checkbox=new CKEDITOR.ui.dialog.uiElement(t,e,o,'input',null,r);o.push(' \x3clabel id\x3d"',s,'" for\x3d"',r.id,'"'+(n.labelStyle?' style\x3d"'+n.labelStyle+'"':'')+'\x3e',CKEDITOR.tools.htmlEncode(n.label),'\x3c/label\x3e');return o.join('')})}},radio:function(t,n,o){if(!(3>arguments.length)){e.call(this,n);this._['default']||(this._['default']=this._.initValue=n.items[0][1]);n.validate&&(this.validate=n.validate);var a=[],r=this;n.role='radiogroup';n.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this,t,n,o,function(){for(var f=[],m=[],g=(n.id?n.id:CKEDITOR.tools.getNextId())+'_radio',d=0;d<n.items.length;d++){var o=n.items[d],s=void 0!==o[2]?o[2]:o[0],u=void 0!==o[1]?o[1]:o[0],e=CKEDITOR.tools.getNextId()+'_radio_input',h=e+'_label',e=CKEDITOR.tools.extend({},n,{id:e,title:null,type:null},!0),s=CKEDITOR.tools.extend({},e,{title:s},!0),c={type:'radio','class':'cke_dialog_ui_radio_input',name:g,value:u,'aria-labelledby':h},l=[];r._['default']==u&&(c.checked='checked');i(e);i(s);'undefined'!=typeof e.inputStyle&&(e.style=e.inputStyle);e.keyboardFocusable=!0;a.push(new CKEDITOR.ui.dialog.uiElement(t,e,l,'input',null,c));l.push(' ');new CKEDITOR.ui.dialog.uiElement(t,s,l,'label',null,{id:h,'for':c.id},o[0]);f.push(l.join(''))};new CKEDITOR.ui.dialog.hbox(t,a,f,m);return m.join('')});this._.children=a}},button:function(t,n,i){if(arguments.length){'function'==typeof n&&(n=n(t.getParentEditor()));e.call(this,n,{disabled:n.disabled||!1});CKEDITOR.event.implementOn(this);var r=this;t.on('load',function(){var e=this.getElement();(function(){e.on('click',function(e){r.click();e.data.preventDefault()});e.on('keydown',function(e){e.data.getKeystroke()in{32:1}&&(r.click(),e.data.preventDefault())})})();e.unselectable()},this);var a=CKEDITOR.tools.extend({},n);delete a.style;var o=CKEDITOR.tools.getNextId()+'_label';CKEDITOR.ui.dialog.uiElement.call(this,t,a,i,'a',null,{style:n.style,href:'javascript:void(0)',title:n.label,hidefocus:'true','class':n['class'],role:'button','aria-labelledby':o},'\x3cspan id\x3d"'+o+'" class\x3d"cke_dialog_ui_button"\x3e'+CKEDITOR.tools.htmlEncode(n.label)+'\x3c/span\x3e')}},select:function(t,n,o){if(!(3>arguments.length)){var a=e.call(this,n);n.validate&&(this.validate=n.validate);a.inputId=CKEDITOR.tools.getNextId()+'_select';CKEDITOR.ui.dialog.labeledElement.call(this,t,n,o,function(){var r=CKEDITOR.tools.extend({},n,{id:n.id?n.id+'_select':CKEDITOR.tools.getNextId()+'_select'},!0),e=[],c=[],l={id:a.inputId,'class':'cke_dialog_ui_input_select','aria-labelledby':this._.labelId};e.push('\x3cdiv class\x3d"cke_dialog_ui_input_',n.type,'" role\x3d"presentation"');n.width&&e.push('style\x3d"width:'+n.width+'" ');e.push('\x3e');void 0!==n.size&&(l.size=n.size);void 0!==n.multiple&&(l.multiple=n.multiple);i(r);for(var s=0,o;s<n.items.length&&(o=n.items[s]);s++)c.push('\x3coption value\x3d"',CKEDITOR.tools.htmlEncode(void 0!==o[1]?o[1]:o[0]).replace(/"/g,'\x26quot;'),'" /\x3e ',CKEDITOR.tools.htmlEncode(o[0]));'undefined'!=typeof r.inputStyle&&(r.style=r.inputStyle);a.select=new CKEDITOR.ui.dialog.uiElement(t,r,e,'select',null,l,c.join(''));e.push('\x3c/div\x3e');return e.join('')})}},file:function(t,n,i){if(!(3>arguments.length)){void 0===n['default']&&(n['default']='');var o=CKEDITOR.tools.extend(e.call(this,n),{definition:n,buttons:[]});n.validate&&(this.validate=n.validate);t.on('load',function(){CKEDITOR.document.getById(o.frameId).getParent().addClass('cke_dialog_ui_input_file')});CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,function(){o.frameId=CKEDITOR.tools.getNextId()+'_fileInput';var e=['\x3ciframe frameborder\x3d"0" allowtransparency\x3d"0" class\x3d"cke_dialog_ui_input_file" role\x3d"presentation" id\x3d"',o.frameId,'" title\x3d"',n.label,'" src\x3d"javascript:void('];e.push(CKEDITOR.env.ie?'(function(){'+encodeURIComponent('document.open();('+CKEDITOR.tools.fixDomain+')();document.close();')+'})()':'0');e.push(')"\x3e\x3c/iframe\x3e');return e.join('')})}},fileButton:function(t,n,i){var r=this;if(!(3>arguments.length)){e.call(this,n);n.validate&&(this.validate=n.validate);var o=CKEDITOR.tools.extend({},n),a=o.onClick;o.className=(o.className?o.className+' ':'')+'cke_dialog_ui_button';o.onClick=function(e){var i=n['for'];a&&!1===a.call(this,e)||(t.getContentElement(i[0],i[1]).submit(),this.disable())};t.on('load',function(){t.getContentElement(n['for'][0],n['for'][1])._.buttons.push(r)});CKEDITOR.ui.dialog.button.call(this,t,o,i)}},html:function(){var e=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,n=/\/$/;return function(i,o,a){if(!(3>arguments.length)){var s=[],r=o.html;'\x3c'!=r.charAt(0)&&(r='\x3cspan\x3e'+r+'\x3c/span\x3e');var l=o.focus;if(l){var c=this.focus;this.focus=function(){('function'==typeof l?l:c).call(this);this.fire('focus')};o.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0};CKEDITOR.ui.dialog.uiElement.call(this,i,o,s,'span',null,null,'');s=s.join('').match(e);r=r.match(t)||['','',''];n.test(r[1])&&(r[1]=r[1].slice(0,-1),r[2]='/'+r[2]);a.push([r[1],' ',s[1]||'',r[2]].join(''))}}}(),fieldset:function(e,t,n,i,o){var a=o.label;this._={children:t};CKEDITOR.ui.dialog.uiElement.call(this,e,o,i,'fieldset',null,null,function(){var t=[];a&&t.push('\x3clegend'+(o.labelStyle?' style\x3d"'+o.labelStyle+'"':'')+'\x3e'+a+'\x3c/legend\x3e');for(var e=0;e<n.length;e++)t.push(n[e]);return t.join('')})}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(e){var t=CKEDITOR.document.getById(this._.labelId);1>t.getChildCount()?(new CKEDITOR.dom.text(e,CKEDITOR.document)).appendTo(t):t.getChild(0).$.nodeValue=e;return this},getLabel:function(){var e=CKEDITOR.document.getById(this._.labelId);return!e||1>e.getChildCount()?'':e.getChild(0).getText()},eventProcessors:o},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire('click',{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass('cke_disabled')},disable:function(){this._.disabled=!0;this.getElement().addClass('cke_disabled')},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(e,t){this.on('click',function(){t.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&t.$.focus()},0)},select:function(){var e=this.selectParentTab();setTimeout(function(){var t=e.getInputElement();t&&(t.$.focus(),t.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(e){if(this.bidi){var t=e&&e.charAt(0);(t='‪'==t?'ltr':'‫'==t?'rtl':null)&&(e=e.slice(1));this.setDirectionMarker(t)};e||(e='');return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var e=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&e){var t=this.getDirectionMarker();t&&(e=('ltr'==t?'‪':'‫')+e)};return e},setDirectionMarker:function(e){var t=this.getInputElement();e?t.setAttributes({dir:e,'data-cke-dir-marker':e}):this.getDirectionMarker()&&t.removeAttributes(['dir','data-cke-dir-marker'])},getDirectionMarker:function(){return this.getInputElement().data('cke-dir-marker')},keyboardFocusable:!0},n,!0);CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,n){var i=new CKEDITOR.dom.element('option',this.getDialog().getParentEditor().document),o=this.getInputElement().$;i.$.text=e;i.$.value=void 0===t||null===t?e:t;void 0===n||null===n?CKEDITOR.env.ie?o.add(i.$):o.add(i.$,null):o.add(i.$,n);return this},remove:function(e){this.getInputElement().$.remove(e);return this},clear:function(){for(var e=this.getInputElement().$;0<e.length;)e.remove(0);return this},keyboardFocusable:!0},n,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e,t){this.getInputElement().$.checked=e;!t&&this.fire('change',{value:e})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(e,t){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return o.onChange.apply(this,arguments);e.on('load',function(){var e=this._.checkbox.getElement();e.on('propertychange',function(t){t=t.data.$;'checked'==t.propertyName&&this.fire('change',{value:e.$.checked})},this)},this);this.on('change',t);return null}},keyboardFocusable:!0},n,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(e,t){for(var o=this._.children,n,i=0;i<o.length&&(n=o[i]);i++)n.getElement().$.checked=n.getValue()==e;!t&&this.fire('change',{value:e})},getValue:function(){for(var t=this._.children,e=0;e<t.length;e++)if(t[e].getElement().$.checked)return t[e].getValue();return null},accessKeyUp:function(){var t=this._.children,e;for(e=0;e<t.length;e++)if(t[e].getElement().$.checked){t[e].getElement().focus();return};t[0].getElement().focus()},eventProcessors:{onChange:function(e,t){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return o.onChange.apply(this,arguments);e.on('load',function(){for(var t=this._.children,n=this,e=0;e<t.length;e++)t[e].getElement().on('propertychange',function(e){e=e.data.$;'checked'==e.propertyName&&this.$.checked&&n.fire('change',{value:this.getAttribute('value')})})},this);this.on('change',t);return null}}},n,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,n,{getInputElement:function(){var e=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<e.$.forms.length?new CKEDITOR.dom.element(e.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(e){var i=/^on([A-Z]\w+)/,n,o=function(e,t,n,i){e.on('formLoaded',function(){e.getInputElement().on(n,i,e)})},t;for(t in e)if(n=t.match(i))this.eventProcessors[t]?this.eventProcessors[t].call(this,this._.dialog,e[t]):o(this,this._.dialog,n[1].toLowerCase(),e[t]);return this},reset:function(){function l(){i.$.open();var l='';t.size&&(l=t.size-(CKEDITOR.env.ie?7:0));var c=e.frameId+'_input';i.$.write(['\x3chtml dir\x3d"'+r+'" lang\x3d"'+s+'"\x3e\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e\x3cbody style\x3d"margin: 0; overflow: hidden; background: transparent;"\x3e','\x3cform enctype\x3d"multipart/form-data" method\x3d"POST" dir\x3d"'+r+'" lang\x3d"'+s+'" action\x3d"',CKEDITOR.tools.htmlEncode(t.action),'"\x3e\x3clabel id\x3d"',e.labelId,'" for\x3d"',c,'" style\x3d"display:none"\x3e',CKEDITOR.tools.htmlEncode(t.label),'\x3c/label\x3e\x3cinput style\x3d"width:100%" id\x3d"',c,'" aria-labelledby\x3d"',e.labelId,'" type\x3d"file" name\x3d"',CKEDITOR.tools.htmlEncode(t.id||'cke_upload'),'" size\x3d"',CKEDITOR.tools.htmlEncode(0<l?l:''),'" /\x3e\x3c/form\x3e\x3c/body\x3e\x3c/html\x3e\x3cscript\x3e',CKEDITOR.env.ie?'('+CKEDITOR.tools.fixDomain+')();':'','window.parent.CKEDITOR.tools.callFunction('+n+');','window.onbeforeunload \x3d function() {window.parent.CKEDITOR.tools.callFunction('+o+')}','\x3c/script\x3e'].join(''));i.$.close();for(l=0;l<a.length;l++)a[l].enable()};var e=this._,i=CKEDITOR.document.getById(e.frameId).getFrameDocument(),t=e.definition,a=e.buttons,n=this.formLoadedNumber,o=this.formUnloadNumber,r=e.dialog._.editor.lang.dir,s=e.dialog._.editor.langCode;n||(n=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire('formLoaded')},this),o=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on('destroy',function(){CKEDITOR.tools.removeFunction(n);CKEDITOR.tools.removeFunction(o)}));CKEDITOR.env.gecko?setTimeout(l,500):l()},getValue:function(){return this.getInputElement().$.value||''},setInitValue:function(){this._.initValue=''},eventProcessors:{onChange:function(e,t){this._.domOnChangeRegistered||(this.on('formLoaded',function(){this.getInputElement().on('change',function(){this.fire('change',{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on('change',t)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement('text',a);CKEDITOR.dialog.addUIElement('password',a);CKEDITOR.dialog.addUIElement('textarea',t);CKEDITOR.dialog.addUIElement('checkbox',t);CKEDITOR.dialog.addUIElement('radio',t);CKEDITOR.dialog.addUIElement('button',t);CKEDITOR.dialog.addUIElement('select',t);CKEDITOR.dialog.addUIElement('file',t);CKEDITOR.dialog.addUIElement('fileButton',t);CKEDITOR.dialog.addUIElement('html',t);CKEDITOR.dialog.addUIElement('fieldset',{build:function(e,t,n){for(var r=t.children,i,s=[],l=[],o=0;o<r.length&&(i=r[o]);o++){var a=[];s.push(a);l.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,a))};return new CKEDITOR.ui.dialog[t.type](e,l,s,n,t)}})}});CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;CKEDITOR.DIALOG_STATE_IDLE=1;CKEDITOR.DIALOG_STATE_BUSY=2;(function(){function f(){for(var e=this._.tabIdList.length,n=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+e,t=n-1;t>n-e;t--)if(this._.tabs[this._.tabIdList[t%e]][0].$.offsetHeight)return this._.tabIdList[t%e];return null};function v(){for(var t=this._.tabIdList.length,n=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),e=n+1;e<n+t;e++)if(this._.tabs[this._.tabIdList[e%t]][0].$.offsetHeight)return this._.tabIdList[e%t];return null};function m(e,t){for(var o=e.$.getElementsByTagName('input'),i=0,a=o.length;i<a;i++){var n=new CKEDITOR.dom.element(o[i]);'text'==n.getAttribute('type').toLowerCase()&&(t?(n.setAttribute('value',n.getCustomData('fake_value')||''),n.removeCustomData('fake_value')):(n.setCustomData('fake_value',n.getAttribute('value')),n.setAttribute('value','')))}};function b(e,t){var n=this.getInputElement();n&&(e?n.removeAttribute('aria-invalid'):n.setAttribute('aria-invalid',!0));e||(this.select?this.select():this.focus());t&&alert(t);this.fire('validated',{valid:e,msg:t})};function K(){var e=this.getInputElement();e&&e.removeAttribute('aria-invalid')};function y(e){var n=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate('dialog',R).output({id:CKEDITOR.tools.getNextNumber(),editorId:e.id,langDir:e.lang.dir,langCode:e.langCode,editorDialogClass:'cke_editor_'+e.name.replace(/\./g,'\\.')+'_dialog',closeTitle:e.lang.common.close,hidpi:CKEDITOR.env.hidpi?'cke_hidpi':''})),t=n.getChild([0,0,0,0,0]),i=t.getChild(0),o=t.getChild(1);e.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(t);!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(e='javascript:void(function(){'+encodeURIComponent('document.open();('+CKEDITOR.tools.fixDomain+')();document.close();')+'}())',CKEDITOR.dom.element.createFromHtml('\x3ciframe frameBorder\x3d"0" class\x3d"cke_iframe_shim" src\x3d"'+e+'" tabIndex\x3d"-1"\x3e\x3c/iframe\x3e').appendTo(t.getParent()));i.unselectable();o.unselectable();return{element:n,parts:{dialog:n.getChild(0),title:i,close:o,tabs:t.getChild(2),contents:t.getChild([3,0,0,0]),footer:t.getChild([3,0,1,0])}}};function g(e,t,n){this.element=t;this.focusIndex=n;this.tabIndex=0;this.isFocusable=function(){return!t.getAttribute('disabled')&&t.isVisible()};this.focus=function(){e._.currentFocusIndex=this.focusIndex;this.element.focus()};t.on('keydown',function(e){e.data.getKeystroke()in{32:1,13:1}&&this.fire('click')});t.on('focus',function(){this.fire('mouseover')});t.on('blur',function(){this.fire('mouseout')})};function x(e){function n(){e.layout()};var t=CKEDITOR.document.getWindow();t.on('resize',n);e.on('hide',function(){t.removeListener('resize',n)})};function E(e,t){this._={dialog:e};CKEDITOR.tools.extend(this,t)};function k(t){function r(e){var r=t.getSize(),s=CKEDITOR.document.getWindow().getViewPaneSize(),c=e.data.$.screenX,d=e.data.$.screenY,u=c-a.x,h=d-a.y;a={x:c,y:d};n.x+=u;n.y+=h;t.move(n.x+i[3]<o?-i[3]:n.x-i[1]>s.width-r.width-o?s.width-r.width+('rtl'==l.lang.dir?0:i[1]):n.x,n.y+i[0]<o?-i[0]:n.y-i[2]>s.height-r.height-o?s.height-r.height+i[2]:n.y,1);e.data.preventDefault()};function s(){CKEDITOR.document.removeListener('mousemove',r);CKEDITOR.document.removeListener('mouseup',s);if(CKEDITOR.env.ie6Compat){var t=e.getChild(0).getFrameDocument();t.removeListener('mousemove',r);t.removeListener('mouseup',s)}};var a=null,n=null,l=t.getParentEditor(),o=l.config.dialog_magnetDistance,i=CKEDITOR.skin.margins||[0,0,0,0];'undefined'==typeof o&&(o=20);t.parts.title.on('mousedown',function(i){a={x:i.data.$.screenX,y:i.data.$.screenY};CKEDITOR.document.on('mousemove',r);CKEDITOR.document.on('mouseup',s);n=t.getPosition();if(CKEDITOR.env.ie6Compat){var o=e.getChild(0).getFrameDocument();o.on('mousemove',r);o.on('mouseup',s)};i.data.preventDefault()},t)};function N(t){function s(e){var r='rtl'==i.lang.dir,f=a.width,m=a.height,g=f+(e.data.$.screenX-c.x)*(r?-1:1)*(t._.moved?1:2),E=m+(e.data.$.screenY-c.y)*(t._.moved?1:2),s=t._.element.getFirst(),s=r&&s.getComputedStyle('right'),l=t.getPosition();l.y+E>o.height&&(E=o.height-l.y);(r?s:l.x)+g>o.width&&(g=o.width-(r?s:l.x));if(n==CKEDITOR.DIALOG_RESIZE_WIDTH||n==CKEDITOR.DIALOG_RESIZE_BOTH)f=Math.max(d.minWidth||0,g-u);if(n==CKEDITOR.DIALOG_RESIZE_HEIGHT||n==CKEDITOR.DIALOG_RESIZE_BOTH)m=Math.max(d.minHeight||0,E-h);t.resize(f,m);t._.moved||t.layout();e.data.preventDefault()};function l(){CKEDITOR.document.removeListener('mouseup',l);CKEDITOR.document.removeListener('mousemove',s);r&&(r.remove(),r=null);if(CKEDITOR.env.ie6Compat){var t=e.getChild(0).getFrameDocument();t.removeListener('mouseup',l);t.removeListener('mousemove',s)}};var d=t.definition,n=d.resizable;if(n!=CKEDITOR.DIALOG_RESIZE_NONE){var i=t.getParentEditor(),u,h,o,c,a,r,f=CKEDITOR.tools.addFunction(function(n){a=t.getSize();var i=t.parts.contents;i.$.getElementsByTagName('iframe').length&&(r=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_dialog_resize_cover" style\x3d"height: 100%; position: absolute; width: 100%;"\x3e\x3c/div\x3e'),i.append(r));h=a.height-t.parts.contents.getSize('height',!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks));u=a.width-t.parts.contents.getSize('width',1);c={x:n.screenX,y:n.screenY};o=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on('mousemove',s);CKEDITOR.document.on('mouseup',l);CKEDITOR.env.ie6Compat&&(i=e.getChild(0).getFrameDocument(),i.on('mousemove',s),i.on('mouseup',l));n.preventDefault&&n.preventDefault()});t.on('load',function(){var e='';n==CKEDITOR.DIALOG_RESIZE_WIDTH?e=' cke_resizer_horizontal':n==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(e=' cke_resizer_vertical');e=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_resizer'+e+' cke_resizer_'+i.lang.dir+'" title\x3d"'+CKEDITOR.tools.htmlEncode(i.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+f+', event )"\x3e'+('ltr'==i.lang.dir?'◢':'◣')+'\x3c/div\x3e');t.parts.footer.append(e,1)});i.on('destroy',function(){CKEDITOR.tools.removeFunction(f)})}};function l(e){e.data.preventDefault(1)};function p(t){var c=CKEDITOR.document.getWindow(),a=t.config,r=a.dialog_backgroundCoverColor||'white',d=a.dialog_backgroundCoverOpacity,o=a.baseFloatZIndex,a=CKEDITOR.tools.genKey(r,d,o),n=i[a];n?n.show():(o=['\x3cdiv tabIndex\x3d"-1" style\x3d"position: ',CKEDITOR.env.ie6Compat?'absolute':'fixed','; z-index: ',o,'; top: 0px; left: 0px; ',CKEDITOR.env.ie6Compat?'':'background-color: '+r,'" class\x3d"cke_dialog_background_cover"\x3e'],CKEDITOR.env.ie6Compat&&(r='\x3chtml\x3e\x3cbody style\x3d\\\'background-color:'+r+';\\\'\x3e\x3c/body\x3e\x3c/html\x3e',o.push('\x3ciframe hidefocus\x3d"true" frameborder\x3d"0" id\x3d"cke_dialog_background_iframe" src\x3d"javascript:'),o.push('void((function(){'+encodeURIComponent('document.open();('+CKEDITOR.tools.fixDomain+')();document.write( \''+r+'\' );document.close();')+'})())'),o.push('" style\x3d"position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity\x3d0)"\x3e\x3c/iframe\x3e')),o.push('\x3c/div\x3e'),n=CKEDITOR.dom.element.createFromHtml(o.join('')),n.setOpacity(void 0!==d?d:.5),n.on('keydown',l),n.on('keypress',l),n.on('keyup',l),n.appendTo(CKEDITOR.document.getBody()),i[a]=n);t.focusManager.add(n);e=n;t=function(){var e=c.getViewPaneSize();n.setStyles({width:e.width+'px',height:e.height+'px'})};var h=function(){var e=c.getScrollPosition(),t=CKEDITOR.dialog._.currentTop;n.setStyles({left:e.x+'px',top:e.y+'px'});if(t){do e=t.getPosition(),t.move(e.x,e.y);while(t=t._.parentDialog)}};s=t;c.on('resize',t);t();CKEDITOR.env.mac&&CKEDITOR.env.webkit||n.focus();if(CKEDITOR.env.ie6Compat){var u=function(){h();arguments.callee.prevScrollHandler.apply(this,arguments)};c.$.setTimeout(function(){u.prevScrollHandler=window.onscroll||function(){};window.onscroll=u},0);h()}};function T(t){e&&(t.focusManager.remove(e),t=CKEDITOR.document.getWindow(),e.hide(),t.removeListener('resize',s),CKEDITOR.env.ie6Compat&&t.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),s=null)};var n=CKEDITOR.tools.cssLength,R='\x3cdiv class\x3d"cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"dialog" aria-labelledby\x3d"cke_dialog_title_{id}"\x3e\x3ctable class\x3d"cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style\x3d"position:absolute" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd role\x3d"presentation"\x3e\x3cdiv class\x3d"cke_dialog_body" role\x3d"presentation"\x3e\x3cdiv id\x3d"cke_dialog_title_{id}" class\x3d"cke_dialog_title" role\x3d"presentation"\x3e\x3c/div\x3e\x3ca id\x3d"cke_dialog_close_button_{id}" class\x3d"cke_dialog_close_button" href\x3d"javascript:void(0)" title\x3d"{closeTitle}" role\x3d"button"\x3e\x3cspan class\x3d"cke_label"\x3eX\x3c/span\x3e\x3c/a\x3e\x3cdiv id\x3d"cke_dialog_tabs_{id}" class\x3d"cke_dialog_tabs" role\x3d"tablist"\x3e\x3c/div\x3e\x3ctable class\x3d"cke_dialog_contents" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_contents_{id}" class\x3d"cke_dialog_contents_body" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_footer_{id}" class\x3d"cke_dialog_footer" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e';CKEDITOR.dialog=function(e,t){function T(){var t=n._.focusList;t.sort(function(e,t){return e.tabIndex!=t.tabIndex?t.tabIndex-e.tabIndex:e.focusIndex-t.focusIndex});for(var i=t.length,e=0;e<i;e++)t[e].focusIndex=e};function d(e){var o=n._.focusList;e=e||0;if(!(1>o.length)){var a=n._.currentFocusIndex;n._.tabBarMode&&0>e&&(a=0);try{o[a].getInputElement().$.blur()}catch(t){};var i=a,r=1<n._.pageCount;do{i+=e;if(r&&!n._.tabBarMode&&(i==o.length||-1==i)){n._.tabBarMode=!0;n._.tabs[n._.currentTabId][0].focus();n._.currentFocusIndex=-1;return};i=(i+o.length)%o.length;if(i==a)break}
while(e&&!o[i].isFocusable());o[i].focus();'text'==o[i].type&&o[i].select()}};function E(t){if(n==CKEDITOR.dialog._.currentTop){var i=t.data.getKeystroke(),o='rtl'==e.lang.dir,a=[37,38,39,40];l=u=0;if(9==i||i==CKEDITOR.SHIFT+9)d(i==CKEDITOR.SHIFT+9?-1:1),l=1;else if(i==CKEDITOR.ALT+121&&!n._.tabBarMode&&1<n.getPageCount())n._.tabBarMode=!0,n._.tabs[n._.currentTabId][0].focus(),n._.currentFocusIndex=-1,l=1;else if(-1!=CKEDITOR.tools.indexOf(a,i)&&n._.tabBarMode)i=-1!=CKEDITOR.tools.indexOf([o?39:37,38],i)?f.call(n):v.call(n),n.selectPage(i),n._.tabs[i][0].focus(),l=1;else if(13!=i&&32!=i||!n._.tabBarMode)if(13==i)i=t.data.getTarget(),i.is('a','button','select','textarea')||i.is('input')&&'button'==i.$.type||((i=this.getButton('ok'))&&CKEDITOR.tools.setTimeout(i.click,0,i),l=1),u=1;else if(27==i)(i=this.getButton('cancel'))?CKEDITOR.tools.setTimeout(i.click,0,i):!1!==this.fire('cancel',{hide:!0}).hide&&this.hide(),u=1;else return;else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,d(1),l=1;p(t)}};function p(e){l?e.data.preventDefault(1):u&&e.data.stopPropagation()};var i=CKEDITOR.dialog._.dialogDefinitions[t],r=CKEDITOR.tools.clone(D),s=e.config.dialog_buttonsOrder||'OS',o=e.lang.dir,a={},l,u;('OS'==s&&CKEDITOR.env.mac||'rtl'==s&&'ltr'==o||'ltr'==s&&'rtl'==o)&&r.buttons.reverse();i=CKEDITOR.tools.extend(i(e),r);i=CKEDITOR.tools.clone(i);i=new h(this,i);r=y(e);this._={editor:e,element:r.element,name:t,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=r.parts;CKEDITOR.tools.setTimeout(function(){e.fire('ariaWidget',this.parts.contents)},0,this);r={position:CKEDITOR.env.ie6Compat?'absolute':'fixed',top:0,visibility:'hidden'};r['rtl'==o?'right':'left']=0;this.parts.dialog.setStyles(r);CKEDITOR.event.call(this);this.definition=i=CKEDITOR.fire('dialogDefinition',{name:t,definition:i},e).definition;if(!('removeDialogTabs'in e._)&&e.config.removeDialogTabs){r=e.config.removeDialogTabs.split(';');for(o=0;o<r.length;o++)if(s=r[o].split(':'),2==s.length){var g=s[0];a[g]||(a[g]=[]);a[g].push(s[1])};e._.removeDialogTabs=a};if(e._.removeDialogTabs&&(a=e._.removeDialogTabs[t]))for(o=0;o<a.length;o++)i.removeContents(a[o]);if(i.onLoad)this.on('load',i.onLoad);if(i.onShow)this.on('show',i.onShow);if(i.onHide)this.on('hide',i.onHide);if(i.onOk)this.on('ok',function(t){e.fire('saveSnapshot');setTimeout(function(){e.fire('saveSnapshot')},0);!1===i.onOk.call(this,t)&&(t.data.hide=!1)});this.state=CKEDITOR.DIALOG_STATE_IDLE;if(i.onCancel)this.on('cancel',function(e){!1===i.onCancel.call(this,e)&&(e.data.hide=!1)});var n=this,m=function(e){var t=n._.contents,a=!1,i;for(i in t)for(var o in t[i])if(a=e.call(this,t[i][o]))return};this.on('ok',function(e){m(function(t){if(t.validate){var n=t.validate(this),i='string'==typeof n||!1===n;i&&(e.data.hide=!1,e.stop());b.call(t,!i,'string'==typeof n?n:void 0);return i}})},this,null,0);this.on('cancel',function(t){m(function(n){if(n.isChanged())return e.config.dialog_noConfirmCancel||confirm(e.lang.common.confirmCancel)||(t.data.hide=!1),!0})},this,null,0);this.parts.close.on('click',function(e){!1!==this.fire('cancel',{hide:!0}).hide&&this.hide();e.data.preventDefault()},this);this.changeFocus=d;var c=this._.element;e.focusManager.add(c,1);this.on('show',function(){c.on('keydown',E,this);if(CKEDITOR.env.gecko)c.on('keypress',p,this)});this.on('hide',function(){c.removeListener('keydown',E);CKEDITOR.env.gecko&&c.removeListener('keypress',p);m(function(e){K.apply(e)})});this.on('iframeAdded',function(e){(new CKEDITOR.dom.document(e.data.iframe.$.contentWindow.document)).on('keydown',E,this,null,0)});this.on('show',function(){T();var t=1<n._.pageCount;e.config.dialog_startupFocusTab&&t?(n._.tabBarMode=!0,n._.tabs[n._.currentTabId][0].focus(),n._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=t?-1:this._.focusList.length-1,i.onFocus?(t=i.onFocus.call(this))&&t.focus():d(1))},this,null,4294967295);if(CKEDITOR.env.ie6Compat)this.on('load',function(){var e=this.getElement(),t=e.getFirst();t.remove();t.appendTo(e)},this);k(this);N(this);(new CKEDITOR.dom.text(i.title,CKEDITOR.document)).appendTo(this.parts.title);for(o=0;o<i.contents.length;o++)(a=i.contents[o])&&this.addPage(a);this.parts.tabs.on('click',function(e){var t=e.data.getTarget();t.hasClass('cke_dialog_tab')&&(t=t.$.id,this.selectPage(t.substring(4,t.lastIndexOf('_'))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,d(1)),e.data.preventDefault())},this);o=[];a=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:'hbox',className:'cke_dialog_footer_buttons',widths:[],children:i.buttons},o).getChild();this.parts.footer.setHtml(o.join(''));for(o=0;o<a.length;o++)this._.buttons[a[o].id]=a[o]};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(){return function(e,t){this._.contentSize&&this._.contentSize.width==e&&this._.contentSize.height==t||(CKEDITOR.dialog.fire('resize',{dialog:this,width:e,height:t},this._.editor),this.fire('resize',{width:e,height:t},this._.editor),this.parts.contents.setStyles({width:e+'px',height:t+'px'}),'rtl'==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle('right'),10)),this._.contentSize={width:e,height:t})}}(),getSize:function(){var e=this._.element.getFirst();return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},move:function(e,t,n){var o=this._.element.getFirst(),a='rtl'==this._.editor.lang.dir,i='fixed'==o.getComputedStyle('position');CKEDITOR.env.ie&&o.setStyle('zoom','100%');i&&this._.position&&this._.position.x==e&&this._.position.y==t||(this._.position={x:e,y:t},i||(i=CKEDITOR.document.getWindow().getScrollPosition(),e+=i.x,t+=i.y),a&&(i=this.getSize(),e=CKEDITOR.document.getWindow().getViewPaneSize().width-i.width-e),t={top:(0<t?t:0)+'px'},t[a?'right':'left']=(0<e?e:0)+'px',o.setStyles(t),n&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var e=this._.element,n=this.definition;e.getParent()&&e.getParent().equals(CKEDITOR.document.getBody())?e.setStyle('display','block'):e.appendTo(CKEDITOR.document.getBody());this.resize(this._.contentSize&&this._.contentSize.width||n.width||n.minWidth,this._.contentSize&&this._.contentSize.height||n.height||n.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex);this._.element.getFirst().setStyle('z-index',CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,p(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this);e.on('keydown',c);e.on('keyup',d);this._.hasFocus=!1;for(var r in n.contents)if(n.contents[r]){var e=n.contents[r],i=this._.tabs[e.id],o=e.requiredContent,a=0;if(i){for(var s in this._.contents[e.id]){var t=this._.contents[e.id][s];'hbox'!=t.type&&'vbox'!=t.type&&t.getInputElement()&&(t.requiredContent&&!this._.editor.activeFilter.check(t.requiredContent)?t.disable():(t.enable(),a++))};!a||o&&!this._.editor.activeFilter.check(o)?i[0].addClass('cke_dialog_tab_disabled'):i[0].removeClass('cke_dialog_tab_disabled')}};CKEDITOR.tools.setTimeout(function(){this.layout();x(this);this.parts.dialog.setStyle('visibility','');this.fireOnce('load',{});CKEDITOR.ui.fire('ready',this);this.fire('show',{});this._.editor.fire('dialogShow',this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(e){e.setInitValue&&e.setInitValue()})},100,this)},layout:function(){var o=this.parts.dialog,e=this.getSize(),t=CKEDITOR.document.getWindow().getViewPaneSize(),n=(t.width-e.width)/2,i=(t.height-e.height)/2;CKEDITOR.env.ie6Compat||(e.height+(0<i?i:0)>t.height||e.width+(0<n?n:0)>t.width?o.setStyle('position','absolute'):o.setStyle('position','fixed'));this.move(this._.moved?this._.position.x:n,this._.moved?this._.position.y:i)},foreach:function(e){for(var t in this._.contents)for(var n in this._.contents[t])e.call(this,this._.contents[t][n]);return this},reset:function(){var e=function(e){e.reset&&e.reset(1)};return function(){this.foreach(e);return this}}(),setupContent:function(){var e=arguments;this.foreach(function(t){t.setup&&t.setup.apply(t,e)})},commitContent:function(){var e=arguments;this.foreach(function(t){CKEDITOR.env.ie&&this._.currentFocusIndex==t.focusIndex&&t.getInputElement().$.blur();t.commit&&t.commit.apply(t,e)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire('hide',{});this._.editor.fire('dialogHide',this);this.selectPage(this._.tabIdList[0]);var t=this._.element;t.setStyle('display','none');this.parts.dialog.setStyle('visibility','hidden');for(C(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var n=this._.parentDialog.getElement().getFirst();n.setStyle('z-index',parseInt(n.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}
else T(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null;t.removeListener('keydown',c);t.removeListener('keyup',d);var e=this._.editor;e.focus();setTimeout(function(){e.focusManager.unlock();CKEDITOR.env.iOS&&e.window.focus()},0)};delete this._.parentDialog;this.foreach(function(e){e.resetInitValue&&e.resetInitValue()});this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(e){if(!e.requiredContent||this._.editor.filter.check(e.requiredContent)){for(var n=[],i=e.label?' title\x3d"'+CKEDITOR.tools.htmlEncode(e.label)+'"':'',t=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:'vbox',className:'cke_dialog_page_contents',children:e.elements,expand:!!e.expand,padding:e.padding,style:e.style||'width: 100%;'},n),o=this._.contents[e.id]={},a=t.getChild(),r=0;t=a.shift();)t.notAllowed||'hbox'==t.type||'vbox'==t.type||r++,o[t.id]=t,'function'==typeof t.getChild&&a.push.apply(a,t.getChild());r||(e.hidden=!0);n=CKEDITOR.dom.element.createFromHtml(n.join(''));n.setAttribute('role','tabpanel');t=CKEDITOR.env;o='cke_'+e.id+'_'+CKEDITOR.tools.getNextNumber();i=CKEDITOR.dom.element.createFromHtml(['\x3ca class\x3d"cke_dialog_tab"',0<this._.pageCount?' cke_last':'cke_first',i,e.hidden?' style\x3d"display:none"':'',' id\x3d"',o,'"',t.gecko&&!t.hc?'':' href\x3d"javascript:void(0)"',' tabIndex\x3d"-1" hidefocus\x3d"true" role\x3d"tab"\x3e',e.label,'\x3c/a\x3e'].join(''));n.setAttribute('aria-labelledby',o);this._.tabs[e.id]=[i,n];this._.tabIdList.push(e.id);!e.hidden&&this._.pageCount++;this._.lastTab=i;this.updateStyle();n.setAttribute('name',e.id);n.appendTo(this.parts.contents);i.unselectable();this.parts.tabs.append(i);e.accessKey&&(u(this,this,'CTRL+'+e.accessKey,O,I),this._.accessKeyMap['CTRL+'+e.accessKey]=e.id)}},selectPage:function(e){if(this._.currentTabId!=e&&!this._.tabs[e][0].hasClass('cke_dialog_tab_disabled')&&!1!==this.fire('selectPage',{page:e,currentPage:this._.currentTabId})){for(var n in this._.tabs){var o=this._.tabs[n][0],i=this._.tabs[n][1];n!=e&&(o.removeClass('cke_dialog_tab_selected'),i.hide());i.setAttribute('aria-hidden',n!=e)};var t=this._.tabs[e];t[0].addClass('cke_dialog_tab_selected');CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(m(t[1]),t[1].show(),setTimeout(function(){m(t[1],1)},0)):t[1].show();this._.currentTabId=e;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,e)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?'add':'remove')+'Class']('cke_single_page')},hidePage:function(e){var t=this._.tabs[e]&&this._.tabs[e][0];t&&1!=this._.pageCount&&t.isVisible()&&(e==this._.currentTabId&&this.selectPage(f.call(this)),t.hide(),this._.pageCount--,this.updateStyle())},showPage:function(e){if(e=this._.tabs[e]&&this._.tabs[e][0])e.show(),this._.pageCount++,this.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){var n=this._.contents[e];return n&&n[t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,n){return this.getContentElement(e,t).setValue(n)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(e,t){if('undefined'==typeof t)t=this._.focusList.length,this._.focusList.push(new g(this,e,t));else{this._.focusList.splice(t,0,new g(this,e,t));for(var n=t+1;n<this._.focusList.length;n++)this._.focusList[n].focusIndex++}},setState:function(e){if(this.state!=e){this.state=e;if(e==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var t=this.getParentEditor().lang.dir,n={attributes:{'class':'cke_dialog_spinner'},styles:{'float':'rtl'==t?'right':'left'}};n.styles['margin-'+('rtl'==t?'left':'right')]='8px';this.parts.spinner=CKEDITOR.document.createElement('div',n);this.parts.spinner.setHtml('\x26#8987;');this.parts.spinner.appendTo(this.parts.title,1)};this.parts.spinner.show();this.getButton('ok').disable()}
else e==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton('ok').enable());this.fire('state',e)}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(e,t){this._.dialogDefinitions[e]&&'function'!=typeof t||(this._.dialogDefinitions[e]=t)},exists:function(e){return!!this._.dialogDefinitions[e]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(e,t,n){e=e.config.removeDialogTabs;return!(e&&e.match(new RegExp('(?:^|;)'+t+':'+n+'(?:$|;)','i')))},okButton:function(){var e=function(e,t){t=t||{};return CKEDITOR.tools.extend({id:'ok',type:'button',label:e.lang.common.ok,'class':'cke_dialog_ui_button_ok',onClick:function(e){e=e.data.dialog;!1!==e.fire('ok',{hide:!0}).hide&&e.hide()}},t,!0)};e.type='button';e.override=function(t){return CKEDITOR.tools.extend(function(n){return e(n,t)},{type:'button'},!0)};return e}(),cancelButton:function(){var e=function(e,t){t=t||{};return CKEDITOR.tools.extend({id:'cancel',type:'button',label:e.lang.common.cancel,'class':'cke_dialog_ui_button_cancel',onClick:function(e){e=e.data.dialog;!1!==e.fire('cancel',{hide:!0}).hide&&e.hide()}},t,!0)};e.type='button';e.override=function(t){return CKEDITOR.tools.extend(function(n){return e(n,t)},{type:'button'},!0)};return e}(),addUIElement:function(e,t){this._.uiElementBuilders[e]=t}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var D={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},o=function(e,t,n){for(var a=0,i;i=e[a];a++)if(i.id==t||n&&i[n]&&(i=o(i[n],t,n)))return i;return null},a=function(e,t,n,i,o){if(n){for(var s=0,r;r=e[s];s++){if(r.id==n)return e.splice(s,0,t),t;if(i&&r[i]&&(r=a(r[i],t,n,i,!0)))return r};if(o)return null};e.push(t);return t},r=function(e,t,n){for(var o=0,i;i=e[o];o++){if(i.id==t)return e.splice(o,1);if(n&&i[n]&&(i=r(i[n],t,n)))return i};return null},h=function(e,t){this.dialog=e;for(var o=t.contents,n=0,i;i=o[n];n++)o[n]=i&&new E(e,i);CKEDITOR.tools.extend(this,t)};h.prototype={getContents:function(e){return o(this.contents,e)},getButton:function(e){return o(this.buttons,e)},addContents:function(e,t){return a(this.contents,e,t)},addButton:function(e,t){return a(this.buttons,e,t)},removeContents:function(e){r(this.contents,e)},removeButton:function(e){r(this.buttons,e)}};E.prototype={get:function(e){return o(this.elements,e,'children')},add:function(e,t){return a(this.elements,e,t,'children')},remove:function(e){r(this.elements,e,'children')}};var s,i={},e,t={},c=function(e){var n=e.data.$.ctrlKey||e.data.$.metaKey,i=e.data.$.altKey,o=e.data.$.shiftKey,a=String.fromCharCode(e.data.$.keyCode);(n=t[(n?'CTRL+':'')+(i?'ALT+':'')+(o?'SHIFT+':'')+a])&&n.length&&(n=n[n.length-1],n.keydown&&n.keydown.call(n.uiElement,n.dialog,n.key),e.data.preventDefault())},d=function(e){var n=e.data.$.ctrlKey||e.data.$.metaKey,i=e.data.$.altKey,o=e.data.$.shiftKey,a=String.fromCharCode(e.data.$.keyCode);(n=t[(n?'CTRL+':'')+(i?'ALT+':'')+(o?'SHIFT+':'')+a])&&n.length&&(n=n[n.length-1],n.keyup&&(n.keyup.call(n.uiElement,n.dialog,n.key),e.data.preventDefault()))},u=function(e,n,i,o,a){(t[i]||(t[i]=[])).push({uiElement:e,dialog:n,key:i,keyup:a||e.accessKeyUp,keydown:o||e.accessKeyDown})},C=function(e){for(var o in t){for(var n=t[o],i=n.length-1;0<=i;i--)n[i].dialog!=e&&n[i].uiElement!=e||n.splice(i,1);0===n.length&&delete t[o]}},I=function(e,t){e._.accessKeyMap[t]&&e.selectPage(e._.accessKeyMap[t])},O=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(e,t,n,i,o,c,d){if(!(4>arguments.length)){var g=(i.call?i(t):i)||'div',m=['\x3c',g,' '],f=(o&&o.call?o(t):o)||{},s=(c&&c.call?c(t):c)||{},E=(d&&d.call?d.call(this,e,t):d)||'',a=this.domId=s.id||CKEDITOR.tools.getNextId()+'_uiElement';t.requiredContent&&!e.getParentEditor().filter.check(t.requiredContent)&&(f.display='none',this.notAllowed=!0);s.id=a;var r={};t.type&&(r['cke_dialog_ui_'+t.type]=1);t.className&&(r[t.className]=1);t.disabled&&(r.cke_disabled=1);for(var l=s['class']&&s['class'].split?s['class'].split(' '):[],a=0;a<l.length;a++)l[a]&&(r[l[a]]=1);l=[];for(a in r)l.push(a);s['class']=l.join(' ');t.title&&(s.title=t.title);r=(t.style||'').split(';');t.align&&(l=t.align,f['margin-left']='left'==l?0:'auto',f['margin-right']='right'==l?0:'auto');for(a in f)r.push(a+':'+f[a]);t.hidden&&r.push('display:none');for(a=r.length-1;0<=a;a--)''===r[a]&&r.splice(a,1);0<r.length&&(s.style=(s.style?s.style+'; ':'')+r.join('; '));for(a in s)m.push(a+'\x3d"'+CKEDITOR.tools.htmlEncode(s[a])+'" ');m.push('\x3e',E,'\x3c/',g,'\x3e');n.push(m.join(''));(this._||(this._={})).dialog=e;'boolean'==typeof t.isChanged&&(this.isChanged=function(){return t.isChanged});'function'==typeof t.isChanged&&(this.isChanged=t.isChanged);'function'==typeof t.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(e){return function(n){e.call(this,t.setValue.call(this,n))}}));'function'==typeof t.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(e){return function(){return t.getValue.call(this,e.call(this))}}));CKEDITOR.event.implementOn(this);this.registerEvents(t);this.accessKeyUp&&this.accessKeyDown&&t.accessKey&&u(this,e,'CTRL+'+t.accessKey);var h=this;e.on('load',function(){var n=h.getInputElement();if(n){var t=h.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?'cke_dialog_ui_focused':'';n.on('focus',function(){e._.tabBarMode=!1;e._.hasFocus=!0;h.fire('focus');t&&this.addClass(t)});n.on('blur',function(){h.fire('blur');t&&this.removeClass(t)})}});CKEDITOR.tools.extend(this,t);this.keyboardFocusable&&(this.tabIndex=t.tabIndex||0,this.focusIndex=e._.focusList.push(this)-1,this.on('focus',function(){e._.currentFocusIndex=h.focusIndex}))}},hbox:function(e,t,i,o,a){if(!(4>arguments.length)){this._||(this._={});var l=this._.children=t,s=a&&a.widths||null,c=a&&a.height||null,r,d={role:'presentation'};a&&a.align&&(d.align=a.align);CKEDITOR.ui.dialog.uiElement.call(this,e,a||{type:'hbox'},o,'table',{},d,function(){var t=['\x3ctbody\x3e\x3ctr class\x3d"cke_dialog_ui_hbox"\x3e'];for(r=0;r<i.length;r++){var o='cke_dialog_ui_hbox_child',e=[];0===r&&(o='cke_dialog_ui_hbox_first');r==i.length-1&&(o='cke_dialog_ui_hbox_last');t.push('\x3ctd class\x3d"',o,'" role\x3d"presentation" ');s?s[r]&&e.push('width:'+n(s[r])):e.push('width:'+Math.floor(100/i.length)+'%');c&&e.push('height:'+n(c));a&&void 0!==a.padding&&e.push('padding:'+n(a.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&l[r].align&&e.push('text-align:'+l[r].align);0<e.length&&t.push('style\x3d"'+e.join('; ')+'" ');t.push('\x3e',i[r],'\x3c/td\x3e')};t.push('\x3c/tr\x3e\x3c/tbody\x3e');return t.join('')})}},vbox:function(e,t,i,o,a){if(!(3>arguments.length)){this._||(this._={});var s=this._.children=t,r=a&&a.width||null,l=a&&a.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,e,a||{type:'vbox'},o,'div',null,{role:'presentation'},function(){var t=['\x3ctable role\x3d"presentation" cellspacing\x3d"0" border\x3d"0" '];t.push('style\x3d"');a&&a.expand&&t.push('height:100%;');t.push('width:'+n(r||'100%'),';');CKEDITOR.env.webkit&&t.push('float:none;');t.push('"');t.push('align\x3d"',CKEDITOR.tools.htmlEncode(a&&a.align||('ltr'==e.getParentEditor().lang.dir?'left':'right')),'" ');t.push('\x3e\x3ctbody\x3e');for(var c=0;c<i.length;c++){var o=[];t.push('\x3ctr\x3e\x3ctd role\x3d"presentation" ');r&&o.push('width:'+n(r||'100%'));l?o.push('height:'+n(l[c])):a&&a.expand&&o.push('height:'+Math.floor(100/i.length)+'%');a&&void 0!==a.padding&&o.push('padding:'+n(a.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s[c].align&&o.push('text-align:'+s[c].align);0<o.length&&t.push('style\x3d"',o.join('; '),'" ');t.push(' class\x3d"cke_dialog_ui_vbox_child"\x3e',i[c],'\x3c/td\x3e\x3c/tr\x3e')};t.push('\x3c/tbody\x3e\x3c/table\x3e');return t.join('')})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e,t){this.getInputElement().setValue(e);!t&&this.fire('change',{value:e});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var e=this.getInputElement();(e=e.getParent())&&-1==e.$.className.search('cke_dialog_page_contents'););if(!e)return this;e=e.getAttribute('name');this._.dialog._.currentTabId!=e&&this._.dialog.selectPage(e);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(e){var i=/^on([A-Z]\w+)/,n,o=function(e,t,n,i){t.on('load',function(){e.getInputElement().on(n,i,e)})},t;for(t in e)if(n=t.match(i))this.eventProcessors[t]?this.eventProcessors[t].call(this,this._.dialog,e[t]):o(this,this._.dialog,n[1].toLowerCase(),e[t]);return this},eventProcessors:{onLoad:function(e,t){e.on('load',t,this)},onShow:function(e,t){e.on('show',t,this)},onHide:function(e,t){e.on('hide',t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var e=this.getElement();this.getInputElement().setAttribute('disabled','true');e.addClass('cke_disabled')},enable:function(){var e=this.getElement();this.getInputElement().removeAttribute('disabled');e.removeClass('cke_disabled')},isEnabled:function(){return!this.getElement().hasClass('cke_disabled')},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(e){if(1>arguments.length)return this._.children.concat();e.splice||(e=[e]);return 2>e.length?this._.children[e[0]]:this._.children[e[0]]&&this._.children[e[0]].getChild?this._.children[e[0]].getChild(e.slice(1,e.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var e={build:function(e,t,n){for(var r=t.children,i,s=[],l=[],o=0;o<r.length&&(i=r[o]);o++){var a=[];s.push(a);l.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,a))};return new CKEDITOR.ui.dialog[t.type](e,l,s,n,t)}};CKEDITOR.dialog.addUIElement('hbox',e);CKEDITOR.dialog.addUIElement('vbox',e)})();CKEDITOR.dialogCommand=function(e,t){this.dialogName=e;CKEDITOR.tools.extend(this,t,!0)};CKEDITOR.dialogCommand.prototype={exec:function(e){e.openDialog(this.dialogName)},canUndo:!1,editorFocus:1};(function(){var e=/^([a]|[^a])+$/,t=/^\d*$/,n=/^\d*(?:\.\d+)?$/,o=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,a=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,r=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var e=arguments;return function(){var a=this&&this.getValue?this.getValue():e[0],r,o=CKEDITOR.VALIDATE_AND,i=[],t;for(t=0;t<e.length;t++)if('function'==typeof e[t])i.push(e[t]);else break;t<e.length&&'string'==typeof e[t]&&(r=e[t],t++);t<e.length&&'number'==typeof e[t]&&(o=e[t]);var n=o==CKEDITOR.VALIDATE_AND?!0:!1;for(t=0;t<i.length;t++)n=o==CKEDITOR.VALIDATE_AND?n&&i[t](a):n||i[t](a);return n?!0:r}},regex:function(e,t){return function(n){n=this&&this.getValue?this.getValue():n;return e.test(n)?!0:t}},notEmpty:function(t){return this.regex(e,t)},integer:function(e){return this.regex(t,e)},number:function(e){return this.regex(n,e)},cssLength:function(e){return this.functions(function(e){return a.test(CKEDITOR.tools.trim(e))},e)},htmlLength:function(e){return this.functions(function(e){return o.test(CKEDITOR.tools.trim(e))},e)},inlineStyle:function(e){return this.functions(function(e){return r.test(CKEDITOR.tools.trim(e))},e)},equals:function(e,t){return this.functions(function(t){return t==e},t)},notEqual:function(e,t){return this.functions(function(t){return t!=e},t)}};CKEDITOR.on('instanceDestroyed',function(e){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var t;t=CKEDITOR.dialog._.currentTop;)t.hide();for(var o in i)i[o].remove();i={}};e=e.editor._.storedDialogs;for(var n in e)e[n].destroy()})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(e,t){var n=null,i=CKEDITOR.dialog._.dialogDefinitions[e];null===CKEDITOR.dialog._.currentTop&&p(this);if('function'==typeof i)n=this._.storedDialogs||(this._.storedDialogs={}),n=n[e]||(n[e]=new CKEDITOR.dialog(this,e)),t&&t.call(n,n),n.show();else{if('failed'==i)throw T(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+e+'" failed when loading definition.');'string'==typeof i&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(i),function(){'function'!=typeof CKEDITOR.dialog._.dialogDefinitions[e]&&(CKEDITOR.dialog._.dialogDefinitions[e]='failed');this.openDialog(e,t)},this,0,1)};CKEDITOR.skin.loadPart('dialog');return n}})})();CKEDITOR.plugins.add('dialog',{requires:'dialogui',init:function(e){e.on('doubleclick',function(t){t.data.dialog&&e.openDialog(t.data.dialog)},null,null,999)}});CKEDITOR.plugins.add('about',{requires:'dialog',init:function(e){var t=e.addCommand('about',new CKEDITOR.dialogCommand('about'));t.modes={wysiwyg:1,source:1};t.canUndo=!1;t.readOnly=1;e.ui.addButton&&e.ui.addButton('About',{label:e.lang.about.title,command:'about',toolbar:'about'});CKEDITOR.dialog.add('about',this.path+'dialogs/about.js')}});(function(){CKEDITOR.plugins.add('a11yhelp',{requires:'dialog',availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,'de-ch':1,el:1,en:1,'en-gb':1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,'fr-ca':1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,'pt-br':1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,'sr-latn':1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,'zh-cn':1},init:function(e){var t=this;e.addCommand('a11yHelp',{exec:function(){var n=e.langCode,n=t.availableLangs[n]?n:t.availableLangs[n.replace(/-.*/,'')]?n.replace(/-.*/,''):'en';CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+'dialogs/lang/'+n+'.js'),function(){e.lang.a11yhelp=t.langEntries[n];e.openDialog('a11yHelp')})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});e.setKeystroke(CKEDITOR.ALT+48,'a11yHelp');CKEDITOR.dialog.add('a11yHelp',this.path+'dialogs/a11yhelp.js');e.on('ariaEditorHelpLabel',function(t){t.data.label=e.lang.common.editorHelp})}})})();(function(){function e(e){var t=this.att;e=e&&e.hasAttribute(t)&&e.getAttribute(t)||'';void 0!==e&&this.setValue(e)};function t(){for(var t,e=0;e<arguments.length;e++)if(arguments[e]instanceof CKEDITOR.dom.element){t=arguments[e];break};if(t){var e=this.att,n=this.getValue();n?t.setAttribute(e,n):t.removeAttribute(e,n)}};var n={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add('dialogadvtab',{requires:'dialog',allowedContent:function(e){e||(e=n);var i=[];e.id&&i.push('id');e.dir&&i.push('dir');var t='';i.length&&(t+='['+i.join(',')+']');e.classes&&(t+='(*)');e.styles&&(t+='{*}');return t},createAdvancedTab:function(i,o,a){o||(o=n);var r=i.lang.common,l={id:'advanced',label:r.advancedTab,title:r.advancedTab,elements:[{type:'vbox',padding:1,children:[]}]},s=[];if(o.id||o.dir)o.id&&s.push({id:'advId',att:'id',type:'text',requiredContent:a?a+'[id]':null,label:r.id,setup:e,commit:t}),o.dir&&s.push({id:'advLangDir',att:'dir',type:'select',requiredContent:a?a+'[dir]':null,label:r.langDir,'default':'',style:'width:100%',items:[[r.notSet,''],[r.langDirLTR,'ltr'],[r.langDirRTL,'rtl']],setup:e,commit:t}),l.elements[0].children.push({type:'hbox',widths:['50%','50%'],children:[].concat(s)});if(o.styles||o.classes)s=[],o.styles&&s.push({id:'advStyles',att:'style',type:'text',requiredContent:a?a+'{cke-xyz}':null,label:r.styles,'default':'',validate:CKEDITOR.dialog.validate.inlineStyle(r.invalidInlineStyle),onChange:function(){},getStyle:function(e,t){var n=this.getValue().match(new RegExp('(?:^|;)\\s*'+e+'\\s*:\\s*([^;]*)','i'));return n?n[1]:t},updateStyle:function(e,t){var n=this.getValue(),o=i.document.createElement('span');o.setAttribute('style',n);o.setStyle(e,t);n=CKEDITOR.tools.normalizeCssText(o.getAttribute('style'));this.setValue(n,1)},setup:e,commit:t}),o.classes&&s.push({type:'hbox',widths:['45%','55%'],children:[{id:'advCSSClasses',att:'class',type:'text',requiredContent:a?a+'(cke-xyz)':null,label:r.cssClasses,'default':'',setup:e,commit:t}]}),l.elements[0].children.push({type:'hbox',widths:['50%','50%'],children:[].concat(s)});return l}})})();CKEDITOR.plugins.add('basicstyles',{init:function(e){var o=0,t=function(t,n,i,r){if(r){r=new CKEDITOR.style(r);var s=a[i];s.unshift(r);e.attachStyleStateChange(r,function(t){!e.readOnly&&e.getCommand(i).setState(t)});e.addCommand(i,new CKEDITOR.styleCommand(r,{contentForms:s}));e.ui.addButton&&e.ui.addButton(t,{label:n,command:i,toolbar:'basicstyles,'+(o+=10)})}},a={bold:['strong','b',['span',function(e){e=e.styles['font-weight'];return'bold'==e||700<=+e}]],italic:['em','i',['span',function(e){return'italic'==e.styles['font-style']}]],underline:['u',['span',function(e){return'underline'==e.styles['text-decoration']}]],strike:['s','strike',['span',function(e){return'line-through'==e.styles['text-decoration']}]],subscript:['sub'],superscript:['sup']},n=e.config,i=e.lang.basicstyles;t('Bold',i.bold,'bold',n.coreStyles_bold);t('Italic',i.italic,'italic',n.coreStyles_italic);t('Underline',i.underline,'underline',n.coreStyles_underline);t('Strike',i.strike,'strike',n.coreStyles_strike);t('Subscript',i.subscript,'subscript',n.coreStyles_subscript);t('Superscript',i.superscript,'superscript',n.coreStyles_superscript);e.setKeystroke([[CKEDITOR.CTRL+66,'bold'],[CKEDITOR.CTRL+73,'italic'],[CKEDITOR.CTRL+85,'underline']])}});CKEDITOR.config.coreStyles_bold={element:'strong',overrides:'b'};CKEDITOR.config.coreStyles_italic={element:'em',overrides:'i'};CKEDITOR.config.coreStyles_underline={element:'u'};CKEDITOR.config.coreStyles_strike={element:'s',overrides:'strike'};CKEDITOR.config.coreStyles_subscript={element:'sub'};CKEDITOR.config.coreStyles_superscript={element:'sup'};(function(){function a(e,t,n,i){if(!e.isReadOnly()&&!e.equals(n.editable())){CKEDITOR.dom.element.setMarker(i,e,'bidi_processed',1);i=e;for(var o=n.editable();(i=i.getParent())&&!i.equals(o);)if(i.getCustomData('bidi_processed')){e.removeStyle('direction');e.removeAttribute('dir');return};i='useComputedState'in n.config?n.config.useComputedState:1;(i?e.getComputedStyle('direction'):e.getStyle('direction')||e.hasAttribute('dir'))!=t&&(e.removeStyle('direction'),i?(e.removeAttribute('dir'),t!=e.getComputedStyle('direction')&&e.setAttribute('dir',t)):e.setAttribute('dir',t),n.forceNextSelectionCheck())}};function l(e,t,n){var i=e.getCommonAncestor(!1,!0);e=e.clone();e.enlarge(n==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(e.checkBoundaryOfElement(i,CKEDITOR.START)&&e.checkBoundaryOfElement(i,CKEDITOR.END)){for(var o;i&&i.type==CKEDITOR.NODE_ELEMENT&&(o=i.getParent())&&1==o.getChildCount()&&!(i.getName()in t);)i=o;return i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in t&&i}};function s(e){return{context:'p',allowedContent:{'h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td':{propertiesOnly:!0,attributes:'dir'}},requiredContent:'p[dir]',refresh:function(e,t){var i=e.config.useComputedState,n,i=void 0===i||i;if(!i){n=t.lastElement;for(var o=e.editable();n&&!(n.getName()in r||n.equals(o));){var a=n.getParent();if(!a)break;n=a}};n=n||t.block||t.blockLimit;n.equals(e.editable())&&(o=e.getSelection().getRanges()[0].getEnclosedNode())&&o.type==CKEDITOR.NODE_ELEMENT&&(n=o);n&&(i=i?n.getComputedStyle('direction'):n.getStyle('direction')||n.getAttribute('dir'),e.getCommand('bidirtl').setState('rtl'==i?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.getCommand('bidiltr').setState('ltr'==i?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF));i=(t.block||t.blockLimit||e.editable()).getDirection(1);i!=(e._.selDir||e.lang.dir)&&(e._.selDir=i,e.fire('contentDirChanged',i))},exec:function(t){var h=t.getSelection(),d=t.config.enterMode,s=h.getRanges();if(s&&s.length){for(var c={},u=h.createBookmarks(),s=s.createIterator(),r,m=0;r=s.getNextRange(1);){var n=r.getEnclosedNode();n&&(!n||n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in o)||(n=l(r,i,d));n&&a(n,e,t,c);var f=new CKEDITOR.dom.walker(r),g=u[m].startNode,E=u[m++].endNode;f.evaluator=function(e){var t=d==CKEDITOR.ENTER_P?'p':'div',n;if(n=(e?e.type==CKEDITOR.NODE_ELEMENT:!1)&&e.getName()in i){if(t=e.is(t))t=(t=e.getParent())?t.type==CKEDITOR.NODE_ELEMENT:!1;n=!(t&&e.getParent().is('blockquote'))};return!!(n&&e.getPosition(g)&CKEDITOR.POSITION_FOLLOWING&&(e.getPosition(E)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;n=f.next();)a(n,e,t,c);r=r.createIterator();for(r.enlargeBr=d!=CKEDITOR.ENTER_BR;n=r.getNextParagraph(d==CKEDITOR.ENTER_P?'p':'div');)a(n,e,t,c)};CKEDITOR.dom.element.clearAllMarkers(c);t.forceNextSelectionCheck();h.selectBookmarks(u);t.focus()}}}};function c(t){var i=t==e.setAttribute,n=t==e.removeAttribute,o=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(e,a){if(!this.isReadOnly()){var r;if(r=e==(i||n?'dir':'direction')||'style'==e&&(n||o.test(a))){a:{r=this;for(var s=r.getDocument().getBody().getParent();r;){if(r.equals(s)){r=!1;break t};r=r.getParent()};r=!0};r=!r};if(r&&(r=this.getDirection(1),s=t.apply(this,arguments),r!=this.getDirection(1)))return this.getDocument().fire('dirChanged',this),s};return t.apply(this,arguments)}};var i={table:1,ul:1,ol:1,blockquote:1,div:1},o={},r={};CKEDITOR.tools.extend(o,i,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(r,o,{td:1});CKEDITOR.plugins.add('bidi',{init:function(e){function n(t,n,i,o,a){e.addCommand(i,new CKEDITOR.command(e,o));e.ui.addButton&&e.ui.addButton(t,{label:n,command:i,toolbar:'bidi,'+a})};if(!e.blockless){var t=e.lang.bidi;n('BidiLtr',t.ltr,'bidiltr',s('ltr'),10);n('BidiRtl',t.rtl,'bidirtl',s('rtl'),20);e.on('contentDom',function(){e.document.on('dirChanged',function(t){e.fire('dirChanged',{node:t.data,dir:t.data.getDirection(1)})})});e.on('contentDirChanged',function(t){t=(e.lang.dir!=t.data?'add':'remove')+'Class';var n=e.ui.space(e.config.toolbarLocation);if(n)n[t]('cke_mixed_dir_content')})}}});for(var e=CKEDITOR.dom.element.prototype,n=['setStyle','removeStyle','setAttribute','removeAttribute'],t=0;t<n.length;t++)e[n[t]]=CKEDITOR.tools.override(e[n[t]],c)})();(function(){var e={exec:function(e){var t=e.getCommand('blockquote').state,l=e.getSelection(),o=l&&l.getRanges()[0];if(o){var s=l.createBookmarks();if(CKEDITOR.env.ie){var a=s[0].startNode,n=s[0].endNode,i;if(a&&'blockquote'==a.getParent().getName())for(i=a;i=i.getNext();)if(i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary()){a.move(i,!0);break};if(n&&'blockquote'==n.getParent().getName())for(i=n;i=i.getPrevious();)if(i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary()){n.move(i);break}};var r=o.createIterator();r.enlargeBr=e.config.enterMode!=CKEDITOR.ENTER_BR;if(t==CKEDITOR.TRISTATE_OFF){for(a=[];t=r.getNextParagraph();)a.push(t);1>a.length&&(t=e.document.createElement(e.config.enterMode==CKEDITOR.ENTER_P?'p':'div'),n=s.shift(),o.insertNode(t),t.append(new CKEDITOR.dom.text('﻿',e.document)),o.moveToBookmark(n),o.selectNodeContents(t),o.collapse(!0),n=o.createBookmark(),a.push(t),s.unshift(n));i=a[0].getParent();o=[];for(n=0;n<a.length;n++)t=a[n],i=i.getCommonAncestor(t.getParent());for(t={table:1,tbody:1,tr:1,ol:1,ul:1};t[i.getName()];)i=i.getParent();for(n=null;0<a.length;){for(t=a.shift();!t.getParent().equals(i);)t=t.getParent();t.equals(n)||o.push(t);n=t};for(;0<o.length;)if(t=o.shift(),'blockquote'==t.getName()){for(n=new CKEDITOR.dom.documentFragment(e.document);t.getFirst();)n.append(t.getFirst().remove()),a.push(n.getLast());n.replace(t)}
else a.push(t);o=e.document.createElement('blockquote');for(o.insertBefore(a[0]);0<a.length;)t=a.shift(),o.append(t)}
else if(t==CKEDITOR.TRISTATE_ON){n=[];for(i={};t=r.getNextParagraph();){for(a=o=null;t.getParent();){if('blockquote'==t.getParent().getName()){o=t.getParent();a=t;break};t=t.getParent()};o&&a&&!a.getCustomData('blockquote_moveout')&&(n.push(a),CKEDITOR.dom.element.setMarker(i,a,'blockquote_moveout',!0))};CKEDITOR.dom.element.clearAllMarkers(i);t=[];a=[];for(i={};0<n.length;)r=n.shift(),o=r.getParent(),r.getPrevious()?r.getNext()?(r.breakParent(r.getParent()),a.push(r.getNext())):r.remove().insertAfter(o):r.remove().insertBefore(o),o.getCustomData('blockquote_processed')||(a.push(o),CKEDITOR.dom.element.setMarker(i,o,'blockquote_processed',!0)),t.push(r);CKEDITOR.dom.element.clearAllMarkers(i);for(n=a.length-1;0<=n;n--){o=a[n];t:{i=o;for(var r=0,d=i.getChildCount(),c=void 0;r<d&&(c=i.getChild(r));r++)if(c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()){i=!1;break t};i=!0};i&&o.remove()};if(e.config.enterMode==CKEDITOR.ENTER_BR)for(o=!0;t.length;)if(r=t.shift(),'div'==r.getName()){n=new CKEDITOR.dom.documentFragment(e.document);!o||!r.getPrevious()||r.getPrevious().type==CKEDITOR.NODE_ELEMENT&&r.getPrevious().isBlockBoundary()||n.append(e.document.createElement('br'));for(o=r.getNext()&&!(r.getNext().type==CKEDITOR.NODE_ELEMENT&&r.getNext().isBlockBoundary());r.getFirst();)r.getFirst().remove().appendTo(n);o&&n.append(e.document.createElement('br'));n.replace(r);o=!1}};l.selectBookmarks(s);e.focus()}},refresh:function(e,t){this.setState(e.elementPath(t.block||t.blockLimit).contains('blockquote',1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:'blockquote',allowedContent:'blockquote',requiredContent:'blockquote'};CKEDITOR.plugins.add('blockquote',{init:function(t){t.blockless||(t.addCommand('blockquote',e),t.ui.addButton&&t.ui.addButton('Blockquote',{label:t.lang.blockquote.toolbar,command:'blockquote',toolbar:'blocks,10'}))}})})();(function(){function t(e,t,n){t.type||(t.type='auto');if(n&&!1===e.fire('beforePaste',t)||!t.dataValue&&t.dataTransfer.isEmpty())return!1;t.dataValue||(t.dataValue='');if(CKEDITOR.env.gecko&&'drop'==t.method&&e.toolbox)e.once('afterPaste',function(){e.toolbox.focus()});return e.fire('paste',t)};function i(e){function m(){var t=e.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var r=function(t){e.readOnly&&'cut'==t.name||n.initPasteDataTransfer(t,e);t.data.preventDefault()};t.on('copy',r);t.on('cut',r);t.on('cut',function(){e.readOnly||e.extractSelectedHtml()},null,null,999)};t.on(n.mainPasteEvent,function(e){'beforepaste'==n.mainPasteEvent&&o||f(e)});'beforepaste'==n.mainPasteEvent&&(t.on('paste',function(t){a||(s(),t.data.preventDefault(),f(t),l('paste')||e.openDialog('paste'))}),t.on('contextmenu',u,null,null,0),t.on('beforepaste',function(e){!e.data||e.data.$.ctrlKey||e.data.$.shiftKey||u()},null,null,0));t.on('beforecut',function(){!o&&h(e)});var i;t.attachListener(CKEDITOR.env.ie?t:e.document.getDocumentElement(),'mouseup',function(){i=setTimeout(function(){c()},0)});e.on('destroy',function(){clearTimeout(i)});t.on('keyup',c)};function d(t){return{type:t,canUndo:'cut'==t,startDisabled:!0,exec:function(){'cut'==this.type&&h();var n,i=this.type;if(CKEDITOR.env.ie)n=l(i);else try{n=e.document.$.execCommand(i,!1,null)}catch(t){n=!1};n||e.showNotification(e.lang.clipboard[this.type+'Error']);return n}}};function g(){return{canUndo:!1,async:!0,exec:function(e,i){var a=this,o=function(n,i){n&&t(e,n,!!i);e.fire('afterCommandExec',{name:'paste',command:a,returnValue:!!n})};'string'==typeof i?o({dataValue:i,method:'paste',dataTransfer:n.initPasteDataTransfer()},1):e.getClipboardData(o)}}};function s(){a=1;setTimeout(function(){a=0},100)};function u(){o=1;setTimeout(function(){o=0},10)};function l(t){var n=e.document,i=n.getBody(),o=!1,a=function(){o=!0};i.on(t,a);7<CKEDITOR.env.version?n.$.execCommand(t):n.$.selection.createRange().execCommand(t);i.removeListener(t,a);return o};function h(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var t=e.getSelection(),n,i,o;t.getType()==CKEDITOR.SELECTION_ELEMENT&&(n=t.getSelectedElement())&&(i=t.getRanges()[0],o=e.document.createText(''),o.insertBefore(n),i.setStartBefore(o),i.setEndAfter(n),t.selectRanges([i]),setTimeout(function(){n.getParent()&&(o.remove(),t.selectElement(n))},0))}};function E(t,n){var r=e.document,o=e.editable(),c=function(e){e.cancel()},s;if(!r.getById('cke_pastebin')){var l=e.getSelection(),h=l.createBookmarks();CKEDITOR.env.ie&&l.root.fire('selectionchange');var i=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!o.is('body')||CKEDITOR.env.ie?'div':'body',r);i.setAttributes({id:'cke_pastebin','data-cke-temp':'1'});var a=0,r=r.getWindow();CKEDITOR.env.webkit?(o.append(i),i.addClass('cke_editable'),o.is('body')||(a='static'!=o.getComputedStyle('position')?o:CKEDITOR.dom.element.get(o.$.offsetParent),a=a.getDocumentPosition().y)):o.getAscendant(CKEDITOR.env.ie?'body':'html',1).append(i);i.setStyles({position:'absolute',top:r.getScrollPosition().y-a+10+'px',width:'1px',height:Math.max(1,r.getViewPaneSize().height-20)+'px',overflow:'hidden',margin:0,padding:0});CKEDITOR.env.safari&&i.setStyles(CKEDITOR.tools.cssVendorPrefix('user-select','text'));(a=i.getParent().isReadOnly())?(i.setOpacity(0),i.setAttribute('contenteditable',!0)):i.setStyle('ltr'==e.config.contentsLangDirection?'left':'right','-10000px');e.on('selectionChange',c,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko)s=o.once('blur',c,null,null,-100);a&&i.focus();a=new CKEDITOR.dom.range(i);a.selectNodeContents(i);var u=a.select();CKEDITOR.env.ie&&(s=o.once('blur',function(){e.lockSelection(u)}));var d=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=d);s&&s.removeListener();CKEDITOR.env.ie&&o.focus();l.selectBookmarks(h);i.remove();var t;CKEDITOR.env.webkit&&(t=i.getFirst())&&t.is&&t.hasClass('Apple-style-span')&&(i=t);e.removeListener('selectionChange',c);n(i.getHtml())},0)}};function p(){if('paste'==n.mainPasteEvent)return e.fire('beforePaste',{type:'auto',method:'paste'}),!1;e.focus();s();var t=e.focusManager;t.lock();if(e.editable().fire(n.mainPasteEvent)&&!l('paste'))return t.unlock(),!1;t.unlock();return!0};function T(t){if('wysiwyg'==e.mode)switch(t.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:t=e.editable();s();'paste'==n.mainPasteEvent&&t.fire('beforepaste');break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:e.fire('saveSnapshot'),setTimeout(function(){e.fire('saveSnapshot')},50)}};function f(i){var o={type:'auto',method:'paste',dataTransfer:n.initPasteDataTransfer(i)};o.dataTransfer.cacheData();var a=!1!==e.fire('beforePaste',o);a&&n.canClipboardApiBeTrusted(o.dataTransfer,e)?(i.data.preventDefault(),setTimeout(function(){t(e,o)},0)):E(i,function(n){o.dataValue=n.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,'');a&&t(e,o)})};function c(){if('wysiwyg'==e.mode){var t=i('paste');e.getCommand('cut').setState(i('cut'));e.getCommand('copy').setState(i('copy'));e.getCommand('paste').setState(t);e.fire('pasteState',t)}};function i(t){if(r&&t in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if('paste'==t)return CKEDITOR.TRISTATE_OFF;t=e.getSelection();var n=t.getRanges();return t.getType()==CKEDITOR.SELECTION_NONE||1==n.length&&n[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF};var n=CKEDITOR.plugins.clipboard,o=0,a=0,r=0;(function(){e.on('key',T);e.on('contentDom',m);e.on('selectionChange',function(e){r=e.data.selection.getRanges()[0].checkReadOnly();c()});e.contextMenu&&e.contextMenu.addListener(function(e,t){r=t.getRanges()[0].checkReadOnly();return{cut:i('cut'),copy:i('copy'),paste:i('paste')}})})();(function(){function t(t,n,i,o,a){var r=e.lang.clipboard[n];e.addCommand(n,i);e.ui.addButton&&e.ui.addButton(t,{label:r,command:n,toolbar:'clipboard,'+o});e.addMenuItems&&e.addMenuItem(n,{label:r,command:n,group:'clipboard',order:a})};t('Cut','cut',d('cut'),10,1);t('Copy','copy',d('copy'),20,4);t('Paste','paste',g(),30,8)})();e.getClipboardData=function(t,n){function r(e){e.removeListener();e.cancel();n(e.data)};function s(e){e.removeListener();e.cancel();a=!0;n({type:o,dataValue:e.data.dataValue,dataTransfer:e.data.dataTransfer,method:'paste'})};function l(){this.customTitle=t&&t.title};var i=!1,o='auto',a=!1;n||(n=t,t=null);e.on('paste',r,null,null,0);e.on('beforePaste',function(e){e.removeListener();i=!0;o=e.data.type},null,null,1E3);!1===p()&&(e.removeListener('paste',r),i&&e.fire('pasteDialog',l)?(e.on('pasteDialogCommit',s),e.on('dialogHide',function(e){e.removeListener();e.data.removeListener('pasteDialogCommit',s);setTimeout(function(){a||n(null)},10)})):n(null))}};function o(e){if(CKEDITOR.env.webkit){if(!e.match(/^[^<]*$/g)&&!e.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return'html'}
else if(CKEDITOR.env.ie){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!e.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return'html'}
else if(CKEDITOR.env.gecko){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi))return'html'}
else return'html';return'htmlifiedtext'};function a(e,t){function n(e){return CKEDITOR.tools.repeat('\x3c/p\x3e\x3cp\x3e',~~(e/2))+(1==e%2?'\x3cbr\x3e':'')};t=t.replace(/\s+/g,' ').replace(/> +</g,'\x3e\x3c').replace(/<br ?\/>/gi,'\x3cbr\x3e');t=t.replace(/<\/?[A-Z]+>/g,function(e){return e.toLowerCase()});if(t.match(/^[^<]$/))return t;CKEDITOR.env.webkit&&-1<t.indexOf('\x3cdiv\x3e')&&(t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,'\x3cbr\x3e').replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,'\x3cdiv\x3e\x3c/div\x3e'),t.match(/<div>(<br>|)<\/div>/)&&(t='\x3cp\x3e'+t.replace(/(<div>(<br>|)<\/div>)+/g,function(e){return n(e.split('\x3c/div\x3e\x3cdiv\x3e').length+1)})+'\x3c/p\x3e'),t=t.replace(/<\/div><div>/g,'\x3cbr\x3e'),t=t.replace(/<\/?div>/g,''));CKEDITOR.env.gecko&&e.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,'\x3cbr\x3e')),-1<t.indexOf('\x3cbr\x3e\x3cbr\x3e')&&(t='\x3cp\x3e'+t.replace(/(<br>){2,}/g,function(e){return n(e.length/4)})+'\x3c/p\x3e'));return s(e,t)};function r(){function t(){var t={},e;for(e in CKEDITOR.dtd)'$'!=e.charAt(0)&&'div'!=e&&'span'!=e&&(t[e]=1);return t};var e={};return{get:function(n){return'plain-text'==n?e.plainText||(e.plainText=new CKEDITOR.filter('br')):'semantic-content'==n?((n=e.semanticContent)||(n=new CKEDITOR.filter,n.allow({$1:{elements:t(),attributes:!0,styles:!1,classes:!1}}),n=e.semanticContent=n),n):n?new CKEDITOR.filter(n):null}}};function n(e,t,n){t=CKEDITOR.htmlParser.fragment.fromHtml(t);var i=new CKEDITOR.htmlParser.basicWriter;n.applyTo(t,!0,!1,e.activeEnterMode);t.writeHtml(i);return i.getHtml()};function s(e,t){e.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,function(e){return CKEDITOR.tools.repeat('\x3cbr\x3e',e.length/7*2)}).replace(/<\/?p>/g,''):e.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,'\x3c$1div\x3e'));return t};function l(e){e.data.preventDefault();e.data.$.dataTransfer.dropEffect='none'};function c(e){var n=CKEDITOR.plugins.clipboard;e.on('contentDom',function(){function c(n,i,o){i.select();t(e,{dataTransfer:o,method:'drop'},1);o.sourceEditor.fire('saveSnapshot');o.sourceEditor.editable().extractHtmlFromRange(n);o.sourceEditor.getSelection().selectRanges([n]);o.sourceEditor.fire('saveSnapshot')};function d(i,o){i.select();t(e,{dataTransfer:o,method:'drop'},1);n.resetDragDataTransfer()};function a(t,n,i){var o={$:t.data.$,target:t.data.getTarget()};n&&(o.dragRange=n);i&&(o.dropRange=i);!1===e.fire(t.name,o)&&t.data.preventDefault()};function r(e){e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent());return e.getChildCount()};var i=e.editable(),o=CKEDITOR.plugins.clipboard.getDropTarget(e),s=e.ui.space('top'),l=e.ui.space('bottom');n.preventDefaultDropOnElement(s);n.preventDefaultDropOnElement(l);i.attachListener(o,'dragstart',a);i.attachListener(e,'dragstart',n.resetDragDataTransfer,n,null,1);i.attachListener(e,'dragstart',function(t){n.initDragDataTransfer(t,e)},null,null,2);i.attachListener(e,'dragstart',function(){var t=n.dragRange=e.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(n.dragStartContainerChildCount=t?r(t.startContainer):null,n.dragEndContainerChildCount=t?r(t.endContainer):null)},null,null,100);i.attachListener(o,'dragend',a);i.attachListener(e,'dragend',n.initDragDataTransfer,n,null,1);i.attachListener(e,'dragend',n.resetDragDataTransfer,n,null,100);i.attachListener(o,'dragover',function(e){var t=e.data.getTarget();t&&t.is&&t.is('html')?e.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&e.data.$.dataTransfer.types.contains('Files')&&e.data.preventDefault()});i.attachListener(o,'drop',function(t){if(!t.data.$.defaultPrevented){t.data.preventDefault();var i=t.data.getTarget();if(!i.isReadOnly()||i.type==CKEDITOR.NODE_ELEMENT&&i.is('html')){var i=n.getRangeAtDropPosition(t,e),o=n.dragRange;i&&a(t,o,i)}}},null,null,9999);i.attachListener(e,'drop',n.initDragDataTransfer,n,null,1);i.attachListener(e,'drop',function(t){if(t=t.data){var o=t.dropRange,a=t.dragRange,i=t.dataTransfer;i.getTransferType(e)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){n.internalDrop(a,o,i,e)},0):i.getTransferType(e)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?c(a,o,i):d(o,i)}},null,null,9999)})};CKEDITOR.plugins.add('clipboard',{requires:'dialog',init:function(e){var t,s=r();e.config.forcePasteAsPlainText?t='plain-text':e.config.pasteFilter?t=e.config.pasteFilter:!CKEDITOR.env.webkit||'pasteFilter'in e.config||(t='semantic-content');e.pasteFilter=s.get(t);i(e);c(e);CKEDITOR.dialog.add('paste',CKEDITOR.getUrl(this.path+'dialogs/paste.js'));e.on('paste',function(t){t.data.dataTransfer||(t.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer);if(!t.data.dataValue){var i=t.data.dataTransfer,n=i.getData('text/html');if(n)t.data.dataValue=n,t.data.type='html';else if(n=i.getData('text/plain'))t.data.dataValue=e.editable().transformPlainTextToHtml(n),t.data.type='text'}},null,null,1);e.on('paste',function(e){var t=e.data.dataValue,a=CKEDITOR.dtd.$block;-1<t.indexOf('Apple-')&&(t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi,' '),'html'!=e.data.type&&(t=t.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(e,t){return t.replace(/\t/g,'\x26nbsp;\x26nbsp; \x26nbsp;')})),-1<t.indexOf('\x3cbr class\x3d"Apple-interchange-newline"\x3e')&&(e.data.startsWithEOL=1,e.data.preSniffing='html',t=t.replace(/<br class="Apple-interchange-newline">/,'')),t=t.replace(/(<[^>]+) class="Apple-[^"]*"/gi,'$1'));if(t.match(/^<[^<]+cke_(editable|contents)/i)){var n,o,i=new CKEDITOR.dom.element('div');for(i.setHtml(t);1==i.getChildCount()&&(n=i.getFirst())&&n.type==CKEDITOR.NODE_ELEMENT&&(n.hasClass('cke_editable')||n.hasClass('cke_contents'));)i=o=n;o&&(t=o.getHtml().replace(/<br>$/i,''))};CKEDITOR.env.ie?t=t.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(t,n){return n.toLowerCase()in a?(e.data.preSniffing='html','\x3c'+n):t}):CKEDITOR.env.webkit?t=t.replace(/<\/(\w+)><div><br><\/div>$/,function(t,n){return n in a?(e.data.endsWithEOL=1,'\x3c/'+n+'\x3e'):t}):CKEDITOR.env.gecko&&(t=t.replace(/(\s)<br>$/,'$1'));e.data.dataValue=t},null,null,3);e.on('paste',function(t){t=t.data;var r=t.type,i=t.dataValue,l,c=e.config.clipboard_defaultContentType||'html',d=t.dataTransfer.getTransferType(e);l='html'==r||'html'==t.preSniffing?'html':o(i);'htmlifiedtext'==l&&(i=a(e.config,i));'text'==r&&'html'==l?i=n(e,i,s.get('plain-text')):d==CKEDITOR.DATA_TRANSFER_EXTERNAL&&e.pasteFilter&&!t.dontFilter&&(i=n(e,i,e.pasteFilter));t.startsWithEOL&&(i='\x3cbr data-cke-eol\x3d"1"\x3e'+i);t.endsWithEOL&&(i+='\x3cbr data-cke-eol\x3d"1"\x3e');'auto'==r&&(r='html'==l||'html'==c?'html':'text');t.type=r;t.dataValue=i;delete t.preSniffing;delete t.startsWithEOL;delete t.endsWithEOL},null,null,6);e.on('paste',function(t){t=t.data;t.dataValue&&(e.insertHtml(t.dataValue,t.type,t.range),setTimeout(function(){e.fire('afterPaste')},0))},null,null,1E3);e.on('pasteDialog',function(t){setTimeout(function(){e.openDialog('paste',t.data)},0)})}});CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?'beforepaste':'paste',canClipboardApiBeTrusted:function(e,t){return e.getTransferType(t)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!e.isEmpty()||CKEDITOR.env.gecko&&(e.getData('text/html')||e.getFilesCount())?!0:!1},getDropTarget:function(e){var t=e.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||t.isInline()?t:e.document},fixSplitNodesAfterDrop:function(e,t,n,i){function a(e,n,i){var o=e;o.type==CKEDITOR.NODE_TEXT&&(o=e.getParent());if(o.equals(n)&&i!=n.getChildCount())return e=t.startContainer.getChild(t.startOffset-1),n=t.startContainer.getChild(t.startOffset),e&&e.type==CKEDITOR.NODE_TEXT&&n&&n.type==CKEDITOR.NODE_TEXT&&(i=e.getLength(),e.setText(e.getText()+n.getText()),n.remove(),t.setStart(e,i),t.collapse(!0)),!0};var o=t.startContainer;'number'==typeof i&&'number'==typeof n&&o.type==CKEDITOR.NODE_ELEMENT&&(a(e.startContainer,o,n)||a(e.endContainer,o,i))},isDropRangeAffectedByDragRange:function(e,t){var n=t.startContainer,i=t.endOffset;return e.endContainer.equals(n)&&e.endOffset<=i||e.startContainer.getParent().equals(n)&&e.startContainer.getIndex()<i||e.endContainer.getParent().equals(n)&&e.endContainer.getIndex()<i?!0:!1},internalDrop:function(e,n,i,o){var r=CKEDITOR.plugins.clipboard,l=o.editable(),s,a;o.fire('saveSnapshot');o.fire('lockSnapshot',{dontUpdate:1});CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(e,n,r.dragStartContainerChildCount,r.dragEndContainerChildCount);(a=this.isDropRangeAffectedByDragRange(e,n))||(s=e.createBookmark(!1));r=n.clone().createBookmark(!1);a&&(s=e.createBookmark(!1));e=s.startNode;n=s.endNode;a=r.startNode;n&&e.getPosition(a)&CKEDITOR.POSITION_PRECEDING&&n.getPosition(a)&CKEDITOR.POSITION_FOLLOWING&&a.insertBefore(e);e=o.createRange();e.moveToBookmark(s);l.extractHtmlFromRange(e,1);n=o.createRange();n.moveToBookmark(r);t(o,{dataTransfer:i,method:'drop',range:n},1);o.fire('unlockSnapshot')},getRangeAtDropPosition:function(e,t){var i=e.data.$,l=i.clientX,d=i.clientY,r=t.getSelection(!0).getRanges()[0],o=t.createRange();if(e.data.testRange)return e.data.testRange;if(document.caretRangeFromPoint)i=t.document.$.caretRangeFromPoint(l,d),o.setStart(CKEDITOR.dom.node(i.startContainer),i.startOffset),o.collapse(!0);else if(i.rangeParent)o.setStart(CKEDITOR.dom.node(i.rangeParent),i.rangeOffset),o.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&r&&t.editable().hasFocus)return r;if(document.body.createTextRange){t.focus();i=t.document.getBody().$.createTextRange();try{for(var a=!1,c=0;20>c&&!a;c++){if(!a)try{i.moveToPoint(l,d-c),a=!0}catch(n){};if(!a)try{i.moveToPoint(l,d+c),a=!0}catch(n){}};if(a){var f='cke-temp-'+(new Date).getTime();i.pasteHTML('\x3cspan id\x3d"'+f+'"\x3e​\x3c/span\x3e');var h=t.document.getById(f);o.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START);h.remove()}
else{var m=t.document.$.elementFromPoint(l,d),s=new CKEDITOR.dom.element(m),u;if(s.equals(t.editable())||'html'==s.getName())return r&&r.startContainer&&!r.startContainer.equals(t.editable())?r:null;u=s.getClientRect();l<u.left?o.setStartAt(s,CKEDITOR.POSITION_AFTER_START):o.setStartAt(s,CKEDITOR.POSITION_BEFORE_END);o.collapse(!0)}}catch(n){return null}}
else return null};return o},initDragDataTransfer:function(e,t){var i=e.data.$?e.data.$.dataTransfer:null,n=new this.dataTransfer(i,t);i?this.dragData&&n.id==this.dragData.id?n=this.dragData:this.dragData=n:this.dragData?n=this.dragData:this.dragData=n;e.data.dataTransfer=n},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(e,t){if(this.isCustomCopyCutSupported){if(e&&e.data&&e.data.$){var n=new this.dataTransfer(e.data.$.clipboardData,t);this.copyCutData&&n.id==this.copyCutData.id?(n=this.copyCutData,n.$=e.data.$.clipboardData):this.copyCutData=n;return n};return new this.dataTransfer(null,t)};return new this.dataTransfer(CKEDITOR.env.edge&&e&&e.data.$&&e.data.$.clipboardData||null,t)},preventDefaultDropOnElement:function(e){e&&e.on('dragover',l)}};var e=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?'cke/id':'Text';CKEDITOR.plugins.clipboard.dataTransfer=function(t,n){t&&(this.$=t);this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],normalizeType:function(e){e=e.toLowerCase();return'text'==e||'text/plain'==e?'Text':'url'==e?'URL':e}};this.id=this.getData(e);this.id||(this.id='Text'==e?'':'cke-'+CKEDITOR.tools.getUniqueId());if('Text'!=e)try{this.$.setData(e,this.id)}catch(i){};n&&(this.sourceEditor=n,this.setData('text/html',n.getSelectedHtml(1)),'Text'==e||this.getData('text/plain')||this.setData('text/plain',n.getSelection().getSelectedText()))};CKEDITOR.DATA_TRANSFER_INTERNAL=1;CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2;CKEDITOR.DATA_TRANSFER_EXTERNAL=3;CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(e){e=this._.normalizeType(e);var n=this._.data[e];if(void 0===n||null===n||''===n)try{n=this.$.getData(e)}catch(t){};if(void 0===n||null===n||''===n)n='';'text/html'==e?(n=n.replace(this._.metaRegExp,''),(e=this._.bodyRegExp.exec(n))&&e.length&&(n=e[1],n=n.replace(this._.fragmentRegExp,''))):'Text'==e&&CKEDITOR.env.gecko&&this.getFilesCount()&&'file://'==n.substring(0,7)&&(n='');return n},setData:function(t,n){t=this._.normalizeType(t);this._.data[t]=n;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||'URL'==t||'Text'==t){'Text'==e&&'Text'==t&&(this.id=n);try{this.$.setData(t,n)}catch(i){}}},getTransferType:function(e){return this.sourceEditor?this.sourceEditor==e?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function i(e){e=n._.normalizeType(e);var t=n.getData(e);t&&(n._.data[e]=t)};if(this.$){var n=this,e,t;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(e=0;e<this.$.types.length;e++)i(this.$.types[e])}
else i('Text'),i('URL');t=this._getImageFromClipboard();if(this.$&&this.$.files||t){this._.files=[];if(this.$.files&&this.$.files.length)for(e=0;e<this.$.files.length;e++)this._.files.push(this.$.files[e]);0===this._.files.length&&t&&this._.files.push(t)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(e){return this._.files.length?this._.files[e]:this.$&&this.$.files&&this.$.files.length?this.$.files[e]:0===e?this._getImageFromClipboard():void 0},isEmpty:function(){var t={},n;if(this.getFilesCount())return!1;for(n in this._.data)t[n]=1;if(this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var i=0;i<this.$.types.length;i++)t[this.$.types[i]]=1}
else t.Text=1,t.URL=1;'Text'!=e&&(t[e]=0);for(n in t)if(t[n]&&''!==this.getData(n))return!1;return!0},_getImageFromClipboard:function(){var t;if(this.$&&this.$.items&&this.$.items[0])try{if((t=this.$.items[0].getAsFile())&&t.type)return t}catch(e){}}}})();(function(){var e='\x3ca id\x3d"{id}" class\x3d"cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?'':' href\x3d"javascript:void(\'{titleJs}\')"')+' title\x3d"{title}" tabindex\x3d"-1" hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"{hasArrow}" aria-disabled\x3d"{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(e+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var e=e+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':'onclick')+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{style}"'),e=e+'\x3e\x26nbsp;\x3c/span\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_button_label cke_button__{name}_label" aria-hidden\x3d"false"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/a\x3e',t=CKEDITOR.addTemplate('buttonArrow','\x3cspan class\x3d"cke_button_arrow"\x3e'+(CKEDITOR.env.hc?'\x26#9660;':'')+'\x3c/span\x3e'),n=CKEDITOR.addTemplate('button',e);CKEDITOR.plugins.add('button',{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON='button';CKEDITOR.ui.button=function(e){CKEDITOR.tools.extend(this,e,{title:e.label,click:e.click||function(t){t.execCommand(e.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(e){return new CKEDITOR.ui.button(e)}};CKEDITOR.ui.button.prototype={render:function(e,i){function u(){var t=e.mode;t&&(t=this.modes[t]?void 0!==l[t]?l[t]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t=e.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:t,this.setState(t),this.refresh&&this.refresh())};var c=CKEDITOR.env,d=this._.id=CKEDITOR.tools.getNextId(),r='',a=this.command,m;this._.editor=e;var o={id:d,button:this,editor:e,focus:function(){CKEDITOR.document.getById(d).focus()},execute:function(){this.button.click(e)},attach:function(e){this.button.attach(e)}},g=CKEDITOR.tools.addFunction(function(e){if(o.onkey)return e=new CKEDITOR.dom.event(e),!1!==o.onkey(o,e.getKeystroke())}),E=CKEDITOR.tools.addFunction(function(e){var t;o.onfocus&&(t=!1!==o.onfocus(o,new CKEDITOR.dom.event(e)));return t}),f=0;o.clickFn=m=CKEDITOR.tools.addFunction(function(){f&&(e.unlockSelection(1),f=0);o.execute();c.iOS&&e.focus()});if(this.modes){var l={};e.on('beforeModeUnload',function(){e.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(l[e.mode]=this._.state)},this);e.on('activeFilterChange',u,this);e.on('mode',u,this);!this.readOnly&&e.on('readOnly',u,this)}
else a&&(a=e.getCommand(a))&&(a.on('state',function(){this.setState(a.state)},this),r+=a.state==CKEDITOR.TRISTATE_ON?'on':a.state==CKEDITOR.TRISTATE_DISABLED?'disabled':'off');if(this.directional)e.on('contentDirChanged',function(t){var n=CKEDITOR.document.getById(this._.id),i=n.getFirst();t=t.data;t!=e.lang.dir?n.addClass('cke_'+t):n.removeClass('cke_ltr').removeClass('cke_rtl');i.setAttribute('style',CKEDITOR.skin.getIconStyle(s,'rtl'==t,this.icon,this.iconOffset))},this);a||(r+='off');var h=this.name||this.command,s=h;this.icon&&!/\./.test(this.icon)&&(s=this.icon,this.icon=null);r={id:d,name:h,iconName:s,label:this.label,cls:this.className||'',state:r,ariaDisabled:'disabled'==r?'true':'false',title:this.title,titleJs:c.gecko&&!c.hc?'':(this.title||'').replace('\'',''),hasArrow:this.hasArrow?'true':'false',keydownFn:g,focusFn:E,clickFn:m,style:CKEDITOR.skin.getIconStyle(s,'rtl'==e.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?t.output():''};n.output(r,i);if(this.onRender)this.onRender();return o},setState:function(e){if(this._.state==e)return!1;this._.state=e;var t=CKEDITOR.document.getById(this._.id);return t?(t.setState(e,'cke_button'),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute('aria-disabled',!0):t.removeAttribute('aria-disabled'),this.hasArrow?(e=e==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+'_label').setText(e)):e==CKEDITOR.TRISTATE_ON?t.setAttribute('aria-pressed',!0):t.removeAttribute('aria-pressed'),!0):!1},getState:function(){return this._.state},toFeature:function(e){if(this._.feature)return this._.feature;var t=this;this.allowedContent||this.requiredContent||!this.command||(t=e.getCommand(this.command)||t);return this._.feature=t}};CKEDITOR.ui.prototype.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)}})();CKEDITOR.plugins.add('panelbutton',{requires:'button',onLoad:function(){function e(e){var t=this._;t.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(e),t.on?t.panel.hide():t.panel.showBlock(this._.id,this.document.getById(this._.id),4))};CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){var n=t.panel||{};delete t.panel;this.base(t);this.document=n.parent&&n.parent.getDocument()||CKEDITOR.document;n.block={attributes:n.attributes};this.hasArrow=n.toolbarRelated=!0;this.click=e;this._={panelDefinition:n}},statics:{handler:{create:function(e){return new CKEDITOR.ui.panelButton(e)}}},proto:{createPanel:function(e){var i=this._;if(!i.panel){var o=this._.panelDefinition,a=this._.panelDefinition.block,r=o.parent||CKEDITOR.document.getBody(),n=this._.panel=new CKEDITOR.ui.floatPanel(e,r,o),o=n.addBlock(i.id,a),t=this;n.onShow=function(){t.className&&this.element.addClass(t.className+'_panel');t.setState(CKEDITOR.TRISTATE_ON);i.on=1;t.editorFocus&&e.focus();if(t.onOpen)t.onOpen()};n.onHide=function(n){t.className&&this.element.getFirst().removeClass(t.className+'_panel');t.setState(t.modes&&t.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);i.on=0;if(!n&&t.onClose)t.onClose()};n.onEscape=function(){n.hide(1);t.document.getById(i.id).focus()};if(this.onBlock)this.onBlock(n,o);o.onHide=function(){i.on=0;t.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}});CKEDITOR.UI_PANELBUTTON='panelbutton';(function(){CKEDITOR.plugins.add('panel',{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL='panel';CKEDITOR.ui.panel=function(e,t){t&&CKEDITOR.tools.extend(this,t);CKEDITOR.tools.extend(this,{className:'',css:[]});this.id=CKEDITOR.tools.getNextId();this.document=e;this.isFramed=this.forceIFrame||this.css.length;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(e){return new CKEDITOR.ui.panel(e)}};var e=CKEDITOR.addTemplate('panel','\x3cdiv lang\x3d"{langCode}" id\x3d"{id}" dir\x3d{dir} class\x3d"cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style\x3d"z-index:{z-index}" role\x3d"presentation"\x3e{frame}\x3c/div\x3e'),t=CKEDITOR.addTemplate('panel-frame','\x3ciframe id\x3d"{id}" class\x3d"cke_panel_frame" role\x3d"presentation" frameborder\x3d"0" src\x3d"{src}"\x3e\x3c/iframe\x3e'),n=CKEDITOR.addTemplate('panel-frame-inner','\x3c!DOCTYPE html\x3e\x3chtml class\x3d"cke_panel_container {env}" dir\x3d"{dir}" lang\x3d"{langCode}"\x3e\x3chead\x3e{css}\x3c/head\x3e\x3cbody class\x3d"cke_{dir}" style\x3d"margin:0;padding:0" onload\x3d"{onload}"\x3e\x3c/body\x3e\x3c/html\x3e');CKEDITOR.ui.panel.prototype={render:function(i,o){this.getHolderElement=function(){var e=this._.holder;if(!e){if(this.isFramed){var e=this.document.getById(this.id+'_frame'),t=e.getParent(),e=e.getFrameDocument();CKEDITOR.env.iOS&&t.setStyles({overflow:'scroll','-webkit-overflow-scrolling':'touch'});t=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0;if(this.onLoad)this.onLoad()},this));e.write(n.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:'window.parent.CKEDITOR.tools.callFunction('+t+');'},r)));e.getWindow().$.CKEDITOR=CKEDITOR;e.on('keydown',function(e){var t=e.data.getKeystroke(),n=this.document.getById(this.id).getAttribute('dir');this._.onKeyDown&&!1===this._.onKeyDown(t)?e.data.preventDefault():(27==t||t==('rtl'==n?39:37))&&this.onEscape&&!1===this.onEscape(t)&&e.data.preventDefault()},this);e=e.getBody();e.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(t)}
else e=this.document.getById(this.id);this._.holder=e};return e};var r={editorId:i.id,id:this.id,langCode:i.langCode,dir:i.lang.dir,cls:this.className,frame:'',env:CKEDITOR.env.cssClass,'z-index':i.config.baseFloatZIndex+1};if(this.isFramed){var a=CKEDITOR.env.air?'javascript:void(0)':CKEDITOR.env.ie?'javascript:void(function(){'+encodeURIComponent('document.open();('+CKEDITOR.tools.fixDomain+')();document.close();')+'}())':'';r.frame=t.output({id:this.id+'_frame',src:a})};a=e.output(r);o&&o.push(a);return a},addBlock:function(e,t){t=this._.blocks[e]=t instanceof CKEDITOR.ui.panel.block?t:new CKEDITOR.ui.panel.block(this.getHolderElement(),t);this._.currentBlock||this.showBlock(e);return t},getBlock:function(e){return this._.blocks[e]},showBlock:function(e){e=this._.blocks[e];var t=this._.currentBlock,n=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+'_frame');t&&t.hide();this._.currentBlock=e;CKEDITOR.fire('ariaWidget',n);e._.focusIndex=-1;this._.onKeyDown=e.onKeyDown&&CKEDITOR.tools.bind(e.onKeyDown,e);e.show();return e},destroy:function(){this.element&&this.element.remove()}};CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(e,t){this.element=e.append(e.getDocument().createElement('div',{attributes:{tabindex:-1,'class':'cke_panel_block'},styles:{display:'none'}}));t&&CKEDITOR.tools.extend(this,t);this.element.setAttributes({role:this.attributes.role||'presentation','aria-label':this.attributes['aria-label'],title:this.attributes.title||this.attributes['aria-label']});this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(e){-1!=e&&(e=this.element.getElementsByTag('a').getItem(this._.focusIndex=e),CKEDITOR.env.webkit&&e.getDocument().getWindow().focus(),e.focus(),this.onMark&&this.onMark(e))}},proto:{show:function(){this.element.setStyle('display','')},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle('display','none')},onKeyDown:function(e,t){var o=this.keys[e];switch(o){case'next':for(var i=this._.focusIndex,o=this.element.getElementsByTag('a'),n;n=o.getItem(++i);)if(n.getAttribute('_cke_focus')&&n.$.offsetWidth){this._.focusIndex=i;n.focus();break};return n||t?!1:(this._.focusIndex=-1,this.onKeyDown(e,1));case'prev':i=this._.focusIndex;for(o=this.element.getElementsByTag('a');0<i&&(n=o.getItem(--i));){if(n.getAttribute('_cke_focus')&&n.$.offsetWidth){this._.focusIndex=i;n.focus();break};n=null};return n||t?!1:(this._.focusIndex=o.count(),this.onKeyDown(e,1));case'click':case'mouseup':return i=this._.focusIndex,(n=0<=i&&this.element.getElementsByTag('a').getItem(i))&&(n.$[o]?n.$[o]():n.$['on'+o]()),!1};return!0}}})})();CKEDITOR.plugins.add('floatpanel',{requires:'panel'});(function(){function t(t,n,i,o,a){a=CKEDITOR.tools.genKey(n.getUniqueId(),i.getUniqueId(),t.lang.dir,t.uiColor||'',o.css||'',a||'');var r=e[a];r||(r=e[a]=new CKEDITOR.ui.panel(n,o),r.element=i.append(CKEDITOR.dom.element.createFromHtml(r.render(t),n)),r.element.setStyles({display:'none',position:'absolute'}));return r};var e={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(e,n,i,o){function s(){c.hide()};i.forceIFrame=1;i.toolbarRelated&&e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(n=CKEDITOR.document.getById('cke_'+e.name));var r=n.getDocument();o=t(e,r,n,i,o||0);var a=o.element,l=a.getFirst(),c=this;a.disableContextMenu();this.element=a;this._={editor:e,panel:o,parentElement:n,definition:i,document:r,iframe:l,children:[],dir:e.lang.dir,showBlockParams:null};e.on('mode',s);e.on('resize',s);r.getWindow().on('resize',function(){this.reposition()},this)},proto:{addBlock:function(e,t){return this._.panel.addBlock(e,t)},addListBlock:function(e,t){return this._.panel.addListBlock(e,t)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,t,n,i,o,u){var d=this._.panel,f=d.showBlock(e);this._.showBlockParams=[].slice.call(arguments);this.allowBlur(!1);var s=this._.editor.editable();this._.returnFocus=s.hasFocus?s:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);this._.hideTimeout=0;var r=this.element,s=this._.iframe,s=CKEDITOR.env.ie&&!CKEDITOR.env.edge?s:new CKEDITOR.dom.window(s.$.contentWindow),h=r.getDocument(),m=this._.parentElement.getPositionedAncestor(),g=t.getDocumentPosition(h),h=m?m.getDocumentPosition(h):{x:0,y:0},c='rtl'==this._.dir,a=g.x+(i||0)-h.x,l=g.y+(o||0)-h.y;!c||1!=n&&4!=n?c||2!=n&&3!=n||(a+=t.$.offsetWidth-1):a+=t.$.offsetWidth;if(3==n||4==n)l+=t.$.offsetHeight-1;this._.panel._.offsetParentId=t.getId();r.setStyles({top:l+'px',left:0,display:''});r.setOpacity(0);r.getFirst().removeStyle('width');this._.editor.focusManager.add(s);this._.blurSet||(CKEDITOR.event.useCapture=!0,s.on('blur',function(e){function t(){delete this._.returnFocus;this.hide()};this.allowBlur()&&e.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(t,0,this)):t.call(this))},this),s.on('focus',function(){this._.focused=!0;this.hideChild();this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(s.on('touchstart',function(){clearTimeout(this._.hideTimeout)},this),s.on('touchend',function(){this._.hideTimeout=0;this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1);d.onEscape=CKEDITOR.tools.bind(function(e){if(this.onEscape&&!1===this.onEscape(e))return!1},this);CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.tools.bind(function(){var e=r;e.removeStyle('width');if(f.autoSize){var t=f.element.getDocument(),t=(CKEDITOR.env.webkit||CKEDITOR.env.edge?f.element:t.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<t&&(t+=(e.$.offsetWidth||0)-(e.$.clientWidth||0)+3);e.setStyle('width',t+10+'px');t=f.element.$.scrollHeight;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<t&&(t+=(e.$.offsetHeight||0)-(e.$.clientHeight||0)+3);e.setStyle('height',t+'px');d._.currentBlock.element.setStyle('display','none').removeStyle('display')}
else e.removeStyle('height');c&&(a-=r.$.offsetWidth);r.setStyle('left',a+'px');var t=d.element.getWindow(),e=r.$.getBoundingClientRect(),t=t.getViewPaneSize(),n=e.width||e.right-e.left,i=e.height||e.bottom-e.top,s=c?e.right:t.width-e.left,h=c?t.width-e.right:e.left;c?s<n&&(a=h>n?a+n:t.width>n?a-e.left:a-e.right+t.width):s<n&&(a=h>n?a-n:t.width>n?a-e.right+t.width:a-e.left);n=e.top;t.height-e.top<i&&(l=n>i?l-i:t.height>i?l-e.bottom+t.height:l-e.top);CKEDITOR.env.ie&&(t=e=new CKEDITOR.dom.element(r.$.offsetParent),'html'==t.getName()&&(t=t.getDocument().getBody()),'rtl'==t.getComputedStyle('direction')&&(a=CKEDITOR.env.ie8Compat?a-2*r.getDocument().getDocumentElement().$.scrollLeft:a-(e.$.scrollWidth-e.$.clientWidth)));var e=r.getFirst(),o;(o=e.getCustomData('activePanel'))&&o.onHide&&o.onHide.call(this,1);e.setCustomData('activePanel',this);r.setStyles({top:l+'px',left:a+'px'});r.setOpacity(1);u&&u()},this);d.isLoaded?e():d.onLoad=e;CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();f.element.focus();CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=e);this.allowBlur(!0);this._.editor.fire('panelShow',this)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this)},reposition:function(){var e=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,e))},focus:function(){if(CKEDITOR.env.webkit){var e=CKEDITOR.document.getActive();e&&!e.equals(this._.iframe)&&e.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var e=this._.iframe.getFrameDocument().getActive();e&&e.is('a')&&(this._.lastFocused=e)},hide:function(e){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild();CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur();this.element.setStyle('display','none');this.visible=0;this.element.getFirst().removeCustomData('activePanel');if(e=e&&this._.returnFocus)CKEDITOR.env.webkit&&e.type&&e.getWindow().$.focus(),e.focus();delete this._.lastFocused;this._.showBlockParams=null;this._.editor.fire('panelHide',this)}},allowBlur:function(e){var t=this._.panel;void 0!==e&&(t.allowBlur=e);return t.allowBlur},showAsChild:function(e,t,n,i,o,a){if(this._.activeChild!=e||e._.panel._.offsetParentId!=n.getId())this.hideChild(),e.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=e,this._.focused=!1,e.showBlock(t,n,i,o,a),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){e.element.getChild(0).$.style.cssText+=''},100)},hideChild:function(e){var t=this._.activeChild;t&&(delete t.onHide,delete this._.activeChild,t.hide(),e&&this.focus())}}});CKEDITOR.on('instanceDestroyed',function(){var n=CKEDITOR.tools.isEmpty(CKEDITOR.instances),i;for(i in e){var t=e[i];n?t.destroy():t.element.hide()};n&&(e={})})})();CKEDITOR.plugins.add('colorbutton',{requires:'panelbutton,floatpanel',init:function(e){function i(i,o,r,s){var l=new CKEDITOR.style(n['colorButton_'+o+'Style']),c=CKEDITOR.tools.getNextId()+'_colorBox';e.ui.add(i,CKEDITOR.UI_PANELBUTTON,{label:r,title:r,modes:{wysiwyg:1},editorFocus:0,toolbar:'colors,'+s,allowedContent:l,requiredContent:l,panel:{css:CKEDITOR.skin.getPath('editor'),attributes:{role:'listbox','aria-label':t.panelTitle}},onBlock:function(t,n){n.autoSize=!0;n.element.addClass('cke_colorblock');n.element.setHtml(a(t,o,c));n.element.getDocument().getBody().setStyle('overflow','hidden');CKEDITOR.ui.fire('ready',this);var i=n.keys,r='rtl'==e.lang.dir;i[r?37:39]='next';i[40]='next';i[9]='next';i[r?39:37]='prev';i[38]='prev';i[CKEDITOR.SHIFT+9]='prev';i[32]='click'},refresh:function(){e.activeFilter.check(l)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var t=e.getSelection(),t=t&&t.getStartElement(),t=e.elementPath(t),i;if(t){t=t.block||t.blockLimit||e.document.getBody();do i=t&&t.getComputedStyle('back'==o?'background-color':'color')||'transparent';while('back'==o&&'transparent'==i&&t&&(t=t.getParent()));i&&'transparent'!=i||(i='#ffffff');!1!==n.colorButton_enableAutomatic&&this._.panel._.iframe.getFrameDocument().getById(c).setStyle('background-color',i);return i}}})};function a(i,a,r){var s=[],h=n.colorButton_colors.split(','),m=e.plugins.colordialog&&!1!==n.colorButton_enableMore,d=h.length+(m?2:1),f=CKEDITOR.tools.addFunction(function(t,a){function r(e){this.removeListener('ok',r);this.removeListener('cancel',r);'ok'==e.name&&l(this.getContentElement('picker','selectedColor').getValue(),a)};var l=arguments.callee;if('?'==t)e.openDialog('colordialog',function(){this.on('ok',r);this.on('cancel',r)});else{e.focus();i.hide();e.fire('saveSnapshot');e.removeStyle(new CKEDITOR.style(n['colorButton_'+a+'Style'],{color:'inherit'}));if(t){var s=n['colorButton_'+a+'Style'];s.childRule='back'==a?function(e){return o(e)}:function(e){return!(e.is('a')||e.getElementsByTag('a').count())||o(e)};e.applyStyle(new CKEDITOR.style(s,{color:t}))};e.fire('saveSnapshot')}});!1!==n.colorButton_enableAutomatic&&s.push('\x3ca class\x3d"cke_colorauto" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',t.auto,'" onclick\x3d"CKEDITOR.tools.callFunction(',f,',null,\'',a,'\');return false;" href\x3d"javascript:void(\'',t.auto,'\')" role\x3d"option" aria-posinset\x3d"1" aria-setsize\x3d"',d,'"\x3e\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"cke_colorbox" id\x3d"',r,'"\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd colspan\x3d7 align\x3dcenter\x3e',t.auto,'\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/a\x3e');s.push('\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e');for(r=0;r<h.length;r++){0===r%8&&s.push('\x3c/tr\x3e\x3ctr\x3e');var l=h[r].split('/'),c=l[0],u=l[1]||c;l[1]||(c='#'+c.replace(/^(.)(.)(.)$/,'$1$1$2$2$3$3'));l=e.lang.colorbutton.colors[u]||u;s.push('\x3ctd\x3e\x3ca class\x3d"cke_colorbox" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',l,'" onclick\x3d"CKEDITOR.tools.callFunction(',f,',\'',c,'\',\'',a,'\'); return false;" href\x3d"javascript:void(\'',l,'\')" role\x3d"option" aria-posinset\x3d"',r+2,'" aria-setsize\x3d"',d,'"\x3e\x3cspan class\x3d"cke_colorbox" style\x3d"background-color:#',u,'"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/td\x3e')};m&&s.push('\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d8 align\x3dcenter\x3e\x3ca class\x3d"cke_colormore" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',t.more,'" onclick\x3d"CKEDITOR.tools.callFunction(',f,',\'?\',\'',a,'\');return false;" href\x3d"javascript:void(\'',t.more,'\')"',' role\x3d"option" aria-posinset\x3d"',d,'" aria-setsize\x3d"',d,'"\x3e',t.more,'\x3c/a\x3e\x3c/td\x3e');s.push('\x3c/tr\x3e\x3c/table\x3e');return s.join('')};function o(e){return'false'==e.getAttribute('contentEditable')||e.getAttribute('data-nostyle')};var n=e.config,t=e.lang.colorbutton;CKEDITOR.env.hc||(i('TextColor','fore',t.textColorTitle,10),i('BGColor','back',t.bgColorTitle,20))}});CKEDITOR.config.colorButton_colors='000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF';CKEDITOR.config.colorButton_foreStyle={element:'span',styles:{color:'#(color)'},overrides:[{element:'font',attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:'span',styles:{'background-color':'#(color)'}};CKEDITOR.plugins.colordialog={requires:'dialog',init:function(e){var t=new CKEDITOR.dialogCommand('colordialog');t.editorFocus=!1;e.addCommand('colordialog',t);CKEDITOR.dialog.add('colordialog',this.path+'dialogs/colordialog.js');e.getColorFromDialog=function(t,n){var i=function(e){this.removeListener('ok',i);this.removeListener('cancel',i);e='ok'==e.name?this.getValueOf('picker','selectedColor'):null;t.call(n,e)},o=function(e){e.on('ok',i);e.on('cancel',i)};e.execCommand('colordialog');if(e._.storedDialogs&&e._.storedDialogs.colordialog)o(e._.storedDialogs.colordialog);else CKEDITOR.on('dialogDefinition',function(e){if('colordialog'==e.data.name){var t=e.data.definition;e.removeListener();t.onLoad=CKEDITOR.tools.override(t.onLoad,function(e){return function(){o(this);t.onLoad=e;'function'==typeof e&&e.call(this)}})}})}}};CKEDITOR.plugins.add('colordialog',CKEDITOR.plugins.colordialog);(function(){CKEDITOR.plugins.add('templates',{requires:'dialog',init:function(e){CKEDITOR.dialog.add('templates',CKEDITOR.getUrl(this.path+'dialogs/templates.js'));e.addCommand('templates',new CKEDITOR.dialogCommand('templates'));e.ui.addButton&&e.ui.addButton('Templates',{label:e.lang.templates.button,command:'templates',toolbar:'doctools,10'})}});var e={},t={};CKEDITOR.addTemplates=function(t,n){e[t]=n};CKEDITOR.getTemplates=function(t){return e[t]};CKEDITOR.loadTemplates=function(e,n){for(var o=[],i=0,a=e.length;i<a;i++)t[e[i]]||(o.push(e[i]),t[e[i]]=1);o.length?CKEDITOR.scriptLoader.load(o,n):setTimeout(n,0)}})();CKEDITOR.config.templates_files=[CKEDITOR.getUrl('plugins/templates/templates/default.js')];CKEDITOR.config.templates_replaceContent=!0;CKEDITOR.plugins.add('menu',{requires:'floatpanel',beforeInit:function(e){for(var o=e.config.menu_groups.split(','),n=e._.menuGroups={},i=e._.menuItems={},t=0;t<o.length;t++)n[o[t]]=t+1;e.addMenuGroup=function(e,t){n[e]=t||100};e.addMenuItem=function(e,t){n[t.group]&&(i[e]=new CKEDITOR.menuItem(this,e,t))};e.addMenuItems=function(e){for(var t in e)this.addMenuItem(t,e[t])};e.getMenuItem=function(e){return i[e]};e.removeMenuItem=function(e){delete i[e]}}});(function(){function i(e){e.sort(function(e,t){return e.group<t.group?-1:e.group>t.group?1:e.order<t.order?-1:e.order>t.order?1:0})};var e='\x3cspan class\x3d"cke_menuitem"\x3e\x3ca id\x3d"{id}" class\x3d"cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href\x3d"{href}" title\x3d"{title}" tabindex\x3d"-1"_cke_focus\x3d1 hidefocus\x3d"true" role\x3d"{role}" aria-haspopup\x3d"{hasPopup}" aria-disabled\x3d"{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(e+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var e=e+(' onmouseover\x3d"CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout\x3d"CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':'onclick')+'\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;"\x3e'),t=CKEDITOR.addTemplate('menuItem',e+'\x3cspan class\x3d"cke_menubutton_inner"\x3e\x3cspan class\x3d"cke_menubutton_icon"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{iconStyle}"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"cke_menubutton_label"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e'),n=CKEDITOR.addTemplate('menuArrow','\x3cspan class\x3d"cke_menuarrow"\x3e\x3cspan\x3e{label}\x3c/span\x3e\x3c/span\x3e');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(e,t){t=this._.definition=t||{};this.id=CKEDITOR.tools.getNextId();this.editor=e;this.items=[];this._.listeners=[];this._.level=t.level||1;var n=CKEDITOR.tools.extend({},t.panel,{css:[CKEDITOR.skin.getPath('editor')],level:this._.level-1,block:{}}),i=n.block.attributes=n.attributes||{};!i.role&&(i.role='menu');this._.panelDefinition=n},_:{onShow:function(){var i=this.editor.getSelection(),r=i&&i.getStartElement(),s=this.editor.elementPath(),a=this._.listeners;this.removeAll();for(var n=0;n<a.length;n++){var t=a[n](r,i,s);if(t)for(var o in t){var e=this.editor.getMenuItem(o);!e||e.command&&!this.editor.getCommand(e.command).state||(e.state=t[o],this.add(e))}}},onClick:function(e){this.hide();if(e.onClick)e.onClick();else e.command&&this.editor.execCommand(e.command)},onEscape:function(e){var t=this.parent;t?t._.panel.hideChild(1):27==e&&this.hide(1);return!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(e){var t=this._.subMenu,n=this.items[e];if(n=n.getItems&&n.getItems()){t?t.removeAll():(t=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),t.parent=this,t._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var o in n){var i=this.editor.getMenuItem(o);i&&(i.state=n[o],t.add(i))};var a=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(e));setTimeout(function(){t.show(a,2)},0)}
else this._.panel.hideChild(1)}},proto:{add:function(e){e.order||(e.order=this.items.length);this.items.push(e)},removeAll:function(){this.items=[]},show:function(e,t,n,o){if(!this.parent&&(this._.onShow(),!this.items.length))return;t=t||('rtl'==this.editor.lang.dir?2:1);var d=this.items,l=this.editor,r=this._.panel,s=this._.element;if(!r){r=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);r.onEscape=CKEDITOR.tools.bind(function(e){if(!1===this._.onEscape(e))return!1},this);r.onShow=function(){r._.panel.getHolderElement().getParent().addClass('cke').addClass('cke_reset_all')};r.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);s=r.addBlock(this.id,this._.panelDefinition.block);s.autoSize=!0;var a=s.keys;a[40]='next';a[9]='next';a[38]='prev';a[CKEDITOR.SHIFT+9]='prev';a['rtl'==l.lang.dir?37:39]=CKEDITOR.env.ie?'mouseup':'click';a[32]=CKEDITOR.env.ie?'mouseup':'click';CKEDITOR.env.ie&&(a[13]='mouseup');s=this._.element=s.element;a=s.getDocument();a.getBody().setStyle('overflow','hidden');a.getElementsByTag('html').getItem(0).setStyle('overflow','hidden');this._.itemOverFn=CKEDITOR.tools.addFunction(function(e){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,l.config.menu_subMenuDelay||400,this,[e])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this);this._.itemClickFn=CKEDITOR.tools.addFunction(function(e){var t=this.items[e];if(t.state==CKEDITOR.TRISTATE_DISABLED)this.hide(1);else if(t.getItems)this._.showSubMenu(e);else this._.onClick(t)},this)};i(d);for(var a=l.elementPath(),a=['\x3cdiv class\x3d"cke_menu'+(a&&a.direction()!=l.lang.dir?' cke_mixed_dir_content':'')+'" role\x3d"presentation"\x3e'],h=d.length,f=h&&d[0].group,c=0;c<h;c++){var u=d[c];f!=u.group&&(a.push('\x3cdiv class\x3d"cke_menuseparator" role\x3d"separator"\x3e\x3c/div\x3e'),f=u.group);u.render(this,c,a)};a.push('\x3c/div\x3e');s.setHtml(a.join(''));CKEDITOR.ui.fire('ready',this);this.parent?this.parent._.panel.showAsChild(r,this.id,e,t,n,o):r.showBlock(this.id,e,t,n,o);l.fire('menuShow',[r])},addListener:function(e){this._.listeners.push(e)},hide:function(e){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(e)}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(e,t,n){CKEDITOR.tools.extend(this,n,{order:0,className:'cke_menubutton__'+t});this.group=e._.menuGroups[this.group];this.editor=e;this.name=t},proto:{render:function(e,i,o){var d=e.id+String(i),r='undefined'==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,l='',u=r==CKEDITOR.TRISTATE_ON?'on':r==CKEDITOR.TRISTATE_DISABLED?'disabled':'off';this.role in{menuitemcheckbox:1,menuitemradio:1}&&(l=' aria-checked\x3d"'+(r==CKEDITOR.TRISTATE_ON?'true':'false')+'"');var s=this.getItems,c='\x26#'+('rtl'==this.editor.lang.dir?'9668':'9658')+';',a=this.name;this.icon&&!/\./.test(this.icon)&&(a=this.icon);e={id:d,name:this.name,iconName:a,label:this.label,cls:this.className||'',state:u,hasPopup:s?'true':'false',disabled:r==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:'javascript:void(\''+(this.label||'').replace('\'')+'\')',hoverFn:e._.itemOverFn,moveOutFn:e._.itemOutFn,clickFn:e._.itemClickFn,index:i,iconStyle:CKEDITOR.skin.getIconStyle(a,'rtl'==this.editor.lang.dir,a==this.icon?null:this.icon,this.iconOffset),arrowHtml:s?n.output({label:c}):'',role:this.role?this.role:'menuitem',ariaChecked:l};t.output(e,o)}}})})();CKEDITOR.config.menu_groups='clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div';CKEDITOR.plugins.add('contextmenu',{requires:'menu',onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(e){this.base.call(this,e,{panel:{className:'cke_menu_panel',attributes:{'aria-label':e.lang.contextmenu.options}}})},proto:{addTarget:function(e,t){e.on('contextmenu',function(e){e=e.data;var o=CKEDITOR.env.webkit?n:CKEDITOR.env.mac?e.$.metaKey:e.$.ctrlKey;if(!t||!o){e.preventDefault();if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var o=this.editor,i=(new CKEDITOR.dom.elementPath(e.getTarget(),o.editable())).contains(function(e){return e.hasAttribute('contenteditable')},!0);i&&'false'==i.getAttribute('contenteditable')&&o.getSelection().fake(i)};var i=e.getTarget().getDocument(),a=e.getTarget().getDocument().getDocumentElement(),o=!i.equals(CKEDITOR.document),i=i.getWindow().getScrollPosition(),r=o?e.$.clientX:e.$.pageX||i.x+e.$.clientX,s=o?e.$.clientY:e.$.pageY||i.y+e.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(a,null,r,s)},CKEDITOR.env.ie?200:0,this)}},this);if(CKEDITOR.env.webkit){var n,i=function(){n=0};e.on('keydown',function(e){n=CKEDITOR.env.mac?e.data.$.metaKey:e.data.$.ctrlKey});e.on('keyup',i);e.on('contextmenu',i)}},open:function(e,t,n,i){this.editor.focus();e=e||CKEDITOR.document.getDocumentElement();this.editor.selectionChange(1);this.show(e,t,n,i)}}})},beforeInit:function(e){var t=e.contextMenu=new CKEDITOR.plugins.contextMenu(e);e.on('contentDom',function(){t.addTarget(e.editable(),!1!==e.config.browserContextMenuOnCtrl)});e.addCommand('contextMenu',{exec:function(){e.contextMenu.open(e.document.getBody())}});e.setKeystroke(CKEDITOR.SHIFT+121,'contextMenu');e.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,'contextMenu')}});(function(){CKEDITOR.plugins.add('div',{requires:'dialog',init:function(e){if(!e.blockless){var t=e.lang.div,n='div(*)';CKEDITOR.dialog.isTabEnabled(e,'editdiv','advanced')&&(n+=';div[dir,id,lang,title]{*}');e.addCommand('creatediv',new CKEDITOR.dialogCommand('creatediv',{allowedContent:n,requiredContent:'div',contextSensitive:!0,refresh:function(e,t){this.setState('div'in(e.config.div_wrapTable?t.root:t.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}}));e.addCommand('editdiv',new CKEDITOR.dialogCommand('editdiv',{requiredContent:'div'}));e.addCommand('removediv',{requiredContent:'div',exec:function(e){function r(t){(t=CKEDITOR.plugins.div.getSurroundDiv(e,t))&&!t.data('cke-div-added')&&(o.push(t),t.data('cke-div-added'))};for(var i=e.getSelection(),a=i&&i.getRanges(),n,s=i.createBookmarks(),o=[],t=0;t<a.length;t++)n=a[t],n.collapsed?r(i.getStartElement()):(n=new CKEDITOR.dom.walker(n),n.evaluator=r,n.lastForward());for(t=0;t<o.length;t++)o[t].remove(!0);i.selectBookmarks(s)}});e.ui.addButton&&e.ui.addButton('CreateDiv',{label:t.toolbar,command:'creatediv',toolbar:'blocks,50'});e.addMenuItems&&(e.addMenuItems({editdiv:{label:t.edit,command:'editdiv',group:'div',order:1},removediv:{label:t.remove,command:'removediv',group:'div',order:5}}),e.contextMenu&&e.contextMenu.addListener(function(t){return!t||t.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(e)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}));CKEDITOR.dialog.add('creatediv',this.path+'dialogs/div.js');CKEDITOR.dialog.add('editdiv',this.path+'dialogs/div.js')}}});CKEDITOR.plugins.div={getSurroundDiv:function(e,t){var n=e.elementPath(t);return e.elementPath(n.blockLimit).contains(function(e){return e.is('div')&&!e.isReadOnly()},1)}}})();CKEDITOR.plugins.add('resize',{init:function(e){function r(i){var r=n.width,s=n.height,d=r+(i.data.$.screenX-l.x)*('rtl'==a?-1:1);i=s+(i.data.$.screenY-l.y);o&&(r=Math.max(t.resize_minWidth,Math.min(d,t.resize_maxWidth)));c&&(s=Math.max(t.resize_minHeight,Math.min(i,t.resize_maxHeight)));e.resize(o?r:null,s)};function s(){CKEDITOR.document.removeListener('mousemove',r);CKEDITOR.document.removeListener('mouseup',s);e.document&&(e.document.removeListener('mousemove',r),e.document.removeListener('mouseup',s))};var t=e.config,u=e.ui.spaceId('resizer'),a=e.element?e.element.getDirection(1):'ltr';!t.resize_dir&&(t.resize_dir='vertical');void 0===t.resize_maxWidth&&(t.resize_maxWidth=3E3);void 0===t.resize_maxHeight&&(t.resize_maxHeight=3E3);void 0===t.resize_minWidth&&(t.resize_minWidth=750);void 0===t.resize_minHeight&&(t.resize_minHeight=250);if(!1!==t.resize_enabled){var i=null,l,n,o=('both'==t.resize_dir||'horizontal'==t.resize_dir)&&t.resize_minWidth!=t.resize_maxWidth,c=('both'==t.resize_dir||'vertical'==t.resize_dir)&&t.resize_minHeight!=t.resize_maxHeight,d=CKEDITOR.tools.addFunction(function(o){i||(i=e.getResizable());n={width:i.$.offsetWidth||0,height:i.$.offsetHeight||0};l={x:o.screenX,y:o.screenY};t.resize_minWidth>n.width&&(t.resize_minWidth=n.width);t.resize_minHeight>n.height&&(t.resize_minHeight=n.height);CKEDITOR.document.on('mousemove',r);CKEDITOR.document.on('mouseup',s);e.document&&(e.document.on('mousemove',r),e.document.on('mouseup',s));o.preventDefault&&o.preventDefault()});e.on('destroy',function(){CKEDITOR.tools.removeFunction(d)});e.on('uiSpace',function(t){if('bottom'==t.data.space){var n='';o&&!c&&(n=' cke_resizer_horizontal');!o&&c&&(n=' cke_resizer_vertical');var i='\x3cspan id\x3d"'+u+'" class\x3d"cke_resizer'+n+' cke_resizer_'+a+'" title\x3d"'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+d+', event)"\x3e'+('ltr'==a?'◢':'◣')+'\x3c/span\x3e';'ltr'==a&&'ltr'==n?t.data.html+=i:t.data.html=i+t.data.html}},e,null,100);e.on('maximize',function(t){e.ui.space('resizer')[t.data==CKEDITOR.TRISTATE_ON?'hide':'show']()})}}});(function(){function i(e){function a(){for(var d=r(),a=CKEDITOR.tools.clone(e.config.toolbarGroups)||t(e),s=0;s<a.length;s++){var n=a[s];if('/'!=n){'string'==typeof n&&(n=a[s]={name:n});var i,c=n.groups;if(c)for(var l=0;l<c.length;l++)i=c[l],(i=d[i])&&o(n,i);(i=d[n.name])&&o(n,i)}};return a};function r(){var n={},o,t,i;for(o in e.ui.items)t=e.ui.items[o],i=t.toolbar||'others',i=i.split(','),t=i[0],i=parseInt(i[1]||-1,10),n[t]||(n[t]=[]),n[t].push({name:o,order:i});for(t in n)n[t]=n[t].sort(function(e,t){return e.order==t.order?0:0>t.order?-1:0>e.order?1:e.order<t.order?-1:1});return n};function o(t,i){if(i.length){t.items?t.items.push(e.ui.create('-')):t.items=[];for(var o;o=i.shift();)o='string'==typeof o?o:o.name,n&&-1!=CKEDITOR.tools.indexOf(n,o)||(o=e.ui.create(o))&&e.addFeature(o)&&t.items.push(o)}};function s(e){var i=[],a,t,n;for(a=0;a<e.length;++a)t=e[a],n={},'/'==t?i.push(t):CKEDITOR.tools.isArray(t)?(o(n,CKEDITOR.tools.clone(t)),i.push(n)):t.items&&(o(n,CKEDITOR.tools.clone(t.items)),n.name=t.name,i.push(n));return i};var n=e.config.removeButtons,n=n&&n.split(','),i=e.config.toolbar;'string'==typeof i&&(i=e.config['toolbar_'+i]);return e.toolbar=i?s(i):a()};function t(e){return e._.toolbarGroups||(e._.toolbarGroups=[{name:'document',groups:['mode','document','doctools']},{name:'clipboard',groups:['clipboard','undo']},{name:'editing',groups:['find','selection','spellchecker']},{name:'forms'},'/',{name:'basicstyles',groups:['basicstyles','cleanup']},{name:'paragraph',groups:['list','indent','blocks','align','bidi']},{name:'links'},{name:'insert'},'/',{name:'styles'},{name:'colors'},{name:'tools'},{name:'others'},{name:'about'}])};var e=function(){this.toolbars=[];this.focusCommandExecuted=!1};e.prototype.focus=function(){for(var i=0,t;t=this.toolbars[i++];)for(var n=0,e;e=t.items[n++];)if(e.focus){e.focus();return}};var n={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){e.toolbox.focus()},100):e.toolbox.focus())}};CKEDITOR.plugins.add('toolbar',{requires:'button',init:function(t){var o,a=function(e,n){var i,r='rtl'==t.lang.dir,s=t.config.toolbarGroupCycling,l=r?37:39,r=r?39:37,s=void 0===s||s;switch(n){case 9:case CKEDITOR.SHIFT+9:for(;!i||!i.items.length;)if(i=9==n?(i?i.next:e.toolbar.next)||t.toolbox.toolbars[0]:(i?i.previous:e.toolbar.previous)||t.toolbox.toolbars[t.toolbox.toolbars.length-1],i.items.length)for(e=i.items[o?i.items.length-1:0];e&&!e.focus;)(e=o?e.previous:e.next)||(i=0);e&&e.focus();return!1;case l:i=e;do i=i.next,!i&&s&&(i=e.toolbar.items[0]);while(i&&!i.focus);i?i.focus():a(e,9);return!1;case 40:return e.button&&e.button.hasArrow?(t.once('panelShow',function(e){e.data._.panel._.currentBlock.onKeyDown(40)}),e.execute()):a(e,40==n?l:r),!1;case r:case 38:i=e;do i=i.previous,!i&&s&&(i=e.toolbar.items[e.toolbar.items.length-1]);while(i&&!i.focus);i?i.focus():(o=1,a(e,CKEDITOR.SHIFT+9),o=0);return!1;case 27:return t.focus(),!1;case 13:case 32:return e.execute(),!1};return!0};t.on('uiSpace',function(n){if(n.data.space==t.config.toolbarLocation){n.removeListener();t.toolbox=new e;var c=CKEDITOR.tools.getNextId(),o=['\x3cspan id\x3d"',c,'" class\x3d"cke_voice_label"\x3e',t.lang.toolbar.toolbars,'\x3c/span\x3e','\x3cspan id\x3d"'+t.ui.spaceId('toolbox')+'" class\x3d"cke_toolbox" role\x3d"group" aria-labelledby\x3d"',c,'" onmousedown\x3d"return false;"\x3e'],c=!1!==t.config.toolbarStartupExpanded,s,d;t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&o.push('\x3cspan class\x3d"cke_toolbox_main"'+(c?'\x3e':' style\x3d"display:none"\x3e'));for(var O=t.toolbox.toolbars,D=i(t),p=0;p<D.length;p++){var f,r=0,m,l=D[p],E;if(l)if(s&&(o.push('\x3c/span\x3e'),d=s=0),'/'===l)o.push('\x3cspan class\x3d"cke_toolbar_break"\x3e\x3c/span\x3e');else{E=l.items||l;for(var g=0;g<E.length;g++){var h=E[g],I;if(h){var C=function(e){e=e.render(t,o);u=r.items.push(e)-1;0<u&&(e.previous=r.items[u-1],e.previous.next=e);e.toolbar=r;e.onkey=a;e.onfocus=function(){t.toolbox.focusCommandExecuted||t.focus()}};if(h.type==CKEDITOR.UI_SEPARATOR)d=s&&h;else{I=!1!==h.canGroup;if(!r){f=CKEDITOR.tools.getNextId();r={id:f,items:[]};m=l.name&&(t.lang.toolbar.toolbarGroups[l.name]||l.name);o.push('\x3cspan id\x3d"',f,'" class\x3d"cke_toolbar"',m?' aria-labelledby\x3d"'+f+'_label"':'',' role\x3d"toolbar"\x3e');m&&o.push('\x3cspan id\x3d"',f,'_label" class\x3d"cke_voice_label"\x3e',m,'\x3c/span\x3e');o.push('\x3cspan class\x3d"cke_toolbar_start"\x3e\x3c/span\x3e');var u=O.push(r)-1;0<u&&(r.previous=O[u-1],r.previous.next=r)};I?s||(o.push('\x3cspan class\x3d"cke_toolgroup" role\x3d"presentation"\x3e'),s=1):s&&(o.push('\x3c/span\x3e'),s=0);d&&(C(d),d=0);C(h)}}};s&&(o.push('\x3c/span\x3e'),d=s=0);r&&o.push('\x3cspan class\x3d"cke_toolbar_end"\x3e\x3c/span\x3e\x3c/span\x3e')}};t.config.toolbarCanCollapse&&o.push('\x3c/span\x3e');if(t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var T=CKEDITOR.tools.addFunction(function(){t.execCommand('toolbarCollapse')});t.on('destroy',function(){CKEDITOR.tools.removeFunction(T)});t.addCommand('toolbarCollapse',{readOnly:1,exec:function(e){var t=e.ui.space('toolbar_collapser'),n=t.getPrevious(),i=e.ui.space('contents'),o=n.getParent(),r=parseInt(i.$.style.height,10),s=o.$.offsetHeight,a=t.hasClass('cke_toolbox_collapser_min');a?(n.show(),t.removeClass('cke_toolbox_collapser_min'),t.setAttribute('title',e.lang.toolbar.toolbarCollapse)):(n.hide(),t.addClass('cke_toolbox_collapser_min'),t.setAttribute('title',e.lang.toolbar.toolbarExpand));t.getFirst().setText(a?'▲':'◀');i.setStyle('height',r-(o.$.offsetHeight-s)+'px');e.fire('resize',{outerHeight:e.container.$.offsetHeight,contentsHeight:i.$.offsetHeight,outerWidth:e.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}});t.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),'toolbarCollapse');o.push('\x3ca title\x3d"'+(c?t.lang.toolbar.toolbarCollapse:t.lang.toolbar.toolbarExpand)+'" id\x3d"'+t.ui.spaceId('toolbar_collapser')+'" tabIndex\x3d"-1" class\x3d"cke_toolbox_collapser');c||o.push(' cke_toolbox_collapser_min');o.push('" onclick\x3d"CKEDITOR.tools.callFunction('+T+')"\x3e','\x3cspan class\x3d"cke_arrow"\x3e\x26#9650;\x3c/span\x3e','\x3c/a\x3e')};o.push('\x3c/span\x3e');n.data.html+=o.join('')}});t.on('destroy',function(){if(this.toolbox){var n,i=0,t,o,e;for(n=this.toolbox.toolbars;i<n.length;i++)for(o=n[i].items,t=0;t<o.length;t++)e=o[t],e.clickFn&&CKEDITOR.tools.removeFunction(e.clickFn),e.keyDownFn&&CKEDITOR.tools.removeFunction(e.keyDownFn)}});t.on('uiReady',function(){var e=t.ui.space('toolbox');e&&t.focusManager.add(e,1)});t.addCommand('toolbarFocus',n);t.setKeystroke(CKEDITOR.ALT+121,'toolbarFocus');t.ui.add('-',CKEDITOR.UI_SEPARATOR,{});t.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(e,t){t.push('\x3cspan class\x3d"cke_toolbar_separator" role\x3d"separator"\x3e\x3c/span\x3e');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(e,n,i){var o=t(this.editor),a=0===n,r={name:e};if(i){if(i=CKEDITOR.tools.search(o,function(e){return e.name==i})){!i.groups&&(i.groups=[]);if(n&&(n=CKEDITOR.tools.indexOf(i.groups,n),0<=n)){i.groups.splice(n+1,0,e);return};a?i.groups.splice(0,0,e):i.groups.push(e);return};n=null};n&&(n=CKEDITOR.tools.indexOf(o,function(e){return e.name==n}));a?o.splice(0,0,e):'number'==typeof n?o.splice(n+1,0,r):o.push(e)}})();CKEDITOR.UI_SEPARATOR='separator';CKEDITOR.config.toolbarLocation='top';(function(){function i(e,i){function s(t){t=o.list[t];var n;t.equals(e.editable())||'true'==t.getAttribute('contenteditable')?(n=e.createRange(),n.selectNodeContents(t),n=n.select()):(n=e.getSelection(),n.selectElement(t));CKEDITOR.env.ie&&e.fire('selectionChange',{selection:n,path:new CKEDITOR.dom.elementPath(t)});e.focus()};function l(){a&&a.setHtml('\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');delete o.list};var r=e.ui.spaceId('path'),a,o=e._.elementsPath,u=o.idBase;i.html+='\x3cspan id\x3d"'+r+'_label" class\x3d"cke_voice_label"\x3e'+e.lang.elementspath.eleLabel+'\x3c/span\x3e\x3cspan id\x3d"'+r+'" class\x3d"cke_path" role\x3d"group" aria-labelledby\x3d"'+r+'_label"\x3e\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e\x3c/span\x3e';e.on('uiReady',function(){var t=e.ui.space('path');t&&e.focusManager.add(t,1)});o.onClick=s;var c=CKEDITOR.tools.addFunction(s),d=CKEDITOR.tools.addFunction(function(t,n){var a=o.idBase,i;n=new CKEDITOR.dom.event(n);i='rtl'==e.lang.dir;switch(n.getKeystroke()){case i?39:37:case 9:return(i=CKEDITOR.document.getById(a+(t+1)))||(i=CKEDITOR.document.getById(a+'0')),i.focus(),!1;case i?37:39:case CKEDITOR.SHIFT+9:return(i=CKEDITOR.document.getById(a+(t-1)))||(i=CKEDITOR.document.getById(a+(o.list.length-1))),i.focus(),!1;case 27:return e.focus(),!1;case 13:case 32:return s(t),!1};return!0});e.on('selectionChange',function(){for(var p=[],h=o.list=[],l=[],s=o.filters,f=!0,T=e.elementPath().elements,n,C=T.length;C--;){var i=T[C],g=0;n=i.data('cke-display-name')?i.data('cke-display-name'):i.data('cke-real-element-type')?i.data('cke-real-element-type'):i.getName();(f=i.hasAttribute('contenteditable')?'true'==i.getAttribute('contenteditable'):f)||i.hasAttribute('contenteditable')||(g=1);for(var m=0;m<s.length;m++){var E=s[m](i,n);if(!1===E){g=1;break};n=E||n};g||(h.unshift(i),l.unshift(n))};h=h.length;for(s=0;s<h;s++)n=l[s],f=e.lang.elementspath.eleTitle.replace(/%1/,n),n=t.output({id:u+s,label:f,text:n,jsTitle:'javascript:void(\''+n+'\')',index:s,keyDownFn:d,clickFn:c}),p.unshift(n);a||(a=CKEDITOR.document.getById(r));l=a;l.setHtml(p.join('')+'\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');e.fire('elementsPathUpdate',{space:l})});e.on('readOnly',l);e.on('contentDomUnload',l);e.addCommand('elementsPathFocus',n.toolbarFocus);e.setKeystroke(CKEDITOR.ALT+122,'elementsPathFocus')};var n={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(e){(e=CKEDITOR.document.getById(e._.elementsPath.idBase+'0'))&&e.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},e='';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(e+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var t=CKEDITOR.addTemplate('pathItem','\x3ca id\x3d"{id}" href\x3d"{jsTitle}" tabindex\x3d"-1" class\x3d"cke_path_item" title\x3d"{label}"'+e+' hidefocus\x3d"true"  onkeydown\x3d"return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role\x3d"button" aria-label\x3d"{label}"\x3e{text}\x3c/a\x3e');CKEDITOR.plugins.add('elementspath',{init:function(e){e._.elementsPath={idBase:'cke_elementspath_'+CKEDITOR.tools.getNextNumber()+'_',filters:[]};e.on('uiSpace',function(t){'bottom'==t.data.space&&i(e,t.data)})}})})();(function(){function o(e,i,o){o=e.config.forceEnterMode||o;'wysiwyg'==e.mode&&(i||(i=e.activeEnterMode),e.elementPath().isContextFor('p')||(i=CKEDITOR.ENTER_BR,o=1),e.fire('saveSnapshot'),i==CKEDITOR.ENTER_BR?t(e,i,null,o):n(e,i,null,o),e.fire('saveSnapshot'))};function a(e){e=e.getSelection().getRanges(!0);for(var t=e.length-1;0<t;t--)e[t].deleteContents();return e[0]};function l(e){var t=e.startContainer.getAscendant(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&'true'==e.getAttribute('contenteditable')},!0);if(e.root.equals(t))return e;t=new CKEDITOR.dom.range(t);t.moveToRange(e);return t};CKEDITOR.plugins.add('enterkey',{init:function(e){e.addCommand('enter',{modes:{wysiwyg:1},editorFocus:!1,exec:function(e){o(e)}});e.addCommand('shiftEnter',{modes:{wysiwyg:1},editorFocus:!1,exec:function(e){o(e,e.activeShiftEnterMode,1)}});e.setKeystroke([[13,'enter'],[CKEDITOR.SHIFT+13,'shiftEnter']])}});var r=CKEDITOR.dom.walker.whitespaces(),s=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(e,n,o,c){if(o=o||a(e)){o=l(o);var f=o.document,m=o.checkStartOfBlock(),T=o.checkEndOfBlock(),p=e.elementPath(o.startContainer),d=p.block,g=n==CKEDITOR.ENTER_DIV?'div':'p',u;if(m&&T){if(d&&(d.is('li')||d.getParent().is('li'))){d.is('li')||(d=d.getParent());o=d.getParent();u=o.getParent();c=!d.hasPrevious();var E=!d.hasNext(),g=e.getSelection(),h=g.createBookmarks(),m=d.getDirection(1),T=d.getAttribute('class'),C=d.getAttribute('style'),I=u.getDirection(1)!=m;e=e.enterMode!=CKEDITOR.ENTER_BR||I||C||T;if(u.is('li'))c||E?(c&&E&&o.remove(),d[E?'insertAfter':'insertBefore'](u)):d.breakParent(u);else{if(e)if(p.block.is('li')?(u=f.createElement(n==CKEDITOR.ENTER_P?'p':'div'),I&&u.setAttribute('dir',m),C&&u.setAttribute('style',C),T&&u.setAttribute('class',T),d.moveChildren(u)):u=p.block,c||E)u[c?'insertBefore':'insertAfter'](o);else d.breakParent(o),u.insertAfter(o);else if(d.appendBogus(!0),c||E)for(;f=d[c?'getFirst':'getLast']();)f[c?'insertBefore':'insertAfter'](o);else for(d.breakParent(o);f=d.getLast();)f.insertAfter(o);d.remove()};g.selectBookmarks(h);return};if(d&&d.getParent().is('blockquote')){d.breakParent(d.getParent());d.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||d.getPrevious().remove();d.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||d.getNext().remove();o.moveToElementEditStart(d);o.select();return}}
else if(d&&d.is('pre')&&!T){t(e,n,o,c);return};if(m=o.splitBlock(g)){n=m.previousBlock;d=m.nextBlock;p=m.wasStartOfBlock;e=m.wasEndOfBlock;d?(h=d.getParent(),h.is('li')&&(d.breakParent(h),d.move(d.getNext(),1))):n&&(h=n.getParent())&&h.is('li')&&(n.breakParent(h),h=n.getNext(),o.moveToElementEditStart(h),n.move(n.getPrevious()));if(p||e){if(n){if(n.is('li')||!i.test(n.getName())&&!n.is('pre'))u=n.clone()}
else d&&(u=d.clone());u?c&&!u.is('li')&&u.renameNode(g):h&&h.is('li')?u=h:(u=f.createElement(g),n&&(E=n.getDirection())&&u.setAttribute('dir',E));if(f=m.elementPath)for(c=0,g=f.elements.length;c<g;c++){h=f.elements[c];if(h.equals(f.block)||h.equals(f.blockLimit))break;CKEDITOR.dtd.$removeEmpty[h.getName()]&&(h=h.clone(),u.moveChildren(h),u.append(h))};u.appendBogus();u.getParent()||o.insertNode(u);u.is('li')&&u.removeAttribute('value');!CKEDITOR.env.ie||!p||e&&n.getChildCount()||(o.moveToElementEditStart(e?n:u),o.select());o.moveToElementEditStart(p&&!e?d:u)}
else d.is('li')&&(u=o.clone(),u.selectNodeContents(d),u=new CKEDITOR.dom.walker(u),u.evaluator=function(e){return!(s(e)||r(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$inline&&!(e.getName()in CKEDITOR.dtd.$empty))},(h=u.next())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is('ul','ol')&&(CKEDITOR.env.needsBrFiller?f.createElement('br'):f.createText(' ')).insertBefore(h)),d&&o.moveToElementEditStart(d);o.select();o.scrollIntoView()}}},enterBr:function(e,t,o,r){if(o=o||a(e)){var s=o.document,c=o.checkEndOfBlock(),d=new CKEDITOR.dom.elementPath(e.getSelection().getStartElement()),l=d.block,u=l&&d.block.getName();r||'li'!=u?(!r&&c&&i.test(u)?(c=l.getDirection())?(s=s.createElement('div'),s.setAttribute('dir',c),s.insertAfter(l),o.setStart(s,0)):(s.createElement('br').insertAfter(l),CKEDITOR.env.gecko&&s.createText('').insertAfter(l),o.setStartAt(l.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(e='pre'==u&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?s.createText('\r'):s.createElement('br'),o.deleteContents(),o.insertNode(e),CKEDITOR.env.needsBrFiller?(s.createText('﻿').insertAfter(e),c&&(l||d.blockLimit).appendBogus(),e.getNext().$.nodeValue='',o.setStartAt(e.getNext(),CKEDITOR.POSITION_AFTER_START)):o.setStartAt(e,CKEDITOR.POSITION_AFTER_END)),o.collapse(!0),o.select(),o.scrollIntoView()):n(e,t,o,r)}}};var e=CKEDITOR.plugins.enterkey,t=e.enterBr,n=e.enterBlock,i=/^h[1-6]$/})();(function(){function e(e,t){var i={},a=[],s={nbsp:' ',shy:'­',gt:'\x3e',lt:'\x3c',amp:'\x26',apos:'\'',quot:'"'};e=e.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(e,n){var o=t?'\x26'+n+';':s[n];i[o]=t?s[n]:'\x26'+n+';';a.push(o);return''});if(!t&&e){e=e.split(',');var n=document.createElement('div'),o;n.innerHTML='\x26'+e.join(';\x26')+';';o=n.innerHTML;n=null;for(n=0;n<o.length;n++){var r=o.charAt(n);i[r]='\x26'+e[n]+';';a.push(r)}};i.regex=a.join(t?'|':'');return i};CKEDITOR.plugins.add('entities',{afterInit:function(t){function l(e){return r[e]};function c(e){return'force'!=n.entities_processNumerical&&a[e]?a[e]:'\x26#'+e.charCodeAt(0)+';'};var n=t.config;if(t=(t=t.dataProcessor)&&t.htmlFilter){var i=[];!1!==n.basicEntities&&i.push('nbsp,gt,lt,amp');n.entities&&(i.length&&i.push('quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro'),n.entities_latin&&i.push('Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml'),n.entities_greek&&i.push('Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv'),n.entities_additional&&i.push(n.entities_additional));var a=e(i.join(',')),o=a.regex?'['+a.regex+']':'a^';delete a.regex;n.entities&&n.entities_processNumerical&&(o='[^ -~]|'+o);var o=new RegExp(o,'g'),r=e('nbsp,gt,lt,amp,shy',!0),s=new RegExp(r.regex,'g');t.addRules({text:function(e){return e.replace(s,l).replace(o,c)}},{applyToAll:!0,excludeNestedEditable:!0})}}})})();CKEDITOR.config.basicEntities=!0;CKEDITOR.config.entities=!0;CKEDITOR.config.entities_latin=!0;CKEDITOR.config.entities_greek=!0;CKEDITOR.config.entities_additional='#39';CKEDITOR.plugins.add('popup');CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,t,n,i){t=t||'80%';n=n||'70%';'string'==typeof t&&1<t.length&&'%'==t.substr(t.length-1,1)&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10));'string'==typeof n&&1<n.length&&'%'==n.substr(n.length-1,1)&&(n=parseInt(window.screen.height*parseInt(n,10)/100,10));640>t&&(t=640);420>n&&(n=420);var r=parseInt((window.screen.height-n)/2,10),s=parseInt((window.screen.width-t)/2,10);i=(i||'location\x3dno,menubar\x3dno,toolbar\x3dno,dependent\x3dyes,minimizable\x3dno,modal\x3dyes,alwaysRaised\x3dyes,resizable\x3dyes,scrollbars\x3dyes')+',width\x3d'+t+',height\x3d'+n+',top\x3d'+r+',left\x3d'+s;var a=window.open('',null,i,!0);if(!a)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(' chrome/')&&(a.moveTo(s,r),a.resizeTo(t,n)),a.focus(),a.location.href=e}catch(o){window.open(e,null,i,!0)};return!0}});(function(){function t(e,t){var i=[];if(t)for(var n in t)i.push(n+'\x3d'+encodeURIComponent(t[n]));else return e;return e+(-1!=e.indexOf('?')?'\x26':'?')+i.join('\x26')};function e(e){e+='';return e.charAt(0).toUpperCase()+e.substr(1)};function o(){var o=this.getDialog(),n=o.getParentEditor();n._.filebrowserSe=this;var a=n.config['filebrowser'+e(o.getName())+'WindowWidth']||n.config.filebrowserWindowWidth||'80%',o=n.config['filebrowser'+e(o.getName())+'WindowHeight']||n.config.filebrowserWindowHeight||'70%',i=this.filebrowser.params||{};i.CKEditor=n.name;i.CKEditorFuncNum=n._.filebrowserFn;i.langCode||(i.langCode=n.langCode);i=t(this.filebrowser.url,i);n.popup(i,a,o,n.config.filebrowserWindowFeatures||n.config.fileBrowserWindowFeatures)};function a(){var e=this.getDialog();e.getParentEditor()._.filebrowserSe=this;return e.getContentElement(this['for'][0],this['for'][1]).getInputElement().$.value&&e.getContentElement(this['for'][0],this['for'][1]).getAction()?!0:!1};function r(e,n,i){var o=i.params||{};o.CKEditor=e.name;o.CKEditorFuncNum=e._.filebrowserFn;o.langCode||(o.langCode=e.langCode);n.action=t(i.url,o);n.filebrowser=i};function n(t,i,s,l){if(l&&l.length)for(var c,h=l.length;h--;)if(c=l[h],'hbox'!=c.type&&'vbox'!=c.type&&'fieldset'!=c.type||n(t,i,s,c.children),c.filebrowser)if('string'==typeof c.filebrowser&&(c.filebrowser={action:'fileButton'==c.type?'QuickUpload':'Browse',target:c.filebrowser}),'Browse'==c.filebrowser.action){var d=c.filebrowser.url;void 0===d&&(d=t.config['filebrowser'+e(i)+'BrowseUrl'],void 0===d&&(d=t.config.filebrowserBrowseUrl));d&&(c.onClick=o,c.filebrowser.url=d,c.hidden=!1)}
else if('QuickUpload'==c.filebrowser.action&&c['for']&&(d=c.filebrowser.url,void 0===d&&(d=t.config['filebrowser'+e(i)+'UploadUrl'],void 0===d&&(d=t.config.filebrowserUploadUrl)),d)){var u=c.onClick;c.onClick=function(e){var t=e.sender;if(u&&!1===u.call(t,e))return!1;if(a.call(t,e)){e=t.getDialog().getContentElement(this['for'][0],this['for'][1]).getInputElement();if(t=new CKEDITOR.dom.element(e.$.form))(e=t.$.elements.ckCsrfToken)?e=new CKEDITOR.dom.element(e):(e=new CKEDITOR.dom.element('input'),e.setAttributes({name:'ckCsrfToken',type:'hidden'}),t.append(e)),e.setAttribute('value',CKEDITOR.tools.getCsrfToken());return!0};return!1};c.filebrowser.url=d;c.hidden=!1;r(t,s.getContents(c['for'][0]).get(c['for'][1]),c.filebrowser)}};function i(e,t,n){if(-1!==n.indexOf(';')){n=n.split(';');for(var o=0;o<n.length;o++)if(i(e,t,n[o]))return!0;return!1};return(e=e.getContents(t).get(n).filebrowser)&&e.url};function s(e,t){var i=this._.filebrowserSe.getDialog(),n=this._.filebrowserSe['for'],o=this._.filebrowserSe.filebrowser.onSelect;n&&i.getContentElement(n[0],n[1]).reset();if('function'!=typeof t||!1!==t.call(this._.filebrowserSe))if(!o||!1!==o.call(this._.filebrowserSe,e,t))if('string'==typeof t&&t&&alert(t),e&&(n=this._.filebrowserSe,i=n.getDialog(),n=n.filebrowser.target||null))if(n=n.split(':'),o=i.getContentElement(n[0],n[1]))o.setValue(e),i.selectPage(n[0])};CKEDITOR.plugins.add('filebrowser',{requires:'popup',init:function(e){e._.filebrowserFn=CKEDITOR.tools.addFunction(s,e);e.on('destroy',function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}});CKEDITOR.on('dialogDefinition',function(e){if(e.editor.plugins.filebrowser)for(var o=e.data.definition,t,a=0;a<o.contents.length;++a)if(t=o.contents[a])n(e.editor,e.data.name,o,t.elements),t.hidden&&t.filebrowser&&(t.hidden=!i(o,t.id,t.filebrowser))})})();CKEDITOR.plugins.add('find',{requires:'dialog',init:function(e){var t=e.addCommand('find',new CKEDITOR.dialogCommand('find'));t.canUndo=!1;t.readOnly=1;e.addCommand('replace',new CKEDITOR.dialogCommand('replace')).canUndo=!1;e.ui.addButton&&(e.ui.addButton('Find',{label:e.lang.find.find,command:'find',toolbar:'find,10'}),e.ui.addButton('Replace',{label:e.lang.find.replace,command:'replace',toolbar:'find,20'}));CKEDITOR.dialog.add('find',this.path+'dialogs/find.js');CKEDITOR.dialog.add('replace',this.path+'dialogs/find.js')}});CKEDITOR.config.find_highlight={element:'span',styles:{'background-color':'#004',color:'#fff'}};(function(){function t(e,t){var o=i.exec(e),n=i.exec(t);if(o){if(!o[2]&&'px'==n[2])return n[1];if('px'==o[2]&&!n[2])return n[1]+'px'};return t};var n=CKEDITOR.htmlParser.cssStyle,e=CKEDITOR.tools.cssLength,i=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,o={elements:{$:function(e){var i=e.attributes;if((i=(i=(i=i&&i['data-cke-realelement'])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(i)))&&i.children[0])&&e.attributes['data-cke-resizable']){var o=(new n(e)).rules;e=i.attributes;var a=o.width,o=o.height;a&&(e.width=t(e.width,a));o&&(e.height=t(e.height,o))};return i}}};CKEDITOR.plugins.add('fakeobjects',{init:function(e){e.filter.allow('img[!data-cke-realelement,src,alt,title](*){*}','fakeobjects')},afterInit:function(e){(e=(e=e.dataProcessor)&&e.htmlFilter)&&e.addRules(o,{applyToAll:!0})}});CKEDITOR.editor.prototype.createFakeElement=function(t,i,o,a){var r=this.lang.fakeobjects,r=r[o]||r.unknown;i={'class':i,'data-cke-realelement':encodeURIComponent(t.getOuterHtml()),'data-cke-real-node-type':t.type,alt:r,title:r,align:t.getAttribute('align')||''};CKEDITOR.env.hc||(i.src=CKEDITOR.tools.transparentImageData);o&&(i['data-cke-real-element-type']=o);a&&(i['data-cke-resizable']=a,o=new n,a=t.getAttribute('width'),t=t.getAttribute('height'),a&&(o.rules.width=e(a)),t&&(o.rules.height=e(t)),o.populate(i));return this.document.createElement('img',{attributes:i})};CKEDITOR.editor.prototype.createFakeParserElement=function(t,i,o,a){var r=this.lang.fakeobjects,r=r[o]||r.unknown,s;s=new CKEDITOR.htmlParser.basicWriter;t.writeHtml(s);s=s.getHtml();i={'class':i,'data-cke-realelement':encodeURIComponent(s),'data-cke-real-node-type':t.type,alt:r,title:r,align:t.attributes.align||''};CKEDITOR.env.hc||(i.src=CKEDITOR.tools.transparentImageData);o&&(i['data-cke-real-element-type']=o);a&&(i['data-cke-resizable']=a,a=t.attributes,t=new n,o=a.width,a=a.height,void 0!==o&&(t.rules.width=e(o)),void 0!==a&&(t.rules.height=e(a)),t.populate(i));return new CKEDITOR.htmlParser.element('img',i)};CKEDITOR.editor.prototype.restoreRealElement=function(e){if(e.data('cke-real-node-type')!=CKEDITOR.NODE_ELEMENT)return null;var n=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(e.data('cke-realelement')),this.document);if(e.data('cke-resizable')){var i=e.getStyle('width');e=e.getStyle('height');i&&n.setAttribute('width',t(n.getAttribute('width'),i));e&&n.setAttribute('height',t(n.getAttribute('height'),e))};return n}})();(function(){function e(e){e=e.attributes;return'application/x-shockwave-flash'==e.type||n.test(e.src||'')};function t(e,t){return e.createFakeParserElement(t,'cke_flash','flash',!0)};var n=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add('flash',{requires:'dialog,fakeobjects',onLoad:function(){CKEDITOR.addCss('img.cke_flash{background-image: url('+CKEDITOR.getUrl(this.path+'images/placeholder.png')+');background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}')},init:function(e){var t='object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]';CKEDITOR.dialog.isTabEnabled(e,'flash','properties')&&(t+=';object[align]; embed[allowscriptaccess,quality,scale,wmode]');CKEDITOR.dialog.isTabEnabled(e,'flash','advanced')&&(t+=';object[id]{*}; embed[bgcolor]{*}(*)');e.addCommand('flash',new CKEDITOR.dialogCommand('flash',{allowedContent:t,requiredContent:'embed'}));e.ui.addButton&&e.ui.addButton('Flash',{label:e.lang.common.flash,command:'flash',toolbar:'insert,20'});CKEDITOR.dialog.add('flash',this.path+'dialogs/flash.js');e.addMenuItems&&e.addMenuItems({flash:{label:e.lang.flash.properties,command:'flash',group:'flash'}});e.on('doubleclick',function(e){var t=e.data.element;t.is('img')&&'flash'==t.data('cke-real-element-type')&&(e.data.dialog='flash')});e.contextMenu&&e.contextMenu.addListener(function(e){if(e&&e.is('img')&&!e.isReadOnly()&&'flash'==e.data('cke-real-element-type'))return{flash:CKEDITOR.TRISTATE_OFF}})},afterInit:function(n){var i=n.dataProcessor;(i=i&&i.dataFilter)&&i.addRules({elements:{'cke:object':function(i){var o=i.attributes;if(!(o.classid&&String(o.classid).toLowerCase()||e(i))){for(o=0;o<i.children.length;o++)if('cke:embed'==i.children[o].name){if(!e(i.children[o]))break;return t(n,i)};return null};return t(n,i)},'cke:embed':function(i){return e(i)?t(n,i):null}}},5)}})})();CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1});(function(){function n(n){var o=n.config,l=n.fire('uiSpace',{space:'top',html:''}).html,r=function(){function g(e,n,o){i.setStyle(n,t(o));i.setStyle('position',e)};function h(e){var t=f.getDocumentPosition();switch(e){case'top':g('absolute','top',t.y-d-u);break;case'pin':g('fixed','top',T);break;case'bottom':g('absolute','top',t.y+(a.height||a.bottom-a.top)+u)};l=e};var l,f,c,a,s,d,m,E=o.floatSpaceDockedOffsetX||0,u=o.floatSpaceDockedOffsetY||0,p=o.floatSpacePinnedOffsetX||0,T=o.floatSpacePinnedOffsetY||0;return function(g){if(f=n.editable()){var T=g&&'focus'==g.name;T&&i.show();n.fire('floatingSpaceLayout',{show:T});i.removeStyle('left');i.removeStyle('right');c=i.getClientRect();a=f.getClientRect();s=e.getViewPaneSize();d=c.height;m='pageXOffset'in e.$?e.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft;l?(d+u<=a.top?h('top'):d+u>s.height-a.bottom?h('pin'):h('bottom'),g=s.width/2,g=o.floatSpacePreferRight?'right':0<a.left&&a.right<s.width&&a.width>c.width?'rtl'==o.contentsLangDirection?'right':'left':g-a.left>a.right-g?'left':'right',c.width>s.width?(g='left',T=0):(T='left'==g?0<a.left?a.left:0:a.right<s.width?s.width-a.right:0,T+c.width>s.width&&(g='left'==g?'right':'left',T=0)),i.setStyle(g,t(('pin'==l?p:E)+T+('pin'==l?0:'left'==g?m:-m)))):(l='pin',h('pin'),r(g))}}}();if(l){var c=new CKEDITOR.template('\x3cdiv id\x3d"cke_{name}" class\x3d"cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir\x3d"{langDir}" title\x3d"'+(CKEDITOR.env.gecko?' ':'')+'" lang\x3d"{langCode}" role\x3d"application" style\x3d"{style}"'+(n.title?' aria-labelledby\x3d"cke_{name}_arialbl"':' ')+'\x3e'+(n.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':' ')+'\x3cdiv class\x3d"cke_inner"\x3e\x3cdiv id\x3d"{topId}" class\x3d"cke_top" role\x3d"presentation"\x3e{content}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),i=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(c.output({content:l,id:n.id,langDir:n.lang.dir,langCode:n.langCode,name:n.name,style:'display:none;z-index:'+(o.baseFloatZIndex-1),topId:n.ui.spaceId('top'),voiceLabel:n.title}))),s=CKEDITOR.tools.eventsBuffer(500,r),a=CKEDITOR.tools.eventsBuffer(100,r);i.unselectable();i.on('mousedown',function(e){e=e.data;e.getTarget().hasAscendant('a',1)||e.preventDefault()});n.on('focus',function(t){r(t);n.on('change',s.input);e.on('scroll',a.input);e.on('resize',a.input)});n.on('blur',function(){i.hide();n.removeListener('change',s.input);e.removeListener('scroll',a.input);e.removeListener('resize',a.input)});n.on('destroy',function(){e.removeListener('scroll',a.input);e.removeListener('resize',a.input);i.clearCustomData();i.remove()});n.focusManager.hasFocus&&i.show();n.focusManager.add(i,1)}};var e=CKEDITOR.document.getWindow(),t=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add('floatingspace',{init:function(e){e.on('loaded',function(){n(this)},null,null,20)}})})();CKEDITOR.plugins.add('listblock',{requires:'panel',onLoad:function(){var e=CKEDITOR.addTemplate('panel-list','\x3cul role\x3d"presentation" class\x3d"cke_panel_list"\x3e{items}\x3c/ul\x3e'),t=CKEDITOR.addTemplate('panel-list-item','\x3cli id\x3d"{id}" class\x3d"cke_panel_listItem" role\x3dpresentation\x3e\x3ca id\x3d"{id}_option" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"{title}" href\x3d"javascript:void(\'{val}\')"  {onclick}\x3d"CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role\x3d"option"\x3e{text}\x3c/a\x3e\x3c/li\x3e'),n=CKEDITOR.addTemplate('panel-list-group','\x3ch1 id\x3d"{id}" class\x3d"cke_panel_grouptitle" role\x3d"presentation" \x3e{label}\x3c/h1\x3e'),i=/'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(e,t){return this.addBlock(e,new CKEDITOR.ui.listBlock(this.getHolderElement(),t))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(e,t){t=t||{};var n=t.attributes||(t.attributes={});(this.multiSelect=!!t.multiSelect)&&(n['aria-multiselectable']=!0);!n.role&&(n.role='listbox');this.base.apply(this,arguments);this.element.setAttribute('role',n.role);n=this.keys;n[40]='next';n[9]='next';n[38]='prev';n[CKEDITOR.SHIFT+9]='prev';n[32]=CKEDITOR.env.ie?'mouseup':'click';CKEDITOR.env.ie&&(n[13]='mouseup');this._.pendingHtml=[];this._.pendingList=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){var t=e.output({items:this._.pendingList.join('')});this._.pendingList=[];this._.pendingHtml.push(t);delete this._.started}},getClick:function(){this._.click||(this._.click=CKEDITOR.tools.addFunction(function(e){var t=this.toggle(e);if(this.onClick)this.onClick(e,t)},this));return this._.click}},proto:{add:function(e,n,o){var r=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0);this._.items[e]=r;var a;a=CKEDITOR.tools.htmlEncodeAttr(e).replace(i,'\\\'');e={id:r,val:a,onclick:CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':'onclick',clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(o||e),text:n||e};this._.pendingList.push(t.output(e))},startGroup:function(e){this._.close();var t=CKEDITOR.tools.getNextId();this._.groups[e]=t;this._.pendingHtml.push(n.output({id:t,label:e}))},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(''));delete this._.size;this._.pendingHtml=[]},toggle:function(e){var t=this.isMarked(e);t?this.unmark(e):this.mark(e);return!t},hideGroup:function(e){var t=(e=this.element.getDocument().getById(this._.groups[e]))&&e.getNext();e&&(e.setStyle('display','none'),t&&'ul'==t.getName()&&t.setStyle('display','none'))},hideItem:function(e){this.element.getDocument().getById(this._.items[e]).setStyle('display','none')},showAll:function(){var t=this._.items,n=this._.groups,i=this.element.getDocument(),e;for(e in t)i.getById(t[e]).setStyle('display','');for(var o in n)t=i.getById(n[o]),e=t.getNext(),t.setStyle('display',''),e&&'ul'==e.getName()&&e.setStyle('display','')},mark:function(e){this.multiSelect||this.unmarkAll();e=this._.items[e];var t=this.element.getDocument().getById(e);t.addClass('cke_selected');this.element.getDocument().getById(e+'_option').setAttribute('aria-selected',!0);this.onMark&&this.onMark(t)},unmark:function(e){var n=this.element.getDocument();e=this._.items[e];var t=n.getById(e);t.removeClass('cke_selected');n.getById(e+'_option').removeAttribute('aria-selected');this.onUnmark&&this.onUnmark(t)},unmarkAll:function(){var t=this._.items,n=this.element.getDocument(),i;for(i in t){var e=t[i];n.getById(e).removeClass('cke_selected');n.getById(e+'_option').removeAttribute('aria-selected')};this.onUnmark&&this.onUnmark()},isMarked:function(e){return this.element.getDocument().getById(this._.items[e]).hasClass('cke_selected')},focus:function(e){this._.focusIndex=-1;var i=this.element.getElementsByTag('a'),t,n=-1;if(e)for(t=this.element.getDocument().getById(this._.items[e]).getFirst();e=i.getItem(++n);){if(e.equals(t)){this._.focusIndex=n;break}}
else this.element.focus();t&&setTimeout(function(){t.focus()},0)}}})}});CKEDITOR.plugins.add('richcombo',{requires:'floatpanel,listblock,button',beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}});(function(){var e='\x3cspan id\x3d"{id}" class\x3d"cke_combo cke_combo__{name} {cls}" role\x3d"presentation"\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_combo_label"\x3e{label}\x3c/span\x3e\x3ca class\x3d"cke_combo_button" title\x3d"{title}" tabindex\x3d"-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?'':' href\x3d"javascript:void(\'{titleJs}\')"')+' hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(e+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var e=e+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':'onclick')+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan id\x3d"{id}_text" class\x3d"cke_combo_text cke_combo_inlinelabel"\x3e{label}\x3c/span\x3e\x3cspan class\x3d"cke_combo_open"\x3e\x3cspan class\x3d"cke_combo_arrow"\x3e'+(CKEDITOR.env.hc?'\x26#9660;':CKEDITOR.env.air?'\x26nbsp;':'')+'\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e'),t=CKEDITOR.addTemplate('combo',e);CKEDITOR.UI_RICHCOMBO='richcombo';CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(e){CKEDITOR.tools.extend(this,e,{canGroup:!1,title:e.label,modes:{wysiwyg:1},editorFocus:1});e=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=e.parent&&e.parent.getDocument()||CKEDITOR.document;e.className='cke_combopanel';e.block={multiSelect:e.multiSelect,attributes:e.attributes};e.toolbarRelated=!0;this._={panelDefinition:e,items:{}}},proto:{renderHtml:function(e){var t=[];this.render(e,t);return t.join('')},render:function(e,n){function r(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var t=this.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;e.readOnly&&!this.readOnly&&(t=CKEDITOR.TRISTATE_DISABLED);this.setState(t);this.setValue('');t!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}};var a=CKEDITOR.env,s='cke_'+this.id,l=CKEDITOR.tools.addFunction(function(t){d&&(e.unlockSelection(1),d=0);i.execute(t)},this),o=this,i={id:s,combo:this,focus:function(){CKEDITOR.document.getById(s).getChild(1).focus()},execute:function(t){var n=o._;if(n.state!=CKEDITOR.TRISTATE_DISABLED)if(o.createPanel(e),n.on)n.panel.hide();else{o.commit();var i=o.getValue();i?n.list.mark(i):n.list.unmarkAll();n.panel.showBlock(o.id,new CKEDITOR.dom.element(t),4)}},clickFn:l};e.on('activeFilterChange',r,this);e.on('mode',r,this);e.on('selectionChange',r,this);!this.readOnly&&e.on('readOnly',r,this);var c=CKEDITOR.tools.addFunction(function(t,n){t=new CKEDITOR.dom.event(t);var o=t.getKeystroke();if(40==o)e.once('panelShow',function(e){e.data._.panel._.currentBlock.onKeyDown(40)});switch(o){case 13:case 32:case 40:CKEDITOR.tools.callFunction(l,n);break;default:i.onkey(i,o)};t.preventDefault()}),u=CKEDITOR.tools.addFunction(function(){i.onfocus&&i.onfocus()}),d=0;i.keyDownFn=c;a={id:s,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||'',titleJs:a.gecko&&!a.hc?'':(this.title||'').replace('\'',''),keydownFn:c,focusFn:u,clickFn:l};t.output(a,n);if(this.onRender)this.onRender();return i},createPanel:function(e){if(!this._.panel){var o=this._.panelDefinition,r=this._.panelDefinition.block,s=o.parent||CKEDITOR.document.getBody(),a='cke_combopanel__'+this.name,n=new CKEDITOR.ui.floatPanel(e,s,o),i=n.addListBlock(this.id,r),t=this;n.onShow=function(){this.element.addClass(a);t.setState(CKEDITOR.TRISTATE_ON);t._.on=1;t.editorFocus&&!e.focusManager.hasFocus&&e.focus();if(t.onOpen)t.onOpen();e.once('panelShow',function(){i.focus(!i.multiSelect&&t.getValue())})};n.onHide=function(n){this.element.removeClass(a);t.setState(t.modes&&t.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);t._.on=0;if(!n&&t.onClose)t.onClose()};n.onEscape=function(){n.hide(1)};i.onClick=function(e,i){t.onClick&&t.onClick.call(t,e,i);n.hide()};this._.panel=n;this._.list=i;n.getBlock(this.id).onHide=function(){t._.on=0;t.setState(CKEDITOR.TRISTATE_OFF)};this.init&&this.init()}},setValue:function(e,t){this._.value=e;var n=this.document.getById('cke_'+this.id+'_text');n&&(e||t?n.removeClass('cke_combo_inlinelabel'):(t=this.label,n.addClass('cke_combo_inlinelabel')),n.setText('undefined'!=typeof t?t:e))},getValue:function(){return this._.value||''},unmarkAll:function(){this._.list.unmarkAll()},mark:function(e){this._.list.mark(e)},hideItem:function(e){this._.list.hideItem(e)},hideGroup:function(e){this._.list.hideGroup(e)},showAll:function(){this._.list.showAll()},add:function(e,t,n){this._.items[e]=n||e;this._.list.add(e,t,n)},startGroup:function(e){this._.list.startGroup(e)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire('ready',this));this._.committed=1},setState:function(e){if(this._.state!=e){var t=this.document.getById('cke_'+this.id);t.setState(e,'cke_combo');e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute('aria-disabled',!0):t.removeAttribute('aria-disabled');this._.state=e}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(e){return new CKEDITOR.ui.richCombo(e)}}}});CKEDITOR.ui.prototype.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)}})();(function(){function t(t,n,i,o,a,d,h,g){var E=t.config,f=new CKEDITOR.style(h),l=a.split(';');a=[];for(var r={},s=0;s<l.length;s++){var c=l[s];if(c){var c=c.split('/'),m={},u=l[s]=c[0];m[i]=a[s]=c[1]||u;r[u]=new CKEDITOR.style(h,m);r[u]._.definition.name=u}
else l.splice(s--,1)};t.ui.addRichCombo(n,{label:o.label,title:o.panelTitle,toolbar:'styles,'+g,allowedContent:f,requiredContent:f,panel:{css:[CKEDITOR.skin.getPath('editor')].concat(E.contentsCss),multiSelect:!1,attributes:{'aria-label':o.panelTitle}},init:function(){this.startGroup(o.panelTitle);for(var t=0;t<l.length;t++){var e=l[t];this.add(e,r[e].buildPreview(),e)}},onClick:function(n){t.focus();t.fire('saveSnapshot');var l=this.getValue(),u=r[n];if(l&&n!=l){var d=r[l],o=t.getSelection().getRanges()[0];if(o.collapsed){var s=t.elementPath(),i=s.contains(function(e){return d.checkElementRemovable(e)});if(i){var a=o.checkBoundaryOfElement(i,CKEDITOR.START),c=o.checkBoundaryOfElement(i,CKEDITOR.END);if(a&&c){for(a=o.createBookmark();s=i.getFirst();)s.insertBefore(i);i.remove();o.moveToBookmark(a)}
else a?o.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START):c?o.moveToPosition(i,CKEDITOR.POSITION_AFTER_END):(o.splitElement(i),o.moveToPosition(i,CKEDITOR.POSITION_AFTER_END),e(o,s.elements.slice(),i));t.getSelection().selectRanges([o])}}
else t.removeStyle(d)};t[l==n?'removeStyle':'applyStyle'](u);t.fire('saveSnapshot')},onRender:function(){t.on('selectionChange',function(e){var a=this.getValue();e=e.data.path.elements;for(var i=0,o;i<e.length;i++){o=e[i];for(var n in r)if(r[n].checkElementMatch(o,!0,t)){n!=a&&this.setValue(n);return}};this.setValue('',d)},this)},refresh:function(){t.activeFilter.check(f)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})};function e(t,n,i){var o=n.pop();if(o){if(i)return e(t,n,o.equals(i)?null:i);i=o.clone();t.insertNode(i);t.moveToPosition(i,CKEDITOR.POSITION_AFTER_START);e(t,n)}};CKEDITOR.plugins.add('font',{requires:'richcombo',init:function(e){var n=e.config;t(e,'Font','family',e.lang.font,n.font_names,n.font_defaultLabel,n.font_style,30);t(e,'FontSize','size',e.lang.font.fontSize,n.fontSize_sizes,n.fontSize_defaultLabel,n.fontSize_style,40)}})})();CKEDITOR.config.font_names='Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif';CKEDITOR.config.font_defaultLabel='';CKEDITOR.config.font_style={element:'span',styles:{'font-family':'#(family)'},overrides:[{element:'font',attributes:{face:null}}]};CKEDITOR.config.fontSize_sizes='8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px';CKEDITOR.config.fontSize_defaultLabel='';CKEDITOR.config.fontSize_style={element:'span',styles:{'font-size':'#(size)'},overrides:[{element:'font',attributes:{size:null}}]};CKEDITOR.plugins.add('forms',{requires:'dialog,fakeobjects',onLoad:function(){CKEDITOR.addCss('.cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n');CKEDITOR.addCss('img.cke_hidden{background-image: url('+CKEDITOR.getUrl(this.path+'images/hiddenfield.gif')+');background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}')},init:function(e){var n=e.lang,r=0,a={email:1,password:1,search:1,tel:1,text:1,url:1},s={checkbox:'input[type,name,checked,required]',radio:'input[type,name,checked,required]',textfield:'input[type,name,value,size,maxlength,required]',textarea:'textarea[cols,rows,name,required]',select:'select[name,size,multiple,required]; option[value,selected]',button:'input[type,name,value]',form:'form[action,name,id,enctype,target,method]',hiddenfield:'input[type,name,value]',imagebutton:'input[type,alt,src]{width,height,border,border-width,border-style,margin,float}'},l={checkbox:'input',radio:'input',textfield:'input',textarea:'textarea',select:'select',button:'input',form:'form',hiddenfield:'input',imagebutton:'input'},t=function(t,i,o){var a={allowedContent:s[i],requiredContent:l[i]};'form'==i&&(a.context='form');e.addCommand(i,new CKEDITOR.dialogCommand(i,a));e.ui.addButton&&e.ui.addButton(t,{label:n.common[t.charAt(0).toLowerCase()+t.slice(1)],command:i,toolbar:'forms,'+(r+=10)});CKEDITOR.dialog.add(i,o)},i=this.path+'dialogs/';!e.blockless&&t('Form','form',i+'form.js');t('Checkbox','checkbox',i+'checkbox.js');t('Radio','radio',i+'radio.js');t('TextField','textfield',i+'textfield.js');t('Textarea','textarea',i+'textarea.js');t('Select','select',i+'select.js');t('Button','button',i+'button.js');var o=e.plugins.image;o&&!e.plugins.image2&&t('ImageButton','imagebutton',CKEDITOR.plugins.getPath('image')+'dialogs/image.js');t('HiddenField','hiddenfield',i+'hiddenfield.js');e.addMenuItems&&(t={checkbox:{label:n.forms.checkboxAndRadio.checkboxTitle,command:'checkbox',group:'checkbox'},radio:{label:n.forms.checkboxAndRadio.radioTitle,command:'radio',group:'radio'},textfield:{label:n.forms.textfield.title,command:'textfield',group:'textfield'},hiddenfield:{label:n.forms.hidden.title,command:'hiddenfield',group:'hiddenfield'},button:{label:n.forms.button.title,command:'button',group:'button'},select:{label:n.forms.select.title,command:'select',group:'select'},textarea:{label:n.forms.textarea.title,command:'textarea',group:'textarea'}},o&&(t.imagebutton={label:n.image.titleButton,command:'imagebutton',group:'imagebutton'}),!e.blockless&&(t.form={label:n.forms.form.menu,command:'form',group:'form'}),e.addMenuItems(t));e.contextMenu&&(!e.blockless&&e.contextMenu.addListener(function(e,t,n){if((e=n.contains('form',1))&&!e.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}}),e.contextMenu.addListener(function(e){if(e&&!e.isReadOnly()){var t=e.getName();if('select'==t)return{select:CKEDITOR.TRISTATE_OFF};if('textarea'==t)return{textarea:CKEDITOR.TRISTATE_OFF};if('input'==t){var n=e.getAttribute('type')||'text';switch(n){case'button':case'submit':case'reset':return{button:CKEDITOR.TRISTATE_OFF};case'checkbox':return{checkbox:CKEDITOR.TRISTATE_OFF};case'radio':return{radio:CKEDITOR.TRISTATE_OFF};case'image':return o?{imagebutton:CKEDITOR.TRISTATE_OFF}:null};if(a[n])return{textfield:CKEDITOR.TRISTATE_OFF}};if('img'==t&&'hiddenfield'==e.data('cke-real-element-type'))return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}));e.on('doubleclick',function(t){var n=t.data.element;if(!e.blockless&&n.is('form'))t.data.dialog='form';else if(n.is('select'))t.data.dialog='select';else if(n.is('textarea'))t.data.dialog='textarea';else if(n.is('img')&&'hiddenfield'==n.data('cke-real-element-type'))t.data.dialog='hiddenfield';else if(n.is('input')){n=n.getAttribute('type')||'text';switch(n){case'button':case'submit':case'reset':t.data.dialog='button';break;case'checkbox':t.data.dialog='checkbox';break;case'radio':t.data.dialog='radio';break;case'image':t.data.dialog='imagebutton'};a[n]&&(t.data.dialog='textfield')}})},afterInit:function(e){var t=e.dataProcessor,n=t&&t.htmlFilter,t=t&&t.dataFilter;CKEDITOR.env.ie&&n&&n.addRules({elements:{input:function(e){e=e.attributes;var t=e.type;t||(e.type='text');'checkbox'!=t&&'radio'!=t||'on'!=e.value||delete e.value}}},{applyToAll:!0});t&&t.addRules({elements:{input:function(t){if('hidden'==t.attributes.type)return e.createFakeParserElement(t,'cke_hidden','hiddenfield')}}},{applyToAll:!0})}});CKEDITOR.plugins.add('format',{requires:'richcombo',init:function(e){if(!e.blockless){for(var a=e.config,n=e.lang.format,s=a.format_tags.split(';'),t={},l=0,c=[],r=0;r<s.length;r++){var i=s[r],o=new CKEDITOR.style(a['format_'+i]);if(!e.filter.customConfig||e.filter.check(o))l++,t[i]=o,t[i]._.enterMode=e.config.enterMode,c.push(o)};0!==l&&e.ui.addRichCombo('Format',{label:n.label,title:n.panelTitle,toolbar:'styles,20',allowedContent:c,panel:{css:[CKEDITOR.skin.getPath('editor')].concat(a.contentsCss),multiSelect:!1,attributes:{'aria-label':n.panelTitle}},init:function(){this.startGroup(n.panelTitle);for(var e in t){var i=n['tag_'+e];this.add(e,t[e].buildPreview(i),i)}},onClick:function(n){e.focus();e.fire('saveSnapshot');n=t[n];var i=e.elementPath();e[n.checkActive(i,e)?'removeStyle':'applyStyle'](n);setTimeout(function(){e.fire('saveSnapshot')},0)},onRender:function(){e.on('selectionChange',function(n){var o=this.getValue();n=n.data.path;this.refresh();for(var i in t)if(t[i].checkActive(n,e)){i!=o&&this.setValue(i,e.lang.format['tag_'+i]);return};this.setValue('')},this)},onOpen:function(){this.showAll();for(var n in t)e.activeFilter.check(t[n])||this.hideItem(n)},refresh:function(){var n=e.elementPath();if(n){if(n.isContextFor('p'))for(var i in t)if(e.activeFilter.check(t[i]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}});CKEDITOR.config.format_tags='p;h1;h2;h3;h4;h5;h6;pre;address;div';CKEDITOR.config.format_p={element:'p'};CKEDITOR.config.format_div={element:'div'};CKEDITOR.config.format_pre={element:'pre'};CKEDITOR.config.format_address={element:'address'};CKEDITOR.config.format_h1={element:'h1'};CKEDITOR.config.format_h2={element:'h2'};CKEDITOR.config.format_h3={element:'h3'};CKEDITOR.config.format_h4={element:'h4'};CKEDITOR.config.format_h5={element:'h5'};CKEDITOR.config.format_h6={element:'h6'};(function(){var e={canUndo:!1,exec:function(e){var t=e.document.createElement('hr');e.insertElement(t)},allowedContent:'hr',requiredContent:'hr'};CKEDITOR.plugins.add('horizontalrule',{init:function(t){t.blockless||(t.addCommand('horizontalrule',e),t.ui.addButton&&t.ui.addButton('HorizontalRule',{label:t.lang.horizontalrule.toolbar,command:'horizontalrule',toolbar:'insert,40'}))}})})();CKEDITOR.plugins.add('htmlwriter',{init:function(e){var t=new CKEDITOR.htmlWriter;t.forceSimpleAmpersand=e.config.forceSimpleAmpersand;t.indentationChars=e.config.dataIndentationChars||'\t';e.dataProcessor.writer=t}});CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars='\t';this.selfClosingEnd=' /\x3e';this.lineBreakChars='\n';this.sortAttributes=1;this._.indent=0;this._.indentation='';this._.inPre=0;this._.rules={};var e=CKEDITOR.dtd,t;for(t in CKEDITOR.tools.extend({},e.$nonBodyContent,e.$block,e.$listItem,e.$tableContent))this.setRules(t,{indent:!e[t]['#'],breakBeforeOpen:1,breakBeforeClose:!e[t]['#'],breakAfterClose:1,needsSpace:t in e.$block&&!(t in{li:1,dt:1,dd:1})});this.setRules('br',{breakAfterOpen:1});this.setRules('title',{indent:0,breakAfterOpen:0});this.setRules('style',{indent:0,breakBeforeClose:1});this.setRules('pre',{breakAfterOpen:1,indent:0})},proto:{openTag:function(e){var t=this._.rules[e];this._.afterCloser&&t&&t.needsSpace&&this._.needsSpace&&this._.output.push('\n');this._.indent?this.indentation():t&&t.breakBeforeOpen&&(this.lineBreak(),this.indentation());this._.output.push('\x3c',e);this._.afterCloser=0},openTagClose:function(e,t){var n=this._.rules[e];t?(this._.output.push(this.selfClosingEnd),n&&n.breakAfterClose&&(this._.needsSpace=n.needsSpace)):(this._.output.push('\x3e'),n&&n.indent&&(this._.indentation+=this.indentationChars));n&&n.breakAfterOpen&&this.lineBreak();'pre'==e&&(this._.inPre=1)},attribute:function(e,t){'string'==typeof t&&(this.forceSimpleAmpersand&&(t=t.replace(/&amp;/g,'\x26')),t=CKEDITOR.tools.htmlEncodeAttr(t));this._.output.push(' ',e,'\x3d"',t,'"')},closeTag:function(e){var t=this._.rules[e];t&&t.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length));this._.indent?this.indentation():t&&t.breakBeforeClose&&(this.lineBreak(),this.indentation());this._.output.push('\x3c/',e,'\x3e');'pre'==e&&(this._.inPre=0);t&&t.breakAfterClose&&(this.lineBreak(),this._.needsSpace=t.needsSpace);this._.afterCloser=1},text:function(e){this._.indent&&(this.indentation(),!this._.inPre&&(e=CKEDITOR.tools.ltrim(e)));this._.output.push(e)},comment:function(e){this._.indent&&this.indentation();this._.output.push('\x3c!--',e,'--\x3e')},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation);this._.indent=0},reset:function(){this._.output=[];this._.indent=0;this._.indentation='';this._.afterCloser=0;this._.inPre=0;this._.needsSpace=0},setRules:function(e,t){var n=this._.rules[e];n?CKEDITOR.tools.extend(n,t,!0):this._.rules[e]=t}}});(function(){CKEDITOR.plugins.add('iframe',{requires:'dialog,fakeobjects',onLoad:function(){CKEDITOR.addCss('img.cke_iframe{background-image: url('+CKEDITOR.getUrl(this.path+'images/placeholder.png')+');background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}')},init:function(e){var t=e.lang.iframe,n='iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]';e.plugins.dialogadvtab&&(n+=';iframe'+e.plugins.dialogadvtab.allowedContent({id:1,classes:1,styles:1}));CKEDITOR.dialog.add('iframe',this.path+'dialogs/iframe.js');e.addCommand('iframe',new CKEDITOR.dialogCommand('iframe',{allowedContent:n,requiredContent:'iframe'}));e.ui.addButton&&e.ui.addButton('Iframe',{label:t.toolbar,command:'iframe',toolbar:'insert,80'});e.on('doubleclick',function(e){var t=e.data.element;t.is('img')&&'iframe'==t.data('cke-real-element-type')&&(e.data.dialog='iframe')});e.addMenuItems&&e.addMenuItems({iframe:{label:t.title,command:'iframe',group:'image'}});e.contextMenu&&e.contextMenu.addListener(function(e){if(e&&e.is('img')&&'iframe'==e.data('cke-real-element-type'))return{iframe:CKEDITOR.TRISTATE_OFF}})},afterInit:function(e){var t=e.dataProcessor;(t=t&&t.dataFilter)&&t.addRules({elements:{iframe:function(t){return e.createFakeParserElement(t,'cke_iframe','iframe',!0)}}})}})})();(function(){function t(e){function l(e){var t=!1;s.attachListener(s,'keydown',function(){var i=o.getBody().getElementsByTag(e);if(!t){for(var n=0;n<i.count();n++)i.getItem(n).setCustomData('retain',!0);t=!0}},null,null,1);s.attachListener(s,'keyup',function(){var n=o.getElementsByTag(e);t&&(1!=n.count()||n.getItem(0).getCustomData('retain')||n.getItem(0).hasAttribute('data-cke-temp')||n.getItem(0).remove(1),t=!1)})};var i=this.editor,o=e.document,r=o.body,a=o.getElementById('cke_actscrpt');a&&a.parentNode.removeChild(a);(a=o.getElementById('cke_shimscrpt'))&&a.parentNode.removeChild(a);(a=o.getElementById('cke_basetagscrpt'))&&a.parentNode.removeChild(a);r.contentEditable=!0;CKEDITOR.env.ie&&(r.hideFocus=!0,r.disabled=!0,r.removeAttribute('disabled'));delete this._.isLoadingData;this.$=r;o=new CKEDITOR.dom.document(o);this.setup();this.fixInitialSelection();var s=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&o.getDocumentElement().addClass(o.$.compatMode);CKEDITOR.env.ie&&!CKEDITOR.env.edge&&i.enterMode!=CKEDITOR.ENTER_P?l('p'):CKEDITOR.env.edge&&i.enterMode!=CKEDITOR.ENTER_DIV&&l('div');if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)o.getDocumentElement().on('mousedown',function(e){e.data.getTarget().is('html')&&setTimeout(function(){i.editable().focus()})});n(i);try{i.document.$.execCommand('2D-position',!1,!0)}catch(t){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&'CSS1Compat'==i.document.$.compatMode)&&this.attachListener(this,'keydown',function(e){var t=e.data.getKeystroke();if(33==t||34==t)if(CKEDITOR.env.ie)setTimeout(function(){i.getSelection().scrollIntoView()},0);else if(i.window.$.innerHeight>this.$.offsetHeight){var n=i.createRange();n[33==t?'moveToElementEditStart':'moveToElementEditEnd'](this);n.select();e.data.preventDefault()}});CKEDITOR.env.ie&&this.attachListener(o,'blur',function(){try{o.$.selection.empty()}catch(e){}});CKEDITOR.env.iOS&&this.attachListener(o,'touchend',function(){e.focus()});r=i.document.getElementsByTag('title').getItem(0);r.data('cke-title',r.getText());CKEDITOR.env.ie&&(i.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){'unloaded'==this.status&&(this.status='ready');i.fire('contentDom');this._.isPendingFocus&&(i.focus(),this._.isPendingFocus=!1);setTimeout(function(){i.fire('dataReady')},0)},0,this)};function n(e){function o(){var t;e.editable().attachListener(e,'selectionChange',function(){var n=e.getSelection().getSelectedElement();n&&(t&&(t.detachEvent('onresizestart',i),t=null),n.$.attachEvent('onresizestart',i),t=n.$)})};function i(e){e.returnValue=!1};if(CKEDITOR.env.gecko)try{var n=e.document.$;n.execCommand('enableObjectResizing',!1,!e.config.disableObjectResizing);n.execCommand('enableInlineTableEditing',!1,!e.config.disableNativeTableHandles)}catch(t){}
else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&e.config.disableObjectResizing&&o(e)};function i(){var e=[];if(8<=CKEDITOR.document.$.documentMode){e.push('html.CSS1Compat [contenteditable\x3dfalse]{min-height:0 !important}');var t=[],n;for(n in CKEDITOR.dtd.$removeEmpty)t.push('html.CSS1Compat '+n+'[contenteditable\x3dfalse]');e.push(t.join(',')+'{display:inline-block}')}
else CKEDITOR.env.gecko&&(e.push('html{height:100% !important}'),e.push('img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}'));e.push('html{cursor:text;*cursor:auto}');e.push('img,input,textarea{cursor:default}');return e.join('\n')};var e;CKEDITOR.plugins.add('wysiwygarea',{init:function(t){t.config.fullPage&&t.addFeature({allowedContent:'html head title; style [media,type]; body (*)[id]; meta link [*]',requiredContent:'body'});t.addMode('wysiwyg',function(n){function c(o){o&&o.removeListener();t.editable(new e(t,i.$.contentWindow.document.body));t.setData(t.getData(1),n)};var a='document.open();'+(CKEDITOR.env.ie?'('+CKEDITOR.tools.fixDomain+')();':'')+'document.close();',a=CKEDITOR.env.air?'javascript:void(0)':CKEDITOR.env.ie&&!CKEDITOR.env.edge?'javascript:void(function(){'+encodeURIComponent(a)+'}())':'',i=CKEDITOR.dom.element.createFromHtml('\x3ciframe src\x3d"'+a+'" frameBorder\x3d"0"\x3e\x3c/iframe\x3e');i.setStyles({width:'100%',height:'100%'});i.addClass('cke_wysiwyg_frame').addClass('cke_reset');a=t.ui.space('contents');a.append(i);var l=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;if(l)i.on('load',c);var o=t.title,r=t.fire('ariaEditorHelpLabel',{}).label;o&&(CKEDITOR.env.ie&&r&&(o+=', '+r),i.setAttribute('title',o));if(r){var o=CKEDITOR.tools.getNextId(),s=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+o+'" class\x3d"cke_voice_label"\x3e'+r+'\x3c/span\x3e');a.append(s,1);i.setAttribute('aria-describedby',o)};t.on('beforeModeUnload',function(e){e.removeListener();s&&s.remove()});i.setAttributes({tabIndex:t.tabIndex,allowTransparency:'true'});!l&&c();t.fire('ariaWidget',i)})}});CKEDITOR.editor.prototype.addContentsCss=function(e){var t=this.config,n=t.contentsCss;CKEDITOR.tools.isArray(n)||(t.contentsCss=n?[n]:[]);t.contentsCss.push(e)};e=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(e){CKEDITOR.tools.setTimeout(t,0,this,e)},this);this._.docTitle=this.getWindow().getFrame().getAttribute('title')},base:CKEDITOR.editable,proto:{setData:function(e,t){var a=this.editor;if(t)this.setHtml(e),this.fixInitialSelection(),a.fire('dataReady');else{this._.isLoadingData=!0;a._.dataStore={id:1};var o=a.config,s=o.fullPage,d=o.docType,l=CKEDITOR.tools.buildStyleHtml(i()).replace(/<style>/,'\x3cstyle data-cke-temp\x3d"1"\x3e');s||(l+=CKEDITOR.tools.buildStyleHtml(a.config.contentsCss));var r=o.baseHref?'\x3cbase href\x3d"'+o.baseHref+'" data-cke-temp\x3d"1" /\x3e':'';s&&(e=e.replace(/<!DOCTYPE[^>]*>/i,function(e){a.docType=d=e;return''}).replace(/<\?xml\s[^\?]*\?>/i,function(e){a.xmlDeclaration=e;return''}));e=a.dataProcessor.toHtml(e);s?(/<body[\s|>]/.test(e)||(e='\x3cbody\x3e'+e),/<html[\s|>]/.test(e)||(e='\x3chtml\x3e'+e+'\x3c/html\x3e'),/<head[\s|>]/.test(e)?/<title[\s|>]/.test(e)||(e=e.replace(/<head[^>]*>/,'$\x26\x3ctitle\x3e\x3c/title\x3e')):e=e.replace(/<html[^>]*>/,'$\x26\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e'),r&&(e=e.replace(/<head[^>]*?>/,'$\x26'+r)),e=e.replace(/<\/head\s*>/,l+'$\x26'),e=d+e):e=o.docType+'\x3chtml dir\x3d"'+o.contentsLangDirection+'" lang\x3d"'+(o.contentsLanguage||a.langCode)+'"\x3e\x3chead\x3e\x3ctitle\x3e'+this._.docTitle+'\x3c/title\x3e'+r+l+'\x3c/head\x3e\x3cbody'+(o.bodyId?' id\x3d"'+o.bodyId+'"':'')+(o.bodyClass?' class\x3d"'+o.bodyClass+'"':'')+'\x3e'+e+'\x3c/body\x3e\x3c/html\x3e';CKEDITOR.env.gecko&&(e=e.replace(/<body/,'\x3cbody contenteditable\x3d"true" '),2E4>CKEDITOR.env.version&&(e=e.replace(/<body[^>]*>/,'$\x26\x3c!-- cke-content-start --\x3e')));o='\x3cscript id\x3d"cke_actscrpt" type\x3d"text/javascript"'+(CKEDITOR.env.ie?' defer\x3d"defer" ':'')+'\x3evar wasLoaded\x3d0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction('+this._.frameLoadedHandler+',window);wasLoaded\x3d1;}'+(CKEDITOR.env.ie?'onload();':'document.addEventListener("DOMContentLoaded", onload, false );')+'\x3c/script\x3e';CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(o+='\x3cscript id\x3d"cke_shimscrpt"\x3ewindow.parent.CKEDITOR.tools.enableHtml5Elements(document)\x3c/script\x3e');r&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(o+='\x3cscript id\x3d"cke_basetagscrpt"\x3evar baseTag \x3d document.querySelector( "base" );baseTag.href \x3d baseTag.href;\x3c/script\x3e');e=e.replace(/(?=\s*<\/(:?head)>)/,o);this.clearCustomData();this.clearListeners();a.fire('contentDomUnload');var c=this.getDocument();try{c.write(e)}catch(n){setTimeout(function(){c.write(e)},0)}}},getData:function(e){if(e)return this.getHtml();e=this.editor;var n=e.config,t=n.fullPage,i=t&&e.docType,o=t&&e.xmlDeclaration,a=this.getDocument(),t=t?a.getDocumentElement().getOuterHtml():a.getBody().getHtml();CKEDITOR.env.gecko&&n.enterMode!=CKEDITOR.ENTER_BR&&(t=t.replace(/<br>(?=\s*(:?$|<\/body>))/,''));t=e.dataProcessor.toDataFormat(t);o&&(t=o+'\n'+t);i&&(t=i+'\n'+t);return t},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:e.baseProto.focus.call(this)},detach:function(){var i=this.editor,o=i.document,n;try{n=i.window.getFrame()}catch(t){};e.baseProto.detach.call(this);this.clearCustomData();o.getDocumentElement().clearCustomData();CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);n&&n.getParent()?(n.clearCustomData(),(i=n.removeCustomData('onResize'))&&i.removeListener(),n.remove()):CKEDITOR.warn('editor-destroy-iframe')}}})})();CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;(function(){function e(e,t){t||(t=e.getSelection().getSelectedElement());if(t&&t.is('img')&&!t.data('cke-realelement')&&!t.isReadOnly())return t};function t(e){var t=e.getStyle('float');if('inherit'==t||'none'==t)t=0;t||(t=e.getAttribute('align'));return t};CKEDITOR.plugins.add('image',{requires:'dialog',init:function(t){if(!t.plugins.image2){CKEDITOR.dialog.add('image',this.path+'dialogs/image.js');var n='img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}';CKEDITOR.dialog.isTabEnabled(t,'image','advanced')&&(n='img[alt,dir,id,lang,longdesc,!src,title]{*}(*)');t.addCommand('image',new CKEDITOR.dialogCommand('image',{allowedContent:n,requiredContent:'img[alt,src]',contentTransformations:[['img{width}: sizeToStyle','img[width]: sizeToAttribute'],['img{float}: alignmentToStyle','img[align]: alignmentToAttribute']]}));t.ui.addButton&&t.ui.addButton('Image',{label:t.lang.common.image,command:'image',toolbar:'insert,10'});t.on('doubleclick',function(e){var t=e.data.element;!t.is('img')||t.data('cke-realelement')||t.isReadOnly()||(e.data.dialog='image')});t.addMenuItems&&t.addMenuItems({image:{label:t.lang.image.menu,command:'image',group:'image'}});t.contextMenu&&t.contextMenu.addListener(function(n){if(e(t,n))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(n){function i(i){var o=n.getCommand('justify'+i);if(o){if('left'==i||'right'==i)o.on('exec',function(o){var a=e(n),r;a&&(r=t(a),r==i?(a.removeStyle('float'),i==t(a)&&a.removeAttribute('align')):a.setStyle('float',i),o.cancel())});o.on('refresh',function(o){var a=e(n);a&&(a=t(a),this.setState(a==i?CKEDITOR.TRISTATE_ON:'right'==i||'left'==i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),o.cancel())})}};n.plugins.image2||(i('left'),i('right'),i('center'),i('block'))}})})();CKEDITOR.config.image_removeLinkByEmptyURL=!0;(function(){function n(n,i){var o,a;i.on('refresh',function(n){var i=[e],o;for(o in n.data.states)i.push(n.data.states[o]);this.setState(CKEDITOR.tools.search(i,t)?t:e)},i,null,100);i.on('exec',function(e){o=n.getSelection();a=o.createBookmarks(1);e.data||(e.data={});e.data.done=!1},i,null,0);i.on('exec',function(){n.forceNextSelectionCheck();o.selectBookmarks(a)},i,null,100)};var e=CKEDITOR.TRISTATE_DISABLED,t=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add('indent',{init:function(e){var t=CKEDITOR.plugins.indent.genericDefinition;n(e,e.addCommand('indent',new t(!0)));n(e,e.addCommand('outdent',new t));e.ui.addButton&&(e.ui.addButton('Indent',{label:e.lang.indent.indent,command:'indent',directional:!0,toolbar:'indent,20'}),e.ui.addButton('Outdent',{label:e.lang.indent.outdent,command:'outdent',directional:!0,toolbar:'indent,10'}));e.on('dirChanged',function(t){var r=e.createRange(),s=t.data.node;r.setStartBefore(s);r.setEndAfter(s);for(var l=new CKEDITOR.dom.walker(r),n;n=l.next();)if(n.type==CKEDITOR.NODE_ELEMENT)if(!n.equals(s)&&n.getDirection())r.setStartAfter(n),l=new CKEDITOR.dom.walker(r);else{var i=e.config.indentClasses;if(i)for(var o='ltr'==t.data.dir?['_rtl','']:['','_rtl'],a=0;a<i.length;a++)n.hasClass(i[a]+o[0])&&(n.removeClass(i[a]+o[0]),n.addClass(i[a]+o[1]));i=n.getStyle('margin-right');o=n.getStyle('margin-left');i?n.setStyle('margin-left',i):n.removeStyle('margin-left');o?n.setStyle('margin-right',o):n.removeStyle('margin-right')}})}});CKEDITOR.plugins.indent={genericDefinition:function(e){this.isIndent=!!e;this.startDisabled=!this.isIndent},specificDefinition:function(e,t,n){this.name=t;this.editor=e;this.jobs={};this.enterBr=e.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!n;this.relatedGlobal=n?'indent':'outdent';this.indentKey=n?9:CKEDITOR.SHIFT+9;this.database={}},registerCommands:function(e,t){e.on('pluginsLoaded',function(){for(var e in t)(function(e,t){var i=e.getCommand(t.relatedGlobal),n;for(n in t.jobs)i.on('exec',function(i){i.data.done||(e.fire('lockSnapshot'),t.execJob(e,n)&&(i.data.done=!0),e.fire('unlockSnapshot'),CKEDITOR.dom.element.clearAllMarkers(t.database))},this,null,n),i.on('refresh',function(i){i.data.states||(i.data.states={});i.data.states[t.name+'@'+n]=t.refreshJob(e,n,i.data.path)},this,null,n);e.addFeature(t)})(this,t[e])})}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:'p',exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(t,n){var i=this.jobs[n];if(i.state!=e)return i.exec.call(this,t)},refreshJob:function(t,n,i){n=this.jobs[n];t.activeFilter.checkFeature(this)?n.state=n.refresh.call(this,t,i):n.state=e;return n.state},getContext:function(e){return e.contains(this.context)}}})();(function(){function i(e,t,n){if(!e.getCustomData('indent_processed')){var i=this.editor,r=this.isIndent;if(t){i=e.$.className.match(this.classNameRegex);n=0;i&&(i=i[1],n=CKEDITOR.tools.indexOf(t,i)+1);if(0>(n+=r?1:-1))return;n=Math.min(n,t.length);n=Math.max(n,0);e.$.className=CKEDITOR.tools.ltrim(e.$.className.replace(this.classNameRegex,''));0<n&&e.addClass(t[n-1])}
else{t=o(e,n);n=parseInt(e.getStyle(t),10);var a=i.config.indentOffset||40;isNaN(n)&&(n=0);n+=(r?1:-1)*a;if(0>n)return;n=Math.max(n,0);n=Math.ceil(n/a)*a;e.setStyle(t,n?n+(i.config.indentUnit||'px'):'');''===e.getAttribute('style')&&e.removeAttribute('style')};CKEDITOR.dom.element.setMarker(this.database,e,'indent_processed',1)}};function o(e,t){return'ltr'==(t||e.getComputedStyle('direction'))?'margin-left':'margin-right'};var e=CKEDITOR.dtd.$listItem,a=CKEDITOR.dtd.$list,t=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add('indentblock',{requires:'indent',init:function(r){function c(){l.specificDefinition.apply(this,arguments);this.allowedContent={'div h1 h2 h3 h4 h5 h6 ol p pre ul':{propertiesOnly:!0,styles:s?null:'margin-left,margin-right',classes:s||null}};this.enterBr&&(this.allowedContent.div=!0);this.requiredContent=(this.enterBr?'div':'p')+(s?'('+s.join(',')+')':'{margin-left}');this.jobs={20:{refresh:function(i,a){var r=a.block||a.blockLimit;if(!r.is(e))var l=r.getAscendant(e),r=l&&a.contains(l)||r;r.is(e)&&(r=r.getParent());if(this.enterBr||this.getContext(a)){if(s){var l=s,r=r.$.className.match(this.classNameRegex),c=this.isIndent,l=r?c?r[1]!=l.slice(-1):!0:c;return l?n:t};return this.isIndent?n:r?CKEDITOR[0>=(parseInt(r.getStyle(o(r)),10)||0)?'TRISTATE_DISABLED':'TRISTATE_OFF']:t};return t},exec:function(e){var t=e.getSelection(),t=t&&t.getRanges()[0],n;if(n=e.elementPath().contains(a))i.call(this,n,s);else for(t=t.createIterator(),e=e.config.enterMode,t.enforceRealBlocks=!0,t.enlargeBr=e!=CKEDITOR.ENTER_BR;n=t.getNextParagraph(e==CKEDITOR.ENTER_P?'p':'div');)n.isReadOnly()||i.call(this,n,s);return!0}}}};var l=CKEDITOR.plugins.indent,s=r.config.indentClasses;l.registerCommands(r,{indentblock:new c(r,'indentblock',!0),outdentblock:new c(r,'outdentblock')});CKEDITOR.tools.extend(c.prototype,l.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:s?new RegExp('(?:^|\\s+)('+s.join('|')+')(?\x3d$|\\s)'):null})}})})();(function(){function a(t){function d(e){for(var o=n.startContainer,i=n.endContainer;o&&!o.getParent().equals(e);)o=o.getParent();for(;i&&!i.getParent().equals(e);)i=i.getParent();if(!o||!i)return!1;for(var s=o,o=[],d=!1;!d;)s.equals(i)&&(d=!0),o.push(s),s=s.getNext();if(1>o.length)return!1;s=e.getParents(!0);for(i=0;i<s.length;i++)if(s[i].getName&&a[s[i].getName()]){e=s[i];break};for(var s=l.isIndent?1:-1,i=o[0],o=o[o.length-1],d=CKEDITOR.plugins.list.listToArray(e,c),g=d[o.getCustomData('listarray_index')].indent,i=i.getCustomData('listarray_index');i<=o.getCustomData('listarray_index');i++)if(d[i].indent+=s,0<s){var m=d[i].parent;d[i].parent=new CKEDITOR.dom.element(m.getName(),m.getDocument())};for(i=o.getCustomData('listarray_index')+1;i<d.length&&d[i].indent>g;i++)d[i].indent+=s;o=CKEDITOR.plugins.list.arrayToList(d,c,null,t.config.enterMode,e.getDirection());if(!l.isIndent){var f;if((f=e.getParent())&&f.is('li'))for(var s=o.listNode.getChildren(),h=[],u,i=s.count()-1;0<=i;i--)(u=s.getItem(i))&&u.is&&u.is('li')&&h.push(u)};o&&o.listNode.replace(e);if(h&&h.length)for(i=0;i<h.length;i++){for(u=e=h[i];(u=u.getNext())&&u.is&&u.getName()in a;)CKEDITOR.env.needsNbspFiller&&!e.getFirst(r)&&e.append(n.document.createText(' ')),e.append(u);e.insertAfter(f)};o&&t.fire('contentDomInvalidated');return!0};for(var l=this,c=this.database,a=this.context,s=t.getSelection(),s=(s&&s.getRanges()).createIterator(),n;n=s.getNextRange();){for(var i=n.getCommonAncestor();i&&(i.type!=CKEDITOR.NODE_ELEMENT||!a[i.getName()]);){if(t.editable().equals(i)){i=!1;break};i=i.getParent()};i||(i=n.startPath().contains(a))&&n.setEndAt(i,CKEDITOR.POSITION_BEFORE_END);if(!i){var o=n.getEnclosedNode();o&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName()in a&&(n.setStartAt(o,CKEDITOR.POSITION_AFTER_START),n.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),i=o)};i&&n.startContainer.type==CKEDITOR.NODE_ELEMENT&&n.startContainer.getName()in a&&(o=new CKEDITOR.dom.walker(n),o.evaluator=e,n.startContainer=o.next());i&&n.endContainer.type==CKEDITOR.NODE_ELEMENT&&n.endContainer.getName()in a&&(o=new CKEDITOR.dom.walker(n),o.evaluator=e,n.endContainer=o.previous());if(i)return d(i)};return 0};function e(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is('li')};function r(e){return i(e)&&o(e)};var i=CKEDITOR.dom.walker.whitespaces(!0),o=CKEDITOR.dom.walker.bookmark(!1,!0),t=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add('indentlist',{requires:'indent',init:function(e){function o(e){i.specificDefinition.apply(this,arguments);this.requiredContent=['ul','ol'];e.on('key',function(t){if('wysiwyg'==e.mode&&t.data.keyCode==this.indentKey){var n=this.getContext(e.elementPath());!n||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,e.elementPath(),n)||(e.execCommand(this.relatedGlobal),t.cancel())}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,i){var o=this.getContext(i),a=CKEDITOR.plugins.indentList.firstItemInPath(this.context,i,o);return o&&this.isIndent&&!a?n:t}:function(e,i){return!this.getContext(i)||this.isIndent?t:n},exec:CKEDITOR.tools.bind(a,this)}};var i=CKEDITOR.plugins.indent;i.registerCommands(e,{indentlist:new o(e,'indentlist',!0),outdentlist:new o(e,'outdentlist')});CKEDITOR.tools.extend(o.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}})}});CKEDITOR.plugins.indentList={};CKEDITOR.plugins.indentList.firstItemInPath=function(t,n,i){var o=n.contains(e);i||(i=n.contains(t));return i&&o&&o.equals(i.getFirst(e))}})();CKEDITOR.plugins.add('smiley',{requires:'dialog',init:function(e){e.config.smiley_path=e.config.smiley_path||this.path+'images/';e.addCommand('smiley',new CKEDITOR.dialogCommand('smiley',{allowedContent:'img[alt,height,!src,title,width]',requiredContent:'img'}));e.ui.addButton&&e.ui.addButton('Smiley',{label:e.lang.smiley.toolbar,command:'smiley',toolbar:'insert,50'});CKEDITOR.dialog.add('smiley',this.path+'dialogs/smiley.js')}});CKEDITOR.config.smiley_images='regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png'.split(' ');CKEDITOR.config.smiley_descriptions='smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail'.split(';');(function(){function t(e,t){t=void 0===t||t;var n;if(t)n=e.getComputedStyle('text-align');else{for(;!e.hasAttribute||!e.hasAttribute('align')&&!e.getStyle('text-align');){n=e.getParent();if(!n)break;e=n};n=e.getStyle('text-align')||e.getAttribute('align')||''};n&&(n=n.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,''));!n&&t&&(n='rtl'==e.getComputedStyle('direction')?'right':'left');return n};function e(e,t,n){this.editor=e;this.name=t;this.value=n;this.context='p';t=e.config.justifyClasses;var i=e.config.enterMode==CKEDITOR.ENTER_P?'p':'div';if(t){switch(n){case'left':this.cssClassName=t[0];break;case'center':this.cssClassName=t[1];break;case'right':this.cssClassName=t[2];break;case'justify':this.cssClassName=t[3]};this.cssClassRegex=new RegExp('(?:^|\\s+)(?:'+t.join('|')+')(?\x3d$|\\s)');this.requiredContent=i+'('+this.cssClassName+')'}
else this.requiredContent=i+'{text-align}';this.allowedContent={'caption div h1 h2 h3 h4 h5 h6 p pre td th li':{propertiesOnly:!0,styles:this.cssClassName?null:'text-align',classes:this.cssClassName||null}};e.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)};function n(e){var a=e.editor,i=a.createRange();i.setStartBefore(e.data.node);i.setEndAfter(e.data.node);for(var o=new CKEDITOR.dom.walker(i),t;t=o.next();)if(t.type==CKEDITOR.NODE_ELEMENT)if(!t.equals(e.data.node)&&t.getDirection())i.setStartAfter(t),o=new CKEDITOR.dom.walker(i);else{var n=a.config.justifyClasses;n&&(t.hasClass(n[0])?(t.removeClass(n[0]),t.addClass(n[2])):t.hasClass(n[2])&&(t.removeClass(n[2]),t.addClass(n[0])));n=t.getStyle('text-align');'left'==n?t.setStyle('text-align','right'):'right'==n&&t.setStyle('text-align','left')}};e.prototype={exec:function(e){var o=e.getSelection(),d=e.config.enterMode;if(o){for(var h=o.createBookmarks(),c=o.getRanges(),a=this.cssClassName,r,n,i=e.config.useComputedState,i=void 0===i||i,s=c.length-1;0<=s;s--)for(r=c[s].createIterator(),r.enlargeBr=d!=CKEDITOR.ENTER_BR;n=r.getNextParagraph(d==CKEDITOR.ENTER_P?'p':'div');)if(!n.isReadOnly()){n.removeAttribute('align');n.removeStyle('text-align');var u=a&&(n.$.className=CKEDITOR.tools.ltrim(n.$.className.replace(this.cssClassRegex,''))),l=this.state==CKEDITOR.TRISTATE_OFF&&(!i||t(n,!0)!=this.value);a?l?n.addClass(a):u||n.removeAttribute('class'):l&&n.setStyle('text-align',this.value)};e.focus();e.forceNextSelectionCheck();o.selectBookmarks(h)}},refresh:function(e,n){var i=n.block||n.blockLimit;this.setState('body'!=i.getName()&&t(i,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add('justify',{init:function(t){if(!t.blockless){var i=new e(t,'justifyleft','left'),o=new e(t,'justifycenter','center'),a=new e(t,'justifyright','right'),r=new e(t,'justifyblock','justify');t.addCommand('justifyleft',i);t.addCommand('justifycenter',o);t.addCommand('justifyright',a);t.addCommand('justifyblock',r);t.ui.addButton&&(t.ui.addButton('JustifyLeft',{label:t.lang.justify.left,command:'justifyleft',toolbar:'align,10'}),t.ui.addButton('JustifyCenter',{label:t.lang.justify.center,command:'justifycenter',toolbar:'align,20'}),t.ui.addButton('JustifyRight',{label:t.lang.justify.right,command:'justifyright',toolbar:'align,30'}),t.ui.addButton('JustifyBlock',{label:t.lang.justify.block,command:'justifyblock',toolbar:'align,40'}));t.on('dirChanged',n)}}})})();CKEDITOR.plugins.add('menubutton',{requires:'button,menu',onLoad:function(){var e=function(e){var t=this._,n=t.menu;t.state!==CKEDITOR.TRISTATE_DISABLED&&(t.on&&n?n.hide():(t.previousState=t.state,n||(n=t.menu=new CKEDITOR.menu(e,{panel:{className:'cke_menu_panel',attributes:{'aria-label':e.lang.common.options}}}),n.onHide=CKEDITOR.tools.bind(function(){var n=this.command?e.getCommand(this.command).modes:this.modes;this.setState(!n||n[e.mode]?t.previousState:CKEDITOR.TRISTATE_DISABLED);t.on=0},this),this.onMenu&&n.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),t.on=1,setTimeout(function(){n.show(CKEDITOR.document.getById(t.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){delete t.panel;this.base(t);this.hasArrow=!0;this.click=e},statics:{handler:{create:function(e){return new CKEDITOR.ui.menuButton(e)}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});CKEDITOR.UI_MENUBUTTON='menubutton';(function(){CKEDITOR.plugins.add('language',{requires:'menubutton',init:function(e){var s=e.config.language_list||['ar:Arabic:rtl','fr:French','es:Spanish'],r=this,l=e.lang.language,t={},i,o,a,n;e.addCommand('language',{allowedContent:'span[!lang,!dir]',requiredContent:'span[lang,dir]',contextSensitive:!0,exec:function(e,n){var i=t['language_'+n];if(i)e[i.style.checkActive(e.elementPath(),e)?'removeStyle':'applyStyle'](i.style)},refresh:function(e){this.setState(r.getCurrentLangElement(e)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}});for(n=0;n<s.length;n++)i=s[n].split(':'),o=i[0],a='language_'+o,t[a]={label:i[1],langId:o,group:'language',order:n,ltr:'rtl'!=(''+i[2]).toLowerCase(),onClick:function(){e.execCommand('language',this.langId)},role:'menuitemcheckbox'},t[a].style=new CKEDITOR.style({element:'span',attributes:{lang:o,dir:t[a].ltr?'ltr':'rtl'}});t.language_remove={label:l.remove,group:'language_remove',state:CKEDITOR.TRISTATE_DISABLED,order:t.length,onClick:function(){var t=r.getCurrentLangElement(e);t&&e.execCommand('language',t.getAttribute('lang'))}};e.addMenuGroup('language',1);e.addMenuGroup('language_remove');e.addMenuItems(t);e.ui.add('Language',CKEDITOR.UI_MENUBUTTON,{label:l.button,allowedContent:'span[!lang,!dir]',requiredContent:'span[lang,dir]',toolbar:'bidi,30',command:'language',onMenu:function(){var n={},i=r.getCurrentLangElement(e),o;for(o in t)n[o]=CKEDITOR.TRISTATE_OFF;n.language_remove=i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;i&&(n['language_'+i.getAttribute('lang')]=CKEDITOR.TRISTATE_ON);return n}})},getCurrentLangElement:function(e){var t=e.elementPath();e=t&&t.elements;var i;if(t)for(var n=0;n<e.length;n++)t=e[n],!i&&'span'==t.getName()&&t.hasAttribute('dir')&&t.hasAttribute('lang')&&(i=t);return i}})})();(function(){function t(e){return e.replace(/'/g,'\\$\x26')};function f(e){for(var n,o=e.length,i=[],t=0;t<o;t++)n=e.charCodeAt(t),i.push(n);return'String.fromCharCode('+i.join(',')+')'};function m(e,n){var i=e.plugins.link,r=i.compiledProtectionFunction.params,s,o;o=[i.compiledProtectionFunction.name,'('];for(var a=0;a<r.length;a++)i=r[a].toLowerCase(),s=n[i],0<a&&o.push(','),o.push('\'',s?t(encodeURIComponent(n[i])):'','\'');o.push(')');return o.join('')};function g(e){e=e.config.emailProtection||'';var t;e&&'encode'!=e&&(t={},e.replace(/^([^(]+)\(([^)]+)\)$/,function(e,n,i){t.name=n;t.params=[];i.replace(/[^,\s]+/g,function(e){t.params.push(e)})}));return t};CKEDITOR.plugins.add('link',{requires:'dialog,fakeobjects',onLoad:function(){function t(e){return n.replace(/%1/g,'rtl'==e?'right':'left').replace(/%2/g,'cke_contents_'+e)};var e='background:url('+CKEDITOR.getUrl(this.path+'images'+(CKEDITOR.env.hidpi?'/hidpi':'')+'/anchor.png')+') no-repeat %1 center;border:1px dotted #00f;background-size:16px;',n='.%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{'+e+'padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{'+e+'width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}';CKEDITOR.addCss(t('ltr')+t('rtl'))},init:function(e){var t='a[!href]';CKEDITOR.dialog.isTabEnabled(e,'link','advanced')&&(t=t.replace(']',',accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)'));CKEDITOR.dialog.isTabEnabled(e,'link','target')&&(t=t.replace(']',',target,onclick]'));e.addCommand('link',new CKEDITOR.dialogCommand('link',{allowedContent:t,requiredContent:'a[href]'}));e.addCommand('anchor',new CKEDITOR.dialogCommand('anchor',{allowedContent:'a[!name,id]',requiredContent:'a[name]'}));e.addCommand('unlink',new CKEDITOR.unlinkCommand);e.addCommand('removeAnchor',new CKEDITOR.removeAnchorCommand);e.setKeystroke(CKEDITOR.CTRL+76,'link');e.ui.addButton&&(e.ui.addButton('Link',{label:e.lang.link.toolbar,command:'link',toolbar:'links,10'}),e.ui.addButton('Unlink',{label:e.lang.link.unlink,command:'unlink',toolbar:'links,20'}),e.ui.addButton('Anchor',{label:e.lang.link.anchor.toolbar,command:'anchor',toolbar:'links,30'}));CKEDITOR.dialog.add('link',this.path+'dialogs/link.js');CKEDITOR.dialog.add('anchor',this.path+'dialogs/anchor.js');e.on('doubleclick',function(t){var n=CKEDITOR.plugins.link.getSelectedLink(e)||t.data.element;n.isReadOnly()||(n.is('a')?(t.data.dialog=!n.getAttribute('name')||n.getAttribute('href')&&n.getChildCount()?'link':'anchor',t.data.link=n):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,n)&&(t.data.dialog='anchor'))},null,null,0);e.on('doubleclick',function(t){t.data.dialog in{link:1,anchor:1}&&t.data.link&&e.getSelection().selectElement(t.data.link)},null,null,20);e.addMenuItems&&e.addMenuItems({anchor:{label:e.lang.link.anchor.menu,command:'anchor',group:'anchor',order:1},removeAnchor:{label:e.lang.link.anchor.remove,command:'removeAnchor',group:'anchor',order:5},link:{label:e.lang.link.menu,command:'link',group:'link',order:1},unlink:{label:e.lang.link.unlink,command:'unlink',group:'link',order:5}});e.contextMenu&&e.contextMenu.addListener(function(t){if(!t||t.isReadOnly())return null;t=CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t);if(!t&&!(t=CKEDITOR.plugins.link.getSelectedLink(e)))return null;var n={};t.getAttribute('href')&&t.getChildCount()&&(n={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});t&&t.hasAttribute('name')&&(n.anchor=n.removeAnchor=CKEDITOR.TRISTATE_OFF);return n});this.compiledProtectionFunction=g(e)},afterInit:function(e){e.dataProcessor.dataFilter.addRules({elements:{a:function(t){return t.attributes.name?t.children.length?null:e.createFakeParserElement(t,'cke_anchor','anchor'):null}}});var t=e._.elementsPath&&e._.elementsPath.filters;t&&t.push(function(t,n){if('a'==n&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t)||t.getAttribute('name')&&(!t.getAttribute('href')||!t.getChildCount())))return'anchor'})}});var n=/^javascript:/,i=/^mailto:([^?]+)(?:\?(.+))?$/,o=/subject=([^;?:@&=$,\/]*)/i,a=/body=([^;?:@&=$,\/]*)/i,r=/^#(.*)$/,s=/^((?:http|https|ftp|news):\/\/)?(.*)$/,l=/^(_(?:self|top|parent|blank))$/,c=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,d=/^javascript:([^(]+)\(([^)]+)\)$/,u=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,h=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,e={id:'advId',dir:'advLangDir',accessKey:'advAccessKey',name:'advName',lang:'advLangCode',tabindex:'advTabIndex',title:'advTitle',type:'advContentType','class':'advCSSClasses',charset:'advCharset',style:'advStyles',rel:'advRel'};CKEDITOR.plugins.link={getSelectedLink:function(e){var t=e.getSelection(),n=t.getSelectedElement();return n&&n.is('a')?n:(t=t.getRanges()[0])?(t.shrink(CKEDITOR.SHRINK_TEXT),e.elementPath(t.getCommonAncestor()).contains('a',1)):null},getEditorAnchors:function(e){for(var n=e.editable(),i=n.isInline()&&!e.plugins.divarea?e.document:n,n=i.getElementsByTag('a'),i=i.getElementsByTag('img'),o=[],a=0,t;t=n.getItem(a++);)(t.data('cke-saved-name')||t.hasAttribute('name'))&&o.push({name:t.data('cke-saved-name')||t.getAttribute('name'),id:t.getAttribute('id')});for(a=0;t=i.getItem(a++);)(t=this.tryRestoreFakeAnchor(e,t))&&o.push({name:t.getAttribute('name'),id:t.getAttribute('id')});return o},fakeAnchor:!0,tryRestoreFakeAnchor:function(e,t){if(t&&t.data('cke-real-element-type')&&'anchor'==t.data('cke-real-element-type')){var n=e.restoreRealElement(t);if(n.data('cke-saved-name'))return n}},parseLinkAttributes:function(t,f){var m=f&&(f.data('cke-saved-href')||f.getAttribute('href'))||'',I=t.plugins.link.compiledProtectionFunction,E=t.config.emailProtection,p,g={};m.match(n)&&('encode'==E?m=m.replace(c,function(e,t,n){n=n||'';return'mailto:'+String.fromCharCode.apply(String,t.split(','))+n.replace(/\\'/g,'\'')}):E&&m.replace(d,function(e,t,n){if(t==I.name){g.type='email';e=g.email={};t=/(^')|('$)/g;n=n.match(/[^,\s]+/g);for(var r=n.length,i,o,a=0;a<r;a++)i=decodeURIComponent,o=n[a].replace(t,'').replace(/\\'/g,'\''),o=i(o),i=I.params[a].toLowerCase(),e[i]=o;e.address=[e.name,e.domain].join('@')}}));if(!g.type)if(E=m.match(r))g.type='anchor',g.anchor={},g.anchor.name=g.anchor.id=E[1];else if(E=m.match(i)){p=m.match(o);m=m.match(a);g.type='email';var C=g.email={};C.address=E[1];p&&(C.subject=decodeURIComponent(p[1]));m&&(C.body=decodeURIComponent(m[1]))}
else m&&(p=m.match(s))&&(g.type='url',g.url={},g.url.protocol=p[1],g.url.url=p[2]);if(f){if(m=f.getAttribute('target'))g.target={type:m.match(l)?m:'frame',name:m};else if(m=(m=f.data('cke-pa-onclick')||f.getAttribute('onclick'))&&m.match(u))for(g.target={type:'popup',name:m[1]};E=h.exec(m[2]);)'yes'!=E[2]&&'1'!=E[2]||E[1]in{height:1,width:1,top:1,left:1};?isFinite(E[2])&&(g.target[E[1]]=E[2]):g.target[E[1]]=!0;var m={},T;for(T in e)(E=f.getAttribute(T))&&(m[e[T]]=E);if(T=f.data('cke-saved-name')||m.advName)m.advName=T;CKEDITOR.tools.isEmpty(m)||(g.advanced=m)};return g},getLinkAttributes:function(n,i){var o=n.config.emailProtection||'',r={};switch(i.type){case'url':var o=i.url&&void 0!==i.url.protocol?i.url.protocol:'http://',s=i.url&&CKEDITOR.tools.trim(i.url.url)||'';r['data-cke-saved-href']=0===s.indexOf('/')?s:o+s;break;case'anchor':o=i.anchor&&i.anchor.id;r['data-cke-saved-href']='#'+(i.anchor&&i.anchor.name||o||'');break;case'email':var a=i.email,s=a.address;switch(o){case'':case'encode':var l=encodeURIComponent(a.subject||''),u=encodeURIComponent(a.body||''),a=[];l&&a.push('subject\x3d'+l);u&&a.push('body\x3d'+u);a=a.length?'?'+a.join('\x26'):'';'encode'==o?(o=['javascript:void(location.href\x3d\'mailto:\'+',f(s)],a&&o.push('+\'',t(a),'\''),o.push(')')):o=['mailto:',s,a];break;default:o=s.split('@',2),a.name=o[0],a.domain=o[1],o=['javascript:',m(n,a)]};r['data-cke-saved-href']=o.join('')};if(i.target)if('popup'==i.target.type){for(var o=['window.open(this.href, \'',i.target.name||'','\', \''],d='resizable status location toolbar menubar fullscreen scrollbars dependent'.split(' '),s=d.length,l=function(e){i.target[e]&&d.push(e+'\x3d'+i.target[e])},a=0;a<s;a++)d[a]+=i.target[d[a]]?'\x3dyes':'\x3dno';l('width');l('left');l('height');l('top');o.push(d.join(','),'\'); return false;');r['data-cke-pa-onclick']=o.join('')}
else'notSet'!=i.target.type&&i.target.name&&(r.target=i.target.name);if(i.advanced){for(var c in e)(o=i.advanced[e[c]])&&(r[c]=o);r.name&&(r['data-cke-saved-name']=r.name)};r['data-cke-saved-href']&&(r.href=r['data-cke-saved-href']);c={target:1,onclick:1,'data-cke-pa-onclick':1,'data-cke-saved-name':1};i.advanced&&CKEDITOR.tools.extend(c,e);for(var h in r)delete c[h];return{set:r,removed:CKEDITOR.tools.objectKeys(c)}},showDisplayTextForElement:function(e,t){var n={img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1};return t.widgets&&t.widgets.focused?!1:!e||!e.getName||!e.is(n)}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype={exec:function(e){var t=new CKEDITOR.style({element:'a',type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});e.removeStyle(t)},refresh:function(e,t){var n=t.lastElement&&t.lastElement.getAscendant('a',!0);n&&'a'==n.getName()&&n.getAttribute('href')&&n.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:'a[href]'};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(e){var n=e.getSelection(),i=n.createBookmarks(),t;if(n&&(t=n.getSelectedElement())&&(t.getChildCount()?t.is('a'):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t)))t.remove(1);else if(t=CKEDITOR.plugins.link.getSelectedLink(e))t.hasAttribute('href')?(t.removeAttributes({name:1,'data-cke-saved-name':1}),t.removeClass('cke_anchor')):t.remove(1);n.selectBookmarks(i)},requiredContent:'a[name]'};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})})();(function(){function f(e,t,n){function d(n){if(!(!(s=c[n?'getFirst':'getLast']())||s.is&&s.isBlockBoundary()||!(l=t.root[n?'getPrevious':'getNext'](CKEDITOR.dom.walker.invisible(!0)))||l.is&&l.isBlockBoundary({br:1})))e.document.createElement('br')[n?'insertBefore':'insertAfter'](s)};for(var a=CKEDITOR.plugins.list.listToArray(t.root,n),r=[],i=0;i<t.contents.length;i++){var o=t.contents[i];(o=o.getAscendant('li',!0))&&!o.getCustomData('list_item_processed')&&(r.push(o),CKEDITOR.dom.element.setMarker(n,o,'list_item_processed',!0))};o=null;for(i=0;i<r.length;i++)o=r[i].getCustomData('listarray_index'),a[o].indent=-1;for(i=o+1;i<a.length;i++)if(a[i].indent>a[i-1].indent+1){r=a[i-1].indent+1-a[i].indent;for(o=a[i].indent;a[i]&&a[i].indent>=o;)a[i].indent+=r,i++;i--};var c=CKEDITOR.plugins.list.arrayToList(a,n,null,e.config.enterMode,t.root.getAttribute('dir')).listNode,s,l;d(!0);d();c.replace(t.root);e.fire('contentDomInvalidated')};function o(e,t){this.name=e;this.context=this.type=t;this.allowedContent=t+' li';this.requiredContent=t};function s(e,t,n,i){for(var o,a;o=e[i?'getLast':'getFirst'](u);)(a=o.getDirection(1))!==t.getDirection(1)&&o.setAttribute('dir',a),o.remove(),n?o[i?'insertBefore':'insertAfter'](n):t.append(o,i)};function l(t){function n(n){var i=t[n?'getPrevious':'getNext'](e);i&&i.type==CKEDITOR.NODE_ELEMENT&&i.is(t.getName())&&(s(t,i,null,!n),t.remove(),t=i)};n();n(1)};function c(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.getName()in CKEDITOR.dtd.$block||e.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[e.getName()]['#']};function a(t,o,a){t.fire('saveSnapshot');a.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var r=a.extractContents();o.trim(!1,!0);var f=o.createBookmark(),d=new CKEDITOR.dom.elementPath(o.startContainer),c=d.block,d=d.lastElement.getAscendant('li',1)||c,u=new CKEDITOR.dom.elementPath(a.startContainer),h=u.contains(CKEDITOR.dtd.$listItem),u=u.contains(CKEDITOR.dtd.$list);c?(c=c.getBogus())&&c.remove():u&&(c=u.getPrevious(e))&&n(c)&&c.remove();(c=r.getLast())&&c.type==CKEDITOR.NODE_ELEMENT&&c.is('br')&&c.remove();(c=o.startContainer.getChild(o.startOffset))?r.insertBefore(c):o.startContainer.append(r);h&&(r=i(h))&&(d.contains(h)?(s(r,h.getParent(),h),r.remove()):d.append(r));for(;a.checkStartOfBlock()&&a.checkEndOfBlock();){u=a.startPath();r=u.block;if(!r)break;r.is('li')&&(d=r.getParent(),r.equals(d.getLast(e))&&r.equals(d.getFirst(e))&&(r=d));a.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START);r.remove()};a=a.clone();r=t.editable();a.setEndAt(r,CKEDITOR.POSITION_BEFORE_END);a=new CKEDITOR.dom.walker(a);a.evaluator=function(t){return e(t)&&!n(t)};(a=a.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$list&&l(a);o.moveToBookmark(f);o.select();t.fire('saveSnapshot')};function i(n){return(n=n.getLast(e))&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in t?n:null};var t={ol:1,ul:1},h=CKEDITOR.dom.walker.whitespaces(),r=CKEDITOR.dom.walker.bookmark(),e=function(e){return!(h(e)||r(e))},n=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(e,n,i,o,a){if(!t[e.getName()])return[];o||(o=0);i||(i=[]);for(var d=0,h=e.getChildCount();d<h;d++){var s=e.getChild(d);s.type==CKEDITOR.NODE_ELEMENT&&s.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(s,n,i,o+1);if('li'==s.$.nodeName.toLowerCase()){var r={parent:e,indent:o,element:s,contents:[]};a?r.grandparent=a:(r.grandparent=e.getParent(),r.grandparent&&'li'==r.grandparent.$.nodeName.toLowerCase()&&(r.grandparent=r.grandparent.getParent()));n&&CKEDITOR.dom.element.setMarker(n,s,'listarray_index',i.length);i.push(r);for(var c=0,u=s.getChildCount(),l;c<u;c++)l=s.getChild(c),l.type==CKEDITOR.NODE_ELEMENT&&t[l.getName()]?CKEDITOR.plugins.list.listToArray(l,n,i,o+1,r.grandparent):r.contents.push(l)}};return i},arrayToList:function(n,i,o,a,s){o||(o=0);if(!n||n.length<o+1)return null;for(var m,p=n[o].parent.getDocument(),C=new CKEDITOR.dom.documentFragment(p),g=null,d=o,D=Math.max(n[o].indent,0),l=null,c,h,K=a==CKEDITOR.ENTER_P?'p':'div';;){var u=n[d];m=u.grandparent;c=u.element.getDirection(1);if(u.indent==D){g&&n[d].parent.getName()==g.getName()||(g=n[d].parent.clone(!1,1),s&&g.setAttribute('dir',s),C.append(g));l=g.append(u.element.clone(0,1));c!=g.getDirection(1)&&l.setAttribute('dir',c);for(m=0;m<u.contents.length;m++)l.append(u.contents[m].clone(1,1));d++}
else if(u.indent==Math.max(D,0)+1)u=n[d-1].element.getDirection(1),d=CKEDITOR.plugins.list.arrayToList(n,null,d,a,u!=c?c:null),!l.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=p.$.documentMode&&l.append(p.createText(' ')),l.append(d.listNode),d=d.nextIndex;else if(-1==u.indent&&!o&&m){t[m.getName()]?(l=u.element.clone(!1,!0),c!=m.getDirection(1)&&l.setAttribute('dir',c)):l=new CKEDITOR.dom.documentFragment(p);var g=m.getDirection(1)!=c,I=u.element,T=I.getAttribute('class'),O=I.getAttribute('style'),v=l.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(a!=CKEDITOR.ENTER_BR||g||O||T),f,b=u.contents.length,E;for(m=0;m<b;m++)if(f=u.contents[m],r(f)&&1<b)v?E=f.clone(1,1):l.append(f.clone(1,1));else if(f.type==CKEDITOR.NODE_ELEMENT&&f.isBlockBoundary()){g&&!f.getDirection()&&f.setAttribute('dir',c);h=f;var R=I.getAttribute('style');R&&h.setAttribute('style',R.replace(/([^;])$/,'$1;')+(h.getAttribute('style')||''));T&&f.addClass(T);h=null;E&&(l.append(E),E=null);l.append(f.clone(1,1))}
else v?(h||(h=p.createElement(K),l.append(h),g&&h.setAttribute('dir',c)),O&&h.setAttribute('style',O),T&&h.setAttribute('class',T),E&&(h.append(E),E=null),h.append(f.clone(1,1))):l.append(f.clone(1,1));E&&((h||l).append(E),E=null);l.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&d!=n.length-1&&(CKEDITOR.env.needsBrFiller&&(c=l.getLast())&&c.type==CKEDITOR.NODE_ELEMENT&&c.is('br')&&c.remove(),(c=l.getLast(e))&&c.type==CKEDITOR.NODE_ELEMENT&&c.is(CKEDITOR.dtd.$block)||l.append(p.createElement('br')));c=l.$.nodeName.toLowerCase();'div'!=c&&'p'!=c||l.appendBogus();C.append(l);g=null;d++}
else return null;h=null;if(n.length<=d||Math.max(n[d].indent,0)<D)break};if(i)for(n=C.getFirst();n;){if(n.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(i,n),n.getName()in CKEDITOR.dtd.$listItem&&(o=n,p=s=a=void 0,a=o.getDirection()))){for(s=o.getParent();s&&!(p=s.getDirection());)s=s.getParent();a==p&&o.removeAttribute('dir')};n=n.getNextSourceNode()};return{listNode:C,nextIndex:d}}};var d=/^h[1-6]$/,u=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);o.prototype={exec:function(n){this.refresh(n,n.elementPath());var p=n.config,O=n.getSelection(),g=O&&O.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var T=n.editable();if(T.getFirst(e)){var c=1==g.length&&g[0];(p=c&&c.getEnclosedNode())&&p.is&&this.type==p.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}
else p.enterMode==CKEDITOR.ENTER_BR?T.appendBogus():g[0].fixBlock(1,p.enterMode==CKEDITOR.ENTER_P?'p':'div'),O.selectRanges(g)};for(var p=O.createBookmarks(!0),T=[],C={},g=g.createIterator(),u=0;(c=g.getNextRange())&&++u;){var o=c.getBoundaryNodes(),i=o.startNode,s=o.endNode;i.type==CKEDITOR.NODE_ELEMENT&&'td'==i.getName()&&c.setStartAt(o.startNode,CKEDITOR.POSITION_AFTER_START);s.type==CKEDITOR.NODE_ELEMENT&&'td'==s.getName()&&c.setEndAt(o.endNode,CKEDITOR.POSITION_BEFORE_END);c=c.createIterator();for(c.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;o=c.getNextParagraph();)if(!o.getCustomData('list_block')){CKEDITOR.dom.element.setMarker(C,o,'list_block',1);for(var r=n.elementPath(o),i=r.elements,s=0,r=r.blockLimit,E,a=i.length-1;0<=a&&(E=i[a]);a--)if(t[E.getName()]&&r.contains(E)){r.removeCustomData('list_group_object_'+u);(i=E.getCustomData('list_group_object'))?i.contents.push(o):(i={root:E,contents:[o]},T.push(i),CKEDITOR.dom.element.setMarker(C,E,'list_group_object',i));s=1;break};s||(s=r,s.getCustomData('list_group_object_'+u)?s.getCustomData('list_group_object_'+u).contents.push(o):(i={root:s,contents:[o]},CKEDITOR.dom.element.setMarker(C,s,'list_group_object_'+u,i),T.push(i)))}};for(E=[];0<T.length;)if(i=T.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(t[i.root.getName()]){g=n;u=i;i=C;c=E;s=CKEDITOR.plugins.list.listToArray(u.root,i);r=[];for(o=0;o<u.contents.length;o++)a=u.contents[o],(a=a.getAscendant('li',!0))&&!a.getCustomData('list_item_processed')&&(r.push(a),CKEDITOR.dom.element.setMarker(i,a,'list_item_processed',!0));for(var a=u.root.getDocument(),m=void 0,h=void 0,o=0;o<r.length;o++){var I=r[o].getCustomData('listarray_index'),m=s[I].parent;m.is(this.type)||(h=a.createElement(this.type),m.copyAttributes(h,{start:1,type:1}),h.removeStyle('list-style-type'),s[I].parent=h)};i=CKEDITOR.plugins.list.arrayToList(s,i,null,g.config.enterMode);s=void 0;r=i.listNode.getChildCount();for(o=0;o<r&&(s=i.listNode.getChild(o));o++)s.getName()==this.type&&c.push(s);i.listNode.replace(u.root);g.fire('contentDomInvalidated')}
else{s=n;c=i;o=E;r=c.contents;g=c.root.getDocument();u=[];1==r.length&&r[0].equals(c.root)&&(i=g.createElement('div'),r[0].moveChildren&&r[0].moveChildren(i),r[0].append(i),r[0]=i);c=c.contents[0].getParent();for(a=0;a<r.length;a++)c=c.getCommonAncestor(r[a].getParent());m=s.config.useComputedState;s=i=void 0;m=void 0===m||m;for(a=0;a<r.length;a++)for(h=r[a];I=h.getParent();){if(I.equals(c)){u.push(h);!s&&h.getDirection()&&(s=1);h=h.getDirection(m);null!==i&&(i=i&&i!=h?null:h);break};h=I};if(!(1>u.length)){r=u[u.length-1].getNext();a=g.createElement(this.type);o.push(a);for(m=o=void 0;u.length;)o=u.shift(),m=g.createElement('li'),h=o,h.is('pre')||d.test(h.getName())||'false'==h.getAttribute('contenteditable')?o.appendTo(m):(o.copyAttributes(m),i&&o.getDirection()&&(m.removeStyle('direction'),m.removeAttribute('dir')),o.moveChildren(m),o.remove()),m.appendTo(a);i&&s&&a.setAttribute('dir',i);r?a.insertBefore(r):a.appendTo(c)}}
else this.state==CKEDITOR.TRISTATE_ON&&t[i.root.getName()]&&f.call(this,n,i,C);for(a=0;a<E.length;a++)l(E[a]);CKEDITOR.dom.element.clearAllMarkers(C);O.selectBookmarks(p);n.focus()},refresh:function(e,n){var i=n.contains(t,1),o=n.blockLimit||n.root;i&&o.contains(i)?this.setState(i.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add('list',{requires:'indentlist',init:function(r){r.blockless||(r.addCommand('numberedlist',new o('numberedlist','ol')),r.addCommand('bulletedlist',new o('bulletedlist','ul')),r.ui.addButton&&(r.ui.addButton('NumberedList',{label:r.lang.list.numberedlist,command:'numberedlist',directional:!0,toolbar:'list,10'}),r.ui.addButton('BulletedList',{label:r.lang.list.bulletedlist,command:'bulletedlist',directional:!0,toolbar:'list,20'})),r.on('key',function(o){var u=o.data.domEvent.getKey(),d;if('wysiwyg'==r.mode&&u in{8:1,46:1}){var l=r.getSelection().getRanges()[0],f=l&&l.startPath();if(l&&l.collapsed){var E=8==u,g=r.editable(),h=new CKEDITOR.dom.walker(l.clone());h.evaluator=function(t){return e(t)&&!n(t)};h.guard=function(e,t){return!(t&&e.type==CKEDITOR.NODE_ELEMENT&&e.is('table'))};u=l.clone();if(E){var s;(s=f.contains(t))&&l.checkBoundaryOfElement(s,CKEDITOR.START)&&(s=s.getParent())&&s.is('li')&&(s=i(s))?(d=s,s=s.getPrevious(e),u.moveToPosition(s&&n(s)?s:d,CKEDITOR.POSITION_BEFORE_START)):(h.range.setStartAt(g,CKEDITOR.POSITION_AFTER_START),h.range.setEnd(l.startContainer,l.startOffset),(s=h.previous())&&s.type==CKEDITOR.NODE_ELEMENT&&(s.getName()in t||s.is('li'))&&(s.is('li')||(h.range.selectNodeContents(s),h.reset(),h.evaluator=c,s=h.previous()),d=s,u.moveToElementEditEnd(d),u.moveToPosition(u.endPath().block,CKEDITOR.POSITION_BEFORE_END)));if(d)a(r,u,l),o.cancel();else{var m=f.contains(t);m&&l.checkBoundaryOfElement(m,CKEDITOR.START)&&(d=m.getFirst(e),l.checkBoundaryOfElement(d,CKEDITOR.START)&&(s=m.getPrevious(e),i(d)?s&&(l.moveToElementEditEnd(s),l.select()):r.execCommand('outdent'),o.cancel()))}}
else if(d=f.contains('li')){if(h.range.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),E=(g=d.getLast(e))&&c(g)?g:d,f=0,(s=h.next())&&s.type==CKEDITOR.NODE_ELEMENT&&s.getName()in t&&s.equals(g)?(f=1,s=h.next()):l.checkBoundaryOfElement(E,CKEDITOR.END)&&(f=2),f&&s){l=l.clone();l.moveToElementEditStart(s);if(1==f&&(u.optimize(),!u.startContainer.equals(d))){for(d=u.startContainer;d.is(CKEDITOR.dtd.$inline);)m=d,d=d.getParent();m&&u.moveToPosition(m,CKEDITOR.POSITION_AFTER_END)};2==f&&(u.moveToPosition(u.endPath().block,CKEDITOR.POSITION_BEFORE_END),l.endPath().block&&l.moveToPosition(l.endPath().block,CKEDITOR.POSITION_AFTER_START));a(r,u,l);o.cancel()}}
else h.range.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),(s=h.next())&&s.type==CKEDITOR.NODE_ELEMENT&&s.is(t)&&(s=s.getFirst(e),f.block&&l.checkStartOfBlock()&&l.checkEndOfBlock()?(f.block.remove(),l.moveToElementEditStart(s),l.select()):i(s)?(l.moveToElementEditStart(s),l.select()):(l=l.clone(),l.moveToElementEditStart(s),a(r,u,l)),o.cancel());setTimeout(function(){r.selectionChange(1)})}}}))}})})();(function(){CKEDITOR.plugins.liststyle={requires:'dialog,contextmenu',init:function(e){if(!e.blockless){var t;t=new CKEDITOR.dialogCommand('numberedListStyle',{requiredContent:'ol',allowedContent:'ol{list-style-type}[start]'});t=e.addCommand('numberedListStyle',t);e.addFeature(t);CKEDITOR.dialog.add('numberedListStyle',this.path+'dialogs/liststyle.js');t=new CKEDITOR.dialogCommand('bulletedListStyle',{requiredContent:'ul',allowedContent:'ul{list-style-type}'});t=e.addCommand('bulletedListStyle',t);e.addFeature(t);CKEDITOR.dialog.add('bulletedListStyle',this.path+'dialogs/liststyle.js');e.addMenuGroup('list',108);e.addMenuItems({numberedlist:{label:e.lang.liststyle.numberedTitle,group:'list',command:'numberedListStyle'},bulletedlist:{label:e.lang.liststyle.bulletedTitle,group:'list',command:'bulletedListStyle'}});e.contextMenu.addListener(function(e){if(!e||e.isReadOnly())return null;for(;e;){var t=e.getName();if('ol'==t)return{numberedlist:CKEDITOR.TRISTATE_OFF};if('ul'==t)return{bulletedlist:CKEDITOR.TRISTATE_OFF};e=e.getParent()};return null})}}};CKEDITOR.plugins.add('liststyle',CKEDITOR.plugins.liststyle)})();(function(){function H(t,n,i){return e(n)&&e(i)&&i.equals(n.getNext(function(e){return!(m(e)||g(e)||a(e))}))};function d(e){this.upper=e[0];this.lower=e[1];this.set.apply(this,e.slice(2))};function y(t){var n=t.element;if(n&&e(n)&&(n=n.getAscendant(t.triggers,!0))&&t.editable.contains(n)){var i=x(n);if('true'==i.getAttribute('contenteditable'))return n;if(i.is(t.triggers))return i};return null};function Y(e,t,i){n(e,t);n(e,i);e=t.size.bottom;i=i.size.top;return e&&i?0|(e+i)/2:e||i};function l(t,n,i){return n=n[i?'getPrevious':'getNext'](function(n){return n&&n.type==CKEDITOR.NODE_TEXT&&!m(n)||e(n)&&!a(n)&&!u(t,n)})};function t(e,t,n){return e>t&&e<n};function x(e,t){if(e.data('cke-editable'))return null;for(t||(e=e.getParent());e&&!e.data('cke-editable');){if(e.hasAttribute('contenteditable'))return e;e=e.getParent()};return null};function Z(e){var r=e.doc,a=E('\x3cspan contenteditable\x3d"false" style\x3d"'+K+'position:absolute;border-top:1px dashed '+e.boxColor+'"\x3e\x3c/span\x3e',r),l=CKEDITOR.getUrl(this.path+'images/'+(i.hidpi?'hidpi/':'')+'icon'+(e.rtl?'-rtl':'')+'.png');o(a,{attach:function(){this.wrap.getParent()||this.wrap.appendTo(e.editable,!0);return this},lineChildren:[o(E('\x3cspan title\x3d"'+e.editor.lang.magicline.title+'" contenteditable\x3d"false"\x3e\x26#8629;\x3c/span\x3e',r),{base:K+'height:17px;width:17px;'+(e.rtl?'left':'right')+':17px;background:url('+l+') center no-repeat '+e.boxColor+';cursor:pointer;'+(i.hc?'font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;':'')+(i.hidpi?'background-size: 9px 10px;':''),looks:['top:-8px; border-radius: 2px;','top:-17px; border-radius: 2px 2px 0px 0px;','top:-1px; border-radius: 0px 0px 2px 2px;']}),o(E(q,r),{base:M+'left:0px;border-left-color:'+e.boxColor+';',looks:['border-width:8px 0 8px 8px;top:-8px','border-width:8px 0 0 8px;top:-8px','border-width:0 0 8px 8px;top:0px']}),o(E(q,r),{base:M+'right:0px;border-right-color:'+e.boxColor+';',looks:['border-width:8px 8px 8px 0;top:-8px','border-width:8px 8px 0 0;top:-8px','border-width:0 8px 8px 0;top:0px']})],detach:function(){this.wrap.getParent()&&this.wrap.remove();return this},mouseNear:function(){n(e,this);var o=e.holdDistance,i=this.size;return i&&t(e.mouse.y,i.top-o,i.bottom+o)&&t(e.mouse.x,i.left-o,i.right+o)?!0:!1},place:function(){var o=e.view,m=e.editable,c=e.trigger,a=c.upper,r=c.lower,l=a||r,u=l.getParent(),i={};this.trigger=c;a&&n(e,a,!0);r&&n(e,r,!0);n(e,u,!0);e.inInlineMode&&D(e,!0);u.equals(m)?(i.left=o.scroll.x,i.right=-o.scroll.x,i.width=''):(i.left=l.size.left-l.size.margin.left+o.scroll.x-(e.inInlineMode?o.editable.left+o.editable.border.left:0),i.width=l.size.outerWidth+l.size.margin.left+l.size.margin.right+o.scroll.x,i.right='');a&&r?i.top=a.size.margin.bottom===r.size.margin.top?0|a.size.bottom+a.size.margin.bottom/2:a.size.margin.bottom<r.size.margin.top?a.size.bottom+a.size.margin.bottom:a.size.bottom+a.size.margin.bottom-r.size.margin.top:a?r||(i.top=a.size.bottom+a.size.margin.bottom):i.top=r.size.top-r.size.margin.top;c.is(h)||t(i.top,o.scroll.y-15,o.scroll.y+5)?(i.top=e.inInlineMode?0:o.scroll.y,this.look(h)):c.is(f)||t(i.top,o.pane.bottom-5,o.pane.bottom+15)?(i.top=e.inInlineMode?o.editable.height+o.editable.padding.top+o.editable.padding.bottom:o.pane.bottom-1,this.look(f)):(e.inInlineMode&&(i.top-=o.editable.top+o.editable.border.top),this.look(s));e.inInlineMode&&(i.top--,i.top+=o.editable.scroll.top,i.left+=o.editable.scroll.left);for(var d in i)i[d]=CKEDITOR.tools.cssLength(i[d]);this.setStyles(i)},look:function(e){if(this.oldLook!=e){for(var n=this.lineChildren.length,t;n--;)(t=this.lineChildren[n]).setAttribute('style',t.base+t.looks[0|e/2]);this.oldLook=e}},wrap:new v('span',e.doc)});for(r=a.lineChildren.length;r--;)a.lineChildren[r].appendTo(a);a.look(s);a.appendTo(a.wrap);a.unselectable();a.lineChildren[0].on('mouseup',function(t){a.detach();k(e,function(t){var n=e.line.trigger;t[n.is(T)?'insertBefore':'insertAfter'](n.is(T)?n.lower:n.upper)},!0);e.editor.focus();i.ie||e.enterMode==CKEDITOR.ENTER_BR||e.hotNode.scrollIntoView();t.data.preventDefault(!0)});a.on('mousedown',function(e){e.data.preventDefault(!0)});e.line=a};function k(e,t,n){var r=new CKEDITOR.dom.range(e.doc),a=e.editor,o;i.ie&&e.enterMode==CKEDITOR.ENTER_BR?o=e.doc.createText(I):(o=(o=x(e.element,!0))&&o.data('cke-enter-mode')||e.enterMode,o=new v(p[o],e.doc),o.is('br')||e.doc.createText(I).appendTo(o));n&&a.fire('saveSnapshot');t(o);r.moveToPosition(o,CKEDITOR.POSITION_AFTER_START);a.getSelection().selectRanges([r]);e.hotNode=o;n&&a.fire('saveSnapshot')};function z(t,n){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function o(e){var o=i.ie&&9>i.version?' ':I,a=t.hotNode&&t.hotNode.getText()==o&&t.element.equals(t.hotNode)&&t.lastCmdDirection===!!n;k(t,function(i){a&&t.hotNode&&t.hotNode.remove();i[n?'insertAfter':'insertBefore'](e);i.setAttributes({'data-cke-magicline-hot':1,'data-cke-magicline-dir':!!n});t.lastCmdDirection=!!n});i.ie||t.enterMode==CKEDITOR.ENTER_BR||t.hotNode.scrollIntoView();t.line.detach()};return function(i){i=i.getSelection().getStartElement();var a;i=i.getAscendant(P,1);if(!U(t,i)&&i&&!i.equals(t.editable)&&!i.contains(t.editable)){(a=x(i))&&'false'==a.getAttribute('contenteditable')&&(i=a);t.element=i;a=l(t,i,!n);var r;e(a)&&a.is(t.triggers)&&a.is(X)&&(!l(t,a,!n)||(r=l(t,a,!n))&&e(r)&&r.is(t.triggers))?o(a):(r=y(t,i),e(r)&&(l(t,r,!n)?(i=l(t,r,!n))&&e(i)&&i.is(t.triggers)&&o(r):o(r)))}}}()}};function u(e,t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||!t.$)return!1;var n=e.line;return n.wrap.equals(t)||n.wrap.contains(t)};function e(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.$};function a(t){if(!e(t))return!1;var n;(n=j(t))||(e(t)?(n={left:1,right:1,center:1},n=!(!n[t.getComputedStyle('float')]&&!n[t.getAttribute('align')])):n=!1);return n};function j(e){return!!{absolute:1,fixed:1}[e.getComputedStyle('position')]};function O(t,n){return e(n)?n.is(t.triggers):null};function U(e,t){if(!t)return!1;for(var i=t.getParents(1),o=i.length;o--;)for(var n=e.tabuList.length;n--;)if(i[o].hasAttribute(e.tabuList[n]))return!0;return!1};function J(e,t,i){t=t[i?'getLast':'getFirst'](function(t){return e.isRelevant(t)&&!t.is(G)});if(!t)return!1;n(e,t);return i?t.size.top>e.mouse.y:t.size.bottom<e.mouse.y};function V(i){var o=i.editable,c=i.mouse,r=i.view,E=i.triggerOffset;D(i);var l=c.y>(i.inInlineMode?r.editable.top+r.editable.height/2:Math.min(r.editable.height,r.pane.height)/2),o=o[l?'getLast':'getFirst'](function(e){return!(m(e)||g(e))});if(!o)return null;u(i,o)&&(o=i.line.wrap[l?'getPrevious':'getNext'](function(e){return!(m(e)||g(e))}));if(!e(o)||a(o)||!O(i,o))return null;n(i,o);return!l&&0<=o.size.top&&t(c.y,0,o.size.top+E)?(i=i.inInlineMode||0===r.scroll.y?h:s,new d([null,o,T,C,i])):l&&o.size.bottom<=r.pane.height&&t(c.y,o.size.bottom-E,r.pane.height)?(i=i.inInlineMode||t(o.size.bottom,r.pane.height-E,r.pane.height)?f:s,new d([o,null,L,C,i])):null};function W(i){var E=i.mouse,p=i.view,u=i.triggerOffset,o=y(i);if(!o)return null;n(i,o);var u=Math.min(u,0|o.size.outerHeight/2),m=[],g,r;if(t(E.y,o.size.top-1,o.size.top+u))r=!1;else if(t(E.y,o.size.bottom-u,o.size.bottom+1))r=!0;else return null;if(a(o)||J(i,o,r)||o.getParent().is(B))return null;var c=l(i,o,!r);if(c){if(c&&c.type==CKEDITOR.NODE_TEXT)return null;if(e(c)){if(a(c)||!O(i,c)||c.getParent().is(B))return null;m=[c,o][r?'reverse':'concat']().concat([b,C])}}
else o.equals(i.editable[r?'getLast':'getFirst'](i.isRelevant))?(D(i),r&&t(E.y,o.size.bottom-u,p.pane.height)&&t(o.size.bottom,p.pane.height-u,p.pane.height)?g=f:t(E.y,0,o.size.top+u)&&(g=h)):g=s,m=[null,o][r?'reverse':'concat']().concat([r?L:T,C,g,o.equals(i.editable[r?'getLast':'getFirst'](i.isRelevant))?r?f:h:s]);return 0 in m?new d(m):null};function N(e,t,n,i){for(var d=t.getDocumentPosition(),l={},u={},c={},a={},s=r.length;s--;)l[r[s]]=parseInt(t.getComputedStyle.call(t,'border-'+r[s]+'-width'),10)||0,c[r[s]]=parseInt(t.getComputedStyle.call(t,'padding-'+r[s]),10)||0,u[r[s]]=parseInt(t.getComputedStyle.call(t,'margin-'+r[s]),10)||0;n&&!i||R(e,i);a.top=d.y-(n?0:e.view.scroll.y);a.left=d.x-(n?0:e.view.scroll.x);a.outerWidth=t.$.offsetWidth;a.outerHeight=t.$.offsetHeight;a.height=a.outerHeight-(c.top+c.bottom+l.top+l.bottom);a.width=a.outerWidth-(c.left+c.right+l.left+l.right);a.bottom=a.top+a.outerHeight;a.right=a.left+a.outerWidth;e.inInlineMode&&(a.scroll={top:t.$.scrollTop,left:t.$.scrollLeft});return o({border:l,padding:c,margin:u,ignoreScroll:n},a,!0)};function n(t,n,i){if(!e(n))return n.size=null;if(!n.size)n.size={};else if(n.size.ignoreScroll==i&&n.size.date>new Date-F)return null;return o(n.size,N(t,n,i),{date:+new Date},!0)};function D(e,t){e.view.editable=N(e,e.editable,t,!0)};function R(e,t){e.view||(e.view={});var i=e.view;if(!(!t&&i&&i.date>new Date-F)){var n=e.win,i=n.getScrollPosition(),n=n.getViewPaneSize();o(e.view,{scroll:{x:i.x,y:i.y,width:e.doc.$.documentElement.scrollWidth-n.width,height:e.doc.$.documentElement.scrollHeight-n.height},pane:{width:n.width,height:n.height,bottom:n.height+i.y},date:+new Date},!0)}};function Q(e,t,n,i){for(var l=i,c=i,a=0,r=!1,s=!1,u=e.view.pane.height,o=e.mouse;o.y+a<u&&0<o.y-a;){r||(r=t(l,i));s||(s=t(c,i));!r&&0<o.y-a&&(l=n(e,{x:o.x,y:o.y-a}));!s&&o.y+a<u&&(c=n(e,{x:o.x,y:o.y+a}));if(r&&s)break;a+=2};return new d([l,c,null,null])};CKEDITOR.plugins.add('magicline',{init:function(t){var r=t.config,f=r.magicline_triggerOffset||30,n={editor:t,enterMode:r.enterMode,triggerOffset:f,holdDistance:0|f*(r.magicline_holdDistance||.5),boxColor:r.magicline_color||'#ff0000',rtl:'rtl'==r.contentsLangDirection,tabuList:['data-cke-hidden-sel'].concat(r.magicline_tabuList||[]),triggers:r.magicline_everywhere?P:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},m,h,s;n.isRelevant=function(t){return e(t)&&!u(n,t)&&!a(t)};t.on('contentDom',function(){var e=t.editable(),a=t.document,f=t.window;o(n,{editable:e,inInlineMode:e.isInline(),doc:a,win:f,hotNode:null},!0);n.boundary=n.inInlineMode?n.editable:n.doc.getDocumentElement();e.is(c.$inline)||(n.inInlineMode&&!j(e)&&e.setStyles({position:'relative',top:null,left:null}),Z.call(this,n),R(n),e.attachListener(t,'beforeUndoImage',function(){n.line.detach()}),e.attachListener(t,'beforeGetData',function(){n.line.wrap.getParent()&&(n.line.detach(),t.once('getData',function(){n.line.attach()},null,null,1E3))},null,null,0),e.attachListener(n.inInlineMode?a:a.getWindow().getFrame(),'mouseout',function(e){if('wysiwyg'==t.mode)if(n.inInlineMode){var a=e.data.$.clientX;e=e.data.$.clientY;R(n);D(n,!0);var i=n.view.editable,o=n.view.scroll;a>i.left-o.x&&a<i.right-o.x&&e>i.top-o.y&&e<i.bottom-o.y||(clearTimeout(s),s=null,n.line.detach())}
else clearTimeout(s),s=null,n.line.detach()}),e.attachListener(e,'keyup',function(){n.hiddenMode=0}),e.attachListener(e,'keydown',function(e){if('wysiwyg'==t.mode)switch(e.data.getKeystroke()){case 2228240:case 16:n.hiddenMode=1,n.line.detach()}}),e.attachListener(n.inInlineMode?e:a,'mousemove',function(e){h=!0;if('wysiwyg'==t.mode&&!t.readOnly&&!s){var i={x:e.data.$.clientX,y:e.data.$.clientY};s=setTimeout(function(){n.mouse=i;s=n.trigger=null;R(n);h&&!n.hiddenMode&&t.focusManager.hasFocus&&!n.line.mouseNear()&&(n.element=S(n,!0))&&((n.trigger=V(n)||W(n)||w(n))&&!U(n,n.trigger.upper||n.trigger.lower)?n.line.attach().place():(n.trigger=null,n.line.detach()),h=!1)},30)}}),e.attachListener(f,'scroll',function(){'wysiwyg'==t.mode&&(n.line.detach(),i.webkit&&(n.hiddenMode=1,clearTimeout(m),m=setTimeout(function(){n.mouseDown||(n.hiddenMode=0)},50)))}),e.attachListener(A?a:f,'mousedown',function(){'wysiwyg'==t.mode&&(n.line.detach(),n.hiddenMode=1,n.mouseDown=1)}),e.attachListener(A?a:f,'mouseup',function(){n.hiddenMode=0;n.mouseDown=0}),t.addCommand('accessPreviousSpace',z(n)),t.addCommand('accessNextSpace',z(n,!0)),t.setKeystroke([[r.magicline_keystrokePrevious,'accessPreviousSpace'],[r.magicline_keystrokeNext,'accessNextSpace']]),t.on('loadSnapshot',function(){var e,i,o,a;for(a in{p:1,br:1,div:1})for(e=t.document.getElementsByTag(a),o=e.count();o--;)if((i=e.getItem(o)).data('cke-magicline-hot')){n.hotNode=i;n.lastCmdDirection='true'===i.data('cke-magicline-dir')?!0:!1;return}}),this.backdoor={accessFocusSpace:k,boxTrigger:d,isLine:u,getAscendantTrigger:y,getNonEmptyNeighbour:l,getSize:N,that:n,triggerEdge:W,triggerEditable:V,triggerExpand:w})},this)}});var o=CKEDITOR.tools.extend,v=CKEDITOR.dom.element,E=v.createFromHtml,i=CKEDITOR.env,A=CKEDITOR.env.ie&&9>CKEDITOR.env.version,c=CKEDITOR.dtd,p={},T=128,L=64,b=32,C=16,h=4,f=2,s=1,I=' ',B=c.$listItem,G=c.$tableContent,X=o({},c.$nonEditable,c.$empty),P=c.$block,F=100,K='width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;',M=K+'border-color:transparent;display:block;border-style:solid;',q='\x3cspan\x3e'+I+'\x3c/span\x3e';p[CKEDITOR.ENTER_BR]='br';p[CKEDITOR.ENTER_P]='p';p[CKEDITOR.ENTER_DIV]='div';d.prototype={set:function(e,t,n){this.properties=e+t+(n||s);return this},is:function(e){return(this.properties&e)==e}};var S=function(){function e(e,t){var n=e.$.elementFromPoint(t.x,t.y);return n&&n.nodeType?new CKEDITOR.dom.element(n):null};return function(t,n,o){if(!t.mouse)return null;var r=t.doc,s=t.line.wrap;o=o||t.mouse;var a=e(r,o);n&&u(t,a)&&(s.hide(),a=e(r,o),s.show());return!a||a.type!=CKEDITOR.NODE_ELEMENT||!a.$||i.ie&&9>i.version&&!t.boundary.equals(a)&&!t.boundary.contains(a)?null:a}}(),m=CKEDITOR.dom.walker.whitespaces(),g=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),w=function(){function o(o){var r=o.element,a,s,l;if(!e(r)||r.contains(o.editable)||r.isReadOnly())return null;l=Q(o,function(e,t){return!t.equals(e)},function(e,t){return S(e,!0,t)},r);a=l.upper;s=l.lower;if(H(o,a,s))return l.set(b,8);if(a&&r.contains(a))for(;!a.getParent().equals(r);)a=a.getParent();else a=r.getFirst(function(e){return i(o,e)});if(s&&r.contains(s))for(;!s.getParent().equals(r);)s=s.getParent();else s=r.getLast(function(e){return i(o,e)});if(!a||!s)return null;n(o,a);n(o,s);if(!t(o.mouse.y,a.size.top,s.size.bottom))return null;for(var r=Number.MAX_VALUE,h,c,d,u;s&&!s.equals(a)&&(c=a.getNext(o.isRelevant));)h=Math.abs(Y(o,a,c)-o.mouse.y),h<r&&(r=h,d=a,u=c),a=c,n(o,a);if(!d||!u||!t(o.mouse.y,d.size.top,u.size.bottom))return null;l.upper=d;l.lower=u;return l.set(b,8)};function i(e,t){return!(t&&t.type==CKEDITOR.NODE_TEXT||g(t)||a(t)||u(e,t)||t.type==CKEDITOR.NODE_ELEMENT&&t.$&&t.is('br'))};return function(e){var i=o(e),t;if(t=i){t=i.upper;var n=i.lower;t=!t||!n||a(n)||a(t)||n.equals(t)||t.equals(n)||n.contains(t)||t.contains(n)?!1:O(e,t)&&O(e,n)&&H(e,t,n)?!0:!1};return t?i:null}}(),r=['top','left','right','bottom']})();CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51;CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52;(function(){function t(e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||'form'!=e.getName())return[];for(var i=[],o=['style','className'],n=0;n<o.length;n++){var t=e.$.elements.namedItem(o[n]);t&&(t=new CKEDITOR.dom.element(t),i.push([t,t.nextSibling]),t.remove())};return i};function n(e,t){if(e&&e.type==CKEDITOR.NODE_ELEMENT&&'form'==e.getName()&&0<t.length)for(var n=t.length-1;0<=n;n--){var i=t[n][0],o=t[n][1];o?i.insertBefore(o):i.appendTo(e)}};function e(e,i){var r=t(e),a={},o=e.$;i||(a['class']=o.className||'',o.className='');a.inline=o.style.cssText||'';i||(o.style.cssText='position: static; overflow: visible');n(r);return a};function i(e,i){var a=t(e),o=e.$;'class'in i&&(o.className=i['class']);'inline'in i&&(o.style.cssText=i.inline);n(a)};function o(e){if(!e.editable().isInline()){var n=CKEDITOR.instances,i;for(i in n){var t=n[i];'wysiwyg'!=t.mode||t.readOnly||(t=t.document.getBody(),t.setAttribute('contentEditable',!1),t.setAttribute('contentEditable',!0))};e.editable().hasFocus&&(e.toolbox.focus(),e.focus())}};CKEDITOR.plugins.add('maximize',{init:function(t){function d(){var e=n.getViewPaneSize();t.resize(e.width,e.height,null,!0)};if(t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var c=t.lang,l=CKEDITOR.document,n=l.getWindow(),a,r,s,u=CKEDITOR.TRISTATE_OFF;t.addCommand('maximize',{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var m=t.container.getFirst(function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass('cke_inner')}),f=t.ui.space('contents');if('wysiwyg'==t.mode){var h=t.getSelection();a=h&&h.getRanges();r=n.getScrollPosition()}
else{var g=t.editable().$;a=!CKEDITOR.env.ie&&[g.selectionStart,g.selectionEnd];r=[g.scrollLeft,g.scrollTop]};if(this.state==CKEDITOR.TRISTATE_OFF){n.on('resize',d);s=n.getScrollPosition();for(h=t.container;h=h.getParent();)h.setCustomData('maximize_saved_styles',e(h)),h.setStyle('z-index',t.config.baseFloatZIndex-5);f.setCustomData('maximize_saved_styles',e(f,!0));m.setCustomData('maximize_saved_styles',e(m,!0));f={overflow:CKEDITOR.env.webkit?'':'hidden',width:0,height:0};l.getDocumentElement().setStyles(f);!CKEDITOR.env.gecko&&l.getDocumentElement().setStyle('position','fixed');CKEDITOR.env.gecko&&CKEDITOR.env.quirks||l.getBody().setStyles(f);CKEDITOR.env.ie?setTimeout(function(){n.$.scrollTo(0,0)},0):n.$.scrollTo(0,0);m.setStyle('position',CKEDITOR.env.gecko&&CKEDITOR.env.quirks?'fixed':'absolute');m.$.offsetLeft;m.setStyles({'z-index':t.config.baseFloatZIndex-5,left:'0px',top:'0px'});m.addClass('cke_maximized');d();f=m.getDocumentPosition();m.setStyles({left:-1*f.x+'px',top:-1*f.y+'px'});CKEDITOR.env.gecko&&o(t)}
else if(this.state==CKEDITOR.TRISTATE_ON){n.removeListener('resize',d);for(var h=[f,m],E=0;E<h.length;E++)i(h[E],h[E].getCustomData('maximize_saved_styles')),h[E].removeCustomData('maximize_saved_styles');for(h=t.container;h=h.getParent();)i(h,h.getCustomData('maximize_saved_styles')),h.removeCustomData('maximize_saved_styles');CKEDITOR.env.ie?setTimeout(function(){n.$.scrollTo(s.x,s.y)},0):n.$.scrollTo(s.x,s.y);m.removeClass('cke_maximized');CKEDITOR.env.webkit&&(m.setStyle('display','inline'),setTimeout(function(){m.setStyle('display','block')},0));t.fire('resize',{outerHeight:t.container.$.offsetHeight,contentsHeight:f.$.offsetHeight,outerWidth:t.container.$.offsetWidth})};this.toggleState();if(h=this.uiItems[0])f=this.state==CKEDITOR.TRISTATE_OFF?c.maximize.maximize:c.maximize.minimize,h=CKEDITOR.document.getById(h._.id),h.getChild(1).setHtml(f),h.setAttribute('title',f),h.setAttribute('href','javascript:void("'+f+'");');'wysiwyg'==t.mode?a?(CKEDITOR.env.gecko&&o(t),t.getSelection().selectRanges(a),(g=t.getSelection().getStartElement())&&g.scrollIntoView(!0)):n.$.scrollTo(r.x,r.y):(a&&(g.selectionStart=a[0],g.selectionEnd=a[1]),g.scrollLeft=r[0],g.scrollTop=r[1]);a=r=null;u=this.state;t.fire('maximize',this.state)},canUndo:!1});t.ui.addButton&&t.ui.addButton('Maximize',{label:c.maximize.maximize,command:'maximize',toolbar:'tools,10'});t.on('mode',function(){var e=t.getCommand('maximize');e.setState(e.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:u)},null,null,100)}}})})();CKEDITOR.plugins.add('newpage',{init:function(e){e.addCommand('newpage',{modes:{wysiwyg:1,source:1},exec:function(e){var t=this;e.setData(e.config.newpage_html||'',function(){e.focus();setTimeout(function(){e.fire('afterCommandExec',{name:'newpage',command:t});e.selectionChange()},200)})},async:!0});e.ui.addButton&&e.ui.addButton('NewPage',{label:e.lang.newpage.toolbar,command:'newpage',toolbar:'document,20'})}});(function(){function e(e){return{'aria-label':e,'class':'cke_pagebreak',contenteditable:'false','data-cke-display-name':'pagebreak','data-cke-pagebreak':1,style:'page-break-after: always',title:e}};CKEDITOR.plugins.add('pagebreak',{requires:'fakeobjects',onLoad:function(){var e=('background:url('+CKEDITOR.getUrl(this.path+'images/pagebreak.gif')+') no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:7px;cursor:default;').replace(/;/g,' !important;');CKEDITOR.addCss('div.cke_pagebreak{'+e+'}')},init:function(e){e.blockless||(e.addCommand('pagebreak',CKEDITOR.plugins.pagebreakCmd),e.ui.addButton&&e.ui.addButton('PageBreak',{label:e.lang.pagebreak.toolbar,command:'pagebreak',toolbar:'insert,70'}),CKEDITOR.env.webkit&&e.on('contentDom',function(){e.document.on('click',function(t){t=t.data.getTarget();t.is('div')&&t.hasClass('cke_pagebreak')&&e.getSelection().selectElement(t)})}))},afterInit:function(t){function o(n){CKEDITOR.tools.extend(n.attributes,e(t.lang.pagebreak.alt),!0);n.children.length=0};var n=t.dataProcessor,i=n&&n.dataFilter,n=n&&n.htmlFilter,a=/page-break-after\s*:\s*always/i,r=/display\s*:\s*none/i;n&&n.addRules({attributes:{'class':function(e,t){var i=e.replace('cke_pagebreak','');if(i!=e){var n=CKEDITOR.htmlParser.fragment.fromHtml('\x3cspan style\x3d"display: none;"\x3e\x26nbsp;\x3c/span\x3e').children[0];t.children.length=0;t.add(n);n=t.attributes;delete n['aria-label'];delete n.contenteditable;delete n.title};return i}}},{applyToAll:!0,priority:5});i&&i.addRules({elements:{div:function(e){if(e.attributes['data-cke-pagebreak'])o(e);else if(a.test(e.attributes.style)){var t=e.children[0];t&&'span'==t.name&&r.test(t.attributes.style)&&o(e)}}}})}});CKEDITOR.plugins.pagebreakCmd={exec:function(t){var n=t.document.createElement('div',{attributes:e(t.lang.pagebreak.alt)});t.insertElement(n)},context:'div',allowedContent:{div:{styles:'!page-break-after'},span:{match:function(e){return(e=e.parent)&&'div'==e.name&&e.styles&&e.styles['page-break-after']},styles:'display'}},requiredContent:'div{page-break-after}'}})();(function(){var e={canUndo:!1,async:!0,exec:function(t){t.getClipboardData({title:t.lang.pastetext.title},function(n){n&&t.fire('paste',{type:'text',dataValue:n.dataValue,method:'paste',dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});t.fire('afterCommandExec',{name:'pastetext',command:e,returnValue:!!n})})}};CKEDITOR.plugins.add('pastetext',{requires:'clipboard',init:function(t){t.addCommand('pastetext',e);t.ui.addButton&&t.ui.addButton('PasteText',{label:t.lang.pastetext.button,command:'pastetext',toolbar:'clipboard,40'});if(t.config.forcePasteAsPlainText)t.on('beforePaste',function(e){'html'!=e.data.type&&(e.data.type='text')});t.on('pasteState',function(e){t.getCommand('pastetext').setState(e.data)})}})})();(function(){function e(e,t,n){var i=CKEDITOR.cleanWord;i?n():(e=CKEDITOR.getUrl(e.config.pasteFromWordCleanupFile||t+'filter/default.js'),CKEDITOR.scriptLoader.load(e,n,null,!0));return!i};function t(e){e.data.type='html'};CKEDITOR.plugins.add('pastefromword',{requires:'clipboard',init:function(n){var i=0,o=this.path;n.addCommand('pastefromword',{canUndo:!1,async:!0,exec:function(e){var n=this;i=1;e.once('beforePaste',t);e.getClipboardData({title:e.lang.pastefromword.title},function(t){t&&e.fire('paste',{type:'html',dataValue:t.dataValue,method:'paste',dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});e.fire('afterCommandExec',{name:'pastefromword',command:n,returnValue:!!t})})}});n.ui.addButton&&n.ui.addButton('PasteFromWord',{label:n.lang.pastefromword.toolbar,command:'pastefromword',toolbar:'clipboard,50'});n.on('pasteState',function(e){n.getCommand('pastefromword').setState(e.data)});n.on('paste',function(t){var a=t.data,r=a.dataValue;if(r&&(i||/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument)/.test(r))){a.dontFilter=!0;var s=e(n,o,function(){if(s)n.fire('paste',a);else if(!n.config.pasteFromWordPromptCleanup||i||confirm(n.lang.pastefromword.confirmCleanup))a.dataValue=CKEDITOR.cleanWord(r,n);i=0});s&&t.cancel()}},null,null,3)}})})();(function(){var e,t={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(t){var l,o=t.config,s=o.baseHref?'\x3cbase href\x3d"'+o.baseHref+'"/\x3e':'';if(o.fullPage)l=t.getData().replace(/<head>/,'$\x26'+s).replace(/[^>]*(?=<\/title>)/,'$\x26 \x26mdash; '+t.lang.preview.preview);else{var o='\x3cbody ',a=t.document&&t.document.getBody();a&&(a.getAttribute('id')&&(o+='id\x3d"'+a.getAttribute('id')+'" '),a.getAttribute('class')&&(o+='class\x3d"'+a.getAttribute('class')+'" '));o+='\x3e';l=t.config.docType+'\x3chtml dir\x3d"'+t.config.contentsLangDirection+'"\x3e\x3chead\x3e'+s+'\x3ctitle\x3e'+t.lang.preview.preview+'\x3c/title\x3e'+CKEDITOR.tools.buildStyleHtml(t.config.contentsCss)+'\x3c/head\x3e'+o+t.getData()+'\x3c/body\x3e\x3c/html\x3e'};s=640;o=420;a=80;try{var i=window.screen,s=Math.round(.8*i.width),o=Math.round(.7*i.height),a=Math.round(.1*i.width)}catch(n){};if(!1===t.fire('contentPreview',t={dataValue:l}))return!1;var i='',r;CKEDITOR.env.ie&&(window._cke_htmlToLoad=t.dataValue,r='javascript:void( (function(){document.open();'+('('+CKEDITOR.tools.fixDomain+')();').replace(/\/\/.*?\n/g,'').replace(/parent\./g,'window.opener.')+'document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad \x3d null;})() )',i='');CKEDITOR.env.gecko&&(window._cke_htmlToLoad=t.dataValue,i=CKEDITOR.getUrl(e+'preview.html'));i=window.open(i,null,'toolbar\x3dyes,location\x3dno,status\x3dyes,menubar\x3dyes,scrollbars\x3dyes,resizable\x3dyes,width\x3d'+s+',height\x3d'+o+',left\x3d'+a);CKEDITOR.env.ie&&i&&(i.location=r);CKEDITOR.env.ie||CKEDITOR.env.gecko||(r=i.document,r.open(),r.write(t.dataValue),r.close());return!0}};CKEDITOR.plugins.add('preview',{init:function(n){n.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(e=this.path,n.addCommand('preview',t),n.ui.addButton&&n.ui.addButton('Preview',{label:n.lang.preview.preview,command:'preview',toolbar:'document,40'}))}})})();CKEDITOR.plugins.add('print',{init:function(e){e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(e.addCommand('print',CKEDITOR.plugins.print),e.ui.addButton&&e.ui.addButton('Print',{label:e.lang.print.toolbar,command:'print',toolbar:'document,50'}))}});CKEDITOR.plugins.print={exec:function(e){CKEDITOR.env.gecko?e.window.$.print():e.document.$.execCommand('Print')},canUndo:!1,readOnly:1,modes:{wysiwyg:1}};CKEDITOR.plugins.add('removeformat',{init:function(e){e.addCommand('removeFormat',CKEDITOR.plugins.removeformat.commands.removeformat);e.ui.addButton&&e.ui.addButton('RemoveFormat',{label:e.lang.removeformat.toolbar,command:'removeFormat',toolbar:'cleanup,10'})}});CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var r=e._.removeFormatRegex||(e._.removeFormatRegex=new RegExp('^(?:'+e.config.removeFormatTags.replace(/,/g,'|')+')$','i')),c=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(',')),s=CKEDITOR.plugins.removeformat.filter,l=e.getSelection().getRanges(),d=l.createIterator(),u=function(e){return e.type==CKEDITOR.NODE_ELEMENT},n;n=d.getNextRange();){n.collapsed||n.enlarge(CKEDITOR.ENLARGE_ELEMENT);var a=n.createBookmark(),t=a.startNode,i=a.endNode,o=function(t){for(var i=e.elementPath(t),a=i.elements,o=1,n;(n=a[o])&&!n.equals(i.block)&&!n.equals(i.blockLimit);o++)r.test(n.getName())&&s(e,n)&&t.breakParent(n)};o(t);if(i)for(o(i),t=t.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);t&&!t.equals(i);)if(t.isReadOnly()){if(t.getPosition(i)&CKEDITOR.POSITION_CONTAINS)break;t=t.getNext(u)}
else o=t.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),'img'==t.getName()&&t.data('cke-realelement')||!s(e,t)||(r.test(t.getName())?t.remove(1):(t.removeAttributes(c),e.fire('removeFormatCleanup',t))),t=o;n.moveToBookmark(a)};e.forceNextSelectionCheck();e.getSelection().selectRanges(l)}}},filter:function(e,t){for(var i=e._.removeFormatFilters||[],n=0;n<i.length;n++)if(!1===i[n](t))return!1;return!0}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]);this._.removeFormatFilters.push(e)};CKEDITOR.config.removeFormatTags='b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var';CKEDITOR.config.removeFormatAttributes='class,style,lang,width,height,align,hspace,valign';(function(){var e={readOnly:1,exec:function(e){if(e.fire('save')&&(e=e.element.$.form))try{e.submit()}catch(t){e.submit.click&&e.submit.click()}}};CKEDITOR.plugins.add('save',{init:function(t){t.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.addCommand('save',e).modes={wysiwyg:!!t.element.$.form},t.ui.addButton&&t.ui.addButton('Save',{label:t.lang.save.toolbar,command:'save',toolbar:'document,10'}))}})})();(function(){CKEDITOR.plugins.add('selectall',{init:function(e){e.addCommand('selectAll',{modes:{wysiwyg:1,source:1},exec:function(e){var t=e.editable();if(t.is('textarea'))e=t.$,CKEDITOR.env.ie?e.createTextRange().execCommand('SelectAll'):(e.selectionStart=0,e.selectionEnd=e.value.length),e.focus();else{if(t.is('body'))e.document.$.execCommand('SelectAll',!1,null);else{var n=e.createRange();n.selectNodeContents(t);n.select()};e.forceNextSelectionCheck();e.selectionChange()}},canUndo:!1});e.ui.addButton&&e.ui.addButton('SelectAll',{label:e.lang.selectall.toolbar,command:'selectAll',toolbar:'selection,10'})}})})();(function(){var e={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(e){this.toggleState();this.refresh(e)},refresh:function(e){if(e.document){var t=this.state!=CKEDITOR.TRISTATE_ON||e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!e.focusManager.hasFocus?'removeClass':'attachClass';e.editable()[t]('cke_show_blocks')}}};CKEDITOR.plugins.add('showblocks',{onLoad:function(){var s='p div pre address blockquote h1 h2 h3 h4 h5 h6'.split(' '),i,o,a,r,c=CKEDITOR.getUrl(this.path),l=!(CKEDITOR.env.ie&&9>CKEDITOR.env.version),t=l?':not([contenteditable\x3dfalse]):not(.cke_show_blocks_off)':'',e,n;for(i=o=a=r='';e=s.pop();)n=s.length?',':'',i+='.cke_show_blocks '+e+t+n,a+='.cke_show_blocks.cke_contents_ltr '+e+t+n,r+='.cke_show_blocks.cke_contents_rtl '+e+t+n,o+='.cke_show_blocks '+e+t+'{background-image:url('+CKEDITOR.getUrl(c+'images/block_'+e+'.png')+')}';CKEDITOR.addCss((i+'{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}').concat(o,a+'{background-position:top left;padding-left:8px}',r+'{background-position:top right;padding-right:8px}'));l||CKEDITOR.addCss('.cke_show_blocks [contenteditable\x3dfalse],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}')},init:function(t){function i(){n.refresh(t)};if(!t.blockless){var n=t.addCommand('showblocks',e);n.canUndo=!1;t.config.startupOutlineBlocks&&n.setState(CKEDITOR.TRISTATE_ON);t.ui.addButton&&t.ui.addButton('ShowBlocks',{label:t.lang.showblocks.toolbar,command:'showblocks',toolbar:'tools,20'});t.on('mode',function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)});t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(t.on('focus',i),t.on('blur',i));t.on('contentDom',function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)})}}})})();(function(){var e={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(e){this.toggleState();this.refresh(e)},refresh:function(e){if(e.document){var t=this.state==CKEDITOR.TRISTATE_ON?'attachClass':'removeClass';e.editable()[t]('cke_show_borders')}}};CKEDITOR.plugins.add('showborders',{modes:{wysiwyg:1},onLoad:function(){var e;e=(CKEDITOR.env.ie6Compat?['.%1 table.%2,','.%1 table.%2 td, .%1 table.%2 th','{','border : #d3d3d3 1px dotted','}']:'.%1 table.%2,;.%1 table.%2 \x3e tr \x3e td, .%1 table.%2 \x3e tr \x3e th,;.%1 table.%2 \x3e tbody \x3e tr \x3e td, .%1 table.%2 \x3e tbody \x3e tr \x3e th,;.%1 table.%2 \x3e thead \x3e tr \x3e td, .%1 table.%2 \x3e thead \x3e tr \x3e th,;.%1 table.%2 \x3e tfoot \x3e tr \x3e td, .%1 table.%2 \x3e tfoot \x3e tr \x3e th;{;border : #d3d3d3 1px dotted;}'.split(';')).join('').replace(/%2/g,'cke_show_border').replace(/%1/g,'cke_show_borders ');CKEDITOR.addCss(e)},init:function(t){var n=t.addCommand('showborders',e);n.canUndo=!1;!1!==t.config.startupShowBorders&&n.setState(CKEDITOR.TRISTATE_ON);t.on('mode',function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)},null,null,100);t.on('contentDom',function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)});t.on('removeFormatCleanup',function(e){e=e.data;t.getCommand('showborders').state==CKEDITOR.TRISTATE_ON&&e.is('table')&&(!e.hasAttribute('border')||0>=parseInt(e.getAttribute('border'),10))&&e.addClass('cke_show_border')})},afterInit:function(e){var t=e.dataProcessor;e=t&&t.dataFilter;t=t&&t.htmlFilter;e&&e.addRules({elements:{table:function(e){e=e.attributes;var t=e['class'],n=parseInt(e.border,10);n&&!(0>=n)||t&&-1!=t.indexOf('cke_show_border')||(e['class']=(t||'')+' cke_show_border')}}});t&&t.addRules({elements:{table:function(e){e=e.attributes;var t=e['class'];t&&(e['class']=t.replace('cke_show_border','').replace(/\s{2}/,' ').replace(/^\s+|\s+$/,''))}}})}});CKEDITOR.on('dialogDefinition',function(e){var t=e.data.name;if('table'==t||'tableProperties'==t)if(e=e.data.definition,t=e.getContents('info').get('txtBorder'),t.commit=CKEDITOR.tools.override(t.commit,function(e){return function(t,n){e.apply(this,arguments);var i=parseInt(this.getValue(),10);n[!i||0>=i?'addClass':'removeClass']('cke_show_border')}}),e=(e=e.getContents('advanced'))&&e.get('advCSSClasses'))e.setup=CKEDITOR.tools.override(e.setup,function(e){return function(){e.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,''))}}),e.commit=CKEDITOR.tools.override(e.commit,function(e){return function(t,n){e.apply(this,arguments);parseInt(n.getAttribute('border'),10)||n.addClass('cke_show_border')}})})})();(function(){CKEDITOR.plugins.add('sourcearea',{init:function(t){function n(){var e=i&&this.equals(CKEDITOR.document.getActive());this.hide();this.setStyle('height',this.getParent().$.clientHeight+'px');this.setStyle('width',this.getParent().$.clientWidth+'px');this.show();e&&this.focus()};if(t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var o=CKEDITOR.plugins.sourcearea;t.addMode('source',function(i){var o=t.ui.space('contents').getDocument().createElement('textarea');o.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?'99%':'100%',height:'100%',resize:'none',outline:'none','text-align':'left'},CKEDITOR.tools.cssVendorPrefix('tab-size',t.config.sourceAreaTabSize||4)));o.setAttribute('dir','ltr');o.addClass('cke_source').addClass('cke_reset').addClass('cke_enable_context_menu');t.ui.space('contents').append(o);o=t.editable(new e(t,o));o.setData(t.getData(1));CKEDITOR.env.ie&&(o.attachListener(t,'resize',n,o),o.attachListener(CKEDITOR.document.getWindow(),'resize',n,o),CKEDITOR.tools.setTimeout(n,0,o));t.fire('ariaWidget',this);i()});t.addCommand('source',o.commands.source);t.ui.addButton&&t.ui.addButton('Source',{label:t.lang.sourcearea.toolbar,command:'source',toolbar:'mode,10'});t.on('mode',function(){t.getCommand('source').setState('source'==t.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var i=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var e=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(e){this.setValue(e);this.status='ready';this.editor.fire('dataReady')},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(e){this[(e?'set':'remove')+'Attribute']('readOnly','readonly')},detach:function(){e.baseProto.detach.call(this);this.clearCustomData();this.remove()}}})})();CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(e){'wysiwyg'==e.mode&&e.fire('saveSnapshot');e.getCommand('source').setState(CKEDITOR.TRISTATE_DISABLED);e.setMode('source'==e.mode?'wysiwyg':'source')},canUndo:!1}}};CKEDITOR.plugins.add('specialchar',{availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,'de-ch':1,el:1,en:1,'en-gb':1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fr:1,'fr-ca':1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,'pt-br':1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,'zh-cn':1},requires:'dialog',init:function(e){var t=this;CKEDITOR.dialog.add('specialchar',this.path+'dialogs/specialchar.js');e.addCommand('specialchar',{exec:function(){var n=e.langCode,n=t.availableLangs[n]?n:t.availableLangs[n.replace(/-.*/,'')]?n.replace(/-.*/,''):'en';CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+'dialogs/lang/'+n+'.js'),function(){CKEDITOR.tools.extend(e.lang.specialchar,t.langEntries[n]);e.openDialog('specialchar')})},modes:{wysiwyg:1},canUndo:!1});e.ui.addButton&&e.ui.addButton('SpecialChar',{label:e.lang.specialchar.toolbar,command:'specialchar',toolbar:'insert,50'})}});CKEDITOR.config.specialChars='! \x26quot; # $ % \x26amp; \' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; \x26lt; \x3d \x26gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ \x26euro; \x26lsquo; \x26rsquo; \x26ldquo; \x26rdquo; \x26ndash; \x26mdash; \x26iexcl; \x26cent; \x26pound; \x26curren; \x26yen; \x26brvbar; \x26sect; \x26uml; \x26copy; \x26ordf; \x26laquo; \x26not; \x26reg; \x26macr; \x26deg; \x26sup2; \x26sup3; \x26acute; \x26micro; \x26para; \x26middot; \x26cedil; \x26sup1; \x26ordm; \x26raquo; \x26frac14; \x26frac12; \x26frac34; \x26iquest; \x26Agrave; \x26Aacute; \x26Acirc; \x26Atilde; \x26Auml; \x26Aring; \x26AElig; \x26Ccedil; \x26Egrave; \x26Eacute; \x26Ecirc; \x26Euml; \x26Igrave; \x26Iacute; \x26Icirc; \x26Iuml; \x26ETH; \x26Ntilde; \x26Ograve; \x26Oacute; \x26Ocirc; \x26Otilde; \x26Ouml; \x26times; \x26Oslash; \x26Ugrave; \x26Uacute; \x26Ucirc; \x26Uuml; \x26Yacute; \x26THORN; \x26szlig; \x26agrave; \x26aacute; \x26acirc; \x26atilde; \x26auml; \x26aring; \x26aelig; \x26ccedil; \x26egrave; \x26eacute; \x26ecirc; \x26euml; \x26igrave; \x26iacute; \x26icirc; \x26iuml; \x26eth; \x26ntilde; \x26ograve; \x26oacute; \x26ocirc; \x26otilde; \x26ouml; \x26divide; \x26oslash; \x26ugrave; \x26uacute; \x26ucirc; \x26uuml; \x26yacute; \x26thorn; \x26yuml; \x26OElig; \x26oelig; \x26#372; \x26#374 \x26#373 \x26#375; \x26sbquo; \x26#8219; \x26bdquo; \x26hellip; \x26trade; \x26#9658; \x26bull; \x26rarr; \x26rArr; \x26hArr; \x26diams; \x26asymp;'.split(' ');CKEDITOR.plugins.add('scayt',{requires:'menubutton,dialog',tabToOpen:null,dialogName:'scaytDialog',init:function(e){var o=this,i=CKEDITOR.plugins.scayt;this.bindEvents(e);this.parseConfig(e);this.addRule(e);CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+'dialogs/options.js'));this.addMenuItems(e);var n=e.lang.scayt,t=CKEDITOR.env;e.ui.add('Scayt',CKEDITOR.UI_MENUBUTTON,{label:n.text_title,title:e.plugins.wsc?e.lang.wsc.title:n.text_title,modes:{wysiwyg:!(t.ie&&(8>t.version||t.quirks))},toolbar:'spellchecker,20',refresh:function(){var t=e.ui.instances.Scayt.getState();e.scayt&&(t=i.state.scayt[e.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);e.fire('scaytButtonState',t)},onRender:function(){var t=this;e.on('scaytButtonState',function(e){void 0!==typeof e.data&&t.setState(e.data)})},onMenu:function(){var t=e.scayt;e.getMenuItem('scaytToggle').label=e.lang.scayt[t&&i.state.scayt[e.name]?'btn_disable':'btn_enable'];t={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:e.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};e.config.scayt_uiTabs[0]||delete t.scaytOptions;e.config.scayt_uiTabs[1]||delete t.scaytLangs;e.config.scayt_uiTabs[2]||delete t.scaytDict;return t}});e.contextMenu&&e.addMenuItems&&(e.contextMenu.addListener(function(t,n){var i=e.scayt,a,r;i&&(r=i.getSelectionNode())&&(a=o.menuGenerator(e,r),i.showBanner('.'+e.contextMenu._.definition.panel.className.split(' ').join(' .')));return a}),e.contextMenu._.onHide=CKEDITOR.tools.override(e.contextMenu._.onHide,function(t){return function(){var n=e.scayt;n&&n.hideBanner();return t.apply(this)}}))},addMenuItems:function(e){var o=this,i=CKEDITOR.plugins.scayt;e.addMenuGroup('scaytButton');for(var t=e.config.scayt_contextMenuItemsOrder.split('|'),n=0;n<t.length;n++)t[n]='scayt_'+t[n];if((t=['grayt_description','grayt_suggest','grayt_control'].concat(t))&&t.length)for(n=0;n<t.length;n++)e.addMenuGroup(t[n],n-10);e.addCommand('scaytToggle',{exec:function(e){var t=e.scayt;i.state.scayt[e.name]=!i.state.scayt[e.name];!0===i.state.scayt[e.name]?t||i.createScayt(e):t&&i.destroy(e)}});e.addCommand('scaytAbout',{exec:function(e){e.scayt.tabToOpen='about';e.lockSelection();e.openDialog(o.dialogName)}});e.addCommand('scaytOptions',{exec:function(e){e.scayt.tabToOpen='options';e.lockSelection();e.openDialog(o.dialogName)}});e.addCommand('scaytLangs',{exec:function(e){e.scayt.tabToOpen='langs';e.lockSelection();e.openDialog(o.dialogName)}});e.addCommand('scaytDict',{exec:function(e){e.scayt.tabToOpen='dictionaries';e.lockSelection();e.openDialog(o.dialogName)}});t={scaytToggle:{label:e.lang.scayt.btn_enable,group:'scaytButton',command:'scaytToggle'},scaytAbout:{label:e.lang.scayt.btn_about,group:'scaytButton',command:'scaytAbout'},scaytOptions:{label:e.lang.scayt.btn_options,group:'scaytButton',command:'scaytOptions'},scaytLangs:{label:e.lang.scayt.btn_langs,group:'scaytButton',command:'scaytLangs'},scaytDict:{label:e.lang.scayt.btn_dictionaries,group:'scaytButton',command:'scaytDict'}};e.plugins.wsc&&(t.WSC={label:e.lang.wsc.toolbar,group:'scaytButton',onClick:function(){var i=CKEDITOR.plugins.scayt,t=e.scayt,n=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(n=n.replace(/\s/g,''))?(t&&i.state.scayt[e.name]&&t.setMarkupPaused&&t.setMarkupPaused(!0),e.lockSelection(),e.execCommand('checkspell')):alert('Nothing to check!')}});e.addMenuItems(t)},bindEvents:function(e){var t=CKEDITOR.plugins.scayt,o=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,i=function(){t.destroy(e)},n=function(){!t.state.scayt[e.name]||e.readOnly||e.scayt||t.createScayt(e)},r=function(){var t=e.editable();t.attachListener(t,'focus',function(t){CKEDITOR.plugins.scayt&&!e.scayt&&setTimeout(n,0);t=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[e.name]&&e.scayt;var r,i;if((o||t)&&e._.savedSelection){t=e._.savedSelection.getSelectedElement();t=!t&&e._.savedSelection.getRanges();for(var a=0;a<t.length;a++)i=t[a],'string'===typeof i.startContainer.$.nodeValue&&(r=i.startContainer.getText().length,(r<i.startOffset||r<i.endOffset)&&e.unlockSelection(!1))}},this,null,-10)},a=function(){o?e.config.scayt_inlineModeImmediateMarkup?n():(e.on('blur',function(){setTimeout(i,0)}),e.on('focus',n),e.focusManager.hasFocus&&n()):n();r();var t=e.editable();t.attachListener(t,'mousedown',function(t){t=t.data.getTarget();var n=e.widgets&&e.widgets.getByElement(t);n&&(n.wrapper=t.getAscendant(function(e){return e.hasAttribute('data-cke-widget-wrapper')},!0))},this,null,-10)};e.on('contentDom',a);e.on('beforeCommandExec',function(n){var a=e.scayt,i=null,o=!1,r=!0;n.data.name in t.options.disablingCommandExec&&'wysiwyg'==e.mode?a&&(t.destroy(e),e.fire('scaytButtonState',CKEDITOR.TRISTATE_DISABLED)):'bold'!==n.data.name&&'italic'!==n.data.name&&'underline'!==n.data.name&&'strike'!==n.data.name&&'subscript'!==n.data.name&&'superscript'!==n.data.name&&'enter'!==n.data.name&&'cut'!==n.data.name&&'language'!==n.data.name||!a||('cut'===n.data.name&&(r=!1,o=!0),'language'===n.data.name&&(i=(i=e.plugins.language.getCurrentLangElement(e))&&i.$,o=!0),e.fire('reloadMarkupScayt',{removeOptions:{removeInside:r,forceBookmark:o,selectionNode:i},timeout:0}))});e.on('beforeSetMode',function(n){if('source'==n.data){if(n=e.scayt)t.destroy(e),e.fire('scaytButtonState',CKEDITOR.TRISTATE_DISABLED);e.document&&e.document.getBody().removeAttribute('_jquid')}});e.on('afterCommandExec',function(t){'wysiwyg'!=e.mode||'undo'!=t.data.name&&'redo'!=t.data.name||setTimeout(function(){var t=e.scayt,n=t&&t.getScaytLangList();n&&n.ltr&&n.rtl&&t.fire('startSpellCheck, startGrammarCheck')},250)});e.on('readOnly',function(n){var i;n&&(i=e.scayt,!0===n.editor.readOnly?i&&i.fire('removeMarkupInDocument',{}):i?i.fire('startSpellCheck, startGrammarCheck'):'wysiwyg'==n.editor.mode&&!0===t.state.scayt[n.editor.name]&&(t.createScayt(e),n.editor.fire('scaytButtonState',CKEDITOR.TRISTATE_ON)))});e.on('beforeDestroy',i);e.on('setData',function(){i();(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||e.plugins.divarea)&&a()},this,null,50);e.on('reloadMarkupScayt',function(t){var n=t.data&&t.data.removeOptions;setTimeout(function(){var t=e.scayt,i=t&&t.getScaytLangList();i&&i.ltr&&i.rtl&&(e.document.fire('keydown',new CKEDITOR.dom.event({keyCode:37})),t.removeMarkupInSelectionNode(n),t.fire('startSpellCheck, startGrammarCheck'))},t.data&&t.data.timeout||0)});e.on('insertElement',function(){e.fire('reloadMarkupScayt',{removeOptions:{forceBookmark:!0}})},this,null,50);e.on('insertHtml',function(){e.fire('reloadMarkupScayt')},this,null,50);e.on('insertText',function(){e.fire('reloadMarkupScayt')},this,null,50);e.on('scaytDialogShown',function(t){t.data.selectPage(e.scayt.tabToOpen)})},parseConfig:function(e){var t=CKEDITOR.plugins.scayt;t.replaceOldOptionsNames(e.config);'boolean'!==typeof e.config.scayt_autoStartup&&(e.config.scayt_autoStartup=!1);t.state.scayt[e.name]=e.config.scayt_autoStartup;'boolean'!==typeof e.config.grayt_autoStartup&&(e.config.grayt_autoStartup=!1);'boolean'!==typeof e.config.scayt_inlineModeImmediateMarkup&&(e.config.scayt_inlineModeImmediateMarkup=!1);t.state.grayt[e.name]=e.config.grayt_autoStartup;e.config.scayt_contextCommands||(e.config.scayt_contextCommands='ignore|ignoreall|add');e.config.scayt_contextMenuItemsOrder||(e.config.scayt_contextMenuItemsOrder='suggest|moresuggest|control');e.config.scayt_sLang||(e.config.scayt_sLang='en_US');if(void 0===e.config.scayt_maxSuggestions||'number'!=typeof e.config.scayt_maxSuggestions||0>e.config.scayt_maxSuggestions)e.config.scayt_maxSuggestions=5;if(void 0===e.config.scayt_minWordLength||'number'!=typeof e.config.scayt_minWordLength||1>e.config.scayt_minWordLength)e.config.scayt_minWordLength=4;if(void 0===e.config.scayt_customDictionaryIds||'string'!==typeof e.config.scayt_customDictionaryIds)e.config.scayt_customDictionaryIds='';if(void 0===e.config.scayt_userDictionaryName||'string'!==typeof e.config.scayt_userDictionaryName)e.config.scayt_userDictionaryName=null;if('string'===typeof e.config.scayt_uiTabs&&3===e.config.scayt_uiTabs.split(',').length){var a=[],o=[];e.config.scayt_uiTabs=e.config.scayt_uiTabs.split(',');CKEDITOR.tools.search(e.config.scayt_uiTabs,function(e){1===Number(e)||0===Number(e)?(o.push(!0),a.push(Number(e))):o.push(!1)});null===CKEDITOR.tools.search(o,!1)?e.config.scayt_uiTabs=a:e.config.scayt_uiTabs=[1,1,1]}
else e.config.scayt_uiTabs=[1,1,1];'string'!=typeof e.config.scayt_serviceProtocol&&(e.config.scayt_serviceProtocol=null);'string'!=typeof e.config.scayt_serviceHost&&(e.config.scayt_serviceHost=null);'string'!=typeof e.config.scayt_servicePort&&(e.config.scayt_servicePort=null);'string'!=typeof e.config.scayt_servicePath&&(e.config.scayt_servicePath=null);e.config.scayt_moreSuggestions||(e.config.scayt_moreSuggestions='on');'string'!==typeof e.config.scayt_customerId&&(e.config.scayt_customerId='1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2');'string'!==typeof e.config.scayt_srcUrl&&(t=document.location.protocol,t=-1!=t.search(/https?:/)?t:'http:',e.config.scayt_srcUrl=t+'//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js');'boolean'!==typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0);'boolean'!==typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0);CKEDITOR.config.scayt_handleUndoRedo=CKEDITOR.plugins.undo?CKEDITOR.config.scayt_handleUndoRedo:!1;'boolean'!==typeof e.config.scayt_multiLanguageMode&&(e.config.scayt_multiLanguageMode=!1);'object'!==typeof e.config.scayt_multiLanguageStyles&&(e.config.scayt_multiLanguageStyles={});e.config.scayt_ignoreAllCapsWords&&'boolean'!==typeof e.config.scayt_ignoreAllCapsWords&&(e.config.scayt_ignoreAllCapsWords=!1);e.config.scayt_ignoreDomainNames&&'boolean'!==typeof e.config.scayt_ignoreDomainNames&&(e.config.scayt_ignoreDomainNames=!1);e.config.scayt_ignoreWordsWithMixedCases&&'boolean'!==typeof e.config.scayt_ignoreWordsWithMixedCases&&(e.config.scayt_ignoreWordsWithMixedCases=!1);e.config.scayt_ignoreWordsWithNumbers&&'boolean'!==typeof e.config.scayt_ignoreWordsWithNumbers&&(e.config.scayt_ignoreWordsWithNumbers=!1);if(e.config.scayt_disableOptionsStorage){var t=CKEDITOR.tools.isArray(e.config.scayt_disableOptionsStorage)?e.config.scayt_disableOptionsStorage:'string'===typeof e.config.scayt_disableOptionsStorage?[e.config.scayt_disableOptionsStorage]:void 0,r='all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers'.split(' '),n=['lang','ignore-all-caps-words','ignore-domain-names','ignore-words-with-mixed-cases','ignore-words-with-numbers'],i=CKEDITOR.tools.search,s=CKEDITOR.tools.indexOf;e.config.scayt_disableOptionsStorage=function(e){for(var l=[],o=0;o<e.length;o++){var t=e[o],a=!!i(e,'options');if(!i(r,t)||a&&i(n,function(e){if('lang'===e)return!1}))return;i(n,t)&&n.splice(s(n,t),1);if('all'===t||a&&i(e,'lang'))return[];'options'===t&&(n=['lang'])};return l=l.concat(n)}(t)}},addRule:function(e){var t=CKEDITOR.plugins.scayt,n=e.dataProcessor,i=n&&n.htmlFilter,o=e._.elementsPath&&e._.elementsPath.filters,n=n&&n.dataFilter,a=e.addRemoveFormatFilter,r=function(n){if(e.scayt&&(n.hasAttribute(t.options.data_attribute_name)||n.hasAttribute(t.options.problem_grammar_data_attribute)))return!1},s=function(n){var i=!0;e.scayt&&(n.hasAttribute(t.options.data_attribute_name)||n.hasAttribute(t.options.problem_grammar_data_attribute))&&(i=!1);return i};o&&o.push(r);n&&n.addRules({elements:{span:function(e){var n=e.hasClass(t.options.misspelled_word_class)&&e.attributes[t.options.data_attribute_name],i=e.hasClass(t.options.problem_grammar_class)&&e.attributes[t.options.problem_grammar_data_attribute];t&&(n||i)&&delete e.name;return e}}});i&&i.addRules({elements:{span:function(e){var n=e.hasClass(t.options.misspelled_word_class)&&e.attributes[t.options.data_attribute_name],i=e.hasClass(t.options.problem_grammar_class)&&e.attributes[t.options.problem_grammar_data_attribute];t&&(n||i)&&delete e.name;return e}}});a&&a.call(e,s)},scaytMenuDefinition:function(e){var t=this;e=e.scayt;return{scayt:{scayt_ignore:{label:e.getLocal('btn_ignore'),group:'scayt_control',order:1,exec:function(e){e.scayt.ignoreWord()}},scayt_ignoreall:{label:e.getLocal('btn_ignoreAll'),group:'scayt_control',order:2,exec:function(e){e.scayt.ignoreAllWords()}},scayt_add:{label:e.getLocal('btn_addWord'),group:'scayt_control',order:3,exec:function(e){var t=e.scayt;setTimeout(function(){t.addWordToUserDictionary()},10)}},scayt_option:{label:e.getLocal('btn_options'),group:'scayt_control',order:4,exec:function(e){e.scayt.tabToOpen='options';e.lockSelection();e.openDialog(t.dialogName)},verification:function(e){return 1==e.config.scayt_uiTabs[0]?!0:!1}},scayt_language:{label:e.getLocal('btn_langs'),group:'scayt_control',order:5,exec:function(e){e.scayt.tabToOpen='langs';e.lockSelection();e.openDialog(t.dialogName)},verification:function(e){return 1==e.config.scayt_uiTabs[1]?!0:!1}},scayt_dictionary:{label:e.getLocal('btn_dictionaries'),group:'scayt_control',order:6,exec:function(e){e.scayt.tabToOpen='dictionaries';e.lockSelection();e.openDialog(t.dialogName)},verification:function(e){return 1==e.config.scayt_uiTabs[2]?!0:!1}},scayt_about:{label:e.getLocal('btn_about'),group:'scayt_control',order:7,exec:function(e){e.scayt.tabToOpen='about';e.lockSelection();e.openDialog(t.dialogName)}}},grayt:{grayt_problemdescription:{label:'Grammar problem description',group:'grayt_description',order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(e){}},grayt_ignore:{label:e.getLocal('btn_ignore'),group:'grayt_control',order:2,exec:function(e){e.scayt.ignorePhrase()}}}}},buildSuggestionMenuItems:function(e,t,n){var o={},a={},r=n?'word':'phrase',s=n?'startGrammarCheck':'startSpellCheck',l=e.scayt;if(0<t.length&&'no_any_suggestions'!==t[0])if(n)for(n=0;n<t.length;n++){var i='scayt_suggest_'+CKEDITOR.plugins.scayt.suggestions[n].replace(' ','_');e.addCommand(i,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n],r,s));n<e.config.scayt_maxSuggestions?(e.addMenuItem(i,{label:t[n],command:i,group:'scayt_suggest',order:n+1}),o[i]=CKEDITOR.TRISTATE_OFF):(e.addMenuItem(i,{label:t[n],command:i,group:'scayt_moresuggest',order:n+1}),a[i]=CKEDITOR.TRISTATE_OFF,'on'===e.config.scayt_moreSuggestions&&(e.addMenuItem('scayt_moresuggest',{label:l.getLocal('btn_moreSuggestions'),group:'scayt_moresuggest',order:10,getItems:function(){return a}}),o.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}
else for(n=0;n<t.length;n++)i='grayt_suggest_'+CKEDITOR.plugins.scayt.suggestions[n].replace(' ','_'),e.addCommand(i,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n],r,s)),e.addMenuItem(i,{label:t[n],command:i,group:'grayt_suggest',order:n+1}),o[i]=CKEDITOR.TRISTATE_OFF;else o.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,e.addCommand('no_scayt_suggest',{exec:function(){}}),e.addMenuItem('no_scayt_suggest',{label:l.getLocal('btn_noSuggestions')||'no_scayt_suggest',command:'no_scayt_suggest',group:'scayt_suggest',order:0});return o},menuGenerator:function(e,t){var a=e.scayt,n=this.scaytMenuDefinition(e),o={},c=e.config.scayt_contextCommands.split('|'),l=t.getAttribute(a.getLangAttribute())||a.getLang(),r,s;r=a.isScaytNode(t);s=a.isGraytNode(t);r?(n=n.scayt,o=t.getAttribute(a.getScaytNodeAttributeName()),a.fire('getSuggestionsList',{lang:l,word:o}),o=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions,r)):s&&(n=n.grayt,o=t.getAttribute(a.getGraytNodeAttributeName()),s=a.getProblemDescriptionText(o,l),n.grayt_problemdescription&&s&&(n.grayt_problemdescription.label=s),a.fire('getGrammarSuggestionsList',{lang:l,phrase:o}),o=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions,r));if(r&&'off'==e.config.scayt_contextCommands)return o;for(var i in n)r&&-1==CKEDITOR.tools.indexOf(c,i.replace('scayt_',''))&&'all'!=e.config.scayt_contextCommands||(o[i]='undefined'!=typeof n[i].state?n[i].state:CKEDITOR.TRISTATE_OFF,'function'!==typeof n[i].verification||n[i].verification(e)||delete o[i],e.addCommand(i,{exec:n[i].exec}),e.addMenuItem(i,{label:e.lang.scayt[n[i].label]||n[i].label,command:i,group:n[i].group,order:n[i].order}));return o},createCommand:function(e,t,n){return{exec:function(i){i=i.scayt;var o={};o[t]=e;i.replaceSelectionNode(o);'startGrammarCheck'===n&&i.removeMarkupInSelectionNode({grammarOnly:!0});i.fire(n)}}}});CKEDITOR.plugins.scayt={state:{scayt:{},grayt:{}},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:'data-scayt-word',misspelled_word_class:'scayt-misspell-word',problem_grammar_data_attribute:'data-grayt-phrase',problem_grammar_class:'gramm-problem'},backCompatibilityMap:{scayt_service_protocol:'scayt_serviceProtocol',scayt_service_host:'scayt_serviceHost',scayt_service_port:'scayt_servicePort',scayt_service_path:'scayt_servicePath',scayt_customerid:'scayt_customerId'},replaceOldOptionsNames:function(e){for(var t in e)t in this.backCompatibilityMap&&(e[this.backCompatibilityMap[t]]=e[t],delete e[t])},createScayt:function(e){var t=this,n=CKEDITOR.plugins.scayt;this.loadScaytLibrary(e,function(e){var i=e.window&&e.window.getFrame()||e.editable();i?(i={lang:e.config.scayt_sLang,container:i.$,customDictionary:e.config.scayt_customDictionaryIds,userDictionaryName:e.config.scayt_userDictionaryName,localization:e.langCode,customer_id:e.config.scayt_customerId,debug:e.config.scayt_debug,data_attribute_name:t.options.data_attribute_name,misspelled_word_class:t.options.misspelled_word_class,problem_grammar_data_attribute:t.options.problem_grammar_data_attribute,problem_grammar_class:t.options.problem_grammar_class,'options-to-restore':e.config.scayt_disableOptionsStorage,focused:e.editable().hasFocus,ignoreElementsRegex:e.config.scayt_elementsToIgnore,minWordLength:e.config.scayt_minWordLength,multiLanguageMode:e.config.scayt_multiLanguageMode,multiLanguageStyles:e.config.scayt_multiLanguageStyles,graytAutoStartup:n.state.grayt[e.name]},e.config.scayt_serviceProtocol&&(i.service_protocol=e.config.scayt_serviceProtocol),e.config.scayt_serviceHost&&(i.service_host=e.config.scayt_serviceHost),e.config.scayt_servicePort&&(i.service_port=e.config.scayt_servicePort),e.config.scayt_servicePath&&(i.service_path=e.config.scayt_servicePath),'boolean'===typeof e.config.scayt_ignoreAllCapsWords&&(i['ignore-all-caps-words']=e.config.scayt_ignoreAllCapsWords),'boolean'===typeof e.config.scayt_ignoreDomainNames&&(i['ignore-domain-names']=e.config.scayt_ignoreDomainNames),'boolean'===typeof e.config.scayt_ignoreWordsWithMixedCases&&(i['ignore-words-with-mixed-cases']=e.config.scayt_ignoreWordsWithMixedCases),'boolean'===typeof e.config.scayt_ignoreWordsWithNumbers&&(i['ignore-words-with-numbers']=e.config.scayt_ignoreWordsWithNumbers),i=new SCAYT.CKSCAYT(i,function(){},function(){}),i.subscribe('suggestionListSend',function(e){for(var n={},i=[],t=0;t<e.suggestionList.length;t++)n['word_'+e.suggestionList[t]]||(n['word_'+e.suggestionList[t]]=e.suggestionList[t],i.push(e.suggestionList[t]));CKEDITOR.plugins.scayt.suggestions=i}),i.subscribe('selectionIsChanged',function(t){e.getSelection().isLocked&&e.lockSelection()}),i.subscribe('graytStateChanged',function(t){n.state.grayt[e.name]=t.state}),e.scayt=i,e.fire('scaytButtonState',e.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)):n.state.scayt[e.name]=!1})},destroy:function(e){e.scayt&&e.scayt.destroy();delete e.scayt;e.fire('scaytButtonState',CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(e,t){var n=this,i,o;this.loadingHelper[e.name]||('undefined'===typeof window.SCAYT||'function'!==typeof window.SCAYT.CKSCAYT?(this.loadingHelper[e.name]=t,this.loadingHelper.loadOrder.push(e.name),i=new Date,i=i.getTime(),o=e.config.scayt_srcUrl,o+=0<=o.indexOf('?')?'':'?'+i,this.loadingHelper.ckscaytLoading||(CKEDITOR.scriptLoader.load(o,function(e){if(e){CKEDITOR.fireOnce('scaytReady');for(var t=0;t<n.loadingHelper.loadOrder.length;t++){e=n.loadingHelper.loadOrder[t];if('function'===typeof n.loadingHelper[e])n.loadingHelper[e](CKEDITOR.instances[e]);delete n.loadingHelper[e]};n.loadingHelper.loadOrder=[]}}),this.loadingHelper.ckscaytLoading=!0)):window.SCAYT&&'function'===typeof window.SCAYT.CKSCAYT&&(CKEDITOR.fireOnce('scaytReady'),e.scayt||'function'===typeof t&&t(e)))}};CKEDITOR.on('dialogDefinition',function(e){var t=e.data.name;e=e.data.definition.dialog;if('scaytDialog'===t)e.on('cancel',function(e){return!1},this,null,-1);if('checkspell'===t)e.on('cancel',function(e){e=e.sender&&e.sender.getParentEditor();var n=CKEDITOR.plugins.scayt,t=e.scayt;t&&n.state.scayt[e.name]&&t.setMarkupPaused&&t.setMarkupPaused(!1);e.unlockSelection()},this,null,-2);if('link'===t)e.on('ok',function(e){var t=e.sender&&e.sender.getParentEditor();t&&setTimeout(function(){t.fire('reloadMarkupScayt',{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)})});CKEDITOR.on('scaytReady',function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var e=CKEDITOR.editor.prototype;e.checkDirty=CKEDITOR.tools.override(e.checkDirty,function(e){return function(){var t=null,n=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(t='ready'==this.status)var i=n.removeMarkupFromString(this.getSnapshot()),n=n.removeMarkupFromString(this._.previousValue),t=t&&n!==i}
else t=e.call(this);return t}});e.resetDirty=CKEDITOR.tools.override(e.resetDirty,function(e){return function(){var t=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=t.removeMarkupFromString(this.getSnapshot()):e.call(this)}})};if(!0===CKEDITOR.config.scayt_handleUndoRedo){var e=CKEDITOR.plugins.undo.Image.prototype,t='function'==typeof e.equalsContent?'equalsContent':'equals';e[t]=CKEDITOR.tools.override(e[t],function(e){return function(t){var n=t.editor.scayt,i=this.contents,o=t.contents,a=null;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[t.editor.name]&&t.editor.scayt&&(this.contents=n.removeMarkupFromString(i)||'',t.contents=n.removeMarkupFromString(o)||'');a=e.apply(this,arguments);this.contents=i;t.contents=o;return a}})}});(function(){CKEDITOR.plugins.add('stylescombo',{requires:'richcombo',init:function(e){var o=e.config,n=e.lang.stylescombo,t={},i=[],a=[];e.on('stylesSet',function(n){if(n=n.data.styles){for(var r,l,c,s=0,d=n.length;s<d;s++)(r=n[s],e.blockless&&r.element in CKEDITOR.dtd.$block||(l=r.name,r=new CKEDITOR.style(r),e.filter.customConfig&&!e.filter.check(r)))||(r._name=l,r._.enterMode=o.enterMode,r._.type=c=r.assignedTo||r.type,r._.weight=s+1E3*(c==CKEDITOR.STYLE_OBJECT?1:c==CKEDITOR.STYLE_BLOCK?2:3),t[l]=r,i.push(r),a.push(r));i.sort(function(e,t){return e._.weight-t._.weight})}});e.ui.addRichCombo('Styles',{label:n.label,title:n.panelTitle,toolbar:'styles,10',allowedContent:a,panel:{css:[CKEDITOR.skin.getPath('editor')].concat(o.contentsCss),multiSelect:!0,attributes:{'aria-label':n.panelTitle}},init:function(){var e,t,r,o,a,s;a=0;for(s=i.length;a<s;a++)e=i[a],t=e._name,o=e._.type,o!=r&&(this.startGroup(n['panelTitle'+String(o)]),r=o),this.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);this.commit()},onClick:function(n){e.focus();e.fire('saveSnapshot');n=t[n];var i=e.elementPath();e[n.checkActive(i,e)?'removeStyle':'applyStyle'](n);e.fire('saveSnapshot')},onRender:function(){e.on('selectionChange',function(n){var s=this.getValue();n=n.data.path.elements;for(var o=0,r=n.length,a;o<r;o++){a=n[o];for(var i in t)if(t[i].checkElementRemovable(a,!0,e)){i!=s&&this.setValue(i);return}};this.setValue('')},this)},onOpen:function(){var i=e.getSelection().getSelectedElement(),i=e.elementPath(i),o=[0,0,0,0];this.showAll();this.unmarkAll();for(var r in t){var a=t[r],s=a._.type;a.checkApplicable(i,e,e.activeFilter)?o[s]++:this.hideItem(r);a.checkActive(i,e)&&this.mark(r)};o[CKEDITOR.STYLE_BLOCK]||this.hideGroup(n['panelTitle'+String(CKEDITOR.STYLE_BLOCK)]);o[CKEDITOR.STYLE_INLINE]||this.hideGroup(n['panelTitle'+String(CKEDITOR.STYLE_INLINE)]);o[CKEDITOR.STYLE_OBJECT]||this.hideGroup(n['panelTitle'+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var n=e.elementPath();if(n){for(var i in t)if(t[i].checkApplicable(n,e,e.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){t={};i=[]}})}})})();(function(){function t(e){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var i=t.getSelection(),o;if(o=(new CKEDITOR.dom.elementPath(i.getCommonAncestor(),i.root)).contains({td:1,th:1},1)){var i=t.createRange(),n=CKEDITOR.tools.tryThese(function(){var t=o.getParent().$.cells[o.$.cellIndex+(e?-1:1)];t.parentNode.parentNode;return t},function(){var t=o.getParent(),t=t.getAscendant('table').$.rows[t.$.rowIndex+(e?-1:1)];return t.cells[e?t.cells.length-1:0]});if(n||e)if(n)n=new CKEDITOR.dom.element(n),i.moveToElementEditStart(n),i.checkStartOfBlock()&&i.checkEndOfBlock()||i.selectNodeContents(n);else return!0;else{for(var a=o.getAscendant('table').$,n=o.getParent().$.cells,a=new CKEDITOR.dom.element(a.insertRow(-1),t.document),r=0,s=n.length;r<s;r++)a.append((new CKEDITOR.dom.element(n[r],t.document)).clone(!1,!1)).appendBogus();i.moveToElementEditStart(a)};i.select(!0);return!0}};return!1}}};var e={editorFocus:!1,modes:{wysiwyg:1,source:1}},n={exec:function(e){e.container.focusNext(!0,e.tabIndex)}},i={exec:function(e){e.container.focusPrevious(!0,e.tabIndex)}};CKEDITOR.plugins.add('tab',{init:function(o){for(var r=!1!==o.config.enableTabKeyTools,s=o.config.tabSpaces||0,a='';s--;)a+=' ';if(a)o.on('key',function(e){9==e.data.keyCode&&(o.insertText(a),e.cancel())});if(r)o.on('key',function(e){(9==e.data.keyCode&&o.execCommand('selectNextCell')||e.data.keyCode==CKEDITOR.SHIFT+9&&o.execCommand('selectPreviousCell'))&&e.cancel()});o.addCommand('blur',CKEDITOR.tools.extend(n,e));o.addCommand('blurBack',CKEDITOR.tools.extend(i,e));o.addCommand('selectNextCell',t());o.addCommand('selectPreviousCell',t(!0))}})})();CKEDITOR.dom.element.prototype.focusNext=function(e,t){var s=void 0===t?this.getTabIndex():t,a,l,i,r,n,o;if(0>=s)for(n=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);n;){if(n.isVisible()&&0===n.getTabIndex()){i=n;break};n=n.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}
else for(n=this.getDocument().getBody().getFirst();n=n.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!a)if(!l&&n.equals(this)){if(l=!0,e){if(!(n=n.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;a=1}}
else l&&!this.contains(n)&&(a=1);if(n.isVisible()&&!(0>(o=n.getTabIndex()))){if(a&&o==s){i=n;break};o>s&&(!i||!r||o<r)?(i=n,r=o):i||0!==o||(i=n,r=o)}};i&&i.focus()};CKEDITOR.dom.element.prototype.focusPrevious=function(e,t){for(var s=void 0===t?this.getTabIndex():t,a,l,o,r=0,i,n=this.getDocument().getBody().getLast();n=n.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!a)if(!l&&n.equals(this)){if(l=!0,e){if(!(n=n.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;a=1}}
else l&&!this.contains(n)&&(a=1);if(n.isVisible()&&!(0>(i=n.getTabIndex())))if(0>=s){if(a&&0===i){o=n;break};i>r&&(o=n,r=i)}
else{if(a&&i==s){o=n;break};i<s&&(!o||i>r)&&(o=n,r=i)}};o&&o.focus()};CKEDITOR.plugins.add('table',{requires:'dialog',init:function(e){function n(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains('table',1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})};if(!e.blockless){var t=e.lang.table;e.addCommand('table',new CKEDITOR.dialogCommand('table',{context:'table',allowedContent:'table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];'+(e.plugins.dialogadvtab?'table'+e.plugins.dialogadvtab.allowedContent():''),requiredContent:'table',contentTransformations:[['table{width}: sizeToStyle','table[width]: sizeToAttribute']]}));e.addCommand('tableProperties',new CKEDITOR.dialogCommand('tableProperties',n()));e.addCommand('tableDelete',n({exec:function(e){var t=e.elementPath().contains('table',1);if(t){var n=t.getParent(),i=e.editable();1!=n.getChildCount()||n.is('td','th')||n.equals(i)||(t=n);e=e.createRange();e.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START);t.remove();e.select()}}}));e.ui.addButton&&e.ui.addButton('Table',{label:t.toolbar,command:'table',toolbar:'insert,30'});CKEDITOR.dialog.add('table',this.path+'dialogs/table.js');CKEDITOR.dialog.add('tableProperties',this.path+'dialogs/table.js');e.addMenuItems&&e.addMenuItems({table:{label:t.menu,command:'tableProperties',group:'table',order:5},tabledelete:{label:t.deleteTable,command:'tableDelete',group:'table',order:1}});e.on('doubleclick',function(e){e.data.element.is('table')&&(e.data.dialog='tableProperties')});e.contextMenu&&e.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}});(function(){function e(e){function r(e){0<i.length||e.type!=CKEDITOR.NODE_ELEMENT||!h.test(e.getName())||e.getCustomData('selected_cell')||(CKEDITOR.dom.element.setMarker(o,e,'selected_cell',!0),i.push(e))};e=e.getRanges();for(var i=[],o={},a=0;a<e.length;a++){var t=e[a];if(t.collapsed)t=t.getCommonAncestor(),(t=t.getAscendant('td',!0)||t.getAscendant('th',!0))&&i.push(t);else{var t=new CKEDITOR.dom.walker(t),n;for(t.guard=r;n=t.next();)n.type==CKEDITOR.NODE_ELEMENT&&n.is(CKEDITOR.dtd.table)||(n=n.getAscendant('td',!0)||n.getAscendant('th',!0))&&!n.getCustomData('selected_cell')&&(CKEDITOR.dom.element.setMarker(o,n,'selected_cell',!0),i.push(n))}};CKEDITOR.dom.element.clearAllMarkers(o);return i};function o(t,n){for(var i=e(t),r=i[0],s=r.getAscendant('table'),r=r.getDocument(),c=i[0].getParent(),l=c.$.rowIndex,i=i[i.length-1],o=i.getParent().$.rowIndex+i.$.rowSpan-1,i=new CKEDITOR.dom.element(s.$.rows[o]),l=n?l:o,c=n?c:i,i=CKEDITOR.tools.buildTableMap(s),s=i[l],l=n?i[l-1]:i[l+1],i=i[0].length,r=r.createElement('tr'),o=0;s[o]&&o<i;o++){var a;1<s[o].rowSpan&&l&&s[o]==l[o]?(a=s[o],a.rowSpan+=1):(a=(new CKEDITOR.dom.element(s[o])).clone(),a.removeAttribute('rowSpan'),a.appendBogus(),r.append(a),a=a.$);o+=a.colSpan-1};n?r.insertBefore(c):r.insertAfter(c)};function a(t){if(t instanceof CKEDITOR.dom.selection){var n=e(t),o=n[0].getAscendant('table'),l=CKEDITOR.tools.buildTableMap(o);t=n[0].getParent().$.rowIndex;for(var n=n[n.length-1],u=n.getParent().$.rowIndex+n.$.rowSpan-1,n=[],i=t;i<=u;i++){for(var d=l[i],h=new CKEDITOR.dom.element(o.$.rows[i]),s=0;s<d.length;s++){var r=new CKEDITOR.dom.element(d[s]),c=r.getParent().$.rowIndex;1==r.$.rowSpan?r.remove():(--r.$.rowSpan,c==i&&(c=l[i+1],c[s-1]?r.insertAfter(new CKEDITOR.dom.element(c[s-1])):(new CKEDITOR.dom.element(o.$.rows[i+1])).append(r,1)));s+=r.$.colSpan-1};n.push(h)};l=o.$.rows;o=new CKEDITOR.dom.element(l[u+1]||(0<t?l[t-1]:null)||o.$.parentNode);for(i=n.length;0<=i;i--)a(n[i]);return o};t instanceof CKEDITOR.dom.element&&(o=t.getAscendant('table'),1==o.$.rows.length?o.remove():t.remove());return null};function r(e,t){for(var i=t?Infinity:0,r=0;r<e.length;r++){var n;n=e[r];for(var c=t,l=n.getParent().$.cells,o=0,a=0;a<l.length;a++){var s=l[a],o=o+(c?1:s.colSpan);if(s==n.$)break};n=o-1;if(t?n<i:n>i)i=n};return i};function s(t,n){for(var s=e(t),a=s[0].getAscendant('table'),o=r(s,1),s=r(s),o=n?o:s,l=CKEDITOR.tools.buildTableMap(a),a=[],s=[],c=l.length,i=0;i<c;i++)a.push(l[i][o]),s.push(n?l[i][o-1]:l[i][o+1]);for(i=0;i<c;i++)a[i]&&(1<a[i].colSpan&&s[i]==a[i]?(o=a[i],o.colSpan+=1):(o=(new CKEDITOR.dom.element(a[i])).clone(),o.removeAttribute('colSpan'),o.appendBogus(),o[n?'insertBefore':'insertAfter'].call(o,new CKEDITOR.dom.element(a[i])),o=o.$),i+=o.rowSpan-1)};function l(e,t){var n=e.getStartElement();if(n=n.getAscendant('td',1)||n.getAscendant('th',1)){var i=n.clone();i.appendBogus();t?i.insertBefore(n):i.insertAfter(n)}};function c(n){if(n instanceof CKEDITOR.dom.selection){n=e(n);var s=n[0]&&n[0].getAscendant('table'),o;a:{var l=0;o=n.length-1;for(var a={},r,i;r=n[l++];)CKEDITOR.dom.element.setMarker(a,r,'delete_cell',!0);for(l=0;r=n[l++];)if((i=r.getPrevious())&&!i.getCustomData('delete_cell')||(i=r.getNext())&&!i.getCustomData('delete_cell')){CKEDITOR.dom.element.clearAllMarkers(a);o=i;break a};CKEDITOR.dom.element.clearAllMarkers(a);i=n[0].getParent();(i=i.getPrevious())?o=i.getLast():(i=n[o].getParent(),o=(i=i.getNext())?i.getChild(0):null)};for(i=n.length-1;0<=i;i--)c(n[i]);o?t(o,!0):s&&s.remove()}
else n instanceof CKEDITOR.dom.element&&(s=n.getParent(),1==s.getChildCount()?s.remove():n.remove())};function t(e,t){var n=e.getDocument(),i=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(i.focus(),n.focus());n=new CKEDITOR.dom.range(n);n['moveToElementEdit'+(t?'End':'Start')](e)||(n.selectNodeContents(e),n.collapse(t?!1:!0));n.select(!0)};function n(e,t,n){e=e[t];if('undefined'==typeof n)return e;for(t=0;e&&t<e.length;t++){if(n.is&&e[t]==n.$)return t;if(t==n)return new CKEDITOR.dom.element(e[t])};return n.is?-1:null};function i(t,i,o){var l=e(t),c;if((i?1!=l.length:2>l.length)||(c=t.getCommonAncestor())&&c.type==CKEDITOR.NODE_ELEMENT&&c.is('table'))return!1;var r;t=l[0];c=t.getAscendant('table');var g=CKEDITOR.tools.buildTableMap(c),D=g.length,R=g[0].length,f=t.getParent().$.rowIndex,T=n(g,f,t);if(i){var s;try{var d=parseInt(t.getAttribute('rowspan'),10)||1;r=parseInt(t.getAttribute('colspan'),10)||1;s=g['up'==i?f-d:'down'==i?f+d:f]['left'==i?T-r:'right'==i?T+r:T]}catch(a){return!1};if(!s||t.$==s)return!1;l['up'==i||'left'==i?'unshift':'push'](new CKEDITOR.dom.element(s))};i=t.getDocument();var h=f,d=s=0,p=!o&&new CKEDITOR.dom.documentFragment(i),I=0;for(i=0;i<l.length;i++){r=l[i];var u=r.getParent(),C=r.getFirst(),m=r.$.colSpan,E=r.$.rowSpan,u=u.$.rowIndex,O=n(g,u,r),I=I+m*E,d=Math.max(d,O-T+m);s=Math.max(s,u-f+E);o||(m=r,(E=m.getBogus())&&E.remove(),m.trim(),r.getChildren().count()&&(u==h||!C||C.isBlockBoundary&&C.isBlockBoundary({br:1})||(h=p.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!h||h.is&&h.is('br')||p.append('br')),r.moveChildren(p)),i?r.remove():r.setHtml(''));h=u};if(o)return s*d==I;p.moveChildren(t);t.appendBogus();d>=R?t.removeAttribute('rowSpan'):t.$.rowSpan=s;s>=D?t.removeAttribute('colSpan'):t.$.colSpan=d;o=new CKEDITOR.dom.nodeList(c.$.rows);l=o.count();for(i=l-1;0<=i;i--)c=o.getItem(i),c.$.cells.length||(c.remove(),l++);return t};function d(t,i){var a=e(t);if(1<a.length)return!1;if(i)return!0;var a=a[0],o=a.getParent(),r=o.getAscendant('table'),d=CKEDITOR.tools.buildTableMap(r),l=o.$.rowIndex,u=n(d,l,a),c=a.$.rowSpan,h;if(1<c){h=Math.ceil(c/2);for(var c=Math.floor(c/2),o=l+h,r=new CKEDITOR.dom.element(r.$.rows[o]),d=n(d,o),s,o=a.clone(),l=0;l<d.length;l++)if(s=d[l],s.parentNode==r.$&&l>u){o.insertBefore(new CKEDITOR.dom.element(s));break}
else s=null;s||r.append(o)}
else for(c=h=1,r=o.clone(),r.insertAfter(o),r.append(o=a.clone()),s=n(d,l),u=0;u<s.length;u++)s[u].rowSpan++;o.appendBogus();a.$.rowSpan=h;o.$.rowSpan=c;1==h&&a.removeAttribute('rowSpan');1==c&&o.removeAttribute('rowSpan');return o};function u(t,i){var a=e(t);if(1<a.length)return!1;if(i)return!0;var a=a[0],s=a.getParent(),o=s.getAscendant('table'),o=CKEDITOR.tools.buildTableMap(o),u=n(o,s.$.rowIndex,a),r=a.$.colSpan;if(1<r)s=Math.ceil(r/2),r=Math.floor(r/2);else{for(var r=s=1,d=[],l=0;l<o.length;l++){var c=o[l];d.push(c[u]);1<c[u].rowSpan&&(l+=c[u].rowSpan-1)};for(o=0;o<d.length;o++)d[o].colSpan++};o=a.clone();o.insertAfter(a);o.appendBogus();a.$.colSpan=s;o.$.colSpan=r;1==s&&a.removeAttribute('colSpan');1==r&&o.removeAttribute('colSpan');return o};var h=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:'table,dialog,contextmenu',init:function(n){function h(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})};function f(e,t){var i=n.addCommand(e,t);n.addFeature(i)};var r=n.lang.table;f('cellProperties',new CKEDITOR.dialogCommand('cellProperties',h({allowedContent:'td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]',requiredContent:'table'})));CKEDITOR.dialog.add('cellProperties',this.path+'dialogs/tableCell.js');f('rowDelete',h({requiredContent:'table',exec:function(e){e=e.getSelection();t(a(e))}}));f('rowInsertBefore',h({requiredContent:'table',exec:function(e){e=e.getSelection();o(e,!0)}}));f('rowInsertAfter',h({requiredContent:'table',exec:function(e){e=e.getSelection();o(e)}}));f('columnDelete',h({requiredContent:'table',exec:function(n){n=n.getSelection();n=e(n);var c=n[0],a=n[n.length-1];n=c.getAscendant('table');for(var s=CKEDITOR.tools.buildTableMap(n),r,l,d=[],o=0,u=s.length;o<u;o++)for(var i=0,h=s[o].length;i<h;i++)s[o][i]==c.$&&(r=i),s[o][i]==a.$&&(l=i);for(o=r;o<=l;o++)for(i=0;i<s.length;i++)a=s[i],c=new CKEDITOR.dom.element(n.$.rows[i]),a=new CKEDITOR.dom.element(a[o]),a.$&&(1==a.$.colSpan?a.remove():--a.$.colSpan,i+=a.$.rowSpan-1,c.$.cells.length||d.push(c));l=n.$.rows[0]&&n.$.rows[0].cells;r=new CKEDITOR.dom.element(l[r]||(r?l[r-1]:n.$.parentNode));d.length==u&&n.remove();r&&t(r,!0)}}));f('columnInsertBefore',h({requiredContent:'table',exec:function(e){e=e.getSelection();s(e,!0)}}));f('columnInsertAfter',h({requiredContent:'table',exec:function(e){e=e.getSelection();s(e)}}));f('cellDelete',h({requiredContent:'table',exec:function(e){e=e.getSelection();c(e)}}));f('cellMerge',h({allowedContent:'td[colspan,rowspan]',requiredContent:'td[colspan,rowspan]',exec:function(e){t(i(e.getSelection()),!0)}}));f('cellMergeRight',h({allowedContent:'td[colspan]',requiredContent:'td[colspan]',exec:function(e){t(i(e.getSelection(),'right'),!0)}}));f('cellMergeDown',h({allowedContent:'td[rowspan]',requiredContent:'td[rowspan]',exec:function(e){t(i(e.getSelection(),'down'),!0)}}));f('cellVerticalSplit',h({allowedContent:'td[rowspan]',requiredContent:'td[rowspan]',exec:function(e){t(u(e.getSelection()))}}));f('cellHorizontalSplit',h({allowedContent:'td[colspan]',requiredContent:'td[colspan]',exec:function(e){t(d(e.getSelection()))}}));f('cellInsertBefore',h({requiredContent:'table',exec:function(e){e=e.getSelection();l(e,!0)}}));f('cellInsertAfter',h({requiredContent:'table',exec:function(e){e=e.getSelection();l(e)}}));n.addMenuItems&&n.addMenuItems({tablecell:{label:r.cell.menu,group:'tablecell',order:1,getItems:function(){var t=n.getSelection(),o=e(t);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:i(t,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:i(t,'right',!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:i(t,'down',!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:u(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:d(t,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<o.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:r.cell.insertBefore,group:'tablecell',command:'cellInsertBefore',order:5},tablecell_insertAfter:{label:r.cell.insertAfter,group:'tablecell',command:'cellInsertAfter',order:10},tablecell_delete:{label:r.cell.deleteCell,group:'tablecell',command:'cellDelete',order:15},tablecell_merge:{label:r.cell.merge,group:'tablecell',command:'cellMerge',order:16},tablecell_merge_right:{label:r.cell.mergeRight,group:'tablecell',command:'cellMergeRight',order:17},tablecell_merge_down:{label:r.cell.mergeDown,group:'tablecell',command:'cellMergeDown',order:18},tablecell_split_horizontal:{label:r.cell.splitHorizontal,group:'tablecell',command:'cellHorizontalSplit',order:19},tablecell_split_vertical:{label:r.cell.splitVertical,group:'tablecell',command:'cellVerticalSplit',order:20},tablecell_properties:{label:r.cell.title,group:'tablecellproperties',command:'cellProperties',order:21},tablerow:{label:r.row.menu,group:'tablerow',order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:r.row.insertBefore,group:'tablerow',command:'rowInsertBefore',order:5},tablerow_insertAfter:{label:r.row.insertAfter,group:'tablerow',command:'rowInsertAfter',order:10},tablerow_delete:{label:r.row.deleteRow,group:'tablerow',command:'rowDelete',order:15},tablecolumn:{label:r.column.menu,group:'tablecolumn',order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:r.column.insertBefore,group:'tablecolumn',command:'columnInsertBefore',order:5},tablecolumn_insertAfter:{label:r.column.insertAfter,group:'tablecolumn',command:'columnInsertAfter',order:10},tablecolumn_delete:{label:r.column.deleteColumn,group:'tablecolumn',command:'columnDelete',order:15}});n.contextMenu&&n.contextMenu.addListener(function(e,t,n){return(e=n.contains({td:1,th:1},1))&&!e.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:e};CKEDITOR.plugins.add('tabletools',CKEDITOR.plugins.tabletools)})();CKEDITOR.tools.buildTableMap=function(e){e=e.$.rows;for(var t=-1,n=[],r=0;r<e.length;r++){t++;!n[t]&&(n[t]=[]);for(var a=-1,s=0;s<e[r].cells.length;s++){var i=e[r].cells[s];for(a++;n[t][a];)a++;for(var c=isNaN(i.colSpan)?1:i.colSpan,i=isNaN(i.rowSpan)?1:i.rowSpan,o=0;o<i;o++){n[t+o]||(n[t+o]=[]);for(var l=0;l<c;l++)n[t+o][a+l]=e[r].cells[s]};a+=c-1}};return n};(function(){var n=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],r={8:1,46:1};CKEDITOR.plugins.add('undo',{init:function(t){function r(e){i.enabled&&!1!==e.data.command.canUndo&&i.save()};function s(){i.enabled=t.readOnly?!1:'wysiwyg'==t.mode;i.onChange()};var i=t.undoManager=new e(t),a=i.editingHandler=new o(i),l=t.addCommand('undo',{exec:function(){i.undo()&&(t.selectionChange(),this.fire('afterUndo'))},startDisabled:!0,canUndo:!1}),c=t.addCommand('redo',{exec:function(){i.redo()&&(t.selectionChange(),this.fire('afterRedo'))},startDisabled:!0,canUndo:!1});t.setKeystroke([[n[0],'undo'],[n[1],'redo'],[n[2],'redo']]);i.onChange=function(){l.setState(i.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);c.setState(i.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};t.on('beforeCommandExec',r);t.on('afterCommandExec',r);t.on('saveSnapshot',function(e){i.save(e.data&&e.data.contentOnly)});t.on('contentDom',a.attachListeners,a);t.on('instanceReady',function(){t.fire('saveSnapshot')});t.on('beforeModeUnload',function(){'wysiwyg'==t.mode&&i.save(!0)});t.on('mode',s);t.on('readOnly',s);t.ui.addButton&&(t.ui.addButton('Undo',{label:t.lang.undo.undo,command:'undo',toolbar:'undo,10'}),t.ui.addButton('Redo',{label:t.lang.undo.redo,command:'redo',toolbar:'undo,20'}));t.resetUndo=function(){i.reset();t.fire('saveSnapshot')};t.on('updateSnapshot',function(){i.currentImage&&i.update()});t.on('lockSnapshot',function(e){e=e.data;i.lock(e&&e.dontUpdate,e&&e.forceUpdate)});t.on('unlockSnapshot',i.unlock,i)}});CKEDITOR.plugins.undo={};var e=CKEDITOR.plugins.undo.UndoManager=function(e){this.strokesRecorded=[0,0];this.locked=null;this.previousKeyGroup=-1;this.limit=e.config.undoStackSize||20;this.strokesLimit=25;this.editor=e;this.reset()};e.prototype={type:function(t,n){var i=e.getKeyGroup(t),o=this.strokesRecorded[i]+1;n=n||o>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange());n?(o=0,this.editor.fire('saveSnapshot')):this.editor.fire('change');this.strokesRecorded[i]=o;this.previousKeyGroup=i},keyGroupChanged:function(t){return e.getKeyGroup(t)!=this.previousKeyGroup},reset:function(){this.snapshots=[];this.index=-1;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType()},resetType:function(){this.strokesRecorded=[0,0];this.typing=!1;this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(e,n,i){var a=this.editor;if(this.locked||'ready'!=a.status||'wysiwyg'!=a.mode)return!1;var o=a.editable();if(!o||'ready'!=o.status)return!1;o=this.snapshots;n||(n=new t(a));if(!1===n.contents)return!1;if(this.currentImage)if(n.equalsContent(this.currentImage)){if(e||n.equalsSelection(this.currentImage))return!1}
else!1!==i&&a.fire('change');o.splice(this.index+1,o.length-this.index-1);o.length==this.limit&&o.shift();this.index=o.push(n)-1;this.currentImage=n;!1!==i&&this.refreshState();return!0},restoreImage:function(e){var n=this.editor,t;e.bookmarks&&(n.focus(),t=n.getSelection());this.locked={level:999};this.editor.loadSnapshot(e.contents);e.bookmarks?t.selectBookmarks(e.bookmarks):CKEDITOR.env.ie&&(t=this.editor.document.getBody().$.createTextRange(),t.collapse(!0),t.select());this.locked=null;this.index=e.index;this.currentImage=this.snapshots[this.index];this.update();this.refreshState();n.fire('change')},getNextImage:function(e){var n=this.snapshots,i=this.currentImage,t;if(i)if(e)for(t=this.index-1;0<=t;t--){if(e=n[t],!i.equalsContent(e))return e.index=t,e}
else for(t=this.index+1;t<n.length;t++)if(e=n[t],!i.equalsContent(e))return e.index=t,e;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var e=this.getNextImage(!0);if(e)return this.restoreImage(e),!0};return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var e=this.getNextImage(!1);if(e)return this.restoreImage(e),!0};return!1},update:function(e){if(!this.locked){e||(e=new t(this.editor));for(var n=this.index,i=this.snapshots;0<n&&this.currentImage.equalsContent(i[n-1]);)--n;i.splice(n,this.index-n+1,e);this.index=n;this.currentImage=e}},updateSelection:function(e){if(!this.snapshots.length)return!1;var t=this.snapshots,n=t[t.length-1];return n.equalsContent(e)&&!n.equalsSelection(e)?(this.currentImage=t[t.length-1]=e,!0):!1},lock:function(e,n){if(this.locked)this.locked.level++;else if(e)this.locked={level:1};else{var i=null;if(n)i=!0;else{var o=new t(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(o)&&(i=o)};this.locked={update:i,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var e=this.locked.update;this.locked=null;if(!0===e)this.update();else if(e){var n=new t(this.editor,!0);e.equalsContent(n)||this.update()}}}};e.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1};e.keyGroups={PRINTABLE:0,FUNCTIONAL:1};e.isNavigationKey=function(t){return!!e.navigationKeyCodes[t]};e.getKeyGroup=function(t){var n=e.keyGroups;return r[t]?n.FUNCTIONAL:n.PRINTABLE};e.getOppositeKeyGroup=function(t){var n=e.keyGroups;return t==n.FUNCTIONAL?n.PRINTABLE:n.FUNCTIONAL};e.ieFunctionalKeysBug=function(t){return CKEDITOR.env.ie&&e.getKeyGroup(t)==e.keyGroups.FUNCTIONAL};var t=CKEDITOR.plugins.undo.Image=function(e,t){this.editor=e;e.fire('beforeUndoImage');var n=e.getSnapshot();CKEDITOR.env.ie&&n&&(n=n.replace(/\s+data-cke-expando=".*?"/g,''));this.contents=n;t||(this.bookmarks=(n=n&&e.getSelection())&&n.createBookmarks2(!0));e.fire('afterUndoImage')},a=/\b(?:href|src|name)="[^"]*?"/gi;t.prototype={equalsContent:function(e){var t=this.contents;e=e.contents;CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(t=t.replace(a,''),e=e.replace(a,''));return t!=e?!1:!0},equalsSelection:function(e){var t=this.bookmarks;e=e.bookmarks;if(t||e){if(!t||!e||t.length!=e.length)return!1;for(var o=0;o<t.length;o++){var n=t[o],i=e[o];if(n.startOffset!=i.startOffset||n.endOffset!=i.endOffset||!CKEDITOR.tools.arrayCompare(n.start,i.start)||!CKEDITOR.tools.arrayCompare(n.end,i.end))return!1}};return!0}};var o=CKEDITOR.plugins.undo.NativeEditingHandler=function(e){this.undoManager=e;this.ignoreInputEvent=!1;this.keyEventsStack=new i;this.lastKeydownImage=null};o.prototype={onKeydown:function(i){var o=i.data.getKey();if(229!==o)if(-1<CKEDITOR.tools.indexOf(n,i.data.getKeystroke()))i.data.preventDefault();else if(this.keyEventsStack.cleanUp(i),i=this.undoManager,this.keyEventsStack.getLast(o)||this.keyEventsStack.push(o),this.lastKeydownImage=new t(i.editor),e.isNavigationKey(o)||this.undoManager.keyGroupChanged(o))if(i.strokesRecorded[0]||i.strokesRecorded[1])i.save(!1,this.lastKeydownImage,!1),i.resetType()},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var e=this.keyEventsStack.getLast();e||(e=this.keyEventsStack.push(0));this.keyEventsStack.increment(e.keyCode);this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(e.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(n){var i=this.undoManager;n=n.data.getKey();var o=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(n);if(!(e.ieFunctionalKeysBug(n)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new t(i.editor,!0))))if(0<o)i.type(n);else if(e.isNavigationKey(n))this.onNavigationKey(!0)},onNavigationKey:function(e){var n=this.undoManager;!e&&n.save(!0,null,!1)||n.updateSelection(new t(n.editor));n.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var i=this.undoManager.editor,t=i.editable(),n=this;t.attachListener(t,'keydown',function(t){n.onKeydown(t);if(e.ieFunctionalKeysBug(t.data.getKey()))n.onInput()},null,null,999);t.attachListener(t,CKEDITOR.env.ie?'keypress':'input',n.onInput,n,null,999);t.attachListener(t,'keyup',n.onKeyup,n,null,999);t.attachListener(t,'paste',n.ignoreInputEventListener,n,null,999);t.attachListener(t,'drop',n.ignoreInputEventListener,n,null,999);t.attachListener(t.isInline()?t:i.document.getDocumentElement(),'click',function(){n.onNavigationKey()},null,null,999);t.attachListener(this.undoManager.editor,'blur',function(){n.keyEventsStack.remove(9)},null,null,999)}};var i=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};i.prototype={push:function(e){e=this.stack.push({keyCode:e,inputs:0});return this.stack[e-1]},getLastIndex:function(e){if('number'!=typeof e)return this.stack.length-1;for(var t=this.stack.length;t--;)if(this.stack[t].keyCode==e)return t;return-1},getLast:function(e){e=this.getLastIndex(e);return-1!=e?this.stack[e]:null},increment:function(e){this.getLast(e).inputs++},remove:function(e){e=this.getLastIndex(e);-1!=e&&this.stack.splice(e,1)},resetInputs:function(e){if('number'==typeof e)this.getLast(e).inputs=0;else for(e=this.stack.length;e--;)this.stack[e].inputs=0},getTotalInputs:function(){for(var e=this.stack.length,t=0;e--;)t+=this.stack[e].inputs;return t},cleanUp:function(e){e=e.data.$;e.ctrlKey||e.metaKey||this.remove(17);e.shiftKey||this.remove(16);e.altKey||this.remove(18)}}})();CKEDITOR.plugins.add('wsc',{requires:'dialog',parseApi:function(e){e.config.wsc_onFinish='function'===typeof e.config.wsc_onFinish?e.config.wsc_onFinish:function(){};e.config.wsc_onClose='function'===typeof e.config.wsc_onClose?e.config.wsc_onClose:function(){}},parseConfig:function(e){e.config.wsc_customerId=e.config.wsc_customerId||CKEDITOR.config.wsc_customerId||'1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk';e.config.wsc_customDictionaryIds=e.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||'';e.config.wsc_userDictionaryName=e.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||'';e.config.wsc_customLoaderScript=e.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript;CKEDITOR.config.wsc_cmd=e.config.wsc_cmd||CKEDITOR.config.wsc_cmd||'spell';CKEDITOR.config.wsc_version='v4.3.0-master-d769233';CKEDITOR.config.wsc_removeGlobalVariable=!0},init:function(e){var t=CKEDITOR.env;this.parseConfig(e);this.parseApi(e);e.addCommand('checkspell',new CKEDITOR.dialogCommand('checkspell')).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&!(t.ie&&(8>t.version||t.quirks))};'undefined'==typeof e.plugins.scayt&&e.ui.addButton&&e.ui.addButton('SpellChecker',{label:e.lang.wsc.toolbar,click:function(e){var t=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(t=t.replace(/\s/g,''))?e.execCommand('checkspell'):alert('Nothing to check!')},toolbar:'spellchecker,10'});CKEDITOR.dialog.add('checkspell',this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?'dialogs/wsc_ie.js':window.postMessage?'dialogs/wsc.js':'dialogs/wsc_ie.js'))}});CKEDITOR.config.plugins='dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,div,resize,toolbar,elementspath,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,undo,wsc';CKEDITOR.config.skin='moono';(function(){var e=function(e,t){var i=CKEDITOR.getUrl('plugins/'+t);e=e.split(',');for(var n=0;n<e.length;n++)CKEDITOR.skin.icons[e[n]]={path:i,offset:-e[++n],bgsize:e[++n]}};if(CKEDITOR.env.hidpi)e('about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,creatediv,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,smiley,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastetext-rtl,1512,,pastetext,1536,,pastefromword-rtl,1560,,pastefromword,1584,,preview-rtl,1608,,preview,1632,,print,1656,,removeformat,1680,,save,1704,,selectall,1728,,showblocks-rtl,1752,,showblocks,1776,,source-rtl,1800,,source,1824,,specialchar,1848,,scayt,1872,,table,1896,,redo-rtl,1920,,redo,1944,,undo-rtl,1968,,undo,1992,,spellchecker,2016,','icons_hidpi.png');else e('about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,creatediv,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,smiley,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastetext-rtl,1512,auto,pastetext,1536,auto,pastefromword-rtl,1560,auto,pastefromword,1584,auto,preview-rtl,1608,auto,preview,1632,auto,print,1656,auto,removeformat,1680,auto,save,1704,auto,selectall,1728,auto,showblocks-rtl,1752,auto,showblocks,1776,auto,source-rtl,1800,auto,source,1824,auto,specialchar,1848,auto,scayt,1872,auto,table,1896,auto,redo-rtl,1920,auto,redo,1944,auto,undo-rtl,1968,auto,undo,1992,auto,spellchecker,2016,auto','icons.png')})();CKEDITOR.lang.languages={'af':1,'sq':1,'ar':1,'eu':1,'bn':1,'bs':1,'bg':1,'ca':1,'zh-cn':1,'zh':1,'hr':1,'cs':1,'da':1,'nl':1,'en':1,'en-au':1,'en-ca':1,'en-gb':1,'eo':1,'et':1,'fo':1,'fi':1,'fr':1,'fr-ca':1,'gl':1,'ka':1,'de':1,'de-ch':1,'el':1,'gu':1,'he':1,'hi':1,'hu':1,'is':1,'id':1,'it':1,'ja':1,'km':1,'ko':1,'ku':1,'lv':1,'lt':1,'mk':1,'ms':1,'mn':1,'no':1,'nb':1,'fa':1,'pl':1,'pt-br':1,'pt':1,'ro':1,'ru':1,'sr':1,'sr-latn':1,'si':1,'sk':1,'sl':1,'es':1,'sv':1,'tt':1,'th':1,'tr':1,'ug':1,'uk':1,'vi':1,'cy':1}}());